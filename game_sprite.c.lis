1     0000              MODULE game_sprite_c
2     0000              LINE -1, "game_sprite.c"
-1    0000              
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.5 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _spr_calc_index
204   0000              	GLOBAL _spr_chktime
205   0000              	GLOBAL _spr_set_up
206   0000              	GLOBAL _spr_set_down
207   0000              	GLOBAL _spr_set_left
208   0000              	GLOBAL _spr_set_right
209   0000              	GLOBAL _spr_move_up
210   0000              	GLOBAL _spr_move_down
211   0000              	GLOBAL _spr_move_horizontal
212   0000              	GLOBAL _spr_move_right
213   0000              	GLOBAL _spr_move_left
214   0000              	GLOBAL _spr_clear_scr
215   0000              	GLOBAL _spr_page_map
216   0000              	GLOBAL _spr_paint_player
217   0000              	GLOBAL _spr_paint
218   0000              	GLOBAL _spr_destroy
219   0000              	GLOBAL _spr_tile
220   0000              	GLOBAL _spr_tile_dir
221   0000              	GLOBAL _spr_back_repaint
222   0000              	GLOBAL _spr_init_effects
223   0000              	GLOBAL _spr_add_anim
224   0000              	GLOBAL _spr_play_anim
225   0000              	GLOBAL _spr_colision_boss
226   0000              	GLOBAL _spr_turn_horizontal
227   0000              	GLOBAL _spr_btile_paint_back
228   0000              	GLOBAL _spr_flatten
229   0000              	GLOBAL _spr_unflattenP1
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printC_callee
370   0000              	GLOBAL _NIRVANAP_printC
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _zx_print_str
382   0000              	GLOBAL _zx_print_int
383   0000              	GLOBAL _zx_print_chr
384   0000              	GLOBAL _zx_print_bonus_time
385   0000              	GLOBAL _zx_isr
386   0000              	GLOBAL _z80_otdr_callee
387   0000              	GLOBAL _z80_otdr
388   0000              	GLOBAL _z80_otir_callee
389   0000              	GLOBAL _z80_otir
390   0000              	GLOBAL _z80_outp_callee
391   0000              	GLOBAL _z80_outp
392   0000              	GLOBAL _z80_indr_callee
393   0000              	GLOBAL _z80_indr
394   0000              	GLOBAL _z80_inir_callee
395   0000              	GLOBAL _z80_inir
396   0000              	GLOBAL _z80_inp_fastcall
397   0000              	GLOBAL _z80_inp
398   0000              	GLOBAL _z80_set_int_state_fastcall
399   0000              	GLOBAL _z80_set_int_state
400   0000              	GLOBAL _z80_get_int_state
401   0000              	GLOBAL _z80_delay_tstate_fastcall
402   0000              	GLOBAL _z80_delay_tstate
403   0000              	GLOBAL _z80_delay_ms_fastcall
404   0000              	GLOBAL _z80_delay_ms
405   0000              	GLOBAL _im2_remove_generic_callback_callee
406   0000              	GLOBAL _im2_remove_generic_callback
407   0000              	GLOBAL _im2_prepend_generic_callback_callee
408   0000              	GLOBAL _im2_prepend_generic_callback
409   0000              	GLOBAL _im2_append_generic_callback_callee
410   0000              	GLOBAL _im2_append_generic_callback
411   0000              	GLOBAL _im2_create_generic_isr_8080_callee
412   0000              	GLOBAL _im2_create_generic_isr_8080
413   0000              	GLOBAL _im2_create_generic_isr_callee
414   0000              	GLOBAL _im2_create_generic_isr
415   0000              	GLOBAL _im2_install_isr_callee
416   0000              	GLOBAL _im2_install_isr
417   0000              	GLOBAL _im2_init_fastcall
418   0000              	GLOBAL _im2_init
419   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
420   0000              	GLOBAL _intrinsic_swap_word_32
421   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
422   0000              	GLOBAL _intrinsic_swap_endian_32
423   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
424   0000              	GLOBAL _intrinsic_swap_endian_16
425   0000              	GLOBAL _intrinsic_return_de
426   0000              	GLOBAL _intrinsic_return_bc
427   0000              	GLOBAL _intrinsic_exx
428   0000              	GLOBAL _intrinsic_ex_de_hl
429   0000              	GLOBAL _intrinsic_nop
430   0000              	GLOBAL _intrinsic_im_2
431   0000              	GLOBAL _intrinsic_im_1
432   0000              	GLOBAL _intrinsic_im_0
433   0000              	GLOBAL _intrinsic_retn
434   0000              	GLOBAL _intrinsic_reti
435   0000              	GLOBAL _intrinsic_halt
436   0000              	GLOBAL _intrinsic_ei
437   0000              	GLOBAL _intrinsic_di
438   0000              	GLOBAL _intrinsic_stub
439   0000              	GLOBAL _intrinsic_outi
440   0000              	GLOBAL _intrinsic_ldi
441   0000              	GLOBAL _zx_pattern_fill_callee
442   0000              	GLOBAL _zx_pattern_fill
443   0000              	GLOBAL _zx_saddrpup_fastcall
444   0000              	GLOBAL _zx_saddrpup
445   0000              	GLOBAL _zx_saddrpright_callee
446   0000              	GLOBAL _zx_saddrpright
447   0000              	GLOBAL _zx_saddrpleft_callee
448   0000              	GLOBAL _zx_saddrpleft
449   0000              	GLOBAL _zx_saddrpdown_fastcall
450   0000              	GLOBAL _zx_saddrpdown
451   0000              	GLOBAL _zx_saddrcup_fastcall
452   0000              	GLOBAL _zx_saddrcup
453   0000              	GLOBAL _zx_saddrcright_fastcall
454   0000              	GLOBAL _zx_saddrcright
455   0000              	GLOBAL _zx_saddrcleft_fastcall
456   0000              	GLOBAL _zx_saddrcleft
457   0000              	GLOBAL _zx_saddrcdown_fastcall
458   0000              	GLOBAL _zx_saddrcdown
459   0000              	GLOBAL _zx_saddr2py_fastcall
460   0000              	GLOBAL _zx_saddr2py
461   0000              	GLOBAL _zx_saddr2px_fastcall
462   0000              	GLOBAL _zx_saddr2px
463   0000              	GLOBAL _zx_saddr2cy_fastcall
464   0000              	GLOBAL _zx_saddr2cy
465   0000              	GLOBAL _zx_saddr2cx_fastcall
466   0000              	GLOBAL _zx_saddr2cx
467   0000              	GLOBAL _zx_saddr2aaddr_fastcall
468   0000              	GLOBAL _zx_saddr2aaddr
469   0000              	GLOBAL _zx_py2saddr_fastcall
470   0000              	GLOBAL _zx_py2saddr
471   0000              	GLOBAL _zx_py2aaddr_fastcall
472   0000              	GLOBAL _zx_py2aaddr
473   0000              	GLOBAL _zx_pxy2saddr_callee
474   0000              	GLOBAL _zx_pxy2saddr
475   0000              	GLOBAL _zx_pxy2aaddr_callee
476   0000              	GLOBAL _zx_pxy2aaddr
477   0000              	GLOBAL _zx_px2bitmask_fastcall
478   0000              	GLOBAL _zx_px2bitmask
479   0000              	GLOBAL _zx_cy2saddr_fastcall
480   0000              	GLOBAL _zx_cy2saddr
481   0000              	GLOBAL _zx_cy2aaddr_fastcall
482   0000              	GLOBAL _zx_cy2aaddr
483   0000              	GLOBAL _zx_cxy2saddr_callee
484   0000              	GLOBAL _zx_cxy2saddr
485   0000              	GLOBAL _zx_cxy2aaddr_callee
486   0000              	GLOBAL _zx_cxy2aaddr
487   0000              	GLOBAL _zx_bitmask2px_fastcall
488   0000              	GLOBAL _zx_bitmask2px
489   0000              	GLOBAL _zx_aaddrcup_fastcall
490   0000              	GLOBAL _zx_aaddrcup
491   0000              	GLOBAL _zx_aaddrcright_fastcall
492   0000              	GLOBAL _zx_aaddrcright
493   0000              	GLOBAL _zx_aaddrcleft_fastcall
494   0000              	GLOBAL _zx_aaddrcleft
495   0000              	GLOBAL _zx_aaddrcdown_fastcall
496   0000              	GLOBAL _zx_aaddrcdown
497   0000              	GLOBAL _zx_aaddr2saddr_fastcall
498   0000              	GLOBAL _zx_aaddr2saddr
499   0000              	GLOBAL _zx_aaddr2py_fastcall
500   0000              	GLOBAL _zx_aaddr2py
501   0000              	GLOBAL _zx_aaddr2px_fastcall
502   0000              	GLOBAL _zx_aaddr2px
503   0000              	GLOBAL _zx_aaddr2cy_fastcall
504   0000              	GLOBAL _zx_aaddr2cy
505   0000              	GLOBAL _zx_aaddr2cx_fastcall
506   0000              	GLOBAL _zx_aaddr2cx
507   0000              	GLOBAL _zx_visit_wc_pix_callee
508   0000              	GLOBAL _zx_visit_wc_pix
509   0000              	GLOBAL _zx_visit_wc_attr_callee
510   0000              	GLOBAL _zx_visit_wc_attr
511   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
512   0000              	GLOBAL _zx_scroll_wc_up_pix
513   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
514   0000              	GLOBAL _zx_scroll_wc_up_attr
515   0000              	GLOBAL _zx_scroll_wc_up_callee
516   0000              	GLOBAL _zx_scroll_wc_up
517   0000              	GLOBAL _zx_scroll_up_pix_callee
518   0000              	GLOBAL _zx_scroll_up_pix
519   0000              	GLOBAL _zx_scroll_up_attr_callee
520   0000              	GLOBAL _zx_scroll_up_attr
521   0000              	GLOBAL _zx_scroll_up_callee
522   0000              	GLOBAL _zx_scroll_up
523   0000              	GLOBAL _zx_cls_wc_pix_callee
524   0000              	GLOBAL _zx_cls_wc_pix
525   0000              	GLOBAL _zx_cls_wc_attr_callee
526   0000              	GLOBAL _zx_cls_wc_attr
527   0000              	GLOBAL _zx_cls_wc_callee
528   0000              	GLOBAL _zx_cls_wc
529   0000              	GLOBAL _zx_cls_pix_fastcall
530   0000              	GLOBAL _zx_cls_pix
531   0000              	GLOBAL _zx_cls_attr_fastcall
532   0000              	GLOBAL _zx_cls_attr
533   0000              	GLOBAL _zx_cls_fastcall
534   0000              	GLOBAL _zx_cls
535   0000              	GLOBAL _zx_border_fastcall
536   0000              	GLOBAL _zx_border
537   0000              	GLOBAL _zx_tape_verify_block_callee
538   0000              	GLOBAL _zx_tape_verify_block
539   0000              	GLOBAL _zx_tape_save_block_callee
540   0000              	GLOBAL _zx_tape_save_block
541   0000              	GLOBAL _zx_tape_load_block_callee
542   0000              	GLOBAL _zx_tape_load_block
543   0000              	GLOBAL _player_gasta_brick
544   0000              	GLOBAL _player_lost_life
545   0000              	GLOBAL _player_damage
546   0000              	GLOBAL _player_move_jump
547   0000              	GLOBAL _player_tile
548   0000              	GLOBAL _player_pick_item
549   0000              	GLOBAL _player_check_ceil
550   0000              	GLOBAL _player_check_floor
551   0000              	GLOBAL _player_score_add
552   0000              	GLOBAL _player_move_input
553   0000              	GLOBAL _player_new_jump
554   0000              	GLOBAL _player_turn
555   0000              	GLOBAL _player_move
556   0000              	GLOBAL _player_action_jump
557   0000              	GLOBAL _player_check_input
558   0000              	GLOBAL _player_init
559   0000              	GLOBAL _game_attribs
560   0000              	GLOBAL _game_boss_clear
561   0000              	GLOBAL _game_add_enemy
562   0000              	GLOBAL _game_print_header
563   0000              	GLOBAL _game_check_time
564   0000              	GLOBAL _game_rotate_attrib_osd
565   0000              	GLOBAL _game_rotate_attrib
566   0000              	GLOBAL _game_colour_message
567   0000              	GLOBAL _game_paint_attrib
568   0000              	GLOBAL _game_print_score
569   0000              	GLOBAL _game_cell_paint
570   0000              	GLOBAL _game_check_cell
571   0000              	GLOBAL _game_check_map
572   0000              	GLOBAL _game_loop
573   0000              	GLOBAL _game_round_init
574   0000              	GLOBAL _game_set_checkpoint
575   0000              	GLOBAL _game_start_timer
576   0000              	GLOBAL _game_update_stats
577   0000              	GLOBAL _game_print_footer
578   0000              	GLOBAL _game_fill_row
579   0000              	GLOBAL _game_cls
580   0000              	GLOBAL _game_fps
581   0000              	GLOBAL _game_draw_screen
582   0000              	GLOBAL _boss_draw_frame
583   0000              	GLOBAL _boss_draw
584   0000              	GLOBAL _boss_turn
585   0000              	GLOBAL _enemy_avoid_dead
586   0000              	GLOBAL _enemy_avoid_fall
587   0000              	GLOBAL _enemy_kill
588   0000              	GLOBAL _enemy_init
589   0000              	GLOBAL _enemy_move
590   0000              	GLOBAL _enemy_turn
591   0000              	GLOBAL _enemy_static
592   0000              	GLOBAL _enemy_walk
593   0000              	GLOBAL _enemy_horizontal
594   0000              	GLOBAL _enemy_vertical
595   0000              	GLOBAL _ay_reset
596   0000              	GLOBAL _ay_song_stop
597   0000              	GLOBAL _ay_song_play
598   0000              	GLOBAL _ay_fx_stop
599   0000              	GLOBAL _ay_fx_play
600   0000              	GLOBAL _ay_is_playing
601   0000              	GLOBAL _audio_levelup
602   0000              	GLOBAL _audio_checkpoint
603   0000              	GLOBAL _audio_menu
604   0000              	GLOBAL _audio_game_end
605   0000              	GLOBAL _audio_level_complete
606   0000              	GLOBAL _audio_level_start
607   0000              	GLOBAL _audio_lotr_lose_a_life
608   0000              	GLOBAL _audio_puerta
609   0000              	GLOBAL _audio_sin_mana
610   0000              	GLOBAL _audio_magic1
611   0000              	GLOBAL _audio_coin
612   0000              	GLOBAL _audio_golpe
613   0000              	GLOBAL _audio_salto
614   0000              	GLOBAL _audio_efecto
615   0000              	GLOBAL _audio_disparo_fire
616   0000              	GLOBAL _audio_disparo_axe
617   0000              	GLOBAL _audio_disparo2
618   0000              	GLOBAL _audio_disparo1
619   0000              	GLOBAL _audio_explosion1
620   0000              	GLOBAL _audio_explosion
621   0000              	GLOBAL _audio_ingame
622   0000              	GLOBAL _test_func
623   0000              	GLOBAL _test_proc
624   0000              	GLOBAL _in_mouse_kempston_wheel_delta
625   0000              	GLOBAL _in_mouse_kempston_wheel
626   0000              	GLOBAL _in_mouse_kempston_callee
627   0000              	GLOBAL _in_mouse_kempston
628   0000              	GLOBAL _in_mouse_kempston_setpos_callee
629   0000              	GLOBAL _in_mouse_kempston_setpos
630   0000              	GLOBAL _in_mouse_kempston_reset
631   0000              	GLOBAL _in_mouse_kempston_init
632   0000              	GLOBAL _in_mouse_amx_wheel_delta
633   0000              	GLOBAL _in_mouse_amx_wheel
634   0000              	GLOBAL _in_mouse_amx_callee
635   0000              	GLOBAL _in_mouse_amx
636   0000              	GLOBAL _in_mouse_amx_setpos_callee
637   0000              	GLOBAL _in_mouse_amx_setpos
638   0000              	GLOBAL _in_mouse_amx_reset
639   0000              	GLOBAL _in_mouse_amx_init_callee
640   0000              	GLOBAL _in_mouse_amx_init
641   0000              	GLOBAL _in_stick_sinclair2
642   0000              	GLOBAL _in_stick_sinclair1
643   0000              	GLOBAL _in_stick_kempston
644   0000              	GLOBAL _in_stick_fuller
645   0000              	GLOBAL _in_stick_cursor
646   0000              	GLOBAL _in_stick_keyboard_fastcall
647   0000              	GLOBAL _in_stick_keyboard
648   0000              	GLOBAL _in_wait_nokey
649   0000              	GLOBAL _in_wait_key
650   0000              	GLOBAL _in_test_key
651   0000              	GLOBAL _in_pause_fastcall
652   0000              	GLOBAL _in_pause
653   0000              	GLOBAL _in_key_scancode_fastcall
654   0000              	GLOBAL _in_key_scancode
655   0000              	GLOBAL _in_key_pressed_fastcall
656   0000              	GLOBAL _in_key_pressed
657   0000              	GLOBAL _in_inkey
658   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
659   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
660   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
661   0000              	GLOBAL _NIRVANAP_HOLE
662   0000              	GLOBAL _NIRVANAP_ISR_HOOK
663   0000              	GLOBAL _scan_map
664   0000              	GLOBAL _key_map
665   0000              	GLOBAL _stp_row
666   0000              	GLOBAL _stp_col
667   0000              	GLOBAL _stp_tile
668   0000              	GLOBAL _map_paper_last_a
669   0000              	GLOBAL _map_paper_last
670   0000              	GLOBAL _map_paper_clr
671   0000              	GLOBAL _map_paper
672   0000              	GLOBAL _boss_stat
673   0000              	GLOBAL _boss_time_fire
674   0000              	GLOBAL _boss_time
675   0000              	GLOBAL _boss_tile
676   0000              	GLOBAL _boss_inc
677   0000              	GLOBAL _boss_col
678   0000              	GLOBAL _boss_lin
679   0000              	GLOBAL _anim_count
680   0000              	GLOBAL _anim_respanwn
681   0000              	GLOBAL _anim_loop
682   0000              	GLOBAL _anim_end
683   0000              	GLOBAL _anim_int
684   0000              	GLOBAL _anim_tile
685   0000              	GLOBAL _anim_col
686   0000              	GLOBAL _anim_lin
687   0000              	GLOBAL _map_heigth
688   0000              	GLOBAL _map_width
689   0000              	GLOBAL _scr_curr
690   0000              	GLOBAL _sprite_kind
691   0000              	GLOBAL _scr_map
692   0000              	GLOBAL _spr_init
693   0000              	GLOBAL _spr_map_tile
694   0000              	GLOBAL _sprite_frames
695   0000              	GLOBAL _sprite_base_speed
696   0000              	GLOBAL _sprite_speed
697   0000              	GLOBAL _screen_ink
698   0000              	GLOBAL _screen_paper
699   0000              	GLOBAL _game_start_scr
700   0000              	GLOBAL _game_score_top
701   0000              	GLOBAL _player_coins
702   0000              	GLOBAL _player_lives
703   0000              	GLOBAL _game_over
704   0000              	GLOBAL _game_sound
705   0000              	GLOBAL _game_inf_lives
706   0000              	GLOBAL _game_inmune
707   0000              	GLOBAL _sprite_curr_index
708   0000              	GLOBAL _spr_count
709   0000              	GLOBAL _anim_time
710   0000              	GLOBAL _frame_time
711   0000              	GLOBAL _curr_time
712   0000              	GLOBAL _s_state
713   0000              	GLOBAL _attrib7
714   0000              	GLOBAL _attrib6
715   0000              	GLOBAL _attrib5
716   0000              	GLOBAL _attrib4
717   0000              	GLOBAL _attrib3
718   0000              	GLOBAL _attrib2
719   0000              	GLOBAL _attrib1
720   0000              	GLOBAL _attrib0
721   0000              	GLOBAL _attrib_osd
722   0000              	GLOBAL _attrib_hl
723   0000              	GLOBAL _attrib
724   0000              	GLOBAL _zx_val_asm
725   0000              	GLOBAL _enemies
726   0000              	GLOBAL _tmp_ui
727   0000              	GLOBAL _tmp_sc
728   0000              	GLOBAL _tmp_uc
729   0000              	GLOBAL _tmp1
730   0000              	GLOBAL _tmp0
731   0000              	GLOBAL _tmp
732   0000              	GLOBAL _index1
733   0000              	GLOBAL _index0
734   0000              	GLOBAL _loop_count
735   0000              	GLOBAL _s_class
736   0000              	GLOBAL _s_row1
737   0000              	GLOBAL _s_col1
738   0000              	GLOBAL _s_col0
739   0000              	GLOBAL _s_lin1
740   0000              	GLOBAL _s_lin0
741   0000              	GLOBAL _s_tile1
742   0000              	GLOBAL _s_tile0
743   0000              	GLOBAL _player_brick_time
744   0000              	GLOBAL _player_hit_count
745   0000              	GLOBAL _game_debug
746   0000              	GLOBAL _sprite
747   0000              	GLOBAL _fps
748   0000              	GLOBAL _menu_curr_sel
749   0000              	GLOBAL _game_control_mode
750   0000              	GLOBAL _game_round_up
751   0000              	GLOBAL _game_song_play_start
752   0000              	GLOBAL _game_song_play
753   0000              	GLOBAL _game_boss_fix
754   0000              	GLOBAL _game_boss_hit
755   0000              	GLOBAL _game_boss_alive
756   0000              	GLOBAL _game_boss
757   0000              	GLOBAL _game_world
758   0000              	GLOBAL _game_gravity
759   0000              	GLOBAL _player_hit
760   0000              	GLOBAL _player_hit_time
761   0000              	GLOBAL _game_checkpoint_scr
762   0000              	GLOBAL _game_checkpoint_lin
763   0000              	GLOBAL _game_checkpoint_col
764   0000              	GLOBAL _player_lin_scr
765   0000              	GLOBAL _player_col_scr
766   0000              	GLOBAL _player_max_vita
767   0000              	GLOBAL _player_max_mana
768   0000              	GLOBAL _player_vita
769   0000              	GLOBAL _player_keys
770   0000              	GLOBAL _player_vel_inc
771   0000              	GLOBAL _player_vel_y0
772   0000              	GLOBAL _player_vel_y
773   0000              	GLOBAL _player_vel_x
774   0000              	GLOBAL _player_score
775   0000              	GLOBAL _last_time
776   0000              	GLOBAL _spr_timer
777   0000              	GLOBAL _jump_lin
778   0000              	GLOBAL _colint
779   0000              	GLOBAL _col
780   0000              	GLOBAL _tbuffer
781   0000              	GLOBAL _lin
782   0000              	GLOBAL _tile
783   0000              	GLOBAL _state_a
784   0000              	GLOBAL _state
785   0000              	GLOBAL _class
786   0000              	GLOBAL _dirs
787   0000              	GLOBAL _k2
788   0000              	GLOBAL _k1
789   0000              	GLOBAL _joyfunc2
790   0000              	GLOBAL _joyfunc1
791   0000              	GLOBAL _btiles
792   0000              	GLOBAL _spec128
793   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
794   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
795   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
796   0000              	GLOBAL _ay_fx_06_disparo_fire
797   0000              	GLOBAL _ay_fx_06_disparo_axe
798   0000              	GLOBAL _ay_fx_06_explosion1
799   0000              	GLOBAL _ay_fx_06_efecto
800   0000              	GLOBAL _ay_fx_06_disparo2
801   0000              	GLOBAL _ay_fx_06_disparo1
802   0000              	GLOBAL _ay_fx_06_checkpoint
803   0000              	GLOBAL _ay_fx_06_levelup
804   0000              	GLOBAL _ay_fx_06_magic
805   0000              	GLOBAL _ay_fx_06_sin_mana
806   0000              	GLOBAL _ay_fx_06_salto
807   0000              	GLOBAL _ay_fx_06_puerta
808   0000              	GLOBAL _ay_fx_06_magic1
809   0000              	GLOBAL _ay_fx_06_golpe
810   0000              	GLOBAL _ay_fx_06_explosion
811   0000              	GLOBAL _ay_fx_06_dano_por_toque
812   0000              	GLOBAL _ay_fx_06_coin
813   0000              	GLOBAL _ay_song_06_lotr_level_start
814   0000              	GLOBAL _ay_song_06_lotr_level_complete
815   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
816   0000              	GLOBAL _ay_song_04_doom
817   0000              	GLOBAL _ay_song_04_luna
818   0000              	GLOBAL _ay_song_04_ciel
819   0000              	GLOBAL _ay_song_04_hope
820   0000              	GLOBAL _ay_song_03_regis
821   0000              	GLOBAL _ay_song_03_sunflower
822   0000              	GLOBAL _ay_song_03_tdm_cs9
823   0000              	GLOBAL _world0_h
824   0000              	GLOBAL _world0_w
825   0000              	GLOBAL _world0
826   0000              	GLOBAL _paper0
827   0000              	GLOBAL _lenght0
828   0000              	GLOBAL _start_scr0
829   0000              ;--------------------------------------------------------
830   0000              ; special function registers
831   0000              ;--------------------------------------------------------
832   0000              defc _IO_FE	=	0x00fe
833   0000              defc _IO_1FFD	=	0x1ffd
834   0000              defc _IO_7FFD	=	0x7ffd
835   0000              ;--------------------------------------------------------
836   0000              ; ram data
837   0000              ;--------------------------------------------------------
838   0000              	SECTION bss_compiler
839   0000              ;--------------------------------------------------------
840   0000              ; ram data
841   0000              ;--------------------------------------------------------
842   0000              
843   0000              IF 0
844   0000              
845   0000              ; .area _INITIALIZED removed by z88dk
846   0000              
847   0000              
848   0000              ENDIF
849   0000              
850   0000              ;--------------------------------------------------------
851   0000              ; absolute external ram data
852   0000              ;--------------------------------------------------------
853   0000              	SECTION IGNORE
854   0000              ;--------------------------------------------------------
855   0000              ; global & static initialisations
856   0000              ;--------------------------------------------------------
857   0000              	SECTION code_crt_init
858   0000              ;--------------------------------------------------------
859   0000              ; Home
860   0000              ;--------------------------------------------------------
861   0000              	SECTION IGNORE
862   0000              ;--------------------------------------------------------
863   0000              ; code
864   0000              ;--------------------------------------------------------
865   0000              	SECTION code_compiler
866   0000              ;	---------------------------------
867   0000              ; Function spr_calc_index
868   0000              ; ---------------------------------
869   0000              _spr_calc_index:
870   0000  CD 00 00    	call	___sdcc_enter_ix
871   0003  DD 4E 05    	ld	c,(ix+5)
872   0006  06 00       	ld	b,0x00
873   0008  DD 7E 04    	ld	a,(ix+4)
874   000B  0F          	rrca
875   000C  0F          	rrca
876   000D  0F          	rrca
877   000E  E6 1F       	and	a,0x1f
878   0010  6F          	ld	l, a
879   0011  26 00       	ld	h,0x00
880   0013  29          	add	hl, hl
881   0014  29          	add	hl, hl
882   0015  29          	add	hl, hl
883   0016  29          	add	hl, hl
884   0017  29          	add	hl, hl
885   0018  09          	add	hl, bc
886   0019  DD E1       	pop	ix
887   001B  C9          	ret
888   001C              	SECTION code_compiler
889   001C              ;	---------------------------------
890   001C              ; Function spr_chktime
891   001C              ; ---------------------------------
892   001C              _spr_chktime:
893   001C  CD 00 00    	call	___sdcc_enter_ix
894   001F  F5          	push	af
895   0020  EB          	ex	de,hl
896   0021  ED 4B 00 00 	ld	bc,(_curr_time)
897   0025  1A          	ld	a, (de)
898   0026  5F          	ld	e,a
899   0027  6F          	ld	l,a
900   0028  26 00       	ld	h,0x00
901   002A  29          	add	hl, hl
902   002B  3E 00       	ld	a, +((_last_time) & 0xFF)
903   002D  85          	add	a, l
904   002E  DD 77 FE    	ld	(ix-2),a
905   0031  3E 00       	ld	a, +((_last_time) / 256)
906   0033  8C          	adc	a, h
907   0034  DD 77 FF    	ld	(ix-1),a
908   0037  E1          	pop	hl
909   0038  7E          	ld	a,(hl)
910   0039  E5          	push	hl
911   003A  23          	inc	hl
912   003B  66          	ld	h, (hl)
913   003C  6F          	ld	l, a
914   003D  79          	ld	a, c
915   003E  95          	sub	a, l
916   003F  4F          	ld	c, a
917   0040  78          	ld	a, b
918   0041  9C          	sbc	a, h
919   0042  47          	ld	b, a
920   0043  16 00       	ld	d,0x00
921   0045  21 00 00    	ld	hl,_sprite_speed
922   0048  19          	add	hl, de
923   0049  5E          	ld	e, (hl)
924   004A  16 00       	ld	d,0x00
925   004C  79          	ld	a, c
926   004D  93          	sub	a, e
927   004E  78          	ld	a, b
928   004F  9A          	sbc	a, d
929   0050  38 0D       	jr	C,l_spr_chktime_00102
930   0052  E1          	pop	hl
931   0053  ED 4B 00 00 	ld	bc,(_curr_time)
932   0057  E5          	push	hl
933   0058  71          	ld	(hl), c
934   0059  23          	inc	hl
935   005A  70          	ld	(hl), b
936   005B  2E 01       	ld	l,0x01
937   005D  18 02       	jr	l_spr_chktime_00103
938   005F              l_spr_chktime_00102:
939   005F  2E 00       	ld	l,0x00
940   0061              l_spr_chktime_00103:
941   0061  F1          	pop	af
942   0062  DD E1       	pop	ix
943   0064  C9          	ret
944   0065              	SECTION code_compiler
945   0065              ;	---------------------------------
946   0065              ; Function spr_set_up
947   0065              ; ---------------------------------
948   0065              _spr_set_up:
949   0065  CB C6       	set	0, (hl)
950   0067  7E          	ld	a, (hl)
951   0068  E6 FD       	and	a,0xfd
952   006A  77          	ld	(hl), a
953   006B  C9          	ret
954   006C              	SECTION code_compiler
955   006C              ;	---------------------------------
956   006C              ; Function spr_set_down
957   006C              ; ---------------------------------
958   006C              _spr_set_down:
959   006C  CB CE       	set	1, (hl)
960   006E  7E          	ld	a, (hl)
961   006F  E6 FE       	and	a,0xfe
962   0071  77          	ld	(hl), a
963   0072  C9          	ret
964   0073              	SECTION code_compiler
965   0073              ;	---------------------------------
966   0073              ; Function spr_set_left
967   0073              ; ---------------------------------
968   0073              _spr_set_left:
969   0073  CB DE       	set	3, (hl)
970   0075  7E          	ld	a, (hl)
971   0076  E6 FB       	and	a,0xfb
972   0078  77          	ld	(hl), a
973   0079  C9          	ret
974   007A              	SECTION code_compiler
975   007A              ;	---------------------------------
976   007A              ; Function spr_set_right
977   007A              ; ---------------------------------
978   007A              _spr_set_right:
979   007A  CB D6       	set	2, (hl)
980   007C  7E          	ld	a, (hl)
981   007D  E6 F7       	and	a,0xf7
982   007F  77          	ld	(hl), a
983   0080  C9          	ret
984   0081              	SECTION code_compiler
985   0081              ;	---------------------------------
986   0081              ; Function spr_move_up
987   0081              ; ---------------------------------
988   0081              _spr_move_up:
989   0081  2A 00 00    	ld	hl,(_sprite)
990   0084  26 00       	ld	h,0x00
991   0086  01 00 00    	ld	bc,_lin
992   0089  09          	add	hl,bc
993   008A  4E          	ld	c,(hl)
994   008B  3E 10       	ld	a,0x10
995   008D  91          	sub	a, c
996   008E  38 05       	jr	C,l_spr_move_up_00115
997   0090  2E 01       	ld	l,0x01
998   0092  C3 5C 01    	jp	l_spr_move_up_00117
999   0095              l_spr_move_up_00115:
1000  0095  79          	ld	a, c
1001  0096  C6 FE       	add	a,0xfe
1002  0098  32 00 00    	ld	(_s_lin1),a
1003  009B  4F          	ld	c,a
1004  009C  CB 39       	srl	c
1005  009E  CB 39       	srl	c
1006  00A0  CB 39       	srl	c
1007  00A2  3A 00 00    	ld	a,(_s_lin0)
1008  00A5  CB 3F       	srl	a
1009  00A7  CB 3F       	srl	a
1010  00A9  CB 3F       	srl	a
1011  00AB  91          	sub	a, c
1012  00AC  20 04       	jr	NZ,l_spr_move_up_00147
1013  00AE  3E 01       	ld	a,0x01
1014  00B0  18 01       	jr	l_spr_move_up_00148
1015  00B2              l_spr_move_up_00147:
1016  00B2  AF          	xor	a,a
1017  00B3              l_spr_move_up_00148:
1018  00B3  EE 01       	xor	a,0x01
1019  00B5  CA 4D 01    	jp	Z, l_spr_move_up_00113
1020  00B8  2A 00 00    	ld	hl,(_sprite)
1021  00BB  26 00       	ld	h,0x00
1022  00BD  01 00 00    	ld	bc,_colint
1023  00C0  09          	add	hl,bc
1024  00C1  7E          	ld	a,(hl)
1025  00C2  B7          	or	a,a
1026  00C3  20 1A       	jr	NZ,l_spr_move_up_00104
1027  00C5  2A 00 00    	ld	hl,(_sprite)
1028  00C8  26 00       	ld	h,0x00
1029  00CA  01 00 00    	ld	bc,_col
1030  00CD  09          	add	hl,bc
1031  00CE  2A 00 00    	ld	hl, (_s_lin1)
1032  00D1  E5          	push	hl
1033  00D2  CD 00 00    	call	_game_check_map
1034  00D5  F1          	pop	af
1035  00D6  7D          	ld	a, l
1036  00D7  B7          	or	a, a
1037  00D8  28 05       	jr	Z,l_spr_move_up_00104
1038  00DA  2E 01       	ld	l,0x01
1039  00DC  C3 5C 01    	jp	l_spr_move_up_00117
1040  00DF              l_spr_move_up_00104:
1041  00DF  2A 00 00    	ld	hl,(_sprite)
1042  00E2  26 00       	ld	h,0x00
1043  00E4  01 00 00    	ld	bc,_colint
1044  00E7  09          	add	hl,bc
1045  00E8  5E          	ld	e, (hl)
1046  00E9  2A 00 00    	ld	hl,(_sprite)
1047  00EC  26 00       	ld	h,0x00
1048  00EE  01 00 00    	ld	bc,_sprite_frames
1049  00F1  09          	add	hl,bc
1050  00F2  4E          	ld	c, (hl)
1051  00F3  06 00       	ld	b,0x00
1052  00F5  0B          	dec	bc
1053  00F6  16 00       	ld	d,0x00
1054  00F8  7B          	ld	a,e
1055  00F9  91          	sub	a,c
1056  00FA  20 20       	jr	NZ,l_spr_move_up_00108
1057  00FC  7A          	ld	a,d
1058  00FD  90          	sub	a,b
1059  00FE  20 1C       	jr	NZ,l_spr_move_up_00108
1060  0100  2A 00 00    	ld	hl,(_sprite)
1061  0103  26 00       	ld	h,0x00
1062  0105  01 00 00    	ld	bc,_col
1063  0108  09          	add	hl,bc
1064  0109  46          	ld	b, (hl)
1065  010A  04          	inc	b
1066  010B  3A 00 00    	ld	a,(_s_lin1)
1067  010E  4F          	ld	c,a
1068  010F  C5          	push	bc
1069  0110  CD 00 00    	call	_game_check_map
1070  0113  F1          	pop	af
1071  0114  7D          	ld	a, l
1072  0115  B7          	or	a, a
1073  0116  28 04       	jr	Z,l_spr_move_up_00108
1074  0118  2E 01       	ld	l,0x01
1075  011A  18 40       	jr	l_spr_move_up_00117
1076  011C              l_spr_move_up_00108:
1077  011C  2A 00 00    	ld	hl,(_sprite)
1078  011F  26 00       	ld	h,0x00
1079  0121  01 00 00    	ld	bc,_col
1080  0124  09          	add	hl,bc
1081  0125  2A 00 00    	ld	hl, (_s_lin1)
1082  0128  E5          	push	hl
1083  0129  CD 00 00    	call	_game_check_map
1084  012C  F1          	pop	af
1085  012D  7D          	ld	a, l
1086  012E  B7          	or	a, a
1087  012F  20 18       	jr	NZ,l_spr_move_up_00109
1088  0131  2A 00 00    	ld	hl,(_sprite)
1089  0134  26 00       	ld	h,0x00
1090  0136  01 00 00    	ld	bc,_col
1091  0139  09          	add	hl,bc
1092  013A  46          	ld	b,(hl)
1093  013B  04          	inc	b
1094  013C  3A 00 00    	ld	a,(_s_lin1)
1095  013F  4F          	ld	c,a
1096  0140  C5          	push	bc
1097  0141  CD 00 00    	call	_game_check_map
1098  0144  F1          	pop	af
1099  0145  7D          	ld	a, l
1100  0146  B7          	or	a, a
1101  0147  28 04       	jr	Z,l_spr_move_up_00113
1102  0149              l_spr_move_up_00109:
1103  0149  2E 01       	ld	l,0x01
1104  014B  18 0F       	jr	l_spr_move_up_00117
1105  014D              l_spr_move_up_00113:
1106  014D  2A 00 00    	ld	hl,(_sprite)
1107  0150  26 00       	ld	h,0x00
1108  0152  01 00 00    	ld	bc,_lin
1109  0155  09          	add	hl,bc
1110  0156  3A 00 00    	ld	a,(_s_lin1)
1111  0159  77          	ld	(hl),a
1112  015A  2E 00       	ld	l,0x00
1113  015C              l_spr_move_up_00117:
1114  015C  C9          	ret
1115  015D              	SECTION code_compiler
1116  015D              ;	---------------------------------
1117  015D              ; Function spr_move_down
1118  015D              ; ---------------------------------
1119  015D              _spr_move_down:
1120  015D  2A 00 00    	ld	hl,(_sprite)
1121  0160  26 00       	ld	h,0x00
1122  0162  01 00 00    	ld	bc,_lin
1123  0165  09          	add	hl,bc
1124  0166  7E          	ld	a,(hl)
1125  0167  FE 80       	cp	a,0x80
1126  0169  38 07       	jr	C,l_spr_move_down_00115
1127  016B  36 80       	ld	(hl),0x80
1128  016D  2E 01       	ld	l,0x01
1129  016F  C3 3C 02    	jp	l_spr_move_down_00117
1130  0172              l_spr_move_down_00115:
1131  0172  C6 10       	add	a,0x10
1132  0174  32 00 00    	ld	(_s_lin1),a
1133  0177  4F          	ld	c,a
1134  0178  CB 39       	srl	c
1135  017A  CB 39       	srl	c
1136  017C  CB 39       	srl	c
1137  017E  21 00 00    	ld	hl,_s_lin0
1138  0181  5E          	ld	e, (hl)
1139  0182  CB 3B       	srl	e
1140  0184  CB 3B       	srl	e
1141  0186  CB 3B       	srl	e
1142  0188  79          	ld	a, c
1143  0189  93          	sub	a, e
1144  018A  20 04       	jr	NZ,l_spr_move_down_00147
1145  018C  3E 01       	ld	a,0x01
1146  018E  18 01       	jr	l_spr_move_down_00148
1147  0190              l_spr_move_down_00147:
1148  0190  AF          	xor	a,a
1149  0191              l_spr_move_down_00148:
1150  0191  EE 01       	xor	a,0x01
1151  0193  CA 2B 02    	jp	Z, l_spr_move_down_00113
1152  0196  2A 00 00    	ld	hl,(_sprite)
1153  0199  26 00       	ld	h,0x00
1154  019B  01 00 00    	ld	bc,_colint
1155  019E  09          	add	hl,bc
1156  019F  7E          	ld	a,(hl)
1157  01A0  B7          	or	a,a
1158  01A1  20 1A       	jr	NZ,l_spr_move_down_00104
1159  01A3  2A 00 00    	ld	hl,(_sprite)
1160  01A6  26 00       	ld	h,0x00
1161  01A8  01 00 00    	ld	bc,_col
1162  01AB  09          	add	hl,bc
1163  01AC  2A 00 00    	ld	hl, (_s_lin1)
1164  01AF  E5          	push	hl
1165  01B0  CD 00 00    	call	_game_check_map
1166  01B3  F1          	pop	af
1167  01B4  7D          	ld	a, l
1168  01B5  B7          	or	a, a
1169  01B6  28 05       	jr	Z,l_spr_move_down_00104
1170  01B8  2E 01       	ld	l,0x01
1171  01BA  C3 3C 02    	jp	l_spr_move_down_00117
1172  01BD              l_spr_move_down_00104:
1173  01BD  2A 00 00    	ld	hl,(_sprite)
1174  01C0  26 00       	ld	h,0x00
1175  01C2  01 00 00    	ld	bc,_colint
1176  01C5  09          	add	hl,bc
1177  01C6  5E          	ld	e, (hl)
1178  01C7  2A 00 00    	ld	hl,(_sprite)
1179  01CA  26 00       	ld	h,0x00
1180  01CC  01 00 00    	ld	bc,_sprite_frames
1181  01CF  09          	add	hl,bc
1182  01D0  4E          	ld	c, (hl)
1183  01D1  06 00       	ld	b,0x00
1184  01D3  0B          	dec	bc
1185  01D4  16 00       	ld	d,0x00
1186  01D6  7B          	ld	a,e
1187  01D7  91          	sub	a,c
1188  01D8  20 20       	jr	NZ,l_spr_move_down_00108
1189  01DA  7A          	ld	a,d
1190  01DB  90          	sub	a,b
1191  01DC  20 1C       	jr	NZ,l_spr_move_down_00108
1192  01DE  2A 00 00    	ld	hl,(_sprite)
1193  01E1  26 00       	ld	h,0x00
1194  01E3  01 00 00    	ld	bc,_col
1195  01E6  09          	add	hl,bc
1196  01E7  46          	ld	b, (hl)
1197  01E8  04          	inc	b
1198  01E9  3A 00 00    	ld	a,(_s_lin1)
1199  01EC  4F          	ld	c,a
1200  01ED  C5          	push	bc
1201  01EE  CD 00 00    	call	_game_check_map
1202  01F1  F1          	pop	af
1203  01F2  7D          	ld	a, l
1204  01F3  B7          	or	a, a
1205  01F4  28 04       	jr	Z,l_spr_move_down_00108
1206  01F6  2E 01       	ld	l,0x01
1207  01F8  18 42       	jr	l_spr_move_down_00117
1208  01FA              l_spr_move_down_00108:
1209  01FA  2A 00 00    	ld	hl,(_sprite)
1210  01FD  26 00       	ld	h,0x00
1211  01FF  01 00 00    	ld	bc,_col
1212  0202  09          	add	hl,bc
1213  0203  2A 00 00    	ld	hl, (_s_lin1)
1214  0206  E5          	push	hl
1215  0207  CD 00 00    	call	_game_check_map
1216  020A  F1          	pop	af
1217  020B  7D          	ld	a, l
1218  020C  B7          	or	a, a
1219  020D  20 18       	jr	NZ,l_spr_move_down_00109
1220  020F  2A 00 00    	ld	hl,(_sprite)
1221  0212  26 00       	ld	h,0x00
1222  0214  01 00 00    	ld	bc,_col
1223  0217  09          	add	hl,bc
1224  0218  46          	ld	b,(hl)
1225  0219  04          	inc	b
1226  021A  3A 00 00    	ld	a,(_s_lin1)
1227  021D  4F          	ld	c,a
1228  021E  C5          	push	bc
1229  021F  CD 00 00    	call	_game_check_map
1230  0222  F1          	pop	af
1231  0223  7D          	ld	a, l
1232  0224  B7          	or	a, a
1233  0225  28 04       	jr	Z,l_spr_move_down_00113
1234  0227              l_spr_move_down_00109:
1235  0227  2E 01       	ld	l,0x01
1236  0229  18 11       	jr	l_spr_move_down_00117
1237  022B              l_spr_move_down_00113:
1238  022B  2A 00 00    	ld	hl,(_sprite)
1239  022E  26 00       	ld	h,0x00
1240  0230  01 00 00    	ld	bc,_lin
1241  0233  09          	add	hl,bc
1242  0234  3A 00 00    	ld	a,(_s_lin1)
1243  0237  C6 F2       	add	a,0xf2
1244  0239  77          	ld	(hl),a
1245  023A  2E 00       	ld	l,0x00
1246  023C              l_spr_move_down_00117:
1247  023C  C9          	ret
1248  023D              	SECTION code_compiler
1249  023D              ;	---------------------------------
1250  023D              ; Function spr_move_horizontal
1251  023D              ; ---------------------------------
1252  023D              _spr_move_horizontal:
1253  023D  2A 00 00    	ld	hl,(_sprite)
1254  0240  26 00       	ld	h,0x00
1255  0242  01 00 00    	ld	bc,_state
1256  0245  09          	add	hl,bc
1257  0246  7E          	ld	a,(hl)
1258  0247  CB 57       	bit	2, a
1259  0249  28 05       	jr	Z,l_spr_move_horizontal_00104
1260  024B  CD 5C 02    	call	_spr_move_right
1261  024E  18 0B       	jr	l_spr_move_horizontal_00106
1262  0250              l_spr_move_horizontal_00104:
1263  0250  CB 5F       	bit	3, a
1264  0252  28 05       	jr	Z,l_spr_move_horizontal_00105
1265  0254  CD DA 02    	call	_spr_move_left
1266  0257  18 02       	jr	l_spr_move_horizontal_00106
1267  0259              l_spr_move_horizontal_00105:
1268  0259  2E 00       	ld	l,0x00
1269  025B              l_spr_move_horizontal_00106:
1270  025B  C9          	ret
1271  025C              	SECTION code_compiler
1272  025C              ;	---------------------------------
1273  025C              ; Function spr_move_right
1274  025C              ; ---------------------------------
1275  025C              _spr_move_right:
1276  025C  CD 00 00    	call	___sdcc_enter_ix
1277  025F  F5          	push	af
1278  0260  3B          	dec	sp
1279  0261  2A 00 00    	ld	hl,(_sprite)
1280  0264  26 00       	ld	h,0x00
1281  0266  01 00 00    	ld	bc,_colint
1282  0269  09          	add	hl,bc
1283  026A  3E 00       	ld	a,+((_col) & 0xFF)
1284  026C  4D          	ld	c,l
1285  026D  44          	ld	b,h
1286  026E  21 00 00    	ld	hl,_sprite
1287  0271  86          	add	a, (hl)
1288  0272  5F          	ld	e, a
1289  0273  3E 00       	ld	a, +((_col) / 256)
1290  0275  CE 00       	adc	a,0x00
1291  0277  E1          	pop	hl
1292  0278  57          	ld	d,a
1293  0279  0A          	ld	a,(bc)
1294  027A  D5          	push	de
1295  027B  3C          	inc	a
1296  027C  DD 77 FF    	ld	(ix-1),a
1297  027F  02          	ld	(bc),a
1298  0280  2A 00 00    	ld	hl,(_s_class)
1299  0283  26 00       	ld	h,0x00
1300  0285  11 00 00    	ld	de,_sprite_frames
1301  0288  19          	add	hl,de
1302  0289  DD 7E FF    	ld	a,(ix-1)
1303  028C  96          	sub	a,(hl)
1304  028D  20 44       	jr	NZ,l_spr_move_right_00109
1305  028F  2A 00 00    	ld	hl,(_sprite)
1306  0292  26 00       	ld	h,0x00
1307  0294  11 00 00    	ld	de,_lin
1308  0297  19          	add	hl,de
1309  0298  7E          	ld	a,(hl)
1310  0299  E1          	pop	hl
1311  029A  32 00 00    	ld	(_s_lin1),a
1312  029D  7E          	ld	a,(hl)
1313  029E  E5          	push	hl
1314  029F  FE 1F       	cp	a,0x1f
1315  02A1  30 30       	jr	NC,l_spr_move_right_00109
1316  02A3  C6 02       	add	a,0x02
1317  02A5  57          	ld	d,a
1318  02A6  3A 00 00    	ld	a,(_s_lin1)
1319  02A9  C6 08       	add	a,0x08
1320  02AB  C5          	push	bc
1321  02AC  5F          	ld	e,a
1322  02AD  D5          	push	de
1323  02AE  CD 00 00    	call	_game_check_map
1324  02B1  F1          	pop	af
1325  02B2  C1          	pop	bc
1326  02B3  7D          	ld	a,l
1327  02B4  B7          	or	a, a
1328  02B5  28 08       	jr	Z,l_spr_move_right_00104
1329  02B7  0A          	ld	a, (bc)
1330  02B8  C6 FF       	add	a,0xff
1331  02BA  02          	ld	(bc), a
1332  02BB  2E 01       	ld	l,0x01
1333  02BD  18 16       	jr	l_spr_move_right_00110
1334  02BF              l_spr_move_right_00104:
1335  02BF  E1          	pop	hl
1336  02C0  5E          	ld	e,(hl)
1337  02C1  1C          	inc	e
1338  02C2  E5          	push	hl
1339  02C3  73          	ld	(hl), e
1340  02C4  AF          	xor	a, a
1341  02C5  02          	ld	(bc), a
1342  02C6  3E 1F       	ld	a,0x1f
1343  02C8  93          	sub	a, e
1344  02C9  30 08       	jr	NC,l_spr_move_right_00109
1345  02CB  E1          	pop	hl
1346  02CC  E5          	push	hl
1347  02CD  36 1F       	ld	(hl),0x1f
1348  02CF  2E 01       	ld	l,0x01
1349  02D1  18 02       	jr	l_spr_move_right_00110
1350  02D3              l_spr_move_right_00109:
1351  02D3  2E 00       	ld	l,0x00
1352  02D5              l_spr_move_right_00110:
1353  02D5  DD F9       	ld	sp, ix
1354  02D7  DD E1       	pop	ix
1355  02D9  C9          	ret
1356  02DA              	SECTION code_compiler
1357  02DA              ;	---------------------------------
1358  02DA              ; Function spr_move_left
1359  02DA              ; ---------------------------------
1360  02DA              _spr_move_left:
1361  02DA  01 00 00    	ld	bc,_colint+0
1362  02DD  79          	ld	a, c
1363  02DE  21 00 00    	ld	hl,_sprite
1364  02E1  86          	add	a, (hl)
1365  02E2  5F          	ld	e, a
1366  02E3  78          	ld	a, b
1367  02E4  CE 00       	adc	a,0x00
1368  02E6  57          	ld	d, a
1369  02E7  1A          	ld	a, (de)
1370  02E8  C6 FF       	add	a,0xff
1371  02EA  12          	ld	(de), a
1372  02EB  79          	ld	a, c
1373  02EC  86          	add	a, (hl)
1374  02ED  5F          	ld	e, a
1375  02EE  78          	ld	a, b
1376  02EF  CE 00       	adc	a,0x00
1377  02F1  57          	ld	d, a
1378  02F2  1A          	ld	a, (de)
1379  02F3  3C          	inc	a
1380  02F4  20 6C       	jr	NZ,l_spr_move_left_00109
1381  02F6  5E          	ld	e,(hl)
1382  02F7  16 00       	ld	d,0x00
1383  02F9  21 00 00    	ld	hl,_lin
1384  02FC  19          	add	hl,de
1385  02FD  7E          	ld	a,(hl)
1386  02FE  32 00 00    	ld	(_s_lin1),a
1387  0301  2A 00 00    	ld	hl,(_sprite)
1388  0304  26 00       	ld	h,0x00
1389  0306  11 00 00    	ld	de,_col
1390  0309  19          	add	hl,de
1391  030A  7E          	ld	a,(hl)
1392  030B  B7          	or	a, a
1393  030C  28 54       	jr	Z,l_spr_move_left_00109
1394  030E  57          	ld	d, a
1395  030F  15          	dec	d
1396  0310  3A 00 00    	ld	a,(_s_lin1)
1397  0313  C6 08       	add	a,0x08
1398  0315  C5          	push	bc
1399  0316  5F          	ld	e,a
1400  0317  D5          	push	de
1401  0318  CD 00 00    	call	_game_check_map
1402  031B  F1          	pop	af
1403  031C  C1          	pop	bc
1404  031D  7D          	ld	a,l
1405  031E  B7          	or	a, a
1406  031F  28 0B       	jr	Z,l_spr_move_left_00104
1407  0321  2A 00 00    	ld	hl,(_sprite)
1408  0324  26 00       	ld	h,0x00
1409  0326  09          	add	hl,bc
1410  0327  34          	inc	(hl)
1411  0328  2E 01       	ld	l,0x01
1412  032A  18 38       	jr	l_spr_move_left_00110
1413  032C              l_spr_move_left_00104:
1414  032C  2A 00 00    	ld	hl,(_sprite)
1415  032F  26 00       	ld	h,0x00
1416  0331  11 00 00    	ld	de,_col
1417  0334  19          	add	hl,de
1418  0335  7E          	ld	a,(hl)
1419  0336  EB          	ex	de,hl
1420  0337  C6 FF       	add	a,0xff
1421  0339  12          	ld	(de),a
1422  033A  2A 00 00    	ld	hl,(_sprite)
1423  033D  26 00       	ld	h,0x00
1424  033F  09          	add	hl,bc
1425  0340  4D          	ld	c,l
1426  0341  44          	ld	b,h
1427  0342  2A 00 00    	ld	hl,(_s_class)
1428  0345  26 00       	ld	h,0x00
1429  0347  11 00 00    	ld	de,_sprite_frames
1430  034A  19          	add	hl,de
1431  034B  7E          	ld	a,(hl)
1432  034C  C6 FF       	add	a,0xff
1433  034E  02          	ld	(bc), a
1434  034F  2A 00 00    	ld	hl,(_sprite)
1435  0352  26 00       	ld	h,0x00
1436  0354  01 00 00    	ld	bc,_col
1437  0357  09          	add	hl,bc
1438  0358  7E          	ld	a,(hl)
1439  0359  3C          	inc	a
1440  035A  20 06       	jr	NZ,l_spr_move_left_00109
1441  035C  AF          	xor	a,a
1442  035D  77          	ld	(hl),a
1443  035E  2E 01       	ld	l,0x01
1444  0360  18 02       	jr	l_spr_move_left_00110
1445  0362              l_spr_move_left_00109:
1446  0362  2E 00       	ld	l,0x00
1447  0364              l_spr_move_left_00110:
1448  0364  C9          	ret
1449  0365              	SECTION code_compiler
1450  0365              ;	---------------------------------
1451  0365              ; Function spr_clear_scr
1452  0365              ; ---------------------------------
1453  0365              _spr_clear_scr:
1454  0365  CD 00 00    	call	___sdcc_enter_ix
1455  0368  3B          	dec	sp
1456  0369  06 00       	ld	b,0x00
1457  036B              l_spr_clear_scr_00105:
1458  036B  C5          	push	bc
1459  036C  21 00 00    	ld	hl,0x0000
1460  036F  E5          	push	hl
1461  0370  AF          	xor	a, a
1462  0371  48          	ld	c,b
1463  0372  47          	ld	b,a
1464  0373  C5          	push	bc
1465  0374  CD 00 00    	call	_NIRVANAP_spriteT_callee
1466  0377  C1          	pop	bc
1467  0378  04          	inc	b
1468  0379  78          	ld	a, b
1469  037A  D6 08       	sub	a,0x08
1470  037C  38 ED       	jr	C,l_spr_clear_scr_00105
1471  037E  76          	halt
1472  037F  F3          	di
1473  0380  0E 00       	ld	c,0x00
1474  0382              l_spr_clear_scr_00117:
1475  0382  79          	ld	a, c
1476  0383  87          	add	a, a
1477  0384  DD 77 FF    	ld	(ix-1),a
1478  0387  5F          	ld	e,a
1479  0388  06 01       	ld	b,0x01
1480  038A              l_spr_clear_scr_00107:
1481  038A  78          	ld	a, b
1482  038B  07          	rlca
1483  038C  07          	rlca
1484  038D  07          	rlca
1485  038E  07          	rlca
1486  038F  E6 F0       	and	a,0xf0
1487  0391  57          	ld	d, a
1488  0392  C5          	push	bc
1489  0393  D5          	push	de
1490  0394  DD 7E FF    	ld	a,(ix-1)
1491  0397  5A          	ld	e,d
1492  0398  57          	ld	d,a
1493  0399  D5          	push	de
1494  039A  AF          	xor	a, a
1495  039B  F5          	push	af
1496  039C  33          	inc	sp
1497  039D  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1498  03A0  D1          	pop	de
1499  03A1  C1          	pop	bc
1500  03A2  04          	inc	b
1501  03A3  78          	ld	a, b
1502  03A4  D6 0A       	sub	a,0x0a
1503  03A6  38 E2       	jr	C,l_spr_clear_scr_00107
1504  03A8  3E 1E       	ld	a,0x1e
1505  03AA  93          	sub	a, e
1506  03AB  57          	ld	d, a
1507  03AC  1E 01       	ld	e,0x01
1508  03AE              l_spr_clear_scr_00109:
1509  03AE  7B          	ld	a, e
1510  03AF  07          	rlca
1511  03B0  07          	rlca
1512  03B1  07          	rlca
1513  03B2  07          	rlca
1514  03B3  E6 F0       	and	a,0xf0
1515  03B5  47          	ld	b, a
1516  03B6  C5          	push	bc
1517  03B7  D5          	push	de
1518  03B8  58          	ld	e,b
1519  03B9  D5          	push	de
1520  03BA  AF          	xor	a, a
1521  03BB  F5          	push	af
1522  03BC  33          	inc	sp
1523  03BD  CD 00 00    	call	_NIRVANAP_fillT_raw_callee
1524  03C0  D1          	pop	de
1525  03C1  C1          	pop	bc
1526  03C2  1C          	inc	e
1527  03C3  7B          	ld	a, e
1528  03C4  D6 0A       	sub	a,0x0a
1529  03C6  38 E6       	jr	C,l_spr_clear_scr_00109
1530  03C8  FB          	ei
1531  03C9  76          	halt
1532  03CA  F3          	di
1533  03CB  0C          	inc	c
1534  03CC  79          	ld	a, c
1535  03CD  D6 08       	sub	a,0x08
1536  03CF  38 B1       	jr	C,l_spr_clear_scr_00117
1537  03D1  FB          	ei
1538  03D2  33          	inc	sp
1539  03D3  DD E1       	pop	ix
1540  03D5  C9          	ret
1541  03D6              	SECTION code_compiler
1542  03D6              ;	---------------------------------
1543  03D6              ; Function spr_page_map is a stub
1544  03D6              ; ---------------------------------
1545  03D6              EXTERN l_ret
1546  03D6              defc _spr_page_map = l_ret
1547  03D6              	SECTION code_compiler
1548  03D6              ;	---------------------------------
1549  03D6              ; Function spr_paint_player
1550  03D6              ; ---------------------------------
1551  03D6              _spr_paint_player:
1552  03D6  3A 00 00    	ld	a,(_player_hit)
1553  03D9  B7          	or	a, a
1554  03DA  28 1C       	jr	Z,l_spr_paint_player_00104
1555  03DC  21 00 00    	ld	hl,_loop_count
1556  03DF  CB 46       	bit	0, (hl)
1557  03E1  20 15       	jr	NZ,l_spr_paint_player_00104
1558  03E3  CD 8E 06    	call	_spr_back_repaint
1559  03E6  21 00 00    	ld	hl,0x0000
1560  03E9  E5          	push	hl
1561  03EA  AF          	xor	a, a
1562  03EB  2A 00 00    	ld	hl,(_sprite)
1563  03EE  67          	ld	h,a
1564  03EF  E5          	push	hl
1565  03F0  CD 00 00    	call	_NIRVANAP_spriteT_callee
1566  03F3  2E 01       	ld	l,0x01
1567  03F5  C3 7D 04    	jp	l_spr_paint_player_00111
1568  03F8              l_spr_paint_player_00104:
1569  03F8  3A 07 00    	ld	a,(_col + 0x0007)
1570  03FB  32 00 00    	ld	(_s_col1),a
1571  03FE  3A 07 00    	ld	a,(_lin + 0x0007)
1572  0401  32 00 00    	ld	(_s_lin1),a
1573  0404  21 00 00    	ld	hl,_s_lin1
1574  0407  7E          	ld	a, (hl)
1575  0408  C6 10       	add	a,0x10
1576  040A  47          	ld	b, a
1577  040B  7E          	ld	a, (hl)
1578  040C  21 00 00    	ld	hl,_s_lin0
1579  040F  96          	sub	a, (hl)
1580  0410  20 09       	jr	NZ,l_spr_paint_player_00107
1581  0412  3A 00 00    	ld	a,(_s_col1)
1582  0415  21 00 00    	ld	hl,_s_col0
1583  0418  96          	sub	a, (hl)
1584  0419  28 25       	jr	Z,l_spr_paint_player_00108
1585  041B              l_spr_paint_player_00107:
1586  041B  21 07 00    	ld	hl,+(_tile + 0x0007)
1587  041E  4E          	ld	c, (hl)
1588  041F  21 07 00    	ld	hl,+(_colint + 0x0007)
1589  0422  5E          	ld	e, (hl)
1590  0423  79          	ld	a, c
1591  0424  83          	add	a, e
1592  0425  32 00 00    	ld	(_s_tile1),a
1593  0428  3A 00 00    	ld	a,(_s_col1)
1594  042B  48          	ld	c,b
1595  042C  47          	ld	b,a
1596  042D  C5          	push	bc
1597  042E  2A FF FF    	ld	hl,(_s_tile1 - 1)
1598  0431  3A 00 00    	ld	a,(_sprite)
1599  0434  6F          	ld	l,a
1600  0435  E5          	push	hl
1601  0436  CD 00 00    	call	_NIRVANAP_spriteT_callee
1602  0439  CD 8E 06    	call	_spr_back_repaint
1603  043C  2E 01       	ld	l,0x01
1604  043E  18 3D       	jr	l_spr_paint_player_00111
1605  0440              l_spr_paint_player_00108:
1606  0440  3A 00 00    	ld	a,(_sprite)
1607  0443  07          	rlca
1608  0444  07          	rlca
1609  0445  07          	rlca
1610  0446  E6 F8       	and	a,0xf8
1611  0448  5F          	ld	e, a
1612  0449  16 00       	ld	d,0x00
1613  044B  21 98 DC    	ld	hl,0xdc98
1614  044E  19          	add	hl, de
1615  044F  7E          	ld	a, (hl)
1616  0450  32 00 00    	ld	(_s_tile0),a
1617  0453  21 07 00    	ld	hl,+(_tile + 0x0007)
1618  0456  4E          	ld	c, (hl)
1619  0457  21 07 00    	ld	hl,+(_colint + 0x0007)
1620  045A  5E          	ld	e, (hl)
1621  045B  79          	ld	a, c
1622  045C  83          	add	a, e
1623  045D  32 00 00    	ld	(_s_tile1),a
1624  0460  21 00 00    	ld	hl,_s_tile0
1625  0463  96          	sub	a, (hl)
1626  0464  28 15       	jr	Z,l_spr_paint_player_00109
1627  0466  3A 00 00    	ld	a,(_s_col1)
1628  0469  48          	ld	c,b
1629  046A  47          	ld	b,a
1630  046B  C5          	push	bc
1631  046C  2A FF FF    	ld	hl,(_s_tile1 - 1)
1632  046F  3A 00 00    	ld	a,(_sprite)
1633  0472  6F          	ld	l,a
1634  0473  E5          	push	hl
1635  0474  CD 00 00    	call	_NIRVANAP_spriteT_callee
1636  0477  2E 00       	ld	l,0x00
1637  0479  18 02       	jr	l_spr_paint_player_00111
1638  047B              l_spr_paint_player_00109:
1639  047B  2E 00       	ld	l,0x00
1640  047D              l_spr_paint_player_00111:
1641  047D  C9          	ret
1642  047E              	SECTION code_compiler
1643  047E              ;	---------------------------------
1644  047E              ; Function spr_paint
1645  047E              ; ---------------------------------
1646  047E              _spr_paint:
1647  047E  2A 00 00    	ld	hl,(_sprite)
1648  0481  26 00       	ld	h,0x00
1649  0483  01 00 00    	ld	bc,_col
1650  0486  09          	add	hl,bc
1651  0487  7E          	ld	a,(hl)
1652  0488  32 00 00    	ld	(_s_col1),a
1653  048B  2A 00 00    	ld	hl,(_sprite)
1654  048E  26 00       	ld	h,0x00
1655  0490  01 00 00    	ld	bc,_lin
1656  0493  09          	add	hl,bc
1657  0494  7E          	ld	a,(hl)
1658  0495  32 00 00    	ld	(_s_lin1),a
1659  0498  21 00 00    	ld	hl,_s_lin0
1660  049B  96          	sub	a, (hl)
1661  049C  20 09       	jr	NZ,l_spr_paint_00106
1662  049E  3A 00 00    	ld	a,(_s_col1)
1663  04A1  21 00 00    	ld	hl,_s_col0
1664  04A4  96          	sub	a, (hl)
1665  04A5  28 4F       	jr	Z,l_spr_paint_00107
1666  04A7              l_spr_paint_00106:
1667  04A7  2A 00 00    	ld	hl,(_sprite)
1668  04AA  26 00       	ld	h,0x00
1669  04AC  01 00 00    	ld	bc,_tile
1670  04AF  09          	add	hl,bc
1671  04B0  4E          	ld	c, (hl)
1672  04B1  3A 00 00    	ld	a,(_sprite)
1673  04B4  5F          	ld	e,a
1674  04B5  16 00       	ld	d,0x00
1675  04B7  21 00 00    	ld	hl,_colint
1676  04BA  19          	add	hl,de
1677  04BB  7E          	ld	a,(hl)
1678  04BC  81          	add	a,c
1679  04BD  32 00 00    	ld	(_s_tile1),a
1680  04C0  3A 00 00    	ld	a,(_s_lin1)
1681  04C3  E6 07       	and	a,0x07
1682  04C5  20 05       	jr	NZ,l_spr_paint_00102
1683  04C7  CD 8E 06    	call	_spr_back_repaint
1684  04CA  18 10       	jr	l_spr_paint_00103
1685  04CC              l_spr_paint_00102:
1686  04CC  2A FF FF    	ld	hl,(_s_col0 - 1)
1687  04CF  3A 00 00    	ld	a,(_s_lin0)
1688  04D2  6F          	ld	l,a
1689  04D3  3A 00 00    	ld	a,(_map_paper_clr)
1690  04D6  E5          	push	hl
1691  04D7  F5          	push	af
1692  04D8  33          	inc	sp
1693  04D9  CD 00 00    	call	_NIRVANAP_fillT_callee
1694  04DC              l_spr_paint_00103:
1695  04DC  3A 00 00    	ld	a,(_s_lin1)
1696  04DF  C6 10       	add	a,0x10
1697  04E1  4F          	ld	c, a
1698  04E2  3A 00 00    	ld	a, (_s_col1)
1699  04E5  47          	ld	b,a
1700  04E6  C5          	push	bc
1701  04E7  2A FF FF    	ld	hl,(_s_tile1 - 1)
1702  04EA  3A 00 00    	ld	a,(_sprite)
1703  04ED  6F          	ld	l,a
1704  04EE  E5          	push	hl
1705  04EF  CD 00 00    	call	_NIRVANAP_spriteT_callee
1706  04F2  2E 01       	ld	l,0x01
1707  04F4  18 4E       	jr	l_spr_paint_00110
1708  04F6              l_spr_paint_00107:
1709  04F6  3A 00 00    	ld	a,(_sprite)
1710  04F9  07          	rlca
1711  04FA  07          	rlca
1712  04FB  07          	rlca
1713  04FC  E6 F8       	and	a,0xf8
1714  04FE  4F          	ld	c, a
1715  04FF  06 00       	ld	b,0x00
1716  0501  21 98 DC    	ld	hl,0xdc98
1717  0504  09          	add	hl, bc
1718  0505  7E          	ld	a, (hl)
1719  0506  32 00 00    	ld	(_s_tile0),a
1720  0509  2A 00 00    	ld	hl,(_sprite)
1721  050C  26 00       	ld	h,0x00
1722  050E  01 00 00    	ld	bc,_tile
1723  0511  09          	add	hl,bc
1724  0512  4E          	ld	c, (hl)
1725  0513  3A 00 00    	ld	a,(_sprite)
1726  0516  5F          	ld	e,a
1727  0517  16 00       	ld	d,0x00
1728  0519  21 00 00    	ld	hl,_colint
1729  051C  19          	add	hl,de
1730  051D  7E          	ld	a,(hl)
1731  051E  81          	add	a,c
1732  051F  32 00 00    	ld	(_s_tile1),a
1733  0522  21 00 00    	ld	hl,_s_tile0
1734  0525  96          	sub	a, (hl)
1735  0526  28 1A       	jr	Z,l_spr_paint_00108
1736  0528  3A 00 00    	ld	a,(_s_lin1)
1737  052B  C6 10       	add	a,0x10
1738  052D  4F          	ld	c, a
1739  052E  3A 00 00    	ld	a, (_s_col1)
1740  0531  47          	ld	b,a
1741  0532  C5          	push	bc
1742  0533  2A FF FF    	ld	hl,(_s_tile1 - 1)
1743  0536  3A 00 00    	ld	a,(_sprite)
1744  0539  6F          	ld	l,a
1745  053A  E5          	push	hl
1746  053B  CD 00 00    	call	_NIRVANAP_spriteT_callee
1747  053E  2E 00       	ld	l,0x00
1748  0540  18 02       	jr	l_spr_paint_00110
1749  0542              l_spr_paint_00108:
1750  0542  2E 00       	ld	l,0x00
1751  0544              l_spr_paint_00110:
1752  0544  C9          	ret
1753  0545              	SECTION code_compiler
1754  0545              ;	---------------------------------
1755  0545              ; Function spr_destroy
1756  0545              ; ---------------------------------
1757  0545              _spr_destroy:
1758  0545  CD 00 00    	call	___sdcc_enter_ix
1759  0548  F5          	push	af
1760  0549  F5          	push	af
1761  054A  45          	ld	b, l
1762  054B  21 00 00    	ld	hl,_spr_count
1763  054E  35          	dec	(hl)
1764  054F  3E 00       	ld	a, +((_lin) & 0xFF)
1765  0551  80          	add	a, b
1766  0552  DD 77 FE    	ld	(ix-2),a
1767  0555  6F          	ld	l,a
1768  0556  3E 00       	ld	a,+((_lin) / 256)
1769  0558  CE 00       	adc	a,0x00
1770  055A  DD 77 FF    	ld	(ix-1),a
1771  055D  67          	ld	h,a
1772  055E  7E          	ld	a, (hl)
1773  055F  32 00 00    	ld	(_s_lin0),a
1774  0562  3E 00       	ld	a, +((_col) & 0xFF)
1775  0564  80          	add	a, b
1776  0565  DD 77 FC    	ld	(ix-4),a
1777  0568  3E 00       	ld	a, +((_col) / 256)
1778  056A  CE 00       	adc	a,0x00
1779  056C  DD 77 FD    	ld	(ix-3),a
1780  056F  E1          	pop	hl
1781  0570  7E          	ld	a,(hl)
1782  0571  E5          	push	hl
1783  0572  32 00 00    	ld	(_s_col0),a
1784  0575  2A 00 00    	ld	hl,(_s_lin0)
1785  0578  C5          	push	bc
1786  0579  67          	ld	h,a
1787  057A  E5          	push	hl
1788  057B  CD 00 00    	call	_spr_calc_index
1789  057E  F1          	pop	af
1790  057F  EB          	ex	de,hl
1791  0580  C1          	pop	bc
1792  0581  ED 53 00 00 	ld	(_index0),de
1793  0585  21 00 00    	ld	hl,_s_tile0
1794  0588  36 00       	ld	(hl),0x00
1795  058A  C5          	push	bc
1796  058B  21 00 00    	ld	hl,0x0000
1797  058E  E5          	push	hl
1798  058F  AF          	xor	a, a
1799  0590  48          	ld	c,b
1800  0591  47          	ld	b,a
1801  0592  C5          	push	bc
1802  0593  CD 00 00    	call	_NIRVANAP_spriteT_callee
1803  0596  CD 8E 06    	call	_spr_back_repaint
1804  0599  C1          	pop	bc
1805  059A  3E 00       	ld	a, +((_tile) & 0xFF)
1806  059C  80          	add	a, b
1807  059D  5F          	ld	e, a
1808  059E  3E 00       	ld	a, +((_tile) / 256)
1809  05A0  CE 00       	adc	a,0x00
1810  05A2  E1          	pop	hl
1811  05A3  57          	ld	d,a
1812  05A4  3A 00 00    	ld	a,(_s_tile0)
1813  05A7  12          	ld	(de),a
1814  05A8  E5          	push	hl
1815  05A9  36 00       	ld	(hl),0x00
1816  05AB  DD 6E FE    	ld	l,(ix-2)
1817  05AE  DD 66 FF    	ld	h,(ix-1)
1818  05B1  36 00       	ld	(hl),0x00
1819  05B3  11 00 00    	ld	de,_class+0
1820  05B6  68          	ld	l,b
1821  05B7  26 00       	ld	h,0x00
1822  05B9  19          	add	hl, de
1823  05BA  36 00       	ld	(hl),0x00
1824  05BC  11 00 00    	ld	de,_state+0
1825  05BF  68          	ld	l,b
1826  05C0  26 00       	ld	h,0x00
1827  05C2  19          	add	hl, de
1828  05C3  36 00       	ld	(hl),0x00
1829  05C5  11 00 00    	ld	de,_state_a+0
1830  05C8  68          	ld	l,b
1831  05C9  26 00       	ld	h,0x00
1832  05CB  19          	add	hl, de
1833  05CC  36 00       	ld	(hl),0x00
1834  05CE  DD F9       	ld	sp, ix
1835  05D0  DD E1       	pop	ix
1836  05D2  C9          	ret
1837  05D3              	SECTION code_compiler
1838  05D3              ;	---------------------------------
1839  05D3              ; Function spr_tile
1840  05D3              ; ---------------------------------
1841  05D3              _spr_tile:
1842  05D3  CD 00 00    	call	___sdcc_enter_ix
1843  05D6  F5          	push	af
1844  05D7  DD 75 FE    	ld	(ix-2),l
1845  05DA  DD 74 FF    	ld	(ix-1),h
1846  05DD  21 00 00    	ld	hl,_tmp0
1847  05E0  36 00       	ld	(hl),0x00
1848  05E2  E1          	pop	hl
1849  05E3  01 00 00    	ld	bc,_class+0
1850  05E6  E5          	push	hl
1851  05E7  6E          	ld	l, (hl)
1852  05E8  26 00       	ld	h,0x00
1853  05EA  09          	add	hl, bc
1854  05EB  4E          	ld	c, (hl)
1855  05EC              l_spr_tile_00103:
1856  05EC  21 00 00    	ld	hl,_tmp0
1857  05EF  7E          	ld	a, (hl)
1858  05F0  D6 14       	sub	a,0x14
1859  05F2  30 3A       	jr	NC,l_spr_tile_00105
1860  05F4  7E          	ld	a, (hl)
1861  05F5  5F          	ld	e, a
1862  05F6  87          	add	a, a
1863  05F7  83          	add	a, e
1864  05F8  21 00 00    	ld	hl,_tmp1
1865  05FB  77          	ld	(hl), a
1866  05FC  C6 00       	add	a,+((_spr_map_tile) & 0xFF)
1867  05FE  5F          	ld	e, a
1868  05FF  3E 00       	ld	a, +((_spr_map_tile) / 256)
1869  0601  CE 00       	adc	a,0x00
1870  0603  57          	ld	d, a
1871  0604  1A          	ld	a, (de)
1872  0605  47          	ld	b, a
1873  0606  79          	ld	a, c
1874  0607  90          	sub	a, b
1875  0608  20 1E       	jr	NZ,l_spr_tile_00102
1876  060A  4E          	ld	c, (hl)
1877  060B  06 00       	ld	b,0x00
1878  060D  59          	ld	e, c
1879  060E  50          	ld	d, b
1880  060F  13          	inc	de
1881  0610  13          	inc	de
1882  0611  21 00 00    	ld	hl,_spr_map_tile
1883  0614  19          	add	hl,de
1884  0615  03          	inc	bc
1885  0616  EB          	ex	de,hl
1886  0617  21 00 00    	ld	hl,_spr_map_tile
1887  061A  09          	add	hl, bc
1888  061B  C1          	pop	bc
1889  061C  C5          	push	bc
1890  061D  D5          	push	de
1891  061E  C5          	push	bc
1892  061F  E5          	push	hl
1893  0620  CD 34 06    	call	_spr_tile_dir
1894  0623  F1          	pop	af
1895  0624  F1          	pop	af
1896  0625  F1          	pop	af
1897  0626  18 08       	jr	l_spr_tile_00106
1898  0628              l_spr_tile_00102:
1899  0628  21 00 00    	ld	hl,_tmp0
1900  062B  34          	inc	(hl)
1901  062C  18 BE       	jr	l_spr_tile_00103
1902  062E              l_spr_tile_00105:
1903  062E  2E 00       	ld	l,0x00
1904  0630              l_spr_tile_00106:
1905  0630  F1          	pop	af
1906  0631  DD E1       	pop	ix
1907  0633  C9          	ret
1908  0634              	SECTION code_compiler
1909  0634              ;	---------------------------------
1910  0634              ; Function spr_tile_dir
1911  0634              ; ---------------------------------
1912  0634              _spr_tile_dir:
1913  0634  CD 00 00    	call	___sdcc_enter_ix
1914  0637  F5          	push	af
1915  0638  11 00 00    	ld	de,_state+0
1916  063B  DD 4E 06    	ld	c,(ix+6)
1917  063E  DD 46 07    	ld	b,(ix+7)
1918  0641  0A          	ld	a, (bc)
1919  0642  4F          	ld	c, a
1920  0643  69          	ld	l,c
1921  0644  26 00       	ld	h,0x00
1922  0646  19          	add	hl, de
1923  0647  46          	ld	b, (hl)
1924  0648  DD 5E 04    	ld	e,(ix+4)
1925  064B  DD 56 05    	ld	d,(ix+5)
1926  064E  1A          	ld	a, (de)
1927  064F  5F          	ld	e, a
1928  0650  CB 50       	bit	2, b
1929  0652  28 03       	jr	Z,l_spr_tile_dir_00102
1930  0654  6B          	ld	l, e
1931  0655  18 33       	jr	l_spr_tile_dir_00109
1932  0657              l_spr_tile_dir_00102:
1933  0657  DD 7E 08    	ld	a,(ix+8)
1934  065A  DD 77 FE    	ld	(ix-2),a
1935  065D  DD 7E 09    	ld	a,(ix+9)
1936  0660  DD 77 FF    	ld	(ix-1),a
1937  0663  CB 58       	bit	3, b
1938  0665  28 08       	jr	Z,l_spr_tile_dir_00104
1939  0667  E1          	pop	hl
1940  0668  4E          	ld	c,(hl)
1941  0669  E5          	push	hl
1942  066A  7B          	ld	a, e
1943  066B  81          	add	a, c
1944  066C  6F          	ld	l, a
1945  066D  18 1B       	jr	l_spr_tile_dir_00109
1946  066F              l_spr_tile_dir_00104:
1947  066F  06 00       	ld	b,0x00
1948  0671  21 00 00    	ld	hl,_state_a
1949  0674  09          	add	hl, bc
1950  0675  4E          	ld	c, (hl)
1951  0676  CB 61       	bit	4, c
1952  0678  28 03       	jr	Z,l_spr_tile_dir_00106
1953  067A  6B          	ld	l, e
1954  067B  18 0D       	jr	l_spr_tile_dir_00109
1955  067D              l_spr_tile_dir_00106:
1956  067D  CB 59       	bit	3, c
1957  067F  28 08       	jr	Z,l_spr_tile_dir_00108
1958  0681  E1          	pop	hl
1959  0682  4E          	ld	c,(hl)
1960  0683  E5          	push	hl
1961  0684  7B          	ld	a, e
1962  0685  81          	add	a, c
1963  0686  6F          	ld	l, a
1964  0687  18 01       	jr	l_spr_tile_dir_00109
1965  0689              l_spr_tile_dir_00108:
1966  0689  6B          	ld	l, e
1967  068A              l_spr_tile_dir_00109:
1968  068A  F1          	pop	af
1969  068B  DD E1       	pop	ix
1970  068D  C9          	ret
1971  068E              	SECTION code_compiler
1972  068E              ;	---------------------------------
1973  068E              ; Function spr_back_repaint
1974  068E              ; ---------------------------------
1975  068E              _spr_back_repaint:
1976  068E  2A FF FF    	ld	hl,(_s_col0 - 1)
1977  0691  3A 00 00    	ld	a,(_s_lin0)
1978  0694  6F          	ld	l,a
1979  0695  E5          	push	hl
1980  0696  CD 00 00    	call	_spr_calc_index
1981  0699  F1          	pop	af
1982  069A  22 00 00    	ld	(_index1),hl
1983  069D  21 00 00    	ld	hl,_s_lin0
1984  06A0  4E          	ld	c, (hl)
1985  06A1  CB 39       	srl	c
1986  06A3  CB 39       	srl	c
1987  06A5  CB 39       	srl	c
1988  06A7  21 00 00    	ld	hl,_s_lin1
1989  06AA  71          	ld	(hl),c
1990  06AB  79          	ld	a,c
1991  06AC  07          	rlca
1992  06AD  07          	rlca
1993  06AE  07          	rlca
1994  06AF  E6 F8       	and	a,0xf8
1995  06B1  77          	ld	(hl),a
1996  06B2  C6 10       	add	a,0x10
1997  06B4  77          	ld	(hl), a
1998  06B5  79          	ld	a, c
1999  06B6  3C          	inc	a
2000  06B7  32 00 00    	ld	(_s_row1),a
2001  06BA  3A 00 00    	ld	a,(_s_col0)
2002  06BD  32 00 00    	ld	(_s_col1),a
2003  06C0  CD 00 00    	call	_game_cell_paint
2004  06C3  21 00 00    	ld	hl,_index1
2005  06C6  34          	inc	(hl)
2006  06C7  20 02       	jr	NZ,l_spr_back_repaint_00109
2007  06C9  23          	inc	hl
2008  06CA  34          	inc	(hl)
2009  06CB              l_spr_back_repaint_00109:
2010  06CB  21 00 00    	ld	hl,_s_col1
2011  06CE  34          	inc	(hl)
2012  06CF  CD 00 00    	call	_game_cell_paint
2013  06D2  21 00 00    	ld	hl,_s_lin1
2014  06D5  7E          	ld	a, (hl)
2015  06D6  C6 08       	add	a,0x08
2016  06D8  77          	ld	(hl), a
2017  06D9  21 00 00    	ld	hl,_s_row1
2018  06DC  34          	inc	(hl)
2019  06DD  2A 00 00    	ld	hl,(_index1)
2020  06E0  11 20 00    	ld	de,0x0020
2021  06E3  19          	add	hl,de
2022  06E4  22 00 00    	ld	(_index1),hl
2023  06E7  CD 00 00    	call	_game_cell_paint
2024  06EA  2A 00 00    	ld	hl,(_index1)
2025  06ED  2B          	dec	hl
2026  06EE  22 00 00    	ld	(_index1),hl
2027  06F1  21 00 00    	ld	hl,_s_col1
2028  06F4  35          	dec	(hl)
2029  06F5  CD 00 00    	call	_game_cell_paint
2030  06F8  21 00 00    	ld	hl,_s_lin0
2031  06FB  CB 4E       	bit	1, (hl)
2032  06FD  28 27       	jr	Z,l_spr_back_repaint_00103
2033  06FF  21 00 00    	ld	hl,_s_lin1
2034  0702  7E          	ld	a, (hl)
2035  0703  C6 08       	add	a,0x08
2036  0705  77          	ld	(hl), a
2037  0706  21 00 00    	ld	hl,_s_row1
2038  0709  34          	inc	(hl)
2039  070A  2A 00 00    	ld	hl,(_index1)
2040  070D  11 20 00    	ld	de,0x0020
2041  0710  19          	add	hl,de
2042  0711  22 00 00    	ld	(_index1),hl
2043  0714  CD 00 00    	call	_game_cell_paint
2044  0717  21 00 00    	ld	hl,_index1
2045  071A  34          	inc	(hl)
2046  071B  20 02       	jr	NZ,l_spr_back_repaint_00111
2047  071D  23          	inc	hl
2048  071E  34          	inc	(hl)
2049  071F              l_spr_back_repaint_00111:
2050  071F  21 00 00    	ld	hl,_s_col1
2051  0722  34          	inc	(hl)
2052  0723  CD 00 00    	call	_game_cell_paint
2053  0726              l_spr_back_repaint_00103:
2054  0726  C9          	ret
2055  0727              	SECTION code_compiler
2056  0727              ;	---------------------------------
2057  0727              ; Function spr_init_effects
2058  0727              ; ---------------------------------
2059  0727              _spr_init_effects:
2060  0727  01 00 00    	ld	bc,_anim_lin+0
2061  072A  1E 00       	ld	e,0x00
2062  072C              l_spr_init_effects_00102:
2063  072C  6B          	ld	l,e
2064  072D  26 00       	ld	h,0x00
2065  072F  09          	add	hl, bc
2066  0730  36 FF       	ld	(hl),0xff
2067  0732  1C          	inc	e
2068  0733  3E 07       	ld	a,0x07
2069  0735  93          	sub	a, e
2070  0736  30 F4       	jr	NC,l_spr_init_effects_00102
2071  0738  21 00 00    	ld	hl,_anim_count
2072  073B  36 00       	ld	(hl),0x00
2073  073D  C9          	ret
2074  073E              	SECTION code_compiler
2075  073E              ;	---------------------------------
2076  073E              ; Function spr_add_anim
2077  073E              ; ---------------------------------
2078  073E              _spr_add_anim:
2079  073E  CD 00 00    	call	___sdcc_enter_ix
2080  0741  DD 7E 05    	ld	a,(ix+5)
2081  0744  D6 1F       	sub	a,0x1f
2082  0746  D2 E2 07    	jp	NC, l_spr_add_anim_00111
2083  0749  DD 7E 04    	ld	a,(ix+4)
2084  074C  D6 B8       	sub	a,0xb8
2085  074E  D2 E2 07    	jp	NC, l_spr_add_anim_00111
2086  0751  01 00 00    	ld	bc,0x0000
2087  0754              l_spr_add_anim_00109:
2088  0754  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2089  0756  80          	add	a, b
2090  0757  5F          	ld	e, a
2091  0758  3E 00       	ld	a, +((_anim_lin) / 256)
2092  075A  CE 00       	adc	a,0x00
2093  075C  57          	ld	d, a
2094  075D  1A          	ld	a, (de)
2095  075E  3C          	inc	a
2096  075F  20 79       	jr	NZ,l_spr_add_anim_00110
2097  0761  76          	halt
2098  0762  21 00 00    	ld	hl,_anim_count
2099  0765  34          	inc	(hl)
2100  0766  DD 7E 04    	ld	a,(ix+4)
2101  0769  12          	ld	(de), a
2102  076A  3E 00       	ld	a, +((_anim_col) & 0xFF)
2103  076C  81          	add	a, c
2104  076D  5F          	ld	e, a
2105  076E  3E 00       	ld	a, +((_anim_col) / 256)
2106  0770  CE 00       	adc	a,0x00
2107  0772  57          	ld	d, a
2108  0773  DD 7E 05    	ld	a,(ix+5)
2109  0776  12          	ld	(de), a
2110  0777  3E 00       	ld	a, +((_anim_tile) & 0xFF)
2111  0779  81          	add	a, c
2112  077A  5F          	ld	e, a
2113  077B  3E 00       	ld	a, +((_anim_tile) / 256)
2114  077D  CE 00       	adc	a,0x00
2115  077F  57          	ld	d, a
2116  0780  DD 7E 06    	ld	a,(ix+6)
2117  0783  12          	ld	(de), a
2118  0784  3E 00       	ld	a, +((_anim_loop) & 0xFF)
2119  0786  81          	add	a, c
2120  0787  5F          	ld	e, a
2121  0788  3E 00       	ld	a, +((_anim_loop) / 256)
2122  078A  CE 00       	adc	a,0x00
2123  078C  57          	ld	d, a
2124  078D  DD 7E 08    	ld	a,(ix+8)
2125  0790  12          	ld	(de), a
2126  0791  11 00 00    	ld	de,_anim_int+0
2127  0794  69          	ld	l,c
2128  0795  26 00       	ld	h,0x00
2129  0797  19          	add	hl, de
2130  0798  36 00       	ld	(hl),0x00
2131  079A  3E 00       	ld	a, +((_anim_end) & 0xFF)
2132  079C  81          	add	a, c
2133  079D  5F          	ld	e, a
2134  079E  3E 00       	ld	a, +((_anim_end) / 256)
2135  07A0  CE 00       	adc	a,0x00
2136  07A2  57          	ld	d, a
2137  07A3  DD 7E 07    	ld	a,(ix+7)
2138  07A6  12          	ld	(de), a
2139  07A7  C5          	push	bc
2140  07A8  DD 66 05    	ld	h,(ix+5)
2141  07AB  DD 6E 04    	ld	l,(ix+4)
2142  07AE  E5          	push	hl
2143  07AF  DD 7E 06    	ld	a,(ix+6)
2144  07B2  F5          	push	af
2145  07B3  33          	inc	sp
2146  07B4  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2147  07B7  DD 66 05    	ld	h,(ix+5)
2148  07BA  DD 6E 04    	ld	l,(ix+4)
2149  07BD  E5          	push	hl
2150  07BE  CD 00 00    	call	_spr_calc_index
2151  07C1  F1          	pop	af
2152  07C2  EB          	ex	de,hl
2153  07C3  C1          	pop	bc
2154  07C4  ED 53 00 00 	ld	(_index0),de
2155  07C8  11 00 00    	ld	de,_scr_map
2156  07CB  2A 00 00    	ld	hl,(_index0)
2157  07CE  19          	add	hl,de
2158  07CF  7E          	ld	a,(hl)
2159  07D0  EB          	ex	de,hl
2160  07D1  B7          	or	a, a
2161  07D2  20 0E       	jr	NZ,l_spr_add_anim_00111
2162  07D4  79          	ld	a, c
2163  07D5  C6 80       	add	a,0x80
2164  07D7  12          	ld	(de), a
2165  07D8  18 08       	jr	l_spr_add_anim_00111
2166  07DA              l_spr_add_anim_00110:
2167  07DA  04          	inc	b
2168  07DB  78          	ld	a,b
2169  07DC  48          	ld	c,b
2170  07DD  D6 08       	sub	a,0x08
2171  07DF  DA 54 07    	jp	C, l_spr_add_anim_00109
2172  07E2              l_spr_add_anim_00111:
2173  07E2  DD E1       	pop	ix
2174  07E4  C9          	ret
2175  07E5              	SECTION code_compiler
2176  07E5              ;	---------------------------------
2177  07E5              ; Function spr_play_anim
2178  07E5              ; ---------------------------------
2179  07E5              _spr_play_anim:
2180  07E5  CD 00 00    	call	___sdcc_enter_ix
2181  07E8  F5          	push	af
2182  07E9  F5          	push	af
2183  07EA  F5          	push	af
2184  07EB  3B          	dec	sp
2185  07EC  0E 00       	ld	c,0x00
2186  07EE  DD 71 F9    	ld	(ix-7),c
2187  07F1              l_spr_play_anim_00114:
2188  07F1  3E 00       	ld	a, +((_anim_lin) & 0xFF)
2189  07F3  81          	add	a, c
2190  07F4  5F          	ld	e, a
2191  07F5  3E 00       	ld	a, +((_anim_lin) / 256)
2192  07F7  CE 00       	adc	a,0x00
2193  07F9  57          	ld	d, a
2194  07FA  1A          	ld	a, (de)
2195  07FB  DD 77 FF    	ld	(ix-1),a
2196  07FE  3C          	inc	a
2197  07FF  CA CE 08    	jp	Z,l_spr_play_anim_00115
2198  0802  3E 00       	ld	a, +((_anim_int) & 0xFF)
2199  0804  81          	add	a, c
2200  0805  DD 77 FD    	ld	(ix-3),a
2201  0808  3E 00       	ld	a,+((_anim_int) / 256)
2202  080A  CE 00       	adc	a,0x00
2203  080C  DD 77 FE    	ld	(ix-2),a
2204  080F  06 00       	ld	b,0x00
2205  0811  21 00 00    	ld	hl,_anim_end
2206  0814  09          	add	hl,bc
2207  0815  7E          	ld	a,(hl)
2208  0816  97          	sub	a,a
2209  0817  30 3B       	jr	NC,l_spr_play_anim_00109
2210  0819  DD CB F9 46 	bit	0,(ix-7)
2211  081D  20 01       	jr	NZ,l_spr_play_anim_00102
2212  081F  76          	halt
2213  0820              l_spr_play_anim_00102:
2214  0820  06 00       	ld	b,0x00
2215  0822  21 00 00    	ld	hl,_anim_col
2216  0825  09          	add	hl, bc
2217  0826  46          	ld	b, (hl)
2218  0827  1A          	ld	a, (de)
2219  0828  57          	ld	d, a
2220  0829  3E 00       	ld	a, +((_anim_tile) & 0xFF)
2221  082B  81          	add	a, c
2222  082C  6F          	ld	l, a
2223  082D  3E 00       	ld	a, +((_anim_tile) / 256)
2224  082F  CE 00       	adc	a,0x00
2225  0831  67          	ld	h, a
2226  0832  5E          	ld	e, (hl)
2227  0833  DD 6E FD    	ld	l,(ix-3)
2228  0836  DD 66 FE    	ld	h,(ix-2)
2229  0839  6E          	ld	l, (hl)
2230  083A  7B          	ld	a, e
2231  083B  85          	add	a, l
2232  083C  C5          	push	bc
2233  083D  4A          	ld	c, d
2234  083E  C5          	push	bc
2235  083F  F5          	push	af
2236  0840  33          	inc	sp
2237  0841  CD 00 00    	call	_NIRVANAP_drawT_raw_callee
2238  0844  C1          	pop	bc
2239  0845  DD 34 F9    	inc	(ix-7)
2240  0848  DD 6E FD    	ld	l,(ix-3)
2241  084B  DD 66 FE    	ld	h,(ix-2)
2242  084E  46          	ld	b,(hl)
2243  084F  04          	inc	b
2244  0850  70          	ld	(hl), b
2245  0851  C3 CE 08    	jp	l_spr_play_anim_00115
2246  0854              l_spr_play_anim_00109:
2247  0854  06 00       	ld	b,0x00
2248  0856  21 00 00    	ld	hl,_anim_loop
2249  0859  09          	add	hl, bc
2250  085A  7E          	ld	a, (hl)
2251  085B  DD 77 FC    	ld	(ix-4),a
2252  085E  B7          	or	a, a
2253  085F  20 60       	jr	NZ,l_spr_play_anim_00106
2254  0861  21 00 00    	ld	hl,_anim_count
2255  0864  35          	dec	(hl)
2256  0865  06 00       	ld	b,0x00
2257  0867  21 00 00    	ld	hl,_anim_col
2258  086A  09          	add	hl, bc
2259  086B  7E          	ld	a, (hl)
2260  086C  32 00 00    	ld	(_s_col0),a
2261  086F  DD 7E FF    	ld	a,(ix-1)
2262  0872  32 00 00    	ld	(_s_lin0),a
2263  0875  3A 00 00    	ld	a,(_s_col0)
2264  0878  2A 00 00    	ld	hl,(_s_lin0)
2265  087B  C5          	push	bc
2266  087C  D5          	push	de
2267  087D  67          	ld	h,a
2268  087E  E5          	push	hl
2269  087F  CD 00 00    	call	_spr_calc_index
2270  0882  F1          	pop	af
2271  0883  DD 74 FB    	ld	(ix-5),h
2272  0886  DD 75 FA    	ld	(ix-6),l
2273  0889  D1          	pop	de
2274  088A  C1          	pop	bc
2275  088B  DD 6E FA    	ld	l,(ix-6)
2276  088E  DD 66 FB    	ld	h,(ix-5)
2277  0891  22 00 00    	ld	(_index0),hl
2278  0894  3E 00       	ld	a,+((_scr_map) & 0xFF)
2279  0896  21 00 00    	ld	hl,_index0
2280  0899  86          	add	a, (hl)
2281  089A  DD 77 FA    	ld	(ix-6),a
2282  089D  3E 00       	ld	a, +((_scr_map) / 256)
2283  089F  23          	inc	hl
2284  08A0  8E          	adc	a, (hl)
2285  08A1  DD 6E FA    	ld	l,(ix-6)
2286  08A4  DD 77 FB    	ld	(ix-5),a
2287  08A7  67          	ld	h,a
2288  08A8  7E          	ld	a, (hl)
2289  08A9  D6 80       	sub	a,0x80
2290  08AB  38 08       	jr	C,l_spr_play_anim_00104
2291  08AD  DD 6E FA    	ld	l,(ix-6)
2292  08B0  DD 66 FB    	ld	h,(ix-5)
2293  08B3  36 00       	ld	(hl),0x00
2294  08B5              l_spr_play_anim_00104:
2295  08B5  C5          	push	bc
2296  08B6  D5          	push	de
2297  08B7  CD 8E 06    	call	_spr_back_repaint
2298  08BA  D1          	pop	de
2299  08BB  C1          	pop	bc
2300  08BC  3E FF       	ld	a,0xff
2301  08BE  12          	ld	(de), a
2302  08BF  18 0D       	jr	l_spr_play_anim_00115
2303  08C1              l_spr_play_anim_00106:
2304  08C1  DD 46 FC    	ld	b,(ix-4)
2305  08C4  05          	dec	b
2306  08C5  70          	ld	(hl), b
2307  08C6  DD 6E FD    	ld	l,(ix-3)
2308  08C9  DD 66 FE    	ld	h,(ix-2)
2309  08CC  36 FF       	ld	(hl),0xff
2310  08CE              l_spr_play_anim_00115:
2311  08CE  0C          	inc	c
2312  08CF  79          	ld	a, c
2313  08D0  D6 08       	sub	a,0x08
2314  08D2  DA F1 07    	jp	C, l_spr_play_anim_00114
2315  08D5  DD F9       	ld	sp, ix
2316  08D7  DD E1       	pop	ix
2317  08D9  C9          	ret
2318  08DA              	SECTION code_compiler
2319  08DA              ;	---------------------------------
2320  08DA              ; Function spr_colision_boss
2321  08DA              ; ---------------------------------
2322  08DA              _spr_colision_boss:
2323  08DA  CD 00 00    	call	___sdcc_enter_ix
2324  08DD  DD 5E 05    	ld	e,(ix+5)
2325  08E0  16 00       	ld	d,0x00
2326  08E2  13          	inc	de
2327  08E3  3A 00 00    	ld	a,(_boss_col)
2328  08E6  4F          	ld	c,a
2329  08E7  06 00       	ld	b,0x00
2330  08E9  03          	inc	bc
2331  08EA  03          	inc	bc
2332  08EB  60          	ld	h, b
2333  08EC  7B          	ld	a, e
2334  08ED  91          	sub	a, c
2335  08EE  6F          	ld	l, a
2336  08EF  7A          	ld	a, d
2337  08F0  9C          	sbc	a, h
2338  08F1  67          	ld	h, a
2339  08F2  CD 00 00    	call	_abs_fastcall
2340  08F5  7D          	ld	a,l
2341  08F6  32 00 00    	ld	(_tmp0),a
2342  08F9  D6 02       	sub	a,0x02
2343  08FB  30 2A       	jr	NC,l_spr_colision_boss_00104
2344  08FD  DD 4E 04    	ld	c,(ix+4)
2345  0900  06 00       	ld	b,0x00
2346  0902  21 08 00    	ld	hl,0x0008
2347  0905  09          	add	hl,bc
2348  0906  3A 00 00    	ld	a,(_boss_lin)
2349  0909  5F          	ld	e,a
2350  090A  16 00       	ld	d,0x00
2351  090C  4D          	ld	c,l
2352  090D  44          	ld	b,h
2353  090E  21 10 00    	ld	hl,0x0010
2354  0911  19          	add	hl, de
2355  0912  79          	ld	a, c
2356  0913  95          	sub	a, l
2357  0914  6F          	ld	l, a
2358  0915  78          	ld	a, b
2359  0916  9C          	sbc	a, h
2360  0917  67          	ld	h, a
2361  0918  CD 00 00    	call	_abs_fastcall
2362  091B  7D          	ld	a,l
2363  091C  32 00 00    	ld	(_tmp1),a
2364  091F  D6 10       	sub	a,0x10
2365  0921  30 04       	jr	NC,l_spr_colision_boss_00104
2366  0923  2E 01       	ld	l,0x01
2367  0925  18 02       	jr	l_spr_colision_boss_00105
2368  0927              l_spr_colision_boss_00104:
2369  0927  2E 00       	ld	l,0x00
2370  0929              l_spr_colision_boss_00105:
2371  0929  DD E1       	pop	ix
2372  092B  C9          	ret
2373  092C              	SECTION code_compiler
2374  092C              ;	---------------------------------
2375  092C              ; Function spr_turn_horizontal
2376  092C              ; ---------------------------------
2377  092C              _spr_turn_horizontal:
2378  092C  21 00 00    	ld	hl,_s_state
2379  092F  CB 56       	bit	2,(hl)
2380  0931  28 05       	jr	Z,l_spr_turn_horizontal_00102
2381  0933  CD 73 00    	call	_spr_set_left
2382  0936  18 06       	jr	l_spr_turn_horizontal_00103
2383  0938              l_spr_turn_horizontal_00102:
2384  0938  21 00 00    	ld	hl,_s_state
2385  093B  CD 7A 00    	call	_spr_set_right
2386  093E              l_spr_turn_horizontal_00103:
2387  093E  2A 00 00    	ld	hl,(_sprite)
2388  0941  26 00       	ld	h,0x00
2389  0943  01 00 00    	ld	bc,_state
2390  0946  09          	add	hl,bc
2391  0947  3A 00 00    	ld	a,(_s_state)
2392  094A  77          	ld	(hl),a
2393  094B  2A 00 00    	ld	hl,(_sprite)
2394  094E  26 00       	ld	h,0x00
2395  0950  01 00 00    	ld	bc,_tile
2396  0953  09          	add	hl,bc
2397  0954  E5          	push	hl
2398  0955  21 00 00    	ld	hl,_sprite
2399  0958  CD D3 05    	call	_spr_tile
2400  095B  C1          	pop	bc
2401  095C  7D          	ld	a,l
2402  095D  02          	ld	(bc), a
2403  095E  C9          	ret
2404  095F              	SECTION code_compiler
2405  095F              ;	---------------------------------
2406  095F              ; Function spr_btile_paint_back
2407  095F              ; ---------------------------------
2408  095F              _spr_btile_paint_back:
2409  095F  CD 00 00    	call	___sdcc_enter_ix
2410  0962  F5          	push	af
2411  0963  21 20 00    	ld	hl,0x0020
2412  0966  22 00 00    	ld	(_tmp_ui),hl
2413  0969  21 00 00    	ld	hl,_map_paper
2414  096C  7E          	ld	a, (hl)
2415  096D  0F          	rrca
2416  096E  0F          	rrca
2417  096F  0F          	rrca
2418  0970  E6 1F       	and	a,0x1f
2419  0972  B6          	or	a, (hl)
2420  0973  32 00 00    	ld	(_map_paper_clr),a
2421  0976  DD 36 FE 00 	ld	(ix-2),0x00
2422  097A              l_spr_btile_paint_back_00120:
2423  097A  21 00 00    	ld	hl,_tmp_ui
2424  097D  7E          	ld	a, (hl)
2425  097E  D6 20       	sub	a,0x20
2426  0980  23          	inc	hl
2427  0981  7E          	ld	a, (hl)
2428  0982  DE 2D       	sbc	a,0x2d
2429  0984  D2 32 0A    	jp	NC, l_spr_btile_paint_back_00122
2430  0987  DD 7E FE    	ld	a,(ix-2)
2431  098A  D6 49       	sub	a,0x49
2432  098C  30 0E       	jr	NC,l_spr_btile_paint_back_00119
2433  098E  DD 7E FE    	ld	a,(ix-2)
2434  0991  D6 0D       	sub	a,0x0d
2435  0993  28 07       	jr	Z,l_spr_btile_paint_back_00119
2436  0995  DD 7E FE    	ld	a,(ix-2)
2437  0998  D6 0E       	sub	a,0x0e
2438  099A  20 08       	jr	NZ,l_spr_btile_paint_back_00115
2439  099C              l_spr_btile_paint_back_00119:
2440  099C  3E 58       	ld	a,0x58
2441  099E  DD 96 FE    	sub	a,(ix-2)
2442  09A1  D2 22 0A    	jp	NC, l_spr_btile_paint_back_00116
2443  09A4              l_spr_btile_paint_back_00115:
2444  09A4  21 00 00    	ld	hl,_tmp0
2445  09A7  36 00       	ld	(hl),0x00
2446  09A9  3A 00 00    	ld	a,(_map_paper_last)
2447  09AC  DD 77 FF    	ld	(ix-1),a
2448  09AF  4F          	ld	c, a
2449  09B0  3E 38       	ld	a,0x38
2450  09B2  DD 96 FE    	sub	a,(ix-2)
2451  09B5  30 07       	jr	NC,l_spr_btile_paint_back_00109
2452  09B7  DD 7E FE    	ld	a,(ix-2)
2453  09BA  D6 41       	sub	a,0x41
2454  09BC  38 0E       	jr	C,l_spr_btile_paint_back_00105
2455  09BE              l_spr_btile_paint_back_00109:
2456  09BE  3E 10       	ld	a,0x10
2457  09C0  DD 96 FE    	sub	a,(ix-2)
2458  09C3  30 24       	jr	NC,l_spr_btile_paint_back_00112
2459  09C5  DD 7E FE    	ld	a,(ix-2)
2460  09C8  D6 14       	sub	a,0x14
2461  09CA  30 1D       	jr	NC,l_spr_btile_paint_back_00112
2462  09CC              l_spr_btile_paint_back_00105:
2463  09CC  3A 00 00    	ld	a,(_map_paper)
2464  09CF  D6 10       	sub	a,0x10
2465  09D1  20 0B       	jr	NZ,l_spr_btile_paint_back_00102
2466  09D3  21 00 00    	ld	hl,_tmp0
2467  09D6  36 10       	ld	(hl),0x10
2468  09D8  DD 7E FF    	ld	a,(ix-1)
2469  09DB  32 00 00    	ld	(_map_paper_last_a),a
2470  09DE              l_spr_btile_paint_back_00102:
2471  09DE  3A 00 00    	ld	a,(_map_paper_last)
2472  09E1  D6 10       	sub	a,0x10
2473  09E3  20 04       	jr	NZ,l_spr_btile_paint_back_00112
2474  09E5  21 00 00    	ld	hl,_map_paper_last_a
2475  09E8  4E          	ld	c, (hl)
2476  09E9              l_spr_btile_paint_back_00112:
2477  09E9  3A 00 00    	ld	a,(_tmp0)
2478  09EC  D6 10       	sub	a,0x10
2479  09EE  30 32       	jr	NC,l_spr_btile_paint_back_00116
2480  09F0  3E 00       	ld	a, +((_btiles) & 0xFF)
2481  09F2  21 00 00    	ld	hl,_tmp_ui
2482  09F5  86          	add	a, (hl)
2483  09F6  47          	ld	b, a
2484  09F7  3E 00       	ld	a, +((_btiles) / 256)
2485  09F9  23          	inc	hl
2486  09FA  8E          	adc	a, (hl)
2487  09FB  57          	ld	d, a
2488  09FC  78          	ld	a, b
2489  09FD  21 00 00    	ld	hl,_tmp0
2490  0A00  86          	add	a, (hl)
2491  0A01  5F          	ld	e, a
2492  0A02  7A          	ld	a, d
2493  0A03  CE 00       	adc	a,0x00
2494  0A05  57          	ld	d, a
2495  0A06  1A          	ld	a, (de)
2496  0A07  21 00 00    	ld	hl,_tmp
2497  0A0A  77          	ld	(hl),a
2498  0A0B  E6 38       	and	a,0x38
2499  0A0D  91          	sub	a, c
2500  0A0E  20 0C       	jr	NZ,l_spr_btile_paint_back_00111
2501  0A10  7E          	ld	a, (hl)
2502  0A11  E6 C7       	and	a,0xc7
2503  0A13  77          	ld	(hl),a
2504  0A14  21 00 00    	ld	hl,_map_paper
2505  0A17  B6          	or	a, (hl)
2506  0A18  32 00 00    	ld	(_tmp),a
2507  0A1B  12          	ld	(de), a
2508  0A1C              l_spr_btile_paint_back_00111:
2509  0A1C  21 00 00    	ld	hl,_tmp0
2510  0A1F  34          	inc	(hl)
2511  0A20  18 C7       	jr	l_spr_btile_paint_back_00112
2512  0A22              l_spr_btile_paint_back_00116:
2513  0A22  2A 00 00    	ld	hl,(_tmp_ui)
2514  0A25  11 30 00    	ld	de,0x0030
2515  0A28  19          	add	hl,de
2516  0A29  22 00 00    	ld	(_tmp_ui),hl
2517  0A2C  DD 34 FE    	inc	(ix-2)
2518  0A2F  C3 7A 09    	jp	l_spr_btile_paint_back_00120
2519  0A32              l_spr_btile_paint_back_00122:
2520  0A32  3A 00 00    	ld	a,(_map_paper)
2521  0A35  32 00 00    	ld	(_map_paper_last),a
2522  0A38  CD 00 00    	call	_game_attribs
2523  0A3B  F1          	pop	af
2524  0A3C  DD E1       	pop	ix
2525  0A3E  C9          	ret
2526  0A3F              	SECTION code_compiler
2527  0A3F              ;	---------------------------------
2528  0A3F              ; Function spr_flatten
2529  0A3F              ; ---------------------------------
2530  0A3F              _spr_flatten:
2531  0A3F  06 00       	ld	b,0x00
2532  0A41              l_spr_flatten_00102:
2533  0A41  78          	ld	a, b
2534  0A42  07          	rlca
2535  0A43  07          	rlca
2536  0A44  07          	rlca
2537  0A45  E6 F8       	and	a,0xf8
2538  0A47  5F          	ld	e, a
2539  0A48  16 00       	ld	d,0x00
2540  0A4A  21 96 DC    	ld	hl,0xdc96
2541  0A4D  19          	add	hl, de
2542  0A4E  7E          	ld	a, (hl)
2543  0A4F  32 00 00    	ld	(_s_lin1),a
2544  0A52  16 00       	ld	d,0x00
2545  0A54  21 95 DC    	ld	hl,0xdc95
2546  0A57  19          	add	hl, de
2547  0A58  7E          	ld	a, (hl)
2548  0A59  32 00 00    	ld	(_s_col1),a
2549  0A5C  16 00       	ld	d,0x00
2550  0A5E  21 98 DC    	ld	hl,0xdc98
2551  0A61  19          	add	hl, de
2552  0A62  7E          	ld	a, (hl)
2553  0A63  32 00 00    	ld	(_s_tile1),a
2554  0A66  C5          	push	bc
2555  0A67  21 00 00    	ld	hl,0x0000
2556  0A6A  E5          	push	hl
2557  0A6B  AF          	xor	a, a
2558  0A6C  48          	ld	c,b
2559  0A6D  47          	ld	b,a
2560  0A6E  C5          	push	bc
2561  0A6F  CD 00 00    	call	_NIRVANAP_spriteT_callee
2562  0A72  2A FF FF    	ld	hl,(_s_col1 - 1)
2563  0A75  3A 00 00    	ld	a,(_s_lin1)
2564  0A78  6F          	ld	l,a
2565  0A79  3A 00 00    	ld	a,(_s_tile1)
2566  0A7C  E5          	push	hl
2567  0A7D  F5          	push	af
2568  0A7E  33          	inc	sp
2569  0A7F  CD 00 00    	call	_NIRVANAP_drawT_callee
2570  0A82  C1          	pop	bc
2571  0A83  04          	inc	b
2572  0A84  3E 07       	ld	a,0x07
2573  0A86  90          	sub	a, b
2574  0A87  30 B8       	jr	NC,l_spr_flatten_00102
2575  0A89  C9          	ret
2576  0A8A              	SECTION code_compiler
2577  0A8A              ;	---------------------------------
2578  0A8A              ; Function spr_unflattenP1
2579  0A8A              ; ---------------------------------
2580  0A8A              _spr_unflattenP1:
2581  0A8A  21 07 00    	ld	hl,+(_col + 0x0007)
2582  0A8D  46          	ld	b, (hl)
2583  0A8E  21 07 00    	ld	hl,+(_lin + 0x0007)
2584  0A91  4E          	ld	c, (hl)
2585  0A92  3A 00 00    	ld	a,(_s_tile1)
2586  0A95  C5          	push	bc
2587  0A96  F5          	push	af
2588  0A97  33          	inc	sp
2589  0A98  CD 00 00    	call	_NIRVANAP_drawT_callee
2590  0A9B  C9          	ret
2591  0A9C              	SECTION IGNORE
2592  0000              
