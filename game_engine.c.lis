1     0000              MODULE game_engine_c
2     0000              LINE 0, "game_engine.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _game_anim_conveyor
204   0000              	GLOBAL _game_tick
205   0000              	GLOBAL _game_end
206   0000              	GLOBAL _game_loop
207   0000              	GLOBAL _game_fps
208   0000              	GLOBAL _game_draw_map
209   0000              	GLOBAL _game_cell_paint_index
210   0000              	GLOBAL _game_cell_paint
211   0000              	GLOBAL _game_print_footer
212   0000              	GLOBAL _game_print_score
213   0000              	GLOBAL _game_cls
214   0000              	GLOBAL _game_update_stats
215   0000              	GLOBAL _game_start_timer
216   0000              	GLOBAL _game_round_init
217   0000              	GLOBAL _game_print_header
218   0000              	GLOBAL _game_check_map
219   0000              	GLOBAL _game_check_cell
220   0000              	GLOBAL _game_paint_attrib
221   0000              	GLOBAL _game_colour_message
222   0000              	GLOBAL _game_check_time
223   0000              	GLOBAL _game_rotate_attrib
224   0000              	GLOBAL _game_rotate_attrib_osd
225   0000              	GLOBAL _game_attribs
226   0000              	GLOBAL _game_page_map
227   0000              ;--------------------------------------------------------
228   0000              ; Externals used
229   0000              ;--------------------------------------------------------
230   0000              	GLOBAL _ffsll_callee
231   0000              	GLOBAL _ffsll
232   0000              	GLOBAL _strxfrm_callee
233   0000              	GLOBAL _strxfrm
234   0000              	GLOBAL _strupr_fastcall
235   0000              	GLOBAL _strupr
236   0000              	GLOBAL _strtok_r_callee
237   0000              	GLOBAL _strtok_r
238   0000              	GLOBAL _strtok_callee
239   0000              	GLOBAL _strtok
240   0000              	GLOBAL _strstrip_fastcall
241   0000              	GLOBAL _strstrip
242   0000              	GLOBAL _strstr_callee
243   0000              	GLOBAL _strstr
244   0000              	GLOBAL _strspn_callee
245   0000              	GLOBAL _strspn
246   0000              	GLOBAL _strsep_callee
247   0000              	GLOBAL _strsep
248   0000              	GLOBAL _strrstrip_fastcall
249   0000              	GLOBAL _strrstrip
250   0000              	GLOBAL _strrstr_callee
251   0000              	GLOBAL _strrstr
252   0000              	GLOBAL _strrspn_callee
253   0000              	GLOBAL _strrspn
254   0000              	GLOBAL _strrev_fastcall
255   0000              	GLOBAL _strrev
256   0000              	GLOBAL _strrcspn_callee
257   0000              	GLOBAL _strrcspn
258   0000              	GLOBAL _strrchr_callee
259   0000              	GLOBAL _strrchr
260   0000              	GLOBAL _strpbrk_callee
261   0000              	GLOBAL _strpbrk
262   0000              	GLOBAL _strnlen_callee
263   0000              	GLOBAL _strnlen
264   0000              	GLOBAL _strnicmp_callee
265   0000              	GLOBAL _strnicmp
266   0000              	GLOBAL _strndup_callee
267   0000              	GLOBAL _strndup
268   0000              	GLOBAL _strncpy_callee
269   0000              	GLOBAL _strncpy
270   0000              	GLOBAL _strncmp_callee
271   0000              	GLOBAL _strncmp
272   0000              	GLOBAL _strnchr_callee
273   0000              	GLOBAL _strnchr
274   0000              	GLOBAL _strncat_callee
275   0000              	GLOBAL _strncat
276   0000              	GLOBAL _strncasecmp_callee
277   0000              	GLOBAL _strncasecmp
278   0000              	GLOBAL _strlwr_fastcall
279   0000              	GLOBAL _strlwr
280   0000              	GLOBAL _strlen_fastcall
281   0000              	GLOBAL _strlen
282   0000              	GLOBAL _strlcpy_callee
283   0000              	GLOBAL _strlcpy
284   0000              	GLOBAL _strlcat_callee
285   0000              	GLOBAL _strlcat
286   0000              	GLOBAL _stricmp_callee
287   0000              	GLOBAL _stricmp
288   0000              	GLOBAL _strerror_fastcall
289   0000              	GLOBAL _strerror
290   0000              	GLOBAL _strdup_fastcall
291   0000              	GLOBAL _strdup
292   0000              	GLOBAL _strcspn_callee
293   0000              	GLOBAL _strcspn
294   0000              	GLOBAL _strcpy_callee
295   0000              	GLOBAL _strcpy
296   0000              	GLOBAL _strcoll_callee
297   0000              	GLOBAL _strcoll
298   0000              	GLOBAL _strcmp_callee
299   0000              	GLOBAL _strcmp
300   0000              	GLOBAL _strchrnul_callee
301   0000              	GLOBAL _strchrnul
302   0000              	GLOBAL _strchr_callee
303   0000              	GLOBAL _strchr
304   0000              	GLOBAL _strcat_callee
305   0000              	GLOBAL _strcat
306   0000              	GLOBAL _strcasecmp_callee
307   0000              	GLOBAL _strcasecmp
308   0000              	GLOBAL _stpncpy_callee
309   0000              	GLOBAL _stpncpy
310   0000              	GLOBAL _stpcpy_callee
311   0000              	GLOBAL _stpcpy
312   0000              	GLOBAL _memswap_callee
313   0000              	GLOBAL _memswap
314   0000              	GLOBAL _memset_callee
315   0000              	GLOBAL _memset
316   0000              	GLOBAL _memrchr_callee
317   0000              	GLOBAL _memrchr
318   0000              	GLOBAL _memmove_callee
319   0000              	GLOBAL _memmove
320   0000              	GLOBAL _memmem_callee
321   0000              	GLOBAL _memmem
322   0000              	GLOBAL _memcpy_callee
323   0000              	GLOBAL _memcpy
324   0000              	GLOBAL _memcmp_callee
325   0000              	GLOBAL _memcmp
326   0000              	GLOBAL _memchr_callee
327   0000              	GLOBAL _memchr
328   0000              	GLOBAL _memccpy_callee
329   0000              	GLOBAL _memccpy
330   0000              	GLOBAL _ffsl_fastcall
331   0000              	GLOBAL _ffsl
332   0000              	GLOBAL _ffs_fastcall
333   0000              	GLOBAL _ffs
334   0000              	GLOBAL __strrstrip__fastcall
335   0000              	GLOBAL __strrstrip_
336   0000              	GLOBAL __memupr__callee
337   0000              	GLOBAL __memupr_
338   0000              	GLOBAL __memstrcpy__callee
339   0000              	GLOBAL __memstrcpy_
340   0000              	GLOBAL __memlwr__callee
341   0000              	GLOBAL __memlwr_
342   0000              	GLOBAL _rawmemchr_callee
343   0000              	GLOBAL _rawmemchr
344   0000              	GLOBAL _strnset_callee
345   0000              	GLOBAL _strnset
346   0000              	GLOBAL _strset_callee
347   0000              	GLOBAL _strset
348   0000              	GLOBAL _rindex_callee
349   0000              	GLOBAL _rindex
350   0000              	GLOBAL _index_callee
351   0000              	GLOBAL _index
352   0000              	GLOBAL _bzero_callee
353   0000              	GLOBAL _bzero
354   0000              	GLOBAL _bcopy_callee
355   0000              	GLOBAL _bcopy
356   0000              	GLOBAL _bcmp_callee
357   0000              	GLOBAL _bcmp
358   0000              	GLOBAL _ulltoa_callee
359   0000              	GLOBAL _ulltoa
360   0000              	GLOBAL _strtoull_callee
361   0000              	GLOBAL _strtoull
362   0000              	GLOBAL _strtoll_callee
363   0000              	GLOBAL _strtoll
364   0000              	GLOBAL _lltoa_callee
365   0000              	GLOBAL _lltoa
366   0000              	GLOBAL _llabs_callee
367   0000              	GLOBAL _llabs
368   0000              	GLOBAL __lldivu__callee
369   0000              	GLOBAL __lldivu_
370   0000              	GLOBAL __lldiv__callee
371   0000              	GLOBAL __lldiv_
372   0000              	GLOBAL _atoll_callee
373   0000              	GLOBAL _atoll
374   0000              	GLOBAL _realloc_unlocked_callee
375   0000              	GLOBAL _realloc_unlocked
376   0000              	GLOBAL _malloc_unlocked_fastcall
377   0000              	GLOBAL _malloc_unlocked
378   0000              	GLOBAL _free_unlocked_fastcall
379   0000              	GLOBAL _free_unlocked
380   0000              	GLOBAL _calloc_unlocked_callee
381   0000              	GLOBAL _calloc_unlocked
382   0000              	GLOBAL _aligned_alloc_unlocked_callee
383   0000              	GLOBAL _aligned_alloc_unlocked
384   0000              	GLOBAL _realloc_callee
385   0000              	GLOBAL _realloc
386   0000              	GLOBAL _malloc_fastcall
387   0000              	GLOBAL _malloc
388   0000              	GLOBAL _free_fastcall
389   0000              	GLOBAL _free
390   0000              	GLOBAL _calloc_callee
391   0000              	GLOBAL _calloc
392   0000              	GLOBAL _aligned_alloc_callee
393   0000              	GLOBAL _aligned_alloc
394   0000              	GLOBAL _utoa_callee
395   0000              	GLOBAL _utoa
396   0000              	GLOBAL _ultoa_callee
397   0000              	GLOBAL _ultoa
398   0000              	GLOBAL _system_fastcall
399   0000              	GLOBAL _system
400   0000              	GLOBAL _strtoul_callee
401   0000              	GLOBAL _strtoul
402   0000              	GLOBAL _strtol_callee
403   0000              	GLOBAL _strtol
404   0000              	GLOBAL _strtof_callee
405   0000              	GLOBAL _strtof
406   0000              	GLOBAL _strtod_callee
407   0000              	GLOBAL _strtod
408   0000              	GLOBAL _srand_fastcall
409   0000              	GLOBAL _srand
410   0000              	GLOBAL _rand
411   0000              	GLOBAL _quick_exit_fastcall
412   0000              	GLOBAL _quick_exit
413   0000              	GLOBAL _qsort_callee
414   0000              	GLOBAL _qsort
415   0000              	GLOBAL _ltoa_callee
416   0000              	GLOBAL _ltoa
417   0000              	GLOBAL _labs_fastcall
418   0000              	GLOBAL _labs
419   0000              	GLOBAL _itoa_callee
420   0000              	GLOBAL _itoa
421   0000              	GLOBAL _ftoh_callee
422   0000              	GLOBAL _ftoh
423   0000              	GLOBAL _ftog_callee
424   0000              	GLOBAL _ftog
425   0000              	GLOBAL _ftoe_callee
426   0000              	GLOBAL _ftoe
427   0000              	GLOBAL _ftoa_callee
428   0000              	GLOBAL _ftoa
429   0000              	GLOBAL _exit_fastcall
430   0000              	GLOBAL _exit
431   0000              	GLOBAL _dtoh_callee
432   0000              	GLOBAL _dtoh
433   0000              	GLOBAL _dtog_callee
434   0000              	GLOBAL _dtog
435   0000              	GLOBAL _dtoe_callee
436   0000              	GLOBAL _dtoe
437   0000              	GLOBAL _dtoa_callee
438   0000              	GLOBAL _dtoa
439   0000              	GLOBAL _bsearch_callee
440   0000              	GLOBAL _bsearch
441   0000              	GLOBAL _atol_fastcall
442   0000              	GLOBAL _atol
443   0000              	GLOBAL _atoi_fastcall
444   0000              	GLOBAL _atoi
445   0000              	GLOBAL _atof_fastcall
446   0000              	GLOBAL _atof
447   0000              	GLOBAL _atexit_fastcall
448   0000              	GLOBAL _atexit
449   0000              	GLOBAL _at_quick_exit_fastcall
450   0000              	GLOBAL _at_quick_exit
451   0000              	GLOBAL _abs_fastcall
452   0000              	GLOBAL _abs
453   0000              	GLOBAL _abort
454   0000              	GLOBAL __strtou__callee
455   0000              	GLOBAL __strtou_
456   0000              	GLOBAL __strtoi__callee
457   0000              	GLOBAL __strtoi_
458   0000              	GLOBAL __random_uniform_xor_8__fastcall
459   0000              	GLOBAL __random_uniform_xor_8_
460   0000              	GLOBAL __random_uniform_xor_32__fastcall
461   0000              	GLOBAL __random_uniform_xor_32_
462   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
463   0000              	GLOBAL __random_uniform_cmwc_8_
464   0000              	GLOBAL __shellsort__callee
465   0000              	GLOBAL __shellsort_
466   0000              	GLOBAL __quicksort__callee
467   0000              	GLOBAL __quicksort_
468   0000              	GLOBAL __insertion_sort__callee
469   0000              	GLOBAL __insertion_sort_
470   0000              	GLOBAL __ldivu__callee
471   0000              	GLOBAL __ldivu_
472   0000              	GLOBAL __ldiv__callee
473   0000              	GLOBAL __ldiv_
474   0000              	GLOBAL __divu__callee
475   0000              	GLOBAL __divu_
476   0000              	GLOBAL __div__callee
477   0000              	GLOBAL __div_
478   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
479   0000              	GLOBAL _NIRVANAP_drawTW_raw
480   0000              	GLOBAL _NIRVANAP_drawTW_callee
481   0000              	GLOBAL _NIRVANAP_drawTW
482   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
483   0000              	GLOBAL _NIRVANAP_drawW_raw
484   0000              	GLOBAL _NIRVANAP_drawW_callee
485   0000              	GLOBAL _NIRVANAP_drawW
486   0000              	GLOBAL _NIRVANAP_spriteT_callee
487   0000              	GLOBAL _NIRVANAP_spriteT
488   0000              	GLOBAL _NIRVANAP_fillC_callee
489   0000              	GLOBAL _NIRVANAP_fillC
490   0000              	GLOBAL _NIRVANAP_readC_callee
491   0000              	GLOBAL _NIRVANAP_readC
492   0000              	GLOBAL _NIRVANAP_paintC_callee
493   0000              	GLOBAL _NIRVANAP_paintC
494   0000              	GLOBAL _NIRVANAP_printC_callee
495   0000              	GLOBAL _NIRVANAP_printC
496   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
497   0000              	GLOBAL _NIRVANAP_fillT_raw
498   0000              	GLOBAL _NIRVANAP_fillT_callee
499   0000              	GLOBAL _NIRVANAP_fillT
500   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
501   0000              	GLOBAL _NIRVANAP_drawT_raw
502   0000              	GLOBAL _NIRVANAP_drawT_callee
503   0000              	GLOBAL _NIRVANAP_drawT
504   0000              	GLOBAL _NIRVANAP_stop
505   0000              	GLOBAL _NIRVANAP_start
506   0000              	GLOBAL _zx_print_str
507   0000              	GLOBAL _zx_print_int
508   0000              	GLOBAL _zx_print_chr
509   0000              	GLOBAL _zx_print_bonus_time
510   0000              	GLOBAL _zx_isr
511   0000              	GLOBAL _z80_otdr_callee
512   0000              	GLOBAL _z80_otdr
513   0000              	GLOBAL _z80_otir_callee
514   0000              	GLOBAL _z80_otir
515   0000              	GLOBAL _z80_outp_callee
516   0000              	GLOBAL _z80_outp
517   0000              	GLOBAL _z80_indr_callee
518   0000              	GLOBAL _z80_indr
519   0000              	GLOBAL _z80_inir_callee
520   0000              	GLOBAL _z80_inir
521   0000              	GLOBAL _z80_inp_fastcall
522   0000              	GLOBAL _z80_inp
523   0000              	GLOBAL _z80_set_int_state_fastcall
524   0000              	GLOBAL _z80_set_int_state
525   0000              	GLOBAL _z80_get_int_state
526   0000              	GLOBAL _z80_delay_tstate_fastcall
527   0000              	GLOBAL _z80_delay_tstate
528   0000              	GLOBAL _z80_delay_ms_fastcall
529   0000              	GLOBAL _z80_delay_ms
530   0000              	GLOBAL _im2_remove_generic_callback_callee
531   0000              	GLOBAL _im2_remove_generic_callback
532   0000              	GLOBAL _im2_prepend_generic_callback_callee
533   0000              	GLOBAL _im2_prepend_generic_callback
534   0000              	GLOBAL _im2_append_generic_callback_callee
535   0000              	GLOBAL _im2_append_generic_callback
536   0000              	GLOBAL _im2_create_generic_isr_8080_callee
537   0000              	GLOBAL _im2_create_generic_isr_8080
538   0000              	GLOBAL _im2_create_generic_isr_callee
539   0000              	GLOBAL _im2_create_generic_isr
540   0000              	GLOBAL _im2_install_isr_callee
541   0000              	GLOBAL _im2_install_isr
542   0000              	GLOBAL _im2_init_fastcall
543   0000              	GLOBAL _im2_init
544   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
545   0000              	GLOBAL _intrinsic_swap_word_32
546   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
547   0000              	GLOBAL _intrinsic_swap_endian_32
548   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
549   0000              	GLOBAL _intrinsic_swap_endian_16
550   0000              	GLOBAL _intrinsic_return_de
551   0000              	GLOBAL _intrinsic_return_bc
552   0000              	GLOBAL _intrinsic_exx
553   0000              	GLOBAL _intrinsic_ex_de_hl
554   0000              	GLOBAL _intrinsic_nop
555   0000              	GLOBAL _intrinsic_im_2
556   0000              	GLOBAL _intrinsic_im_1
557   0000              	GLOBAL _intrinsic_im_0
558   0000              	GLOBAL _intrinsic_retn
559   0000              	GLOBAL _intrinsic_reti
560   0000              	GLOBAL _intrinsic_halt
561   0000              	GLOBAL _intrinsic_ei
562   0000              	GLOBAL _intrinsic_di
563   0000              	GLOBAL _intrinsic_stub
564   0000              	GLOBAL _intrinsic_ini
565   0000              	GLOBAL _intrinsic_outi
566   0000              	GLOBAL _intrinsic_ldi
567   0000              	GLOBAL _zx_pattern_fill_callee
568   0000              	GLOBAL _zx_pattern_fill
569   0000              	GLOBAL _zx_saddrpup_fastcall
570   0000              	GLOBAL _zx_saddrpup
571   0000              	GLOBAL _zx_saddrpright_callee
572   0000              	GLOBAL _zx_saddrpright
573   0000              	GLOBAL _zx_saddrpleft_callee
574   0000              	GLOBAL _zx_saddrpleft
575   0000              	GLOBAL _zx_saddrpdown_fastcall
576   0000              	GLOBAL _zx_saddrpdown
577   0000              	GLOBAL _zx_saddrcup_fastcall
578   0000              	GLOBAL _zx_saddrcup
579   0000              	GLOBAL _zx_saddrcright_fastcall
580   0000              	GLOBAL _zx_saddrcright
581   0000              	GLOBAL _zx_saddrcleft_fastcall
582   0000              	GLOBAL _zx_saddrcleft
583   0000              	GLOBAL _zx_saddrcdown_fastcall
584   0000              	GLOBAL _zx_saddrcdown
585   0000              	GLOBAL _zx_saddr2py_fastcall
586   0000              	GLOBAL _zx_saddr2py
587   0000              	GLOBAL _zx_saddr2px_fastcall
588   0000              	GLOBAL _zx_saddr2px
589   0000              	GLOBAL _zx_saddr2cy_fastcall
590   0000              	GLOBAL _zx_saddr2cy
591   0000              	GLOBAL _zx_saddr2cx_fastcall
592   0000              	GLOBAL _zx_saddr2cx
593   0000              	GLOBAL _zx_saddr2aaddr_fastcall
594   0000              	GLOBAL _zx_saddr2aaddr
595   0000              	GLOBAL _zx_py2saddr_fastcall
596   0000              	GLOBAL _zx_py2saddr
597   0000              	GLOBAL _zx_py2aaddr_fastcall
598   0000              	GLOBAL _zx_py2aaddr
599   0000              	GLOBAL _zx_pxy2saddr_callee
600   0000              	GLOBAL _zx_pxy2saddr
601   0000              	GLOBAL _zx_pxy2aaddr_callee
602   0000              	GLOBAL _zx_pxy2aaddr
603   0000              	GLOBAL _zx_px2bitmask_fastcall
604   0000              	GLOBAL _zx_px2bitmask
605   0000              	GLOBAL _zx_cy2saddr_fastcall
606   0000              	GLOBAL _zx_cy2saddr
607   0000              	GLOBAL _zx_cy2aaddr_fastcall
608   0000              	GLOBAL _zx_cy2aaddr
609   0000              	GLOBAL _zx_cxy2saddr_callee
610   0000              	GLOBAL _zx_cxy2saddr
611   0000              	GLOBAL _zx_cxy2aaddr_callee
612   0000              	GLOBAL _zx_cxy2aaddr
613   0000              	GLOBAL _zx_bitmask2px_fastcall
614   0000              	GLOBAL _zx_bitmask2px
615   0000              	GLOBAL _zx_aaddrcup_fastcall
616   0000              	GLOBAL _zx_aaddrcup
617   0000              	GLOBAL _zx_aaddrcright_fastcall
618   0000              	GLOBAL _zx_aaddrcright
619   0000              	GLOBAL _zx_aaddrcleft_fastcall
620   0000              	GLOBAL _zx_aaddrcleft
621   0000              	GLOBAL _zx_aaddrcdown_fastcall
622   0000              	GLOBAL _zx_aaddrcdown
623   0000              	GLOBAL _zx_aaddr2saddr_fastcall
624   0000              	GLOBAL _zx_aaddr2saddr
625   0000              	GLOBAL _zx_aaddr2py_fastcall
626   0000              	GLOBAL _zx_aaddr2py
627   0000              	GLOBAL _zx_aaddr2px_fastcall
628   0000              	GLOBAL _zx_aaddr2px
629   0000              	GLOBAL _zx_aaddr2cy_fastcall
630   0000              	GLOBAL _zx_aaddr2cy
631   0000              	GLOBAL _zx_aaddr2cx_fastcall
632   0000              	GLOBAL _zx_aaddr2cx
633   0000              	GLOBAL _zx_visit_wc_pix_callee
634   0000              	GLOBAL _zx_visit_wc_pix
635   0000              	GLOBAL _zx_visit_wc_attr_callee
636   0000              	GLOBAL _zx_visit_wc_attr
637   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
638   0000              	GLOBAL _zx_scroll_wc_up_pix
639   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
640   0000              	GLOBAL _zx_scroll_wc_up_attr
641   0000              	GLOBAL _zx_scroll_wc_up_callee
642   0000              	GLOBAL _zx_scroll_wc_up
643   0000              	GLOBAL _zx_scroll_up_pix_callee
644   0000              	GLOBAL _zx_scroll_up_pix
645   0000              	GLOBAL _zx_scroll_up_attr_callee
646   0000              	GLOBAL _zx_scroll_up_attr
647   0000              	GLOBAL _zx_scroll_up_callee
648   0000              	GLOBAL _zx_scroll_up
649   0000              	GLOBAL _zx_cls_wc_pix_callee
650   0000              	GLOBAL _zx_cls_wc_pix
651   0000              	GLOBAL _zx_cls_wc_attr_callee
652   0000              	GLOBAL _zx_cls_wc_attr
653   0000              	GLOBAL _zx_cls_wc_callee
654   0000              	GLOBAL _zx_cls_wc
655   0000              	GLOBAL _zx_cls_pix_fastcall
656   0000              	GLOBAL _zx_cls_pix
657   0000              	GLOBAL _zx_cls_attr_fastcall
658   0000              	GLOBAL _zx_cls_attr
659   0000              	GLOBAL _zx_cls_fastcall
660   0000              	GLOBAL _zx_cls
661   0000              	GLOBAL _zx_border_fastcall
662   0000              	GLOBAL _zx_border
663   0000              	GLOBAL _zx_tape_verify_block_callee
664   0000              	GLOBAL _zx_tape_verify_block
665   0000              	GLOBAL _zx_tape_save_block_callee
666   0000              	GLOBAL _zx_tape_save_block
667   0000              	GLOBAL _zx_tape_load_block_callee
668   0000              	GLOBAL _zx_tape_load_block
669   0000              	GLOBAL _spr_destroy
670   0000              	GLOBAL _spr_unflattenP1
671   0000              	GLOBAL _spr_flatten
672   0000              	GLOBAL _spr_btile_paint_back
673   0000              	GLOBAL _spr_init_effects
674   0000              	GLOBAL _spr_turn_horizontal
675   0000              	GLOBAL _spr_play_anim
676   0000              	GLOBAL _spr_add_anim
677   0000              	GLOBAL _spr_clear_scr
678   0000              	GLOBAL _spr_back_repaint
679   0000              	GLOBAL _spr_get_tile_dir
680   0000              	GLOBAL _spr_get_tile
681   0000              	GLOBAL _spr_paint_player
682   0000              	GLOBAL _spr_paint
683   0000              	GLOBAL _spr_move_left
684   0000              	GLOBAL _spr_move_right
685   0000              	GLOBAL _spr_move_left_f
686   0000              	GLOBAL _spr_move_right_f
687   0000              	GLOBAL _spr_move_horizontal
688   0000              	GLOBAL _spr_move_down
689   0000              	GLOBAL _spr_move_up
690   0000              	GLOBAL _spr_set_right
691   0000              	GLOBAL _spr_set_left
692   0000              	GLOBAL _spr_set_down
693   0000              	GLOBAL _spr_set_up
694   0000              	GLOBAL _spr_calc_index
695   0000              	GLOBAL _spr_chktime
696   0000              	GLOBAL _player_use_floor
697   0000              	GLOBAL _player_lost_life
698   0000              	GLOBAL _player_move_jump
699   0000              	GLOBAL _player_tile
700   0000              	GLOBAL _player_pick_deadly
701   0000              	GLOBAL _player_pick_item
702   0000              	GLOBAL _player_check_ceil
703   0000              	GLOBAL _player_check_floor_walk
704   0000              	GLOBAL _player_check_floor_jump
705   0000              	GLOBAL _player_score_add
706   0000              	GLOBAL _player_move_walk
707   0000              	GLOBAL _player_turn
708   0000              	GLOBAL _player_move
709   0000              	GLOBAL _player_check_input
710   0000              	GLOBAL _player_init
711   0000              	GLOBAL _menu_define_key
712   0000              	GLOBAL _menu_redefine
713   0000              	GLOBAL _menu_main_print
714   0000              	GLOBAL _menu_main
715   0000              	GLOBAL _game_fill_row
716   0000              	GLOBAL _enemy_avoid_dead
717   0000              	GLOBAL _enemy_avoid_fall
718   0000              	GLOBAL _enemy_kill
719   0000              	GLOBAL _enemy_init
720   0000              	GLOBAL _enemy_move
721   0000              	GLOBAL _enemy_turn
722   0000              	GLOBAL _enemy_static
723   0000              	GLOBAL _enemy_walk
724   0000              	GLOBAL _enemy_horizontal
725   0000              	GLOBAL _enemy_vertical
726   0000              	GLOBAL _ay_reset
727   0000              	GLOBAL _ay_song_stop
728   0000              	GLOBAL _ay_song_play
729   0000              	GLOBAL _ay_fx_stop
730   0000              	GLOBAL _ay_fx_play
731   0000              	GLOBAL _ay_is_playing
732   0000              	GLOBAL _audio_levelup
733   0000              	GLOBAL _audio_menu
734   0000              	GLOBAL _audio_game_end
735   0000              	GLOBAL _audio_level_complete
736   0000              	GLOBAL _audio_level_start
737   0000              	GLOBAL _audio_lotr_lose_a_life
738   0000              	GLOBAL _audio_puerta
739   0000              	GLOBAL _audio_sin_mana
740   0000              	GLOBAL _audio_magic1
741   0000              	GLOBAL _audio_coin
742   0000              	GLOBAL _audio_golpe
743   0000              	GLOBAL _audio_salto
744   0000              	GLOBAL _audio_efecto
745   0000              	GLOBAL _audio_disparo_fire
746   0000              	GLOBAL _audio_disparo_axe
747   0000              	GLOBAL _audio_disparo2
748   0000              	GLOBAL _audio_disparo1
749   0000              	GLOBAL _audio_explosion1
750   0000              	GLOBAL _audio_explosion
751   0000              	GLOBAL _audio_ingame
752   0000              	GLOBAL _game_sprite_draw8
753   0000              	GLOBAL _test_func
754   0000              	GLOBAL _test_proc
755   0000              	GLOBAL _in_mouse_kempston_wheel_delta
756   0000              	GLOBAL _in_mouse_kempston_wheel
757   0000              	GLOBAL _in_mouse_kempston_callee
758   0000              	GLOBAL _in_mouse_kempston
759   0000              	GLOBAL _in_mouse_kempston_setpos_callee
760   0000              	GLOBAL _in_mouse_kempston_setpos
761   0000              	GLOBAL _in_mouse_kempston_reset
762   0000              	GLOBAL _in_mouse_kempston_init
763   0000              	GLOBAL _in_mouse_amx_wheel_delta
764   0000              	GLOBAL _in_mouse_amx_wheel
765   0000              	GLOBAL _in_mouse_amx_callee
766   0000              	GLOBAL _in_mouse_amx
767   0000              	GLOBAL _in_mouse_amx_setpos_callee
768   0000              	GLOBAL _in_mouse_amx_setpos
769   0000              	GLOBAL _in_mouse_amx_reset
770   0000              	GLOBAL _in_mouse_amx_init_callee
771   0000              	GLOBAL _in_mouse_amx_init
772   0000              	GLOBAL _in_stick_sinclair2
773   0000              	GLOBAL _in_stick_sinclair1
774   0000              	GLOBAL _in_stick_kempston
775   0000              	GLOBAL _in_stick_fuller
776   0000              	GLOBAL _in_stick_cursor
777   0000              	GLOBAL _in_stick_keyboard_fastcall
778   0000              	GLOBAL _in_stick_keyboard
779   0000              	GLOBAL _in_wait_nokey
780   0000              	GLOBAL _in_wait_key
781   0000              	GLOBAL _in_test_key
782   0000              	GLOBAL _in_pause_fastcall
783   0000              	GLOBAL _in_pause
784   0000              	GLOBAL _in_key_scancode_fastcall
785   0000              	GLOBAL _in_key_scancode
786   0000              	GLOBAL _in_key_pressed_fastcall
787   0000              	GLOBAL _in_key_pressed
788   0000              	GLOBAL _in_inkey
789   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
790   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
791   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
792   0000              	GLOBAL _NIRVANAP_HOLE
793   0000              	GLOBAL _NIRVANAP_ISR_HOOK
794   0000              	GLOBAL _scan_map
795   0000              	GLOBAL _map_paper_last_a
796   0000              	GLOBAL _map_paper_last
797   0000              	GLOBAL _map_paper_clr
798   0000              	GLOBAL _map_paper
799   0000              	GLOBAL _anim_count
800   0000              	GLOBAL _anim_respanwn
801   0000              	GLOBAL _anim_loop
802   0000              	GLOBAL _anim_end
803   0000              	GLOBAL _anim_int
804   0000              	GLOBAL _anim_tile
805   0000              	GLOBAL _anim_col
806   0000              	GLOBAL _anim_lin
807   0000              	GLOBAL _map_heigth
808   0000              	GLOBAL _map_width
809   0000              	GLOBAL _scr_curr
810   0000              	GLOBAL _scr_map
811   0000              	GLOBAL _spr_kind
812   0000              	GLOBAL _spr_frames
813   0000              	GLOBAL _spr_speed
814   0000              	GLOBAL _spr_tile
815   0000              	GLOBAL _screen_ink
816   0000              	GLOBAL _screen_paper
817   0000              	GLOBAL _game_start_scr
818   0000              	GLOBAL _game_score_top
819   0000              	GLOBAL _player_coins
820   0000              	GLOBAL _player_lives
821   0000              	GLOBAL _game_over
822   0000              	GLOBAL _game_sound
823   0000              	GLOBAL _game_inf_lives
824   0000              	GLOBAL _game_inmune
825   0000              	GLOBAL _sprite_curr_index
826   0000              	GLOBAL _spr_count
827   0000              	GLOBAL _last_rotated
828   0000              	GLOBAL _anim_time
829   0000              	GLOBAL _frame_time
830   0000              	GLOBAL _curr_time
831   0000              	GLOBAL _game_conveyor_flag
832   0000              	GLOBAL _game_conveyor_tile
833   0000              	GLOBAL _p_state_a
834   0000              	GLOBAL _p_state
835   0000              	GLOBAL _attrib_key
836   0000              	GLOBAL _attrib7
837   0000              	GLOBAL _attrib6
838   0000              	GLOBAL _attrib5
839   0000              	GLOBAL _attrib4
840   0000              	GLOBAL _attrib3
841   0000              	GLOBAL _attrib2
842   0000              	GLOBAL _attrib1
843   0000              	GLOBAL _attrib0
844   0000              	GLOBAL _attrib_red
845   0000              	GLOBAL _game_attrib_osd
846   0000              	GLOBAL _attrib_osd
847   0000              	GLOBAL _attrib_hl
848   0000              	GLOBAL _attrib
849   0000              	GLOBAL _zx_val_asm
850   0000              	GLOBAL _enemies
851   0000              	GLOBAL _tmp_ui
852   0000              	GLOBAL _tmp_sc
853   0000              	GLOBAL _tmp_uc
854   0000              	GLOBAL _tmp1
855   0000              	GLOBAL _tmp0
856   0000              	GLOBAL _tmp
857   0000              	GLOBAL _index1
858   0000              	GLOBAL _index0
859   0000              	GLOBAL _index_tmp
860   0000              	GLOBAL _loop_count
861   0000              	GLOBAL _s_class
862   0000              	GLOBAL _s_row1
863   0000              	GLOBAL _s_col1
864   0000              	GLOBAL _s_col0
865   0000              	GLOBAL _s_lin1
866   0000              	GLOBAL _s_lin0
867   0000              	GLOBAL _s_tile1
868   0000              	GLOBAL _s_tile0
869   0000              	GLOBAL _player_kill_index
870   0000              	GLOBAL _player_killed
871   0000              	GLOBAL _player_jump_top
872   0000              	GLOBAL _player_hit_count
873   0000              	GLOBAL _game_fps_show
874   0000              	GLOBAL _game_debug
875   0000              	GLOBAL _sprite
876   0000              	GLOBAL _fps
877   0000              	GLOBAL _game_tileset
878   0000              	GLOBAL _menu_curr_sel
879   0000              	GLOBAL _game_round_up
880   0000              	GLOBAL _game_conveyor_col1
881   0000              	GLOBAL _game_conveyor_col0
882   0000              	GLOBAL _game_conveyor_lin
883   0000              	GLOBAL _game_conveyor_dir
884   0000              	GLOBAL _game_song_play_start
885   0000              	GLOBAL _game_song_play
886   0000              	GLOBAL _game_world
887   0000              	GLOBAL _game_gravity
888   0000              	GLOBAL _player_jumpcount
889   0000              	GLOBAL _player_hit
890   0000              	GLOBAL _player_hit_time
891   0000              	GLOBAL _player_lin_scr
892   0000              	GLOBAL _player_col_scr
893   0000              	GLOBAL _player_max_vita
894   0000              	GLOBAL _player_max_mana
895   0000              	GLOBAL _player_keys
896   0000              	GLOBAL _player_vel_inc
897   0000              	GLOBAL _player_vel_y0
898   0000              	GLOBAL _player_vel_y
899   0000              	GLOBAL _player_score
900   0000              	GLOBAL _last_time
901   0000              	GLOBAL _obj_count
902   0000              	GLOBAL _obj_col
903   0000              	GLOBAL _obj_lin
904   0000              	GLOBAL _spr_timer
905   0000              	GLOBAL _jump_lin
906   0000              	GLOBAL _colint
907   0000              	GLOBAL _col
908   0000              	GLOBAL _tbuffer
909   0000              	GLOBAL _lin
910   0000              	GLOBAL _tile
911   0000              	GLOBAL _value_b
912   0000              	GLOBAL _value_a
913   0000              	GLOBAL _state_a
914   0000              	GLOBAL _state
915   0000              	GLOBAL _class
916   0000              	GLOBAL _dirs
917   0000              	GLOBAL _k1
918   0000              	GLOBAL _joyfunc2
919   0000              	GLOBAL _joyfunc1
920   0000              	GLOBAL _btiles
921   0000              	GLOBAL _v3
922   0000              	GLOBAL _v2
923   0000              	GLOBAL _v1
924   0000              	GLOBAL _v0
925   0000              	GLOBAL _i
926   0000              	GLOBAL _spec128
927   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
928   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
929   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
930   0000              	GLOBAL _ay_fx_06_disparo_fire
931   0000              	GLOBAL _ay_fx_06_disparo_axe
932   0000              	GLOBAL _ay_fx_06_explosion1
933   0000              	GLOBAL _ay_fx_06_efecto
934   0000              	GLOBAL _ay_fx_06_disparo2
935   0000              	GLOBAL _ay_fx_06_disparo1
936   0000              	GLOBAL _ay_fx_06_levelup
937   0000              	GLOBAL _ay_fx_06_magic
938   0000              	GLOBAL _ay_fx_06_sin_mana
939   0000              	GLOBAL _ay_fx_06_salto
940   0000              	GLOBAL _ay_fx_06_puerta
941   0000              	GLOBAL _ay_fx_06_magic1
942   0000              	GLOBAL _ay_fx_06_golpe
943   0000              	GLOBAL _ay_fx_06_explosion
944   0000              	GLOBAL _ay_fx_06_dano_por_toque
945   0000              	GLOBAL _ay_fx_06_coin
946   0000              	GLOBAL _ay_song_06_lotr_level_start
947   0000              	GLOBAL _ay_song_06_lotr_level_complete
948   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
949   0000              	GLOBAL _ay_song_04_ingame0
950   0000              	GLOBAL _ay_song_04_ingame
951   0000              	GLOBAL _hibtiles
952   0000              	GLOBAL _key_map
953   0000              	GLOBAL _start_scr0
954   0000              	GLOBAL _paper0
955   0000              	GLOBAL _lenght0
956   0000              	GLOBAL _world0
957   0000              	GLOBAL _spr_init
958   0000              ;--------------------------------------------------------
959   0000              ; special function registers
960   0000              ;--------------------------------------------------------
961   0000              defc _IO_FE	=	0x00fe
962   0000              defc _IO_1FFD	=	0x1ffd
963   0000              defc _IO_7FFD	=	0x7ffd
964   0000              ;--------------------------------------------------------
965   0000              ; ram data
966   0000              ;--------------------------------------------------------
967   0000              	SECTION bss_compiler
968   0000              ;--------------------------------------------------------
969   0000              ; ram data
970   0000              ;--------------------------------------------------------
971   0000              
972   0000              IF 0
973   0000              
974   0000              ; .area _INITIALIZED removed by z88dk
975   0000              
976   0000              
977   0000              ENDIF
978   0000              
979   0000              ;--------------------------------------------------------
980   0000              ; absolute external ram data
981   0000              ;--------------------------------------------------------
982   0000              	SECTION IGNORE
983   0000              ;--------------------------------------------------------
984   0000              ; global & static initialisations
985   0000              ;--------------------------------------------------------
986   0000              	SECTION code_crt_init
987   0000              ;--------------------------------------------------------
988   0000              ; Home
989   0000              ;--------------------------------------------------------
990   0000              	SECTION IGNORE
991   0000              ;--------------------------------------------------------
992   0000              ; code
993   0000              ;--------------------------------------------------------
994   0000              	SECTION code_compiler
995   0000              ;	---------------------------------
996   0000              ; Function game_loop
997   0000              ; ---------------------------------
998   0000              _game_loop:
999   0000  21 00 00    	ld	hl,_player_lives
1000  0003  36 03       	ld	(hl),0x03
1001  0005  21 00 00    	ld	hl,0x0000
1002  0008  22 00 00    	ld	(_player_score),hl
1003  000B  21 00 00    	ld	hl,_game_over
1004  000E  36 00       	ld	(hl),0x00
1005  0010  21 00 00    	ld	hl,_game_round_up
1006  0013  36 00       	ld	(hl),0x00
1007  0015  21 00 00    	ld	hl,_game_world
1008  0018  36 00       	ld	(hl),0x00
1009  001A  21 00 00    	ld	hl,_map_paper
1010  001D  36 00       	ld	(hl),0x00
1011  001F  21 00 00    	ld	hl,_player_lin_scr
1012  0022  36 68       	ld	(hl),0x68
1013  0024  21 00 00    	ld	hl,_player_col_scr
1014  0027  36 02       	ld	(hl),0x02
1015  0029  CD CD 04    	call	_game_round_init
1016  002C              l_game_loop_00117:
1017  002C  3A 00 00    	ld	a,(_game_over)
1018  002F  B7          	or	a, a
1019  0030  C2 C4 00    	jp	NZ, l_game_loop_00120
1020  0033  21 00 00    	ld	hl,_dirs
1021  0036  36 00       	ld	(hl),0x00
1022  0038              l_game_loop_00112:
1023  0038  3A 00 00    	ld	a,(_game_round_up)
1024  003B  B7          	or	a, a
1025  003C  20 76       	jr	NZ,l_game_loop_00114
1026  003E  3A 00 00    	ld	a,(_game_over)
1027  0041  B7          	or	a, a
1028  0042  20 70       	jr	NZ,l_game_loop_00114
1029  0044  CD 00 00    	call	_enemy_turn
1030  0047  CD 00 00    	call	_player_turn
1031  004A  3E 03       	ld	a,0x03
1032  004C  F5          	push	af
1033  004D  33          	inc	sp
1034  004E  21 00 00    	ld	hl,_anim_time
1035  0051  E5          	push	hl
1036  0052  CD 4B 09    	call	_game_check_time
1037  0055  F1          	pop	af
1038  0056  33          	inc	sp
1039  0057  7D          	ld	a, l
1040  0058  B7          	or	a, a
1041  0059  28 10       	jr	Z,l_game_loop_00104
1042  005B  2A 00 00    	ld	hl,(_curr_time)
1043  005E  22 00 00    	ld	(_anim_time),hl
1044  0061  21 00 00    	ld	hl,_game_conveyor_col0
1045  0064  7E          	ld	a, (hl)
1046  0065  B7          	or	a, a
1047  0066  28 03       	jr	Z,l_game_loop_00104
1048  0068  CD F5 03    	call	_game_anim_conveyor
1049  006B              l_game_loop_00104:
1050  006B  CD 75 09    	call	_game_rotate_attrib
1051  006E  3E 64       	ld	a,0x64
1052  0070  F5          	push	af
1053  0071  33          	inc	sp
1054  0072  21 00 00    	ld	hl,_frame_time
1055  0075  E5          	push	hl
1056  0076  CD 4B 09    	call	_game_check_time
1057  0079  F1          	pop	af
1058  007A  33          	inc	sp
1059  007B  7D          	ld	a, l
1060  007C  B7          	or	a, a
1061  007D  28 0F       	jr	Z,l_game_loop_00108
1062  007F  2A 00 00    	ld	hl,(_curr_time)
1063  0082  22 00 00    	ld	(_frame_time),hl
1064  0085  3A 00 00    	ld	a,(_game_fps_show)
1065  0088  B7          	or	a,a
1066  0089  28 03       	jr	Z,l_game_loop_00108
1067  008B  CD C5 00    	call	_game_fps
1068  008E              l_game_loop_00108:
1069  008E  21 00 00    	ld	hl,_loop_count
1070  0091  34          	inc	(hl)
1071  0092  20 02       	jr	NZ,l_game_loop_00166
1072  0094  23          	inc	hl
1073  0095  34          	inc	(hl)
1074  0096              l_game_loop_00166:
1075  0096  21 00 00    	ld	hl,_fps
1076  0099  34          	inc	(hl)
1077  009A  20 02       	jr	NZ,l_game_loop_00167
1078  009C  23          	inc	hl
1079  009D  34          	inc	(hl)
1080  009E              l_game_loop_00167:
1081  009E  3A 00 00    	ld	a,(_obj_count)
1082  00A1  21 00 00    	ld	hl,_player_coins
1083  00A4  96          	sub	a, (hl)
1084  00A5  20 91       	jr	NZ,l_game_loop_00112
1085  00A7  21 00 00    	ld	hl,_game_over
1086  00AA  36 01       	ld	(hl),0x01
1087  00AC  2E 00       	ld	l,0x00
1088  00AE  CD 00 00    	call	_zx_border_fastcall
1089  00B1  C3 38 00    	jp	l_game_loop_00112
1090  00B4              l_game_loop_00114:
1091  00B4  21 00 00    	ld	hl,_game_round_up
1092  00B7  7E          	ld	a, (hl)
1093  00B8  B7          	or	a, a
1094  00B9  CA 2C 00    	jp	Z, l_game_loop_00117
1095  00BC  36 00       	ld	(hl),0x00
1096  00BE  CD CD 04    	call	_game_round_init
1097  00C1  C3 2C 00    	jp	l_game_loop_00117
1098  00C4              l_game_loop_00120:
1099  00C4  C9          	ret
1100  00C5              	SECTION code_compiler
1101  00C5              ;	---------------------------------
1102  00C5              ; Function game_fps
1103  00C5              ; ---------------------------------
1104  00C5              _game_fps:
1105  00C5  21 00 00    	ld	hl,_screen_ink
1106  00C8  36 07       	ld	(hl),0x07
1107  00CA  2A 00 00    	ld	hl,(_fps)
1108  00CD  E5          	push	hl
1109  00CE  21 17 18    	ld	hl,0x1817
1110  00D1  E5          	push	hl
1111  00D2  CD 00 00    	call	_zx_print_int
1112  00D5  21 00 00    	ld	hl,0x0000
1113  00D8  22 00 00    	ld	(_fps),hl
1114  00DB  C9          	ret
1115  00DC              	SECTION code_compiler
1116  00DC              ;	---------------------------------
1117  00DC              ; Function game_draw_map
1118  00DC              ; ---------------------------------
1119  00DC              _game_draw_map:
1120  00DC  CD 00 00    	call	___sdcc_enter_ix
1121  00DF  F5          	push	af
1122  00E0  F5          	push	af
1123  00E1  3B          	dec	sp
1124  00E2  76          	halt
1125  00E3  21 00 00    	ld	hl,_spr_count
1126  00E6  36 00       	ld	(hl),0x00
1127  00E8  CD 00 00    	call	_spr_init_effects
1128  00EB  11 00 00    	ld	de,_obj_col+0
1129  00EE              l_game_draw_map_00101:
1130  00EE  21 00 00    	ld	hl,_spr_count
1131  00F1  7E          	ld	a, (hl)
1132  00F2  D6 07       	sub	a,0x07
1133  00F4  30 22       	jr	NC,l_game_draw_map_00103
1134  00F6  3E 00       	ld	a, +((_class) & 0xFF)
1135  00F8  86          	add	a, (hl)
1136  00F9  4F          	ld	c, a
1137  00FA  3E 00       	ld	a, +((_class) / 256)
1138  00FC  CE 00       	adc	a,0x00
1139  00FE  47          	ld	b, a
1140  00FF  AF          	xor	a, a
1141  0100  02          	ld	(bc), a
1142  0101  7B          	ld	a, e
1143  0102  86          	add	a, (hl)
1144  0103  4F          	ld	c, a
1145  0104  7A          	ld	a, d
1146  0105  CE 00       	adc	a,0x00
1147  0107  47          	ld	b, a
1148  0108  AF          	xor	a, a
1149  0109  02          	ld	(bc), a
1150  010A  3E 00       	ld	a, +((_obj_lin) & 0xFF)
1151  010C  86          	add	a, (hl)
1152  010D  4F          	ld	c, a
1153  010E  3E 00       	ld	a, +((_obj_lin) / 256)
1154  0110  CE 00       	adc	a,0x00
1155  0112  47          	ld	b, a
1156  0113  AF          	xor	a, a
1157  0114  02          	ld	(bc), a
1158  0115  34          	inc	(hl)
1159  0116  18 D6       	jr	l_game_draw_map_00101
1160  0118              l_game_draw_map_00103:
1161  0118  21 00 00    	ld	hl,_spr_count
1162  011B  36 00       	ld	(hl),0x00
1163  011D  21 00 00    	ld	hl,0x0000
1164  0120  22 00 00    	ld	(_index1),hl
1165  0123  21 00 00    	ld	hl,_s_row1
1166  0126  36 01       	ld	(hl),0x01
1167  0128  21 00 00    	ld	hl,_s_lin1
1168  012B  36 10       	ld	(hl),0x10
1169  012D  21 00 00    	ld	hl,_s_col1
1170  0130  36 00       	ld	(hl),0x00
1171  0132  21 00 00    	ld	hl,_obj_count
1172  0135  36 00       	ld	(hl),0x00
1173  0137  D5          	push	de
1174  0138  CD CC 03    	call	_game_cls
1175  013B  D1          	pop	de
1176  013C  CD 00 00    	call	_NIRVANAP_stop
1177  013F  21 00 00    	ld	hl,_screen_ink
1178  0142  36 00       	ld	(hl),0x00
1179  0144  21 00 00    	ld	hl,_game_conveyor_lin
1180  0147  36 00       	ld	(hl),0x00
1181  0149  21 00 00    	ld	hl,_game_conveyor_col0
1182  014C  36 00       	ld	(hl),0x00
1183  014E  21 00 00    	ld	hl,_game_conveyor_col1
1184  0151  36 00       	ld	(hl),0x00
1185  0153  21 00 00    	ld	hl,_game_conveyor_tile
1186  0156  36 11       	ld	(hl),0x11
1187  0158              l_game_draw_map_00129:
1188  0158  21 01 00    	ld	hl,_index1 + 1
1189  015B  7E          	ld	a, (hl)
1190  015C  D6 02       	sub	a,0x02
1191  015E  D2 39 03    	jp	NC, l_game_draw_map_00131
1192  0161  3E 00       	ld	a, +((_scr_map) & 0xFF)
1193  0163  2B          	dec	hl
1194  0164  86          	add	a, (hl)
1195  0165  DD 77 FE    	ld	(ix-2),a
1196  0168  3E 00       	ld	a, +((_scr_map) / 256)
1197  016A  23          	inc	hl
1198  016B  8E          	adc	a, (hl)
1199  016C  DD 6E FE    	ld	l,(ix-2)
1200  016F  DD 77 FF    	ld	(ix-1),a
1201  0172  67          	ld	h,a
1202  0173  7E          	ld	a, (hl)
1203  0174  DD 77 FD    	ld	(ix-3),a
1204  0177  D6 40       	sub	a,0x40
1205  0179  D2 3C 02    	jp	NC, l_game_draw_map_00125
1206  017C  DD 7E FD    	ld	a,(ix-3)
1207  017F  D6 08       	sub	a,0x08
1208  0181  20 1B       	jr	NZ,l_game_draw_map_00105
1209  0183  2A 00 00    	ld	hl,(_obj_count)
1210  0186  26 00       	ld	h,0x00
1211  0188  19          	add	hl,de
1212  0189  3A 00 00    	ld	a,(_s_col1)
1213  018C  77          	ld	(hl),a
1214  018D  2A 00 00    	ld	hl,(_obj_count)
1215  0190  26 00       	ld	h,0x00
1216  0192  01 00 00    	ld	bc,_obj_lin
1217  0195  09          	add	hl,bc
1218  0196  3A 00 00    	ld	a,(_s_lin1)
1219  0199  77          	ld	(hl),a
1220  019A  21 00 00    	ld	hl,_obj_count
1221  019D  34          	inc	(hl)
1222  019E              l_game_draw_map_00105:
1223  019E  2A 00 00    	ld	hl,(_index1)
1224  01A1  01 00 00    	ld	bc,_scr_map
1225  01A4  09          	add	hl,bc
1226  01A5  3A 00 00    	ld	a,(_index1)
1227  01A8  E6 1F       	and	a,0x1f
1228  01AA  DD 77 FB    	ld	(ix-5),a
1229  01AD  DD 36 FC 00 	ld	(ix-4),0x00
1230  01B1  4E          	ld	c, (hl)
1231  01B2  DD 46 FB    	ld	b,(ix-5)
1232  01B5  79          	ld	a, c
1233  01B6  D6 04       	sub	a,0x04
1234  01B8  20 04       	jr	NZ,l_game_draw_map_00200
1235  01BA  3E 01       	ld	a,0x01
1236  01BC  18 01       	jr	l_game_draw_map_00201
1237  01BE              l_game_draw_map_00200:
1238  01BE  AF          	xor	a,a
1239  01BF              l_game_draw_map_00201:
1240  01BF  4F          	ld	c, a
1241  01C0  3A 00 00    	ld	a,(_game_conveyor_col0)
1242  01C3  B7          	or	a, a
1243  01C4  28 0C       	jr	Z,l_game_draw_map_00107
1244  01C6  21 00 00    	ld	hl,_game_conveyor_col1
1245  01C9  7E          	ld	a, (hl)
1246  01CA  B7          	or	a, a
1247  01CB  20 05       	jr	NZ,l_game_draw_map_00107
1248  01CD  CB 41       	bit	0, c
1249  01CF  20 01       	jr	NZ,l_game_draw_map_00107
1250  01D1  70          	ld	(hl), b
1251  01D2              l_game_draw_map_00107:
1252  01D2  CB 41       	bit	0, c
1253  01D4  28 3E       	jr	Z,l_game_draw_map_00116
1254  01D6  21 00 00    	ld	hl,_game_conveyor_col0
1255  01D9  7E          	ld	a, (hl)
1256  01DA  B7          	or	a, a
1257  01DB  20 37       	jr	NZ,l_game_draw_map_00116
1258  01DD  70          	ld	(hl), b
1259  01DE  ED 4B 00 00 	ld	bc,(_index1)
1260  01E2  79          	ld	a,c
1261  01E3  0E 05       	ld	c,0x05
1262  01E5              l_game_draw_map_00202:
1263  01E5  CB 38       	srl	b
1264  01E7  1F          	rra
1265  01E8  0D          	dec	c
1266  01E9  20 FA       	jr	NZ,l_game_draw_map_00202
1267  01EB  07          	rlca
1268  01EC  07          	rlca
1269  01ED  07          	rlca
1270  01EE  E6 F8       	and	a,0xf8
1271  01F0  C6 08       	add	a,0x08
1272  01F2  32 00 00    	ld	(_game_conveyor_lin),a
1273  01F5  ED 4B 00 00 	ld	bc,(_index1)
1274  01F9  03          	inc	bc
1275  01FA  21 00 00    	ld	hl,_scr_map
1276  01FD  09          	add	hl,bc
1277  01FE  F1          	pop	af
1278  01FF  7E          	ld	a,(hl)
1279  0200  E5          	push	hl
1280  0201  B7          	or	a, a
1281  0202  28 07       	jr	Z,l_game_draw_map_00111
1282  0204  21 00 00    	ld	hl,_game_conveyor_dir
1283  0207  36 FF       	ld	(hl),0xff
1284  0209  18 05       	jr	l_game_draw_map_00112
1285  020B              l_game_draw_map_00111:
1286  020B  21 00 00    	ld	hl,_game_conveyor_dir
1287  020E  36 01       	ld	(hl),0x01
1288  0210              l_game_draw_map_00112:
1289  0210  E1          	pop	hl
1290  0211  E5          	push	hl
1291  0212  36 04       	ld	(hl),0x04
1292  0214              l_game_draw_map_00116:
1293  0214  3A 00 00    	ld	a,(_s_row1)
1294  0217  07          	rlca
1295  0218  07          	rlca
1296  0219  07          	rlca
1297  021A  E6 F8       	and	a,0xf8
1298  021C  DD 77 FB    	ld	(ix-5),a
1299  021F  01 00 00    	ld	bc,_scr_map
1300  0222  2A 00 00    	ld	hl,(_index1)
1301  0225  09          	add	hl,bc
1302  0226  46          	ld	b, (hl)
1303  0227  3A 00 00    	ld	a,(_s_col1)
1304  022A  D5          	push	de
1305  022B  F5          	push	af
1306  022C  33          	inc	sp
1307  022D  DD 7E FB    	ld	a,(ix-5)
1308  0230  48          	ld	c,b
1309  0231  47          	ld	b,a
1310  0232  C5          	push	bc
1311  0233  CD 00 00    	call	_game_sprite_draw8
1312  0236  F1          	pop	af
1313  0237  33          	inc	sp
1314  0238  D1          	pop	de
1315  0239  C3 12 03    	jp	l_game_draw_map_00126
1316  023C              l_game_draw_map_00125:
1317  023C  DD 7E FD    	ld	a,(ix-3)
1318  023F  D6 78       	sub	a,0x78
1319  0241  D2 E7 02    	jp	NC, l_game_draw_map_00122
1320  0244  21 00 00    	ld	hl,_index1
1321  0247  7E          	ld	a, (hl)
1322  0248  E6 1F       	and	a,0x1f
1323  024A  DD 77 FB    	ld	(ix-5),a
1324  024D  23          	inc	hl
1325  024E  46          	ld	b,(hl)
1326  024F  2B          	dec	hl
1327  0250  7E          	ld	a,(hl)
1328  0251  0E 05       	ld	c,0x05
1329  0253              l_game_draw_map_00203:
1330  0253  CB 38       	srl	b
1331  0255  1F          	rra
1332  0256  0D          	dec	c
1333  0257  20 FA       	jr	NZ,l_game_draw_map_00203
1334  0259  4F          	ld	c,a
1335  025A  07          	rlca
1336  025B  07          	rlca
1337  025C  07          	rlca
1338  025D  E6 F8       	and	a,0xf8
1339  025F  47          	ld	b, a
1340  0260  D5          	push	de
1341  0261  DD 66 FD    	ld	h,(ix-3)
1342  0264  DD 6E FB    	ld	l,(ix-5)
1343  0267  E5          	push	hl
1344  0268  C5          	push	bc
1345  0269  33          	inc	sp
1346  026A  CD 00 00    	call	_enemy_init
1347  026D  F1          	pop	af
1348  026E  33          	inc	sp
1349  026F  D1          	pop	de
1350  0270  3E 00       	ld	a, +((_value_a) & 0xFF)
1351  0272  21 00 00    	ld	hl,_sprite
1352  0275  86          	add	a, (hl)
1353  0276  DD 77 FB    	ld	(ix-5),a
1354  0279  3E 00       	ld	a, +((_value_a) / 256)
1355  027B  CE 00       	adc	a,0x00
1356  027D  DD 77 FC    	ld	(ix-4),a
1357  0280  2A 00 00    	ld	hl,(_index1)
1358  0283  01 20 00    	ld	bc,0x0020
1359  0286  09          	add	hl,bc
1360  0287  01 00 00    	ld	bc,_scr_map
1361  028A  09          	add	hl,bc
1362  028B  4E          	ld	c, (hl)
1363  028C  E1          	pop	hl
1364  028D  E5          	push	hl
1365  028E  71          	ld	(hl), c
1366  028F  3E 00       	ld	a, +((_value_b) & 0xFF)
1367  0291  21 00 00    	ld	hl,_sprite
1368  0294  86          	add	a, (hl)
1369  0295  DD 77 FB    	ld	(ix-5),a
1370  0298  3E 00       	ld	a, +((_value_b) / 256)
1371  029A  CE 00       	adc	a,0x00
1372  029C  DD 77 FC    	ld	(ix-4),a
1373  029F  2A 00 00    	ld	hl,(_index1)
1374  02A2  01 21 00    	ld	bc,0x0021
1375  02A5  09          	add	hl,bc
1376  02A6  01 00 00    	ld	bc,_scr_map
1377  02A9  09          	add	hl,bc
1378  02AA  4E          	ld	c, (hl)
1379  02AB  E1          	pop	hl
1380  02AC  E5          	push	hl
1381  02AD  71          	ld	(hl), c
1382  02AE  2A 00 00    	ld	hl,(_index1)
1383  02B1  01 00 00    	ld	bc,_scr_map
1384  02B4  09          	add	hl,bc
1385  02B5  AF          	xor	a,a
1386  02B6  77          	ld	(hl),a
1387  02B7  2A 00 00    	ld	hl,(_index1)
1388  02BA  01 00 00    	ld	bc,_scr_map
1389  02BD  09          	add	hl,bc
1390  02BE  AF          	xor	a,a
1391  02BF  77          	ld	(hl),a
1392  02C0  ED 4B 00 00 	ld	bc,(_index1)
1393  02C4  03          	inc	bc
1394  02C5  21 00 00    	ld	hl,_scr_map
1395  02C8  09          	add	hl, bc
1396  02C9  36 00       	ld	(hl),0x00
1397  02CB  2A 00 00    	ld	hl,(_index1)
1398  02CE  01 20 00    	ld	bc,0x0020
1399  02D1  09          	add	hl,bc
1400  02D2  01 00 00    	ld	bc,_scr_map
1401  02D5  09          	add	hl,bc
1402  02D6  36 00       	ld	(hl),0x00
1403  02D8  2A 00 00    	ld	hl,(_index1)
1404  02DB  01 21 00    	ld	bc,0x0021
1405  02DE  09          	add	hl,bc
1406  02DF  01 00 00    	ld	bc,_scr_map
1407  02E2  09          	add	hl,bc
1408  02E3  36 00       	ld	(hl),0x00
1409  02E5  18 2B       	jr	l_game_draw_map_00126
1410  02E7              l_game_draw_map_00122:
1411  02E7  DD 7E FD    	ld	a,(ix-3)
1412  02EA  D6 7F       	sub	a,0x7f
1413  02EC  20 16       	jr	NZ,l_game_draw_map_00118
1414  02EE  3A 00 00    	ld	a,(_s_lin1)
1415  02F1  C6 F0       	add	a,0xf0
1416  02F3  32 00 00    	ld	(_player_lin_scr),a
1417  02F6  3A 00 00    	ld	a,(_s_col1)
1418  02F9  32 00 00    	ld	(_player_col_scr),a
1419  02FC  DD 6E FE    	ld	l,(ix-2)
1420  02FF  DD 66 FF    	ld	h,(ix-1)
1421  0302  36 00       	ld	(hl),0x00
1422  0304              l_game_draw_map_00118:
1423  0304  01 00 00    	ld	bc,_scr_map
1424  0307  2A 00 00    	ld	hl,(_index1)
1425  030A  09          	add	hl,bc
1426  030B  7E          	ld	a,(hl)
1427  030C  D6 7F       	sub	a,0x7f
1428  030E  20 02       	jr	NZ,l_game_draw_map_00126
1429  0310  AF          	xor	a,a
1430  0311  77          	ld	(hl),a
1431  0312              l_game_draw_map_00126:
1432  0312  21 00 00    	ld	hl,_index1
1433  0315  34          	inc	(hl)
1434  0316  20 02       	jr	NZ,l_game_draw_map_00208
1435  0318  23          	inc	hl
1436  0319  34          	inc	(hl)
1437  031A              l_game_draw_map_00208:
1438  031A  21 00 00    	ld	hl,_s_col1
1439  031D  34          	inc	(hl)
1440  031E  3A 00 00    	ld	a,(_index1)
1441  0321  E6 1F       	and	a,0x1f
1442  0323  C2 58 01    	jp	NZ,l_game_draw_map_00129
1443  0326  21 00 00    	ld	hl,_s_row1
1444  0329  34          	inc	(hl)
1445  032A  21 00 00    	ld	hl,_s_lin1
1446  032D  7E          	ld	a, (hl)
1447  032E  C6 08       	add	a,0x08
1448  0330  77          	ld	(hl), a
1449  0331  21 00 00    	ld	hl,_s_col1
1450  0334  36 00       	ld	(hl),0x00
1451  0336  C3 58 01    	jp	l_game_draw_map_00129
1452  0339              l_game_draw_map_00131:
1453  0339  CD 00 00    	call	_NIRVANAP_start
1454  033C  76          	halt
1455  033D  CD 00 00    	call	_game_update_stats
1456  0340  DD F9       	ld	sp, ix
1457  0342  DD E1       	pop	ix
1458  0344  C9          	ret
1459  0345              	SECTION code_compiler
1460  0345              ;	---------------------------------
1461  0345              ; Function game_cell_paint_index
1462  0345              ; ---------------------------------
1463  0345              _game_cell_paint_index:
1464  0345  3A 00 00    	ld	a,(_index1)
1465  0348  E6 1F       	and	a,0x1f
1466  034A  32 00 00    	ld	(_s_col1),a
1467  034D  2A 00 00    	ld	hl,(_index1)
1468  0350  4D          	ld	c,l
1469  0351  5C          	ld	e,h
1470  0352  06 05       	ld	b,0x05
1471  0354  79          	ld	a,c
1472  0355              l_game_cell_paint_index_00103:
1473  0355  CB 3B       	srl	e
1474  0357  1F          	rra
1475  0358  10 FB       	djnz	l_game_cell_paint_index_00103
1476  035A  07          	rlca
1477  035B  07          	rlca
1478  035C  07          	rlca
1479  035D  E6 F8       	and	a,0xf8
1480  035F  32 00 00    	ld	(_s_lin1),a
1481  0362  0F          	rrca
1482  0363  0F          	rrca
1483  0364  0F          	rrca
1484  0365  E6 1F       	and	a,0x1f
1485  0367  3C          	inc	a
1486  0368  32 00 00    	ld	(_s_row1),a
1487  036B  21 00 00    	ld	hl,_s_lin1
1488  036E  7E          	ld	a, (hl)
1489  036F  C6 10       	add	a,0x10
1490  0371  77          	ld	(hl), a
1491  0372  3A 00 00    	ld	a,(_s_row1)
1492  0375  07          	rlca
1493  0376  07          	rlca
1494  0377  07          	rlca
1495  0378  E6 F8       	and	a,0xf8
1496  037A  4F          	ld	c, a
1497  037B  11 00 00    	ld	de,_scr_map
1498  037E  2A 00 00    	ld	hl,(_index1)
1499  0381  19          	add	hl,de
1500  0382  46          	ld	b, (hl)
1501  0383  3A 00 00    	ld	a,(_s_col1)
1502  0386  F5          	push	af
1503  0387  33          	inc	sp
1504  0388  79          	ld	a, c
1505  0389  48          	ld	c,b
1506  038A  47          	ld	b,a
1507  038B  C5          	push	bc
1508  038C  CD 00 00    	call	_game_sprite_draw8
1509  038F  F1          	pop	af
1510  0390  33          	inc	sp
1511  0391  C9          	ret
1512  0392              	SECTION code_compiler
1513  0392              ;	---------------------------------
1514  0392              ; Function game_cell_paint
1515  0392              ; ---------------------------------
1516  0392              _game_cell_paint:
1517  0392  3A 00 00    	ld	a,(_s_row1)
1518  0395  07          	rlca
1519  0396  07          	rlca
1520  0397  07          	rlca
1521  0398  E6 F8       	and	a,0xf8
1522  039A  57          	ld	d, a
1523  039B  01 00 00    	ld	bc,_scr_map
1524  039E  2A 00 00    	ld	hl,(_index1)
1525  03A1  09          	add	hl,bc
1526  03A2  4D          	ld	c,l
1527  03A3  46          	ld	b, (hl)
1528  03A4  3A 00 00    	ld	a,(_s_col1)
1529  03A7  5A          	ld	e,d
1530  03A8  57          	ld	d,a
1531  03A9  D5          	push	de
1532  03AA  C5          	push	bc
1533  03AB  33          	inc	sp
1534  03AC  CD 00 00    	call	_game_sprite_draw8
1535  03AF  F1          	pop	af
1536  03B0  33          	inc	sp
1537  03B1  C9          	ret
1538  03B2              	SECTION code_compiler
1539  03B2              ;	---------------------------------
1540  03B2              ; Function game_end is a stub
1541  03B2              ; ---------------------------------
1542  03B2              EXTERN l_ret
1543  03B2              defc _game_end = l_ret
1544  03B2              	SECTION code_compiler
1545  03B2              ;	---------------------------------
1546  03B2              ; Function game_print_footer
1547  03B2              ; ---------------------------------
1548  03B2              _game_print_footer:
1549  03B2  3A 00 00    	ld	a,(_game_fps_show)
1550  03B5  B7          	or	a, a
1551  03B6  28 10       	jr	Z,l_game_print_footer_00102
1552  03B8  21 00 00    	ld	hl,_screen_ink
1553  03BB  36 07       	ld	(hl),0x07
1554  03BD  21 00 00    	ld	hl,___str_0
1555  03C0  E5          	push	hl
1556  03C1  21 17 14    	ld	hl,0x1417
1557  03C4  E5          	push	hl
1558  03C5  CD 00 00    	call	_zx_print_str
1559  03C8              l_game_print_footer_00102:
1560  03C8  CD 00 00    	call	_game_update_stats
1561  03CB  C9          	ret
1562  03CC              	SECTION rodata_compiler
1563  0000              ___str_0:
1564  0000  4C 50 53 3A 	DEFM "LPS:"
1565  0004  00          	DEFB 0x00
1566  0005              	SECTION code_compiler
1567  03CC              ;	---------------------------------
1568  03CC              ; Function game_print_score is a stub
1569  03CC              ; ---------------------------------
1570  03CC              EXTERN l_ret
1571  03CC              defc _game_print_score = l_ret
1572  03CC              	SECTION code_compiler
1573  03CC              ;	---------------------------------
1574  03CC              ; Function game_cls
1575  03CC              ; ---------------------------------
1576  03CC              _game_cls:
1577  03CC  CD 00 00    	call	_NIRVANAP_stop
1578  03CF  2E 00       	ld	l,0x00
1579  03D1  CD 00 00    	call	_zx_cls_fastcall
1580  03D4  21 00 00    	ld	hl,_screen_ink
1581  03D7  36 07       	ld	(hl),0x07
1582  03D9  C3 00 00    	jp  _NIRVANAP_start
1583  03DC              	SECTION code_compiler
1584  03DC              ;	---------------------------------
1585  03DC              ; Function game_update_stats is a stub
1586  03DC              ; ---------------------------------
1587  03DC              EXTERN l_ret
1588  03DC              defc _game_update_stats = l_ret
1589  03DC              	SECTION code_compiler
1590  03DC              ;	---------------------------------
1591  03DC              ; Function game_tick
1592  03DC              ; ---------------------------------
1593  03DC              _game_tick:
1594  03DC  21 00 00    	ld	hl,_curr_time
1595  03DF  34          	inc	(hl)
1596  03E0  C2 00 00    	jp	NZ,_zx_isr
1597  03E3  23          	inc	hl
1598  03E4  34          	inc	(hl)
1599  03E5  C3 00 00    	jp  _zx_isr
1600  03E8              	SECTION code_compiler
1601  03E8              ;	---------------------------------
1602  03E8              ; Function game_start_timer
1603  03E8              ; ---------------------------------
1604  03E8              _game_start_timer:
1605  03E8  21 00 00    	ld	hl,_NIRVANAP_ISR_HOOK+0
1606  03EB  36 CD       	ld	(hl),0xcd
1607  03ED  23          	inc	hl
1608  03EE  11 DC 03    	ld	de,_game_tick
1609  03F1  73          	ld	(hl), e
1610  03F2  23          	inc	hl
1611  03F3  72          	ld	(hl), d
1612  03F4  C9          	ret
1613  03F5              	SECTION code_compiler
1614  03F5              ;	---------------------------------
1615  03F5              ; Function game_anim_conveyor
1616  03F5              ; ---------------------------------
1617  03F5              _game_anim_conveyor:
1618  03F5  CD 00 00    	call	___sdcc_enter_ix
1619  03F8  F5          	push	af
1620  03F9  F5          	push	af
1621  03FA  3B          	dec	sp
1622  03FB  01 60 00    	ld	bc,_btiles+96
1623  03FE  3A 00 00    	ld	a,(_game_conveyor_lin)
1624  0401  32 00 00    	ld	(_i),a
1625  0404  C6 08       	add	a,0x08
1626  0406  DD 77 FB    	ld	(ix-5),a
1627  0409  0A          	ld	a, (bc)
1628  040A  5F          	ld	e, a
1629  040B  3A 00 00    	ld	a,(_game_conveyor_dir)
1630  040E  3C          	inc	a
1631  040F  20 14       	jr	NZ,l_game_anim_conveyor_00102
1632  0411  7B          	ld	a, e
1633  0412  87          	add	a, a
1634  0413  57          	ld	d, a
1635  0414  7B          	ld	a, e
1636  0415  07          	rlca
1637  0416  E6 01       	and	a,0x01
1638  0418  B2          	or	a, d
1639  0419  57          	ld	d,a
1640  041A  02          	ld	(bc),a
1641  041B  87          	add	a, a
1642  041C  5F          	ld	e, a
1643  041D  7A          	ld	a, d
1644  041E  07          	rlca
1645  041F  E6 01       	and	a,0x01
1646  0421  B3          	or	a, e
1647  0422  02          	ld	(bc), a
1648  0423  18 14       	jr	l_game_anim_conveyor_00121
1649  0425              l_game_anim_conveyor_00102:
1650  0425  7B          	ld	a, e
1651  0426  0F          	rrca
1652  0427  E6 80       	and	a,0x80
1653  0429  6F          	ld	l, a
1654  042A  7B          	ld	a,e
1655  042B  CB 3F       	srl	a
1656  042D  B5          	or	a, l
1657  042E  5F          	ld	e,a
1658  042F  02          	ld	(bc),a
1659  0430  0F          	rrca
1660  0431  E6 80       	and	a,0x80
1661  0433  6F          	ld	l, a
1662  0434  CB 3B       	srl	e
1663  0436  7D          	ld	a, l
1664  0437  B3          	or	a, e
1665  0438  02          	ld	(bc), a
1666  0439              l_game_anim_conveyor_00121:
1667  0439              l_game_anim_conveyor_00112:
1668  0439  3A 00 00    	ld	a,(_i)
1669  043C  DD 96 FB    	sub	a,(ix-5)
1670  043F  D2 C8 04    	jp	NC, l_game_anim_conveyor_00115
1671  0442  3A 00 00    	ld	a,(_game_conveyor_col0)
1672  0445  DD 77 FC    	ld	(ix-4),a
1673  0448  2A 00 00    	ld	hl,(_i)
1674  044B  CD 00 00    	call	_zx_py2saddr_fastcall
1675  044E  EB          	ex	de,hl
1676  044F  7B          	ld	a, e
1677  0450  DD 86 FC    	add	a,(ix-4)
1678  0453  5F          	ld	e, a
1679  0454  7A          	ld	a, d
1680  0455  CE 00       	adc	a,0x00
1681  0457  57          	ld	d, a
1682  0458  DD 7E FC    	ld	a,(ix-4)
1683  045B  DD 77 FF    	ld	(ix-1),a
1684  045E              l_game_anim_conveyor_00104:
1685  045E  DD 7E FF    	ld	a,(ix-1)
1686  0461  21 00 00    	ld	hl,_game_conveyor_col1
1687  0464  96          	sub	a, (hl)
1688  0465  30 08       	jr	NC,l_game_anim_conveyor_00106
1689  0467  0A          	ld	a, (bc)
1690  0468  12          	ld	(de), a
1691  0469  13          	inc	de
1692  046A  DD 34 FF    	inc	(ix-1)
1693  046D  18 EF       	jr	l_game_anim_conveyor_00104
1694  046F              l_game_anim_conveyor_00106:
1695  046F  03          	inc	bc
1696  0470  03          	inc	bc
1697  0471  21 00 00    	ld	hl,_i
1698  0474  34          	inc	(hl)
1699  0475  3A 00 00    	ld	a,(_game_conveyor_lin)
1700  0478  5F          	ld	e,a
1701  0479  16 00       	ld	d,0x00
1702  047B  13          	inc	de
1703  047C  13          	inc	de
1704  047D  DD 73 FD    	ld	(ix-3),e
1705  0480  DD 72 FE    	ld	(ix-2),d
1706  0483  3A 00 00    	ld	a,(_i)
1707  0486  5F          	ld	e,a
1708  0487  16 00       	ld	d,0x00
1709  0489  DD 7E FD    	ld	a,(ix-3)
1710  048C  93          	sub	a, e
1711  048D  20 AA       	jr	NZ,l_game_anim_conveyor_00112
1712  048F  DD 7E FE    	ld	a,(ix-2)
1713  0492  92          	sub	a, d
1714  0493  20 A4       	jr	NZ,l_game_anim_conveyor_00112
1715  0495  0A          	ld	a, (bc)
1716  0496  5F          	ld	e, a
1717  0497  3A 00 00    	ld	a,(_game_conveyor_dir)
1718  049A  3C          	inc	a
1719  049B  20 16       	jr	NZ,l_game_anim_conveyor_00108
1720  049D  7B          	ld	a, e
1721  049E  0F          	rrca
1722  049F  E6 80       	and	a,0x80
1723  04A1  57          	ld	d, a
1724  04A2  CB 3B       	srl	e
1725  04A4  7A          	ld	a, d
1726  04A5  B3          	or	a, e
1727  04A6  57          	ld	d,a
1728  04A7  02          	ld	(bc),a
1729  04A8  0F          	rrca
1730  04A9  E6 80       	and	a,0x80
1731  04AB  5F          	ld	e, a
1732  04AC  CB 3A       	srl	d
1733  04AE  7B          	ld	a, e
1734  04AF  B2          	or	a, d
1735  04B0  02          	ld	(bc), a
1736  04B1  18 86       	jr	l_game_anim_conveyor_00112
1737  04B3              l_game_anim_conveyor_00108:
1738  04B3  7B          	ld	a, e
1739  04B4  87          	add	a, a
1740  04B5  57          	ld	d, a
1741  04B6  7B          	ld	a, e
1742  04B7  07          	rlca
1743  04B8  E6 01       	and	a,0x01
1744  04BA  B2          	or	a, d
1745  04BB  5F          	ld	e,a
1746  04BC  02          	ld	(bc),a
1747  04BD  87          	add	a, a
1748  04BE  57          	ld	d, a
1749  04BF  7B          	ld	a, e
1750  04C0  07          	rlca
1751  04C1  E6 01       	and	a,0x01
1752  04C3  B2          	or	a, d
1753  04C4  02          	ld	(bc), a
1754  04C5  C3 39 04    	jp	l_game_anim_conveyor_00112
1755  04C8              l_game_anim_conveyor_00115:
1756  04C8  DD F9       	ld	sp, ix
1757  04CA  DD E1       	pop	ix
1758  04CC  C9          	ret
1759  04CD              	SECTION code_compiler
1760  04CD              ;	---------------------------------
1761  04CD              ; Function game_round_init
1762  04CD              ; ---------------------------------
1763  04CD              _game_round_init:
1764  04CD  CD 00 00    	call	___sdcc_enter_ix
1765  04D0  21 C2 FF    	ld	hl, -62
1766  04D3  39          	add	hl, sp
1767  04D4  F9          	ld	sp, hl
1768  04D5  21 14 00    	ld	hl,0x0014
1769  04D8  39          	add	hl, sp
1770  04D9  4D          	ld	c,l
1771  04DA  44          	ld	b,h
1772  04DB  36 05       	ld	(hl), +((___str_1) & 0xFF)
1773  04DD  23          	inc	hl
1774  04DE  36 00       	ld	(hl), +((___str_1) / 256)
1775  04E0  59          	ld	e, c
1776  04E1  50          	ld	d, b
1777  04E2  13          	inc	de
1778  04E3  13          	inc	de
1779  04E4  3E 14       	ld	a, +((___str_2) & 0xFF)
1780  04E6  12          	ld	(de), a
1781  04E7  13          	inc	de
1782  04E8  3E 00       	ld	a, +((___str_2) / 256)
1783  04EA  12          	ld	(de), a
1784  04EB  21 04 00    	ld	hl,0x0004
1785  04EE  09          	add	hl,bc
1786  04EF  36 22       	ld	(hl), +((___str_3) & 0xFF)
1787  04F1  EB          	ex	de,hl
1788  04F2  13          	inc	de
1789  04F3  3E 00       	ld	a, +((___str_3) / 256)
1790  04F5  12          	ld	(de), a
1791  04F6  21 06 00    	ld	hl,0x0006
1792  04F9  09          	add	hl,bc
1793  04FA  36 2C       	ld	(hl), +((___str_4) & 0xFF)
1794  04FC  EB          	ex	de,hl
1795  04FD  13          	inc	de
1796  04FE  3E 00       	ld	a, +((___str_4) / 256)
1797  0500  12          	ld	(de), a
1798  0501  21 08 00    	ld	hl,0x0008
1799  0504  09          	add	hl,bc
1800  0505  36 47       	ld	(hl), +((___str_5) & 0xFF)
1801  0507  EB          	ex	de,hl
1802  0508  13          	inc	de
1803  0509  3E 00       	ld	a, +((___str_5) / 256)
1804  050B  12          	ld	(de), a
1805  050C  21 0A 00    	ld	hl,0x000a
1806  050F  09          	add	hl,bc
1807  0510  36 55       	ld	(hl), +((___str_6) & 0xFF)
1808  0512  EB          	ex	de,hl
1809  0513  13          	inc	de
1810  0514  3E 00       	ld	a, +((___str_6) / 256)
1811  0516  12          	ld	(de), a
1812  0517  21 0C 00    	ld	hl,0x000c
1813  051A  09          	add	hl,bc
1814  051B  36 66       	ld	(hl), +((___str_7) & 0xFF)
1815  051D  EB          	ex	de,hl
1816  051E  13          	inc	de
1817  051F  3E 00       	ld	a, +((___str_7) / 256)
1818  0521  12          	ld	(de), a
1819  0522  21 0E 00    	ld	hl,0x000e
1820  0525  09          	add	hl,bc
1821  0526  36 6E       	ld	(hl), +((___str_8) & 0xFF)
1822  0528  EB          	ex	de,hl
1823  0529  13          	inc	de
1824  052A  3E 00       	ld	a, +((___str_8) / 256)
1825  052C  12          	ld	(de), a
1826  052D  21 10 00    	ld	hl,0x0010
1827  0530  09          	add	hl,bc
1828  0531  36 80       	ld	(hl), +((___str_9) & 0xFF)
1829  0533  EB          	ex	de,hl
1830  0534  13          	inc	de
1831  0535  3E 00       	ld	a, +((___str_9) / 256)
1832  0537  12          	ld	(de), a
1833  0538  21 12 00    	ld	hl,0x0012
1834  053B  09          	add	hl,bc
1835  053C  36 94       	ld	(hl), +((___str_10) & 0xFF)
1836  053E  EB          	ex	de,hl
1837  053F  13          	inc	de
1838  0540  3E 00       	ld	a, +((___str_10) / 256)
1839  0542  12          	ld	(de), a
1840  0543  21 14 00    	ld	hl,0x0014
1841  0546  09          	add	hl,bc
1842  0547  36 B4       	ld	(hl), +((___str_11) & 0xFF)
1843  0549  EB          	ex	de,hl
1844  054A  13          	inc	de
1845  054B  3E 00       	ld	a, +((___str_11) / 256)
1846  054D  12          	ld	(de), a
1847  054E  21 16 00    	ld	hl,0x0016
1848  0551  09          	add	hl,bc
1849  0552  36 C1       	ld	(hl), +((___str_12) & 0xFF)
1850  0554  EB          	ex	de,hl
1851  0555  13          	inc	de
1852  0556  3E 00       	ld	a, +((___str_12) / 256)
1853  0558  12          	ld	(de), a
1854  0559  21 18 00    	ld	hl,0x0018
1855  055C  09          	add	hl,bc
1856  055D  36 CF       	ld	(hl), +((___str_13) & 0xFF)
1857  055F  EB          	ex	de,hl
1858  0560  13          	inc	de
1859  0561  3E 00       	ld	a, +((___str_13) / 256)
1860  0563  12          	ld	(de), a
1861  0564  21 1A 00    	ld	hl,0x001a
1862  0567  09          	add	hl,bc
1863  0568  36 E5       	ld	(hl), +((___str_14) & 0xFF)
1864  056A  EB          	ex	de,hl
1865  056B  13          	inc	de
1866  056C  3E 00       	ld	a, +((___str_14) / 256)
1867  056E  12          	ld	(de), a
1868  056F  21 1C 00    	ld	hl,0x001c
1869  0572  09          	add	hl,bc
1870  0573  36 F9       	ld	(hl), +((___str_15) & 0xFF)
1871  0575  EB          	ex	de,hl
1872  0576  13          	inc	de
1873  0577  3E 00       	ld	a, +((___str_15) / 256)
1874  0579  12          	ld	(de), a
1875  057A  21 1E 00    	ld	hl,0x001e
1876  057D  09          	add	hl,bc
1877  057E  36 1A       	ld	(hl), +((___str_16) & 0xFF)
1878  0580  EB          	ex	de,hl
1879  0581  13          	inc	de
1880  0582  3E 01       	ld	a, +((___str_16) / 256)
1881  0584  12          	ld	(de), a
1882  0585  21 20 00    	ld	hl,0x0020
1883  0588  09          	add	hl,bc
1884  0589  36 39       	ld	(hl), +((___str_17) & 0xFF)
1885  058B  EB          	ex	de,hl
1886  058C  13          	inc	de
1887  058D  3E 01       	ld	a, +((___str_17) / 256)
1888  058F  12          	ld	(de), a
1889  0590  21 22 00    	ld	hl,0x0022
1890  0593  09          	add	hl,bc
1891  0594  36 4B       	ld	(hl), +((___str_18) & 0xFF)
1892  0596  EB          	ex	de,hl
1893  0597  13          	inc	de
1894  0598  3E 01       	ld	a, +((___str_18) / 256)
1895  059A  12          	ld	(de), a
1896  059B  21 24 00    	ld	hl,0x0024
1897  059E  09          	add	hl,bc
1898  059F  36 5E       	ld	(hl), +((___str_19) & 0xFF)
1899  05A1  EB          	ex	de,hl
1900  05A2  13          	inc	de
1901  05A3  3E 01       	ld	a, +((___str_19) / 256)
1902  05A5  12          	ld	(de), a
1903  05A6  21 26 00    	ld	hl,0x0026
1904  05A9  09          	add	hl,bc
1905  05AA  36 67       	ld	(hl), +((___str_20) & 0xFF)
1906  05AC  EB          	ex	de,hl
1907  05AD  13          	inc	de
1908  05AE  3E 01       	ld	a, +((___str_20) / 256)
1909  05B0  12          	ld	(de), a
1910  05B1  21 00 00    	ld	hl,0x0000
1911  05B4  39          	add	hl, sp
1912  05B5  36 0E       	ld	(hl),0x0e
1913  05B7  5D          	ld	e,l
1914  05B8  54          	ld	d,h
1915  05B9  23          	inc	hl
1916  05BA  36 0D       	ld	(hl),0x0d
1917  05BC  6B          	ld	l, e
1918  05BD  62          	ld	h, d
1919  05BE  23          	inc	hl
1920  05BF  23          	inc	hl
1921  05C0  36 09       	ld	(hl),0x09
1922  05C2  6B          	ld	l, e
1923  05C3  62          	ld	h, d
1924  05C4  23          	inc	hl
1925  05C5  23          	inc	hl
1926  05C6  23          	inc	hl
1927  05C7  36 1A       	ld	(hl),0x1a
1928  05C9  21 04 00    	ld	hl,0x0004
1929  05CC  19          	add	hl, de
1930  05CD  36 10       	ld	(hl),0x10
1931  05CF  21 05 00    	ld	hl,0x0005
1932  05D2  19          	add	hl, de
1933  05D3  36 07       	ld	(hl),0x07
1934  05D5  21 06 00    	ld	hl,0x0006
1935  05D8  19          	add	hl, de
1936  05D9  36 11       	ld	(hl),0x11
1937  05DB  21 07 00    	ld	hl,0x0007
1938  05DE  19          	add	hl, de
1939  05DF  36 13       	ld	(hl),0x13
1940  05E1  21 08 00    	ld	hl,0x0008
1941  05E4  19          	add	hl, de
1942  05E5  36 1F       	ld	(hl),0x1f
1943  05E7  21 09 00    	ld	hl,0x0009
1944  05EA  19          	add	hl, de
1945  05EB  36 0C       	ld	(hl),0x0c
1946  05ED  21 0A 00    	ld	hl,0x000a
1947  05F0  19          	add	hl, de
1948  05F1  36 0D       	ld	(hl),0x0d
1949  05F3  21 0B 00    	ld	hl,0x000b
1950  05F6  19          	add	hl, de
1951  05F7  36 13       	ld	(hl),0x13
1952  05F9  21 0C 00    	ld	hl,0x000c
1953  05FC  19          	add	hl, de
1954  05FD  36 15       	ld	(hl),0x15
1955  05FF  21 0D 00    	ld	hl,0x000d
1956  0602  19          	add	hl, de
1957  0603  36 13       	ld	(hl),0x13
1958  0605  21 0E 00    	ld	hl,0x000e
1959  0608  19          	add	hl, de
1960  0609  36 20       	ld	(hl),0x20
1961  060B  21 0F 00    	ld	hl,0x000f
1962  060E  19          	add	hl, de
1963  060F  36 1E       	ld	(hl),0x1e
1964  0611  21 10 00    	ld	hl,0x0010
1965  0614  19          	add	hl, de
1966  0615  36 11       	ld	(hl),0x11
1967  0617  21 11 00    	ld	hl,0x0011
1968  061A  19          	add	hl, de
1969  061B  36 12       	ld	(hl),0x12
1970  061D  21 12 00    	ld	hl,0x0012
1971  0620  19          	add	hl, de
1972  0621  36 08       	ld	(hl),0x08
1973  0623  21 13 00    	ld	hl,0x0013
1974  0626  19          	add	hl, de
1975  0627  36 14       	ld	(hl),0x14
1976  0629  21 00 00    	ld	hl,0x0000
1977  062C  22 00 00    	ld	(_loop_count),hl
1978  062F  21 00 00    	ld	hl,0
1979  0632  22 00 00    	ld	(_curr_time),hl
1980  0635  21 00 00    	ld	hl,0x0000
1981  0638  22 00 00    	ld	(_frame_time),hl
1982  063B  21 00 00    	ld	hl,_player_coins
1983  063E  36 00       	ld	(hl),0x00
1984  0640  21 00 00    	ld	hl,_game_conveyor_flag
1985  0643  36 00       	ld	(hl),0x00
1986  0645  C5          	push	bc
1987  0646  D5          	push	de
1988  0647  CD 00 00    	call	_spr_init_effects
1989  064A  CD 00 00    	call	_game_print_header
1990  064D  CD B2 03    	call	_game_print_footer
1991  0650  D1          	pop	de
1992  0651  C1          	pop	bc
1993  0652  CD 00 00    	call	_ay_reset
1994  0655  C5          	push	bc
1995  0656  D5          	push	de
1996  0657  CD 8D 0B    	call	_game_page_map
1997  065A  CD 00 00    	call	_spr_btile_paint_back
1998  065D  CD DC 00    	call	_game_draw_map
1999  0660  21 20 90    	ld	hl,0x9020
2000  0663  E5          	push	hl
2001  0664  AF          	xor	a, a
2002  0665  F5          	push	af
2003  0666  33          	inc	sp
2004  0667  21 00 00    	ld	hl,_attrib_osd
2005  066A  E5          	push	hl
2006  066B  CD E0 07    	call	_game_paint_attrib
2007  066E  F1          	pop	af
2008  066F  F1          	pop	af
2009  0670  33          	inc	sp
2010  0671  D1          	pop	de
2011  0672  C1          	pop	bc
2012  0673  21 00 00    	ld	hl,_i
2013  0676  36 00       	ld	(hl),0x00
2014  0678  21 00 00    	ld	hl,0x0000
2015  067B  22 00 00    	ld	(_tmp_ui),hl
2016  067E              l_game_round_init_00101:
2017  067E  3A 00 00    	ld	a,(_i)
2018  0681  21 00 00    	ld	hl,_scr_curr
2019  0684  96          	sub	a, (hl)
2020  0685  30 2C       	jr	NC,l_game_round_init_00103
2021  0687  7B          	ld	a, e
2022  0688  21 00 00    	ld	hl,_i
2023  068B  86          	add	a, (hl)
2024  068C  DD 77 FE    	ld	(ix-2),a
2025  068F  6F          	ld	l,a
2026  0690  7A          	ld	a,d
2027  0691  CE 00       	adc	a,0x00
2028  0693  DD 77 FF    	ld	(ix-1),a
2029  0696  67          	ld	h,a
2030  0697  6E          	ld	l, (hl)
2031  0698  DD 75 FE    	ld	(ix-2),l
2032  069B  DD 36 FF 00 	ld	(ix-1),0x00
2033  069F  21 00 00    	ld	hl,_tmp_ui
2034  06A2  7E          	ld	a, (hl)
2035  06A3  DD 86 FE    	add	a,(ix-2)
2036  06A6  77          	ld	(hl), a
2037  06A7  23          	inc	hl
2038  06A8  7E          	ld	a, (hl)
2039  06A9  DD 8E FF    	adc	a,(ix-1)
2040  06AC  77          	ld	(hl), a
2041  06AD  21 00 00    	ld	hl,_i
2042  06B0  34          	inc	(hl)
2043  06B1  18 CB       	jr	l_game_round_init_00101
2044  06B3              l_game_round_init_00103:
2045  06B3  21 00 00    	ld	hl,_screen_ink
2046  06B6  36 30       	ld	(hl),0x30
2047  06B8  C5          	push	bc
2048  06B9  D5          	push	de
2049  06BA  21 7C 01    	ld	hl,___str_21
2050  06BD  E5          	push	hl
2051  06BE  21 11 00    	ld	hl,0x0011
2052  06C1  E5          	push	hl
2053  06C2  CD 00 00    	call	_zx_print_str
2054  06C5  D1          	pop	de
2055  06C6  C1          	pop	bc
2056  06C7  3A 00 00    	ld	a,(_scr_curr)
2057  06CA  DD 77 FE    	ld	(ix-2),a
2058  06CD  6F          	ld	l, a
2059  06CE  26 00       	ld	h,0x00
2060  06D0  DD 74 FF    	ld	(ix-1),h
2061  06D3  29          	add	hl, hl
2062  06D4  09          	add	hl, bc
2063  06D5  4E          	ld	c, (hl)
2064  06D6  23          	inc	hl
2065  06D7  46          	ld	b, (hl)
2066  06D8  2A 00 00    	ld	hl,(_scr_curr)
2067  06DB  26 00       	ld	h,0x00
2068  06DD  19          	add	hl,de
2069  06DE  6E          	ld	l, (hl)
2070  06DF  AF          	xor	a,a
2071  06E0  67          	ld	h,a
2072  06E1  EB          	ex	de,hl
2073  06E2  21 20 00    	ld	hl,0x0020
2074  06E5  ED 52       	sbc	hl,de
2075  06E7  CB 2C       	sra	h
2076  06E9  CB 1D       	rr	l
2077  06EB  EB          	ex	de,hl
2078  06EC  53          	ld	d, e
2079  06ED  C5          	push	bc
2080  06EE  1E 11       	ld	e,0x11
2081  06F0  D5          	push	de
2082  06F1  CD 00 00    	call	_zx_print_str
2083  06F4  21 00 00    	ld	hl,_screen_ink
2084  06F7  36 57       	ld	(hl),0x57
2085  06F9  21 9D 01    	ld	hl,___str_22
2086  06FC  E5          	push	hl
2087  06FD  21 12 00    	ld	hl,0x0012
2088  0700  E5          	push	hl
2089  0701  CD 00 00    	call	_zx_print_str
2090  0704  21 00 00    	ld	hl,_screen_ink
2091  0707  36 67       	ld	(hl),0x67
2092  0709  21 A8 01    	ld	hl,___str_23
2093  070C  E5          	push	hl
2094  070D  21 12 0A    	ld	hl,0x0a12
2095  0710  E5          	push	hl
2096  0711  CD 00 00    	call	_zx_print_str
2097  0714  21 00 00    	ld	hl,_screen_ink
2098  0717  36 06       	ld	(hl),0x06
2099  0719  21 BF 01    	ld	hl,___str_24
2100  071C  E5          	push	hl
2101  071D  21 14 00    	ld	hl,0x0014
2102  0720  E5          	push	hl
2103  0721  CD 00 00    	call	_zx_print_str
2104  0724  21 00 00    	ld	hl,_game_song_play_start
2105  0727  36 00       	ld	(hl),0x00
2106  0729  3A 00 00    	ld	a,(_game_over)
2107  072C  B7          	or	a, a
2108  072D  20 10       	jr	NZ,l_game_round_init_00105
2109  072F  2A 00 00    	ld	hl,(_player_col_scr)
2110  0732  26 08       	ld	h,0x08
2111  0734  3A 00 00    	ld	a,(_player_lin_scr)
2112  0737  E5          	push	hl
2113  0738  F5          	push	af
2114  0739  33          	inc	sp
2115  073A  CD 00 00    	call	_player_init
2116  073D  F1          	pop	af
2117  073E  33          	inc	sp
2118  073F              l_game_round_init_00105:
2119  073F  CD 00 00    	call	_game_update_stats
2120  0742  3A 00 00    	ld	a,(_game_debug)
2121  0745  B7          	or	a, a
2122  0746  20 3B       	jr	NZ,l_game_round_init_00107
2123  0748  21 E0 01    	ld	hl,___str_25
2124  074B  E5          	push	hl
2125  074C  21 0C 06    	ld	hl,0x060c
2126  074F  E5          	push	hl
2127  0750  CD 00 00    	call	_zx_print_str
2128  0753  21 00 00    	ld	hl,_tmp0
2129  0756  36 0B       	ld	(hl),0x0b
2130  0758  21 11 68    	ld	hl,0x6811
2131  075B  E5          	push	hl
2132  075C  3E 06       	ld	a,0x06
2133  075E  F5          	push	af
2134  075F  33          	inc	sp
2135  0760  21 00 00    	ld	hl,_attrib_osd
2136  0763  E5          	push	hl
2137  0764  CD E0 07    	call	_game_paint_attrib
2138  0767  F1          	pop	af
2139  0768  F1          	pop	af
2140  0769  33          	inc	sp
2141  076A  3A 00 00    	ld	a,(_tmp0)
2142  076D  C6 06       	add	a,0x06
2143  076F  47          	ld	b, a
2144  0770  AF          	xor	a, a
2145  0771  F5          	push	af
2146  0772  33          	inc	sp
2147  0773  21 C8 00    	ld	hl,0x00c8
2148  0776  E5          	push	hl
2149  0777  C5          	push	bc
2150  0778  33          	inc	sp
2151  0779  21 0C 06    	ld	hl,0x060c
2152  077C  E5          	push	hl
2153  077D  CD 0A 08    	call	_game_colour_message
2154  0780  F1          	pop	af
2155  0781  F1          	pop	af
2156  0782  F1          	pop	af
2157  0783              l_game_round_init_00107:
2158  0783  CD 00 00    	call	_audio_ingame
2159  0786  21 00 00    	ld	hl,_screen_ink
2160  0789  36 12       	ld	(hl),0x12
2161  078B  21 7C 01    	ld	hl,___str_21
2162  078E  E5          	push	hl
2163  078F  21 00 00    	ld	hl,0x0000
2164  0792  E5          	push	hl
2165  0793  CD 00 00    	call	_zx_print_str
2166  0796  2E 02       	ld	l,0x02
2167  0798  CD 00 00    	call	_zx_border_fastcall
2168  079B  21 00 00    	ld	hl,_screen_ink
2169  079E  36 07       	ld	(hl),0x07
2170  07A0  DD F9       	ld	sp, ix
2171  07A2  DD E1       	pop	ix
2172  07A4  C9          	ret
2173  07A5              	SECTION rodata_compiler
2174  0005              ___str_1:
2175  0005  43 65 6E 74 72 61 6C 20 43 61 76 65 72 6E 
                        	DEFM "Central Cavern"
2176  0013  00          	DEFB 0x00
2177  0014              	SECTION rodata_compiler
2178  0014              ___str_2:
2179  0014  54 68 65 20 43 6F 6C 64 20 52 6F 6F 6D 
                        	DEFM "The Cold Room"
2180  0021  00          	DEFB 0x00
2181  0022              	SECTION rodata_compiler
2182  0022              ___str_3:
2183  0022  4D 65 6E 61 67 65 72 69 65 
                        	DEFM "Menagerie"
2184  002B  00          	DEFB 0x00
2185  002C              	SECTION rodata_compiler
2186  002C              ___str_4:
2187  002C  41 62 61 6E 64 6F 6E 65 64 20 55 72 61 6E 69 75 6D 20 57 6F 72 6B 69 6E 67 73 
                        	DEFM "Abandoned Uranium Workings"
2188  0046  00          	DEFB 0x00
2189  0047              	SECTION rodata_compiler
2190  0047              ___str_5:
2191  0047  45 75 67 65 6E 65 27 73 20 4C 61 69 72 
                        	DEFM "Eugene's Lair"
2192  0054  00          	DEFB 0x00
2193  0055              	SECTION rodata_compiler
2194  0055              ___str_6:
2195  0055  50 72 6F 63 65 73 73 69 6E 67 20 50 6C 61 6E 74 
                        	DEFM "Processing Plant"
2196  0065  00          	DEFB 0x00
2197  0066              	SECTION rodata_compiler
2198  0066              ___str_7:
2199  0066  54 68 65 20 56 61 74 
                        	DEFM "The Vat"
2200  006D  00          	DEFB 0x00
2201  006E              	SECTION rodata_compiler
2202  006E              ___str_8:
2203  006E  57 61 63 6B 79 20 41 6D 6F 65 62 61 74 72 6F 6E 73 
                        	DEFM "Wacky Amoebatrons"
2204  007F  00          	DEFB 0x00
2205  0080              	SECTION rodata_compiler
2206  0080              ___str_9:
2207  0080  54 68 65 20 45 6E 64 6F 72 69 61 6E 20 46 6F 72 65 73 74 
                        	DEFM "The Endorian Forest"
2208  0093  00          	DEFB 0x00
2209  0094              	SECTION rodata_compiler
2210  0094              ___str_10:
2211  0094  41 74 74 61 63 6B 20 6F 66 20 74 68 65 20 4D 75 74 61 6E 74 20 54 65 6C 65 70 68 6F 6E 65 73 
                        	DEFM "Attack of the Mutant Telephones"
2212  00B3  00          	DEFB 0x00
2213  00B4              	SECTION rodata_compiler
2214  00B4              ___str_11:
2215  00B4  4F 72 65 20 52 65 66 69 6E 65 72 79 
                        	DEFM "Ore Refinery"
2216  00C0  00          	DEFB 0x00
2217  00C1              	SECTION rodata_compiler
2218  00C1              ___str_12:
2219  00C1  54 68 65 20 57 61 72 65 68 6F 75 73 65 
                        	DEFM "The Warehouse"
2220  00CE  00          	DEFB 0x00
2221  00CF              	SECTION rodata_compiler
2222  00CF              ___str_13:
2223  00CF  53 6F 6C 61 72 20 50 6F 77 65 72 20 47 65 6E 65 72 61 74 6F 72 
                        	DEFM "Solar Power Generator"
2224  00E4  00          	DEFB 0x00
2225  00E5              	SECTION rodata_compiler
2226  00E5              ___str_14:
2227  00E5  41 6D 6F 65 62 61 74 72 6F 6E 73 20 52 65 76 65 6E 67 65 
                        	DEFM "Amoebatrons Revenge"
2228  00F8  00          	DEFB 0x00
2229  00F9              	SECTION rodata_compiler
2230  00F9              ___str_15:
2231  00F9  4D 69 6E 65 72 20 57 69 6C 6C 79 20 6D 65 65 74 73 20 74 68 65 20 4B 6F 6E 67 20 42 65 61 73 74 
                        	DEFM "Miner Willy meets the Kong Beast"
2232  0119  00          	DEFB 0x00
2233  011A              	SECTION rodata_compiler
2234  011A              ___str_16:
2235  011A  52 65 74 75 72 6E 20 6F 66 20 74 68 65 20 41 6C 69 65 6E 20 4B 6F 6E 67 20 42 65 61 73 74 
                        	DEFM "Return of the Alien Kong Beast"
2236  0138  00          	DEFB 0x00
2237  0139              	SECTION rodata_compiler
2238  0139              ___str_17:
2239  0139  54 68 65 20 46 69 6E 61 6C 20 42 61 72 72 69 65 72 
                        	DEFM "The Final Barrier"
2240  014A  00          	DEFB 0x00
2241  014B              	SECTION rodata_compiler
2242  014B              ___str_18:
2243  014B  53 6B 79 6C 61 62 20 4C 61 6E 64 69 6E 67 20 42 61 79 
                        	DEFM "Skylab Landing Bay"
2244  015D  00          	DEFB 0x00
2245  015E              	SECTION rodata_compiler
2246  015E              ___str_19:
2247  015E  54 68 65 20 42 61 6E 6B 
                        	DEFM "The Bank"
2248  0166  00          	DEFB 0x00
2249  0167              	SECTION rodata_compiler
2250  0167              ___str_20:
2251  0167  54 68 65 20 53 69 78 74 65 65 6E 74 68 20 43 61 76 65 72 6E 
                        	DEFM "The Sixteenth Cavern"
2252  017B  00          	DEFB 0x00
2253  017C              	SECTION rodata_compiler
2254  017C              ___str_21:
2255  017C  20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 
                        	DEFM "                                "
2256  019C  00          	DEFB 0x00
2257  019D              	SECTION rodata_compiler
2258  019D              ___str_22:
2259  019D  41 49 52 20 2D 2D 2D 2D 2D 2D 
                        	DEFM "AIR ------"
2260  01A7  00          	DEFB 0x00
2261  01A8              	SECTION rodata_compiler
2262  01A8              ___str_23:
2263  01A8  2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 2D 
                        	DEFM "----------------------"
2264  01BE  00          	DEFB 0x00
2265  01BF              	SECTION rodata_compiler
2266  01BF              ___str_24:
2267  01BF  48 49 47 48 20 53 43 4F 52 45 20 30 30 30 30 30 30 20 20 20 53 43 4F 52 45 20 30 30 30 30 30 30 
                        	DEFM "HIGH SCORE 000000   SCORE 000000"
2268  01DF  00          	DEFB 0x00
2269  01E0              	SECTION rodata_compiler
2270  01E0              ___str_25:
2271  01E0  52 4F 55 4E 44 20 53 54 41 52 54 
                        	DEFM "ROUND START"
2272  01EB  00          	DEFB 0x00
2273  01EC              	SECTION code_compiler
2274  07A5              ;	---------------------------------
2275  07A5              ; Function game_print_header
2276  07A5              ; ---------------------------------
2277  07A5              	defc _game_print_header	=	_game_print_score
2278  07A5              	SECTION code_compiler
2279  07A5              ;	---------------------------------
2280  07A5              ; Function game_check_map
2281  07A5              ; ---------------------------------
2282  07A5              _game_check_map:
2283  07A5  CD 00 00    	call	___sdcc_enter_ix
2284  07A8  DD 66 05    	ld	h,(ix+5)
2285  07AB  DD 6E 04    	ld	l,(ix+4)
2286  07AE  E5          	push	hl
2287  07AF  CD 00 00    	call	_spr_calc_index
2288  07B2  F1          	pop	af
2289  07B3  22 00 00    	ld	(_index1),hl
2290  07B6  21 00 00    	ld	hl,_index1
2291  07B9  DD E1       	pop	ix
2292  07BB  C3 BE 07    	jp	_game_check_cell
2293  07BE              	SECTION code_compiler
2294  07BE              ;	---------------------------------
2295  07BE              ; Function game_check_cell
2296  07BE              ; ---------------------------------
2297  07BE              _game_check_cell:
2298  07BE  4E          	ld	c, (hl)
2299  07BF  23          	inc	hl
2300  07C0  46          	ld	b, (hl)
2301  07C1  AF          	xor	a, a
2302  07C2  B9          	cp	a, c
2303  07C3  3E 02       	ld	a,0x02
2304  07C5  98          	sbc	a, b
2305  07C6  30 04       	jr	NC,l_game_check_cell_00102
2306  07C8  2E 01       	ld	l,0x01
2307  07CA  18 13       	jr	l_game_check_cell_00106
2308  07CC              l_game_check_cell_00102:
2309  07CC  21 00 00    	ld	hl,_scr_map
2310  07CF  09          	add	hl, bc
2311  07D0  5E          	ld	e, (hl)
2312  07D1  ED 43 00 00 	ld	(_index1),bc
2313  07D5  7B          	ld	a,e
2314  07D6  D6 03       	sub	a,0x03
2315  07D8  28 04       	jr	Z,l_game_check_cell_00104
2316  07DA  2E 00       	ld	l,0x00
2317  07DC  18 01       	jr	l_game_check_cell_00106
2318  07DE              l_game_check_cell_00104:
2319  07DE  6B          	ld	l, e
2320  07DF              l_game_check_cell_00106:
2321  07DF  C9          	ret
2322  07E0              	SECTION code_compiler
2323  07E0              ;	---------------------------------
2324  07E0              ; Function game_paint_attrib
2325  07E0              ; ---------------------------------
2326  07E0              _game_paint_attrib:
2327  07E0  CD 00 00    	call	___sdcc_enter_ix
2328  07E3  DD 7E 06    	ld	a,(ix+6)
2329  07E6  32 00 00    	ld	(_tmp_uc),a
2330  07E9              l_game_paint_attrib_00103:
2331  07E9  21 00 00    	ld	hl,_tmp_uc
2332  07EC  7E          	ld	a, (hl)
2333  07ED  DD 96 07    	sub	a,(ix+7)
2334  07F0  30 15       	jr	NC,l_game_paint_attrib_00105
2335  07F2  DD 4E 04    	ld	c,(ix+4)
2336  07F5  DD 46 05    	ld	b,(ix+5)
2337  07F8  66          	ld	h,(hl)
2338  07F9  DD 6E 08    	ld	l,(ix+8)
2339  07FC  E5          	push	hl
2340  07FD  C5          	push	bc
2341  07FE  CD 00 00    	call	_NIRVANAP_paintC_callee
2342  0801  21 00 00    	ld	hl,_tmp_uc
2343  0804  34          	inc	(hl)
2344  0805  18 E2       	jr	l_game_paint_attrib_00103
2345  0807              l_game_paint_attrib_00105:
2346  0807  DD E1       	pop	ix
2347  0809  C9          	ret
2348  080A              	SECTION code_compiler
2349  080A              ;	---------------------------------
2350  080A              ; Function game_colour_message
2351  080A              ; ---------------------------------
2352  080A              _game_colour_message:
2353  080A  CD 00 00    	call	___sdcc_enter_ix
2354  080D  F5          	push	af
2355  080E  F5          	push	af
2356  080F  F5          	push	af
2357  0810  F5          	push	af
2358  0811  D1          	pop	de
2359  0812  21 00 00    	ld	hl,_tmp
2360  0815  36 01       	ld	(hl),0x01
2361  0817  2A 00 00    	ld	hl,(_curr_time)
2362  081A  22 00 00    	ld	(_frame_time),hl
2363  081D  E5          	push	hl
2364  081E  DD 7E 04    	ld	a,(ix+4)
2365  0821  4D          	ld	c,l
2366  0822  07          	rlca
2367  0823  07          	rlca
2368  0824  07          	rlca
2369  0825  E6 F8       	and	a,0xf8
2370  0827  DD 77 FA    	ld	(ix-6),a
2371  082A  C6 08       	add	a,0x08
2372  082C  DD 77 FF    	ld	(ix-1),a
2373  082F  DD 77 FE    	ld	(ix-2),a
2374  0832              l_game_colour_message_00112:
2375  0832  3A 00 00    	ld	a,(_tmp)
2376  0835  B7          	or	a, a
2377  0836  CA D5 08    	jp	Z, l_game_colour_message_00114
2378  0839  DD 46 07    	ld	b,(ix+7)
2379  083C  21 00 00    	ld	hl,0x0000
2380  083F  39          	add	hl, sp
2381  0840  EB          	ex	de,hl
2382  0841  C5          	push	bc
2383  0842  33          	inc	sp
2384  0843  D5          	push	de
2385  0844  CD 4B 09    	call	_game_check_time
2386  0847  F1          	pop	af
2387  0848  33          	inc	sp
2388  0849  7D          	ld	a, l
2389  084A  B7          	or	a, a
2390  084B  C2 D5 08    	jp	NZ, l_game_colour_message_00114
2391  084E  3E 05       	ld	a,0x05
2392  0850  F5          	push	af
2393  0851  33          	inc	sp
2394  0852  21 00 00    	ld	hl,_frame_time
2395  0855  E5          	push	hl
2396  0856  CD 4B 09    	call	_game_check_time
2397  0859  F1          	pop	af
2398  085A  33          	inc	sp
2399  085B  DD 75 FD    	ld	(ix-3),l
2400  085E  7D          	ld	a, l
2401  085F  B7          	or	a, a
2402  0860  28 4D       	jr	Z,l_game_colour_message_00105
2403  0862  2A 00 00    	ld	hl,(_curr_time)
2404  0865  DD 74 FC    	ld	(ix-4),h
2405  0868  DD 75 FB    	ld	(ix-5),l
2406  086B  7D          	ld	a, l
2407  086C  21 00 00    	ld	hl,_frame_time
2408  086F  77          	ld	(hl), a
2409  0870  DD 7E FC    	ld	a,(ix-4)
2410  0873  23          	inc	hl
2411  0874  77          	ld	(hl), a
2412  0875  3A 00 00    	ld	a,(_game_over)
2413  0878  B7          	or	a, a
2414  0879  28 1B       	jr	Z,l_game_colour_message_00102
2415  087B  DD 66 FE    	ld	h,(ix-2)
2416  087E  DD 6E 06    	ld	l,(ix+6)
2417  0881  E5          	push	hl
2418  0882  DD 7E 05    	ld	a,(ix+5)
2419  0885  F5          	push	af
2420  0886  33          	inc	sp
2421  0887  21 00 00    	ld	hl,_attrib_hl
2422  088A  E5          	push	hl
2423  088B  CD E0 07    	call	_game_paint_attrib
2424  088E  F1          	pop	af
2425  088F  F1          	pop	af
2426  0890  33          	inc	sp
2427  0891  CD 75 09    	call	_game_rotate_attrib
2428  0894  18 19       	jr	l_game_colour_message_00105
2429  0896              l_game_colour_message_00102:
2430  0896  DD 66 FF    	ld	h,(ix-1)
2431  0899  DD 6E 06    	ld	l,(ix+6)
2432  089C  E5          	push	hl
2433  089D  DD 7E 05    	ld	a,(ix+5)
2434  08A0  F5          	push	af
2435  08A1  33          	inc	sp
2436  08A2  21 00 00    	ld	hl,_attrib_osd
2437  08A5  E5          	push	hl
2438  08A6  CD E0 07    	call	_game_paint_attrib
2439  08A9  F1          	pop	af
2440  08AA  F1          	pop	af
2441  08AB  33          	inc	sp
2442  08AC  CD EA 09    	call	_game_rotate_attrib_osd
2443  08AF              l_game_colour_message_00105:
2444  08AF  DD 7E 09    	ld	a,(ix+9)
2445  08B2  B7          	or	a, a
2446  08B3  CA 32 08    	jp	Z, l_game_colour_message_00112
2447  08B6              l_game_colour_message_00106:
2448  08B6  21 00 00    	ld	hl,_k1
2449  08B9  E5          	push	hl
2450  08BA  2A 00 00    	ld	hl,(_joyfunc1)
2451  08BD  CD 00 00    	call	___sdcc_call_hl
2452  08C0  F1          	pop	af
2453  08C1  DD 74 FC    	ld	(ix-4),h
2454  08C4  DD 75 FB    	ld	(ix-5),l
2455  08C7  7C          	ld	a,h
2456  08C8  DD B6 FB    	or	a,(ix-5)
2457  08CB  CA 32 08    	jp	Z, l_game_colour_message_00112
2458  08CE  21 00 00    	ld	hl,_tmp
2459  08D1  36 00       	ld	(hl),0x00
2460  08D3  18 E1       	jr	l_game_colour_message_00106
2461  08D5              l_game_colour_message_00114:
2462  08D5  DD 7E 06    	ld	a,(ix+6)
2463  08D8  DD 96 05    	sub	a,(ix+5)
2464  08DB  4F          	ld	c, a
2465  08DC  3A 00 00    	ld	a,(_game_over)
2466  08DF  B7          	or	a, a
2467  08E0  28 2F       	jr	Z,l_game_colour_message_00118
2468  08E2  21 00 00    	ld	hl,_tmp1
2469  08E5  71          	ld	(hl), c
2470  08E6  21 00 00    	ld	hl,_tmp0
2471  08E9  36 00       	ld	(hl),0x00
2472  08EB              l_game_colour_message_00121:
2473  08EB  3A 00 00    	ld	a,(_tmp0)
2474  08EE  21 00 00    	ld	hl,_tmp1
2475  08F1  96          	sub	a, (hl)
2476  08F2  30 52       	jr	NC,l_game_colour_message_00126
2477  08F4  DD 7E 05    	ld	a,(ix+5)
2478  08F7  21 00 00    	ld	hl,_tmp0
2479  08FA  86          	add	a, (hl)
2480  08FB  4F          	ld	c, a
2481  08FC  21 EC 01    	ld	hl,___str_26
2482  08FF  E5          	push	hl
2483  0900  79          	ld	a, c
2484  0901  F5          	push	af
2485  0902  33          	inc	sp
2486  0903  DD 7E 04    	ld	a,(ix+4)
2487  0906  F5          	push	af
2488  0907  33          	inc	sp
2489  0908  CD 00 00    	call	_zx_print_str
2490  090B  21 00 00    	ld	hl,_tmp0
2491  090E  34          	inc	(hl)
2492  090F  18 DA       	jr	l_game_colour_message_00121
2493  0911              l_game_colour_message_00118:
2494  0911  21 00 00    	ld	hl,_tmp1
2495  0914  71          	ld	(hl), c
2496  0915  DD 7E FA    	ld	a,(ix-6)
2497  0918  32 00 00    	ld	(_s_lin0),a
2498  091B  DD 7E 05    	ld	a,(ix+5)
2499  091E  CB 3F       	srl	a
2500  0920  87          	add	a, a
2501  0921  32 00 00    	ld	(_s_col1),a
2502  0924  21 00 00    	ld	hl,_tmp0
2503  0927  36 00       	ld	(hl),0x00
2504  0929              l_game_colour_message_00124:
2505  0929  3A 00 00    	ld	a,(_tmp0)
2506  092C  21 00 00    	ld	hl,_tmp1
2507  092F  96          	sub	a, (hl)
2508  0930  30 14       	jr	NC,l_game_colour_message_00126
2509  0932  3A 00 00    	ld	a,(_s_col1)
2510  0935  21 00 00    	ld	hl,_tmp0
2511  0938  86          	add	a, (hl)
2512  0939  32 00 00    	ld	(_s_col0),a
2513  093C  CD 00 00    	call	_spr_back_repaint
2514  093F  21 00 00    	ld	hl,_tmp0
2515  0942  34          	inc	(hl)
2516  0943  34          	inc	(hl)
2517  0944  18 E3       	jr	l_game_colour_message_00124
2518  0946              l_game_colour_message_00126:
2519  0946  DD F9       	ld	sp, ix
2520  0948  DD E1       	pop	ix
2521  094A  C9          	ret
2522  094B              	SECTION rodata_compiler
2523  01EC              ___str_26:
2524  01EC  20          	DEFM " "
2525  01ED  00          	DEFB 0x00
2526  01EE              	SECTION code_compiler
2527  094B              ;	---------------------------------
2528  094B              ; Function game_check_time
2529  094B              ; ---------------------------------
2530  094B              _game_check_time:
2531  094B  CD 00 00    	call	___sdcc_enter_ix
2532  094E  2A 00 00    	ld	hl,(_curr_time)
2533  0951  4D          	ld	c, l
2534  0952  DD 6E 04    	ld	l,(ix+4)
2535  0955  44          	ld	b,h
2536  0956  DD 66 05    	ld	h,(ix+5)
2537  0959  5E          	ld	e, (hl)
2538  095A  23          	inc	hl
2539  095B  56          	ld	d, (hl)
2540  095C  79          	ld	a, c
2541  095D  93          	sub	a, e
2542  095E  4F          	ld	c, a
2543  095F  78          	ld	a, b
2544  0960  9A          	sbc	a, d
2545  0961  47          	ld	b, a
2546  0962  DD 7E 06    	ld	a,(ix+6)
2547  0965  16 00       	ld	d,0x00
2548  0967  91          	sub	a, c
2549  0968  7A          	ld	a, d
2550  0969  98          	sbc	a, b
2551  096A  30 04       	jr	NC,l_game_check_time_00102
2552  096C  2E 01       	ld	l,0x01
2553  096E  18 02       	jr	l_game_check_time_00104
2554  0970              l_game_check_time_00102:
2555  0970  2E 00       	ld	l,0x00
2556  0972              l_game_check_time_00104:
2557  0972  DD E1       	pop	ix
2558  0974  C9          	ret
2559  0975              	SECTION code_compiler
2560  0975              ;	---------------------------------
2561  0975              ; Function game_rotate_attrib
2562  0975              ; ---------------------------------
2563  0975              _game_rotate_attrib:
2564  0975  3E 07       	ld	a,0x07
2565  0977  21 00 00    	ld	hl,_last_rotated
2566  097A  96          	sub	a, (hl)
2567  097B  30 02       	jr	NC,l_game_rotate_attrib_00102
2568  097D  36 00       	ld	(hl),0x00
2569  097F              l_game_rotate_attrib_00102:
2570  097F  3A 00 00    	ld	a,(_last_rotated)
2571  0982  32 00 00    	ld	(_tmp_uc),a
2572  0985              l_game_rotate_attrib_00110:
2573  0985  21 00 00    	ld	hl,_tmp_uc
2574  0988  7E          	ld	a, (hl)
2575  0989  D6 08       	sub	a,0x08
2576  098B  30 5C       	jr	NC,l_game_rotate_attrib_00112
2577  098D  3E 00       	ld	a, +((_obj_col) & 0xFF)
2578  098F  86          	add	a, (hl)
2579  0990  4F          	ld	c, a
2580  0991  3E 00       	ld	a, +((_obj_col) / 256)
2581  0993  CE 00       	adc	a,0x00
2582  0995  47          	ld	b, a
2583  0996  0A          	ld	a, (bc)
2584  0997  4F          	ld	c,a
2585  0998  B7          	or	a, a
2586  0999  28 44       	jr	Z,l_game_rotate_attrib_00106
2587  099B  7E          	ld	a, (hl)
2588  099C  3C          	inc	a
2589  099D  32 00 00    	ld	(_last_rotated),a
2590  09A0  2A 00 00    	ld	hl,(_tmp_uc)
2591  09A3  26 00       	ld	h,0x00
2592  09A5  11 00 00    	ld	de,_obj_lin
2593  09A8  19          	add	hl,de
2594  09A9  46          	ld	b, (hl)
2595  09AA  79          	ld	a, c
2596  09AB  48          	ld	c,b
2597  09AC  47          	ld	b,a
2598  09AD  C5          	push	bc
2599  09AE  21 00 00    	ld	hl,_attrib_key
2600  09B1  E5          	push	hl
2601  09B2  CD 00 00    	call	_NIRVANAP_paintC_callee
2602  09B5  3A 00 00    	ld	a,(_game_attrib_osd)
2603  09B8  D6 07       	sub	a,0x07
2604  09BA  20 05       	jr	NZ,l_game_rotate_attrib_00104
2605  09BC  21 00 00    	ld	hl,_game_attrib_osd
2606  09BF  36 01       	ld	(hl),0x01
2607  09C1              l_game_rotate_attrib_00104:
2608  09C1  21 00 00    	ld	hl,_game_attrib_osd
2609  09C4  34          	inc	(hl)
2610  09C5  3A 00 00    	ld	a,(_map_paper)
2611  09C8  21 00 00    	ld	hl,_game_attrib_osd
2612  09CB  B6          	or	a, (hl)
2613  09CC  32 00 00    	ld	(_attrib_key),a
2614  09CF  32 01 00    	ld	((_attrib_key + 0x0001)),a
2615  09D2  32 02 00    	ld	((_attrib_key + 0x0002)),a
2616  09D5  32 03 00    	ld	((_attrib_key + 0x0003)),a
2617  09D8  21 00 00    	ld	hl,_tmp_uc
2618  09DB  36 08       	ld	(hl),0x08
2619  09DD  18 04       	jr	l_game_rotate_attrib_00111
2620  09DF              l_game_rotate_attrib_00106:
2621  09DF  21 00 00    	ld	hl,_last_rotated
2622  09E2  34          	inc	(hl)
2623  09E3              l_game_rotate_attrib_00111:
2624  09E3  21 00 00    	ld	hl,_tmp_uc
2625  09E6  34          	inc	(hl)
2626  09E7  18 9C       	jr	l_game_rotate_attrib_00110
2627  09E9              l_game_rotate_attrib_00112:
2628  09E9  C9          	ret
2629  09EA              	SECTION code_compiler
2630  09EA              ;	---------------------------------
2631  09EA              ; Function game_rotate_attrib_osd
2632  09EA              ; ---------------------------------
2633  09EA              _game_rotate_attrib_osd:
2634  09EA  3A 00 00    	ld	a,(_game_attrib_osd)
2635  09ED  D6 07       	sub	a,0x07
2636  09EF  20 05       	jr	NZ,l_game_rotate_attrib_osd_00102
2637  09F1  21 00 00    	ld	hl,_game_attrib_osd
2638  09F4  36 01       	ld	(hl),0x01
2639  09F6              l_game_rotate_attrib_osd_00102:
2640  09F6  21 00 00    	ld	hl,_game_attrib_osd
2641  09F9  34          	inc	(hl)
2642  09FA  01 00 00    	ld	bc,_attrib_osd+0
2643  09FD  0A          	ld	a, (bc)
2644  09FE  32 00 00    	ld	(_tmp),a
2645  0A01  3A 03 00    	ld	a,(_attrib_osd + 0x0003)
2646  0A04  02          	ld	(bc), a
2647  0A05  59          	ld	e, c
2648  0A06  50          	ld	d, b
2649  0A07  13          	inc	de
2650  0A08  03          	inc	bc
2651  0A09  03          	inc	bc
2652  0A0A  0A          	ld	a, (bc)
2653  0A0B  12          	ld	(de), a
2654  0A0C  02          	ld	(bc), a
2655  0A0D  3A 00 00    	ld	a,(_tmp)
2656  0A10  32 03 00    	ld	((_attrib_osd + 0x0003)),a
2657  0A13  C9          	ret
2658  0A14              	SECTION code_compiler
2659  0A14              ;	---------------------------------
2660  0A14              ; Function game_attribs
2661  0A14              ; ---------------------------------
2662  0A14              _game_attribs:
2663  0A14  01 00 00    	ld	bc,_attrib0+0
2664  0A17  21 00 00    	ld	hl,_map_paper
2665  0A1A  7E          	ld	a, (hl)
2666  0A1B  F6 41       	or	a,0x41
2667  0A1D  02          	ld	(bc), a
2668  0A1E  59          	ld	e, c
2669  0A1F  50          	ld	d, b
2670  0A20  13          	inc	de
2671  0A21  7E          	ld	a, (hl)
2672  0A22  F6 41       	or	a,0x41
2673  0A24  12          	ld	(de), a
2674  0A25  7E          	ld	a, (hl)
2675  0A26  F6 41       	or	a,0x41
2676  0A28  32 02 00    	ld	((_attrib0 + 0x0002)),a
2677  0A2B  03          	inc	bc
2678  0A2C  03          	inc	bc
2679  0A2D  03          	inc	bc
2680  0A2E  21 00 00    	ld	hl,_map_paper
2681  0A31  7E          	ld	a, (hl)
2682  0A32  F6 43       	or	a,0x43
2683  0A34  02          	ld	(bc), a
2684  0A35  01 00 00    	ld	bc,_attrib1+0
2685  0A38  7E          	ld	a, (hl)
2686  0A39  F6 02       	or	a,0x02
2687  0A3B  02          	ld	(bc), a
2688  0A3C  59          	ld	e, c
2689  0A3D  50          	ld	d, b
2690  0A3E  13          	inc	de
2691  0A3F  7E          	ld	a, (hl)
2692  0A40  F6 42       	or	a,0x42
2693  0A42  12          	ld	(de), a
2694  0A43  7E          	ld	a, (hl)
2695  0A44  F6 03       	or	a,0x03
2696  0A46  32 02 00    	ld	((_attrib1 + 0x0002)),a
2697  0A49  03          	inc	bc
2698  0A4A  03          	inc	bc
2699  0A4B  03          	inc	bc
2700  0A4C  21 00 00    	ld	hl,_map_paper
2701  0A4F  7E          	ld	a, (hl)
2702  0A50  F6 43       	or	a,0x43
2703  0A52  02          	ld	(bc), a
2704  0A53  01 00 00    	ld	bc,_attrib2+0
2705  0A56  7E          	ld	a, (hl)
2706  0A57  F6 02       	or	a,0x02
2707  0A59  02          	ld	(bc), a
2708  0A5A  59          	ld	e, c
2709  0A5B  50          	ld	d, b
2710  0A5C  13          	inc	de
2711  0A5D  7E          	ld	a, (hl)
2712  0A5E  F6 42       	or	a,0x42
2713  0A60  12          	ld	(de), a
2714  0A61  7E          	ld	a, (hl)
2715  0A62  F6 03       	or	a,0x03
2716  0A64  32 02 00    	ld	((_attrib2 + 0x0002)),a
2717  0A67  03          	inc	bc
2718  0A68  03          	inc	bc
2719  0A69  03          	inc	bc
2720  0A6A  21 00 00    	ld	hl,_map_paper
2721  0A6D  7E          	ld	a, (hl)
2722  0A6E  F6 43       	or	a,0x43
2723  0A70  02          	ld	(bc), a
2724  0A71  01 00 00    	ld	bc,_attrib3+0
2725  0A74  7E          	ld	a, (hl)
2726  0A75  F6 42       	or	a,0x42
2727  0A77  02          	ld	(bc), a
2728  0A78  59          	ld	e, c
2729  0A79  50          	ld	d, b
2730  0A7A  13          	inc	de
2731  0A7B  7E          	ld	a, (hl)
2732  0A7C  F6 02       	or	a,0x02
2733  0A7E  12          	ld	(de), a
2734  0A7F  7E          	ld	a, (hl)
2735  0A80  F6 03       	or	a,0x03
2736  0A82  32 02 00    	ld	((_attrib3 + 0x0002)),a
2737  0A85  03          	inc	bc
2738  0A86  03          	inc	bc
2739  0A87  03          	inc	bc
2740  0A88  21 00 00    	ld	hl,_map_paper
2741  0A8B  7E          	ld	a, (hl)
2742  0A8C  F6 43       	or	a,0x43
2743  0A8E  02          	ld	(bc), a
2744  0A8F  01 00 00    	ld	bc,_attrib4+0
2745  0A92  7E          	ld	a, (hl)
2746  0A93  F6 57       	or	a,0x57
2747  0A95  02          	ld	(bc), a
2748  0A96  59          	ld	e, c
2749  0A97  50          	ld	d, b
2750  0A98  13          	inc	de
2751  0A99  7E          	ld	a, (hl)
2752  0A9A  F6 56       	or	a,0x56
2753  0A9C  12          	ld	(de), a
2754  0A9D  7E          	ld	a, (hl)
2755  0A9E  F6 57       	or	a,0x57
2756  0AA0  32 02 00    	ld	((_attrib4 + 0x0002)),a
2757  0AA3  03          	inc	bc
2758  0AA4  03          	inc	bc
2759  0AA5  03          	inc	bc
2760  0AA6  21 00 00    	ld	hl,_map_paper
2761  0AA9  7E          	ld	a, (hl)
2762  0AAA  F6 56       	or	a,0x56
2763  0AAC  02          	ld	(bc), a
2764  0AAD  01 00 00    	ld	bc,_attrib5+0
2765  0AB0  7E          	ld	a, (hl)
2766  0AB1  F6 44       	or	a,0x44
2767  0AB3  02          	ld	(bc), a
2768  0AB4  59          	ld	e, c
2769  0AB5  50          	ld	d, b
2770  0AB6  13          	inc	de
2771  0AB7  7E          	ld	a, (hl)
2772  0AB8  F6 44       	or	a,0x44
2773  0ABA  12          	ld	(de), a
2774  0ABB  7E          	ld	a, (hl)
2775  0ABC  F6 45       	or	a,0x45
2776  0ABE  32 02 00    	ld	((_attrib5 + 0x0002)),a
2777  0AC1  03          	inc	bc
2778  0AC2  03          	inc	bc
2779  0AC3  03          	inc	bc
2780  0AC4  21 00 00    	ld	hl,_map_paper
2781  0AC7  7E          	ld	a, (hl)
2782  0AC8  F6 45       	or	a,0x45
2783  0ACA  02          	ld	(bc), a
2784  0ACB  01 00 00    	ld	bc,_attrib6+0
2785  0ACE  7E          	ld	a, (hl)
2786  0ACF  F6 46       	or	a,0x46
2787  0AD1  02          	ld	(bc), a
2788  0AD2  59          	ld	e, c
2789  0AD3  50          	ld	d, b
2790  0AD4  13          	inc	de
2791  0AD5  7E          	ld	a, (hl)
2792  0AD6  F6 44       	or	a,0x44
2793  0AD8  12          	ld	(de), a
2794  0AD9  7E          	ld	a, (hl)
2795  0ADA  F6 44       	or	a,0x44
2796  0ADC  32 02 00    	ld	((_attrib6 + 0x0002)),a
2797  0ADF  03          	inc	bc
2798  0AE0  03          	inc	bc
2799  0AE1  03          	inc	bc
2800  0AE2  21 00 00    	ld	hl,_map_paper
2801  0AE5  7E          	ld	a, (hl)
2802  0AE6  F6 44       	or	a,0x44
2803  0AE8  02          	ld	(bc), a
2804  0AE9  01 00 00    	ld	bc,_attrib7+0
2805  0AEC  7E          	ld	a, (hl)
2806  0AED  F6 41       	or	a,0x41
2807  0AEF  02          	ld	(bc), a
2808  0AF0  59          	ld	e, c
2809  0AF1  50          	ld	d, b
2810  0AF2  13          	inc	de
2811  0AF3  7E          	ld	a, (hl)
2812  0AF4  F6 05       	or	a,0x05
2813  0AF6  12          	ld	(de), a
2814  0AF7  7E          	ld	a, (hl)
2815  0AF8  F6 45       	or	a,0x45
2816  0AFA  32 02 00    	ld	((_attrib7 + 0x0002)),a
2817  0AFD  03          	inc	bc
2818  0AFE  03          	inc	bc
2819  0AFF  03          	inc	bc
2820  0B00  21 00 00    	ld	hl,_map_paper
2821  0B03  7E          	ld	a, (hl)
2822  0B04  F6 47       	or	a,0x47
2823  0B06  02          	ld	(bc), a
2824  0B07  01 00 00    	ld	bc,_attrib_key+0
2825  0B0A  7E          	ld	a, (hl)
2826  0B0B  F6 46       	or	a,0x46
2827  0B0D  02          	ld	(bc), a
2828  0B0E  59          	ld	e, c
2829  0B0F  50          	ld	d, b
2830  0B10  13          	inc	de
2831  0B11  7E          	ld	a, (hl)
2832  0B12  F6 42       	or	a,0x42
2833  0B14  12          	ld	(de), a
2834  0B15  7E          	ld	a, (hl)
2835  0B16  F6 46       	or	a,0x46
2836  0B18  32 02 00    	ld	((_attrib_key + 0x0002)),a
2837  0B1B  03          	inc	bc
2838  0B1C  03          	inc	bc
2839  0B1D  03          	inc	bc
2840  0B1E  21 00 00    	ld	hl,_map_paper
2841  0B21  7E          	ld	a, (hl)
2842  0B22  F6 42       	or	a,0x42
2843  0B24  02          	ld	(bc), a
2844  0B25  01 00 00    	ld	bc,_attrib+0
2845  0B28  7E          	ld	a, (hl)
2846  0B29  F6 47       	or	a,0x47
2847  0B2B  02          	ld	(bc), a
2848  0B2C  59          	ld	e, c
2849  0B2D  50          	ld	d, b
2850  0B2E  13          	inc	de
2851  0B2F  7E          	ld	a, (hl)
2852  0B30  F6 47       	or	a,0x47
2853  0B32  12          	ld	(de), a
2854  0B33  7E          	ld	a, (hl)
2855  0B34  F6 47       	or	a,0x47
2856  0B36  32 02 00    	ld	((_attrib + 0x0002)),a
2857  0B39  03          	inc	bc
2858  0B3A  03          	inc	bc
2859  0B3B  03          	inc	bc
2860  0B3C  21 00 00    	ld	hl,_map_paper
2861  0B3F  7E          	ld	a, (hl)
2862  0B40  F6 47       	or	a,0x47
2863  0B42  02          	ld	(bc), a
2864  0B43  01 00 00    	ld	bc,_attrib_hl+0
2865  0B46  7E          	ld	a, (hl)
2866  0B47  F6 33       	or	a,0x33
2867  0B49  02          	ld	(bc), a
2868  0B4A  59          	ld	e, c
2869  0B4B  50          	ld	d, b
2870  0B4C  13          	inc	de
2871  0B4D  7E          	ld	a, (hl)
2872  0B4E  F6 30       	or	a,0x30
2873  0B50  12          	ld	(de), a
2874  0B51  7E          	ld	a, (hl)
2875  0B52  F6 31       	or	a,0x31
2876  0B54  32 02 00    	ld	((_attrib_hl + 0x0002)),a
2877  0B57  03          	inc	bc
2878  0B58  03          	inc	bc
2879  0B59  03          	inc	bc
2880  0B5A  3A 00 00    	ld	a,(_map_paper)
2881  0B5D  F6 30       	or	a,0x30
2882  0B5F  02          	ld	(bc), a
2883  0B60  21 70 71    	ld	hl,0x7170
2884  0B63  22 00 00    	ld	(_attrib_osd),hl
2885  0B66  21 71 73    	ld	hl,0x7371
2886  0B69  22 02 00    	ld	(_attrib_osd + 2),hl
2887  0B6C  01 00 00    	ld	bc,_attrib_red+0
2888  0B6F  21 00 00    	ld	hl,_map_paper
2889  0B72  7E          	ld	a, (hl)
2890  0B73  F6 17       	or	a,0x17
2891  0B75  02          	ld	(bc), a
2892  0B76  59          	ld	e, c
2893  0B77  50          	ld	d, b
2894  0B78  13          	inc	de
2895  0B79  7E          	ld	a, (hl)
2896  0B7A  F6 17       	or	a,0x17
2897  0B7C  12          	ld	(de), a
2898  0B7D  7E          	ld	a, (hl)
2899  0B7E  F6 17       	or	a,0x17
2900  0B80  32 02 00    	ld	((_attrib_red + 0x0002)),a
2901  0B83  03          	inc	bc
2902  0B84  03          	inc	bc
2903  0B85  03          	inc	bc
2904  0B86  3A 00 00    	ld	a,(_map_paper)
2905  0B89  F6 17       	or	a,0x17
2906  0B8B  02          	ld	(bc), a
2907  0B8C  C9          	ret
2908  0B8D              	SECTION code_compiler
2909  0B8D              ;	---------------------------------
2910  0B8D              ; Function game_page_map
2911  0B8D              ; ---------------------------------
2912  0B8D              _game_page_map:
2913  0B8D  CD 00 00    	call	___sdcc_enter_ix
2914  0B90  21 AD FF    	ld	hl, -83
2915  0B93  39          	add	hl, sp
2916  0B94  F9          	ld	sp, hl
2917  0B95  CD 00 00    	call	_spr_clear_scr
2918  0B98  F3          	di
2919  0B99  21 00 00    	ld	hl,_game_world
2920  0B9C  4E          	ld	c, (hl)
2921  0B9D  3A 00 00    	ld	a,(_scr_curr)
2922  0BA0  DD 77 DE    	ld	(ix-34),a
2923  0BA3  79          	ld	a, c
2924  0BA4  07          	rlca
2925  0BA5  07          	rlca
2926  0BA6  07          	rlca
2927  0BA7  07          	rlca
2928  0BA8  E6 F0       	and	a,0xf0
2929  0BAA  47          	ld	b,a
2930  0BAB  DD 86 DE    	add	a,(ix-34)
2931  0BAE  DD 77 DD    	ld	(ix-35),a
2932  0BB1  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
2933  0BB4  36 16       	ld	(hl),0x16
2934  0BB6  C5          	push	bc
2935  0BB7  3E 16       	ld	a,0x16
2936  0BB9  01 FD 7F    	ld	bc,_IO_7FFD
2937  0BBC  ED 79       	out	(c),a
2938  0BBE  C1          	pop	bc
2939  0BBF  DD 7E DE    	ld	a,(ix-34)
2940  0BC2  3C          	inc	a
2941  0BC3  20 12       	jr	NZ,l_game_page_map_00102
2942  0BC5  11 00 00    	ld	de,_start_scr0+0
2943  0BC8  69          	ld	l,c
2944  0BC9  26 00       	ld	h,0x00
2945  0BCB  19          	add	hl, de
2946  0BCC  7E          	ld	a, (hl)
2947  0BCD  DD 77 DE    	ld	(ix-34),a
2948  0BD0  78          	ld	a, b
2949  0BD1  DD 86 DE    	add	a,(ix-34)
2950  0BD4  DD 77 DD    	ld	(ix-35),a
2951  0BD7              l_game_page_map_00102:
2952  0BD7  01 00 00    	ld	bc,_paper0+0
2953  0BDA  DD 6E DD    	ld	l,(ix-35)
2954  0BDD  26 00       	ld	h,0x00
2955  0BDF  09          	add	hl, bc
2956  0BE0  7E          	ld	a, (hl)
2957  0BE1  DD 77 DF    	ld	(ix-33),a
2958  0BE4  3E 10       	ld	a,0x10
2959  0BE6  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
2960  0BE9  01 FD 7F    	ld	bc,_IO_7FFD
2961  0BEC  ED 79       	out	(c),a
2962  0BEE  DD 4E DE    	ld	c,(ix-34)
2963  0BF1  CB 39       	srl	c
2964  0BF3  06 00       	ld	b,0x00
2965  0BF5  69          	ld	l, c
2966  0BF6  60          	ld	h, b
2967  0BF7  29          	add	hl, hl
2968  0BF8  09          	add	hl, bc
2969  0BF9  AF          	xor	a,a
2970  0BFA  CB 3C       	srl	h
2971  0BFC  CB 1D       	rr	l
2972  0BFE  1F          	rra
2973  0BFF  CB 3C       	srl	h
2974  0C01  CB 1D       	rr	l
2975  0C03  1F          	rra
2976  0C04  DD 77 E2    	ld	(ix-30),a
2977  0C07  DD 75 E3    	ld	(ix-29),l
2978  0C0A  21 00 00    	ld	hl,0x0000
2979  0C0D  39          	add	hl, sp
2980  0C0E  DD 75 FE    	ld	(ix-2),l
2981  0C11  DD 74 FF    	ld	(ix-1),h
2982  0C14  DD 75 FC    	ld	(ix-4),l
2983  0C17  DD 74 FD    	ld	(ix-3),h
2984  0C1A  DD 7E FE    	ld	a,(ix-2)
2985  0C1D  DD 77 FA    	ld	(ix-6),a
2986  0C20  DD 7E FF    	ld	a,(ix-1)
2987  0C23  DD 77 FB    	ld	(ix-5),a
2988  0C26  DD 7E FE    	ld	a,(ix-2)
2989  0C29  DD 77 F8    	ld	(ix-8),a
2990  0C2C  DD 7E FF    	ld	a,(ix-1)
2991  0C2F  DD 77 F9    	ld	(ix-7),a
2992  0C32  DD 7E DE    	ld	a,(ix-34)
2993  0C35  E6 01       	and	a,0x01
2994  0C37  DD 77 F7    	ld	(ix-9),a
2995  0C3A  DD 7E FE    	ld	a,(ix-2)
2996  0C3D  DD 77 F5    	ld	(ix-11),a
2997  0C40  DD 7E FF    	ld	a,(ix-1)
2998  0C43  DD 77 F6    	ld	(ix-10),a
2999  0C46  DD 7E FE    	ld	a,(ix-2)
3000  0C49  DD 77 F3    	ld	(ix-13),a
3001  0C4C  DD 7E FF    	ld	a,(ix-1)
3002  0C4F  DD 77 F4    	ld	(ix-12),a
3003  0C52  DD 7E FE    	ld	a,(ix-2)
3004  0C55  DD 77 F1    	ld	(ix-15),a
3005  0C58  DD 7E FF    	ld	a,(ix-1)
3006  0C5B  DD 77 F2    	ld	(ix-14),a
3007  0C5E  DD 36 E4 00 	ld	(ix-28),0x00
3008  0C62  DD 36 E5 00 	ld	(ix-27),0x00
3009  0C66              l_game_page_map_00127:
3010  0C66  DD 7E E4    	ld	a,(ix-28)
3011  0C69  D6 F0       	sub	a,0xf0
3012  0C6B  DD 7E E5    	ld	a,(ix-27)
3013  0C6E  DE 00       	sbc	a,0x00
3014  0C70  D2 2F 0E    	jp	NC, l_game_page_map_00129
3015  0C73  3E 13       	ld	a,0x13
3016  0C75  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
3017  0C78  01 FD 7F    	ld	bc,_IO_7FFD
3018  0C7B  ED 79       	out	(c),a
3019  0C7D  DD 36 E8 00 	ld	(ix-24),0x00
3020  0C81  DD 36 E9 00 	ld	(ix-23),0x00
3021  0C85              l_game_page_map_00103:
3022  0C85  DD 7E E8    	ld	a,(ix-24)
3023  0C88  D6 30       	sub	a,0x30
3024  0C8A  DD 7E E9    	ld	a,(ix-23)
3025  0C8D  DE 00       	sbc	a,0x00
3026  0C8F  30 54       	jr	NC,l_game_page_map_00105
3027  0C91  DD 7E F8    	ld	a,(ix-8)
3028  0C94  DD 86 E8    	add	a,(ix-24)
3029  0C97  DD 77 EF    	ld	(ix-17),a
3030  0C9A  DD 7E F9    	ld	a,(ix-7)
3031  0C9D  DD 8E E9    	adc	a,(ix-23)
3032  0CA0  DD 77 F0    	ld	(ix-16),a
3033  0CA3  DD 7E E2    	ld	a,(ix-30)
3034  0CA6  DD 86 E8    	add	a,(ix-24)
3035  0CA9  DD 77 ED    	ld	(ix-19),a
3036  0CAC  DD 7E E3    	ld	a,(ix-29)
3037  0CAF  DD 8E E9    	adc	a,(ix-23)
3038  0CB2  DD 77 EE    	ld	(ix-18),a
3039  0CB5  DD 7E ED    	ld	a,(ix-19)
3040  0CB8  DD 86 E4    	add	a,(ix-28)
3041  0CBB  DD 77 ED    	ld	(ix-19),a
3042  0CBE  6F          	ld	l,a
3043  0CBF  DD 7E EE    	ld	a,(ix-18)
3044  0CC2  DD 8E E5    	adc	a,(ix-27)
3045  0CC5  DD 77 EE    	ld	(ix-18),a
3046  0CC8  67          	ld	h,a
3047  0CC9  01 00 00    	ld	bc,_hibtiles
3048  0CCC  09          	add	hl,bc
3049  0CCD  DD 75 ED    	ld	(ix-19),l
3050  0CD0  DD 74 EE    	ld	(ix-18),h
3051  0CD3  4E          	ld	c, (hl)
3052  0CD4  DD 6E EF    	ld	l,(ix-17)
3053  0CD7  DD 66 F0    	ld	h,(ix-16)
3054  0CDA  71          	ld	(hl), c
3055  0CDB  DD 34 E8    	inc	(ix-24)
3056  0CDE  20 A5       	jr	NZ,l_game_page_map_00103
3057  0CE0  DD 34 E9    	inc	(ix-23)
3058  0CE3  18 A0       	jr	l_game_page_map_00103
3059  0CE5              l_game_page_map_00105:
3060  0CE5  3E 10       	ld	a,0x10
3061  0CE7  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
3062  0CEA  01 FD 7F    	ld	bc,_IO_7FFD
3063  0CED  ED 79       	out	(c),a
3064  0CEF  DD 7E F7    	ld	a,(ix-9)
3065  0CF2  B7          	or	a, a
3066  0CF3  C2 99 0D    	jp	NZ, l_game_page_map_00176
3067  0CF6  01 00 00    	ld	bc,0x0000
3068  0CF9              l_game_page_map_00106:
3069  0CF9  79          	ld	a, c
3070  0CFA  D6 10       	sub	a,0x10
3071  0CFC  78          	ld	a, b
3072  0CFD  DE 00       	sbc	a,0x00
3073  0CFF  30 18       	jr	NC,l_game_page_map_00108
3074  0D01  DD 6E E4    	ld	l,(ix-28)
3075  0D04  DD 66 E5    	ld	h,(ix-27)
3076  0D07  09          	add	hl, bc
3077  0D08  11 00 00    	ld	de,_btiles
3078  0D0B  19          	add	hl,de
3079  0D0C  EB          	ex	de,hl
3080  0D0D  DD 6E FE    	ld	l,(ix-2)
3081  0D10  DD 66 FF    	ld	h,(ix-1)
3082  0D13  09          	add	hl, bc
3083  0D14  7E          	ld	a, (hl)
3084  0D15  12          	ld	(de), a
3085  0D16  03          	inc	bc
3086  0D17  18 E0       	jr	l_game_page_map_00106
3087  0D19              l_game_page_map_00108:
3088  0D19  DD 36 E8 20 	ld	(ix-24),0x20
3089  0D1D  DD 36 E9 00 	ld	(ix-23),0x00
3090  0D21              l_game_page_map_00109:
3091  0D21  DD 7E E8    	ld	a,(ix-24)
3092  0D24  D6 24       	sub	a,0x24
3093  0D26  DD 7E E9    	ld	a,(ix-23)
3094  0D29  DE 00       	sbc	a,0x00
3095  0D2B  30 48       	jr	NC,l_game_page_map_00111
3096  0D2D  DD 7E E8    	ld	a,(ix-24)
3097  0D30  DD 86 E4    	add	a,(ix-28)
3098  0D33  DD 77 ED    	ld	(ix-19),a
3099  0D36  DD 7E E9    	ld	a,(ix-23)
3100  0D39  DD 8E E5    	adc	a,(ix-27)
3101  0D3C  DD 77 EE    	ld	(ix-18),a
3102  0D3F  3E 00       	ld	a, +((_btiles) & 0xFF)
3103  0D41  DD 86 ED    	add	a,(ix-19)
3104  0D44  DD 77 ED    	ld	(ix-19),a
3105  0D47  3E 00       	ld	a, +((_btiles) / 256)
3106  0D49  DD 8E EE    	adc	a,(ix-18)
3107  0D4C  DD 77 EE    	ld	(ix-18),a
3108  0D4F  DD 7E FC    	ld	a,(ix-4)
3109  0D52  DD 86 E8    	add	a,(ix-24)
3110  0D55  DD 77 EF    	ld	(ix-17),a
3111  0D58  6F          	ld	l,a
3112  0D59  DD 7E FD    	ld	a,(ix-3)
3113  0D5C  DD 8E E9    	adc	a,(ix-23)
3114  0D5F  DD 77 F0    	ld	(ix-16),a
3115  0D62  67          	ld	h,a
3116  0D63  4E          	ld	c, (hl)
3117  0D64  DD 6E ED    	ld	l,(ix-19)
3118  0D67  DD 66 EE    	ld	h,(ix-18)
3119  0D6A  71          	ld	(hl), c
3120  0D6B  DD 34 E8    	inc	(ix-24)
3121  0D6E  20 B1       	jr	NZ,l_game_page_map_00109
3122  0D70  DD 34 E9    	inc	(ix-23)
3123  0D73  18 AC       	jr	l_game_page_map_00109
3124  0D75              l_game_page_map_00111:
3125  0D75  01 28 00    	ld	bc,0x0028
3126  0D78              l_game_page_map_00112:
3127  0D78  79          	ld	a, c
3128  0D79  D6 2C       	sub	a,0x2c
3129  0D7B  78          	ld	a, b
3130  0D7C  DE 00       	sbc	a,0x00
3131  0D7E  D2 1C 0E    	jp	NC, l_game_page_map_00126
3132  0D81  DD 6E E4    	ld	l,(ix-28)
3133  0D84  DD 66 E5    	ld	h,(ix-27)
3134  0D87  09          	add	hl, bc
3135  0D88  11 00 00    	ld	de,_btiles
3136  0D8B  19          	add	hl,de
3137  0D8C  EB          	ex	de,hl
3138  0D8D  DD 6E FA    	ld	l,(ix-6)
3139  0D90  DD 66 FB    	ld	h,(ix-5)
3140  0D93  09          	add	hl, bc
3141  0D94  7E          	ld	a, (hl)
3142  0D95  12          	ld	(de), a
3143  0D96  03          	inc	bc
3144  0D97  18 DF       	jr	l_game_page_map_00112
3145  0D99              l_game_page_map_00176:
3146  0D99  01 00 00    	ld	bc,0x0000
3147  0D9C              l_game_page_map_00115:
3148  0D9C  79          	ld	a, c
3149  0D9D  D6 10       	sub	a,0x10
3150  0D9F  78          	ld	a, b
3151  0DA0  DE 00       	sbc	a,0x00
3152  0DA2  30 20       	jr	NC,l_game_page_map_00117
3153  0DA4  DD 6E E4    	ld	l,(ix-28)
3154  0DA7  DD 66 E5    	ld	h,(ix-27)
3155  0DAA  09          	add	hl, bc
3156  0DAB  11 00 00    	ld	de,_btiles
3157  0DAE  19          	add	hl,de
3158  0DAF  79          	ld	a,c
3159  0DB0  EB          	ex	de,hl
3160  0DB1  C6 10       	add	a,0x10
3161  0DB3  6F          	ld	l, a
3162  0DB4  DD 7E F5    	ld	a,(ix-11)
3163  0DB7  85          	add	a, l
3164  0DB8  6F          	ld	l, a
3165  0DB9  DD 7E F6    	ld	a,(ix-10)
3166  0DBC  CE 00       	adc	a,0x00
3167  0DBE  67          	ld	h, a
3168  0DBF  7E          	ld	a, (hl)
3169  0DC0  12          	ld	(de), a
3170  0DC1  03          	inc	bc
3171  0DC2  18 D8       	jr	l_game_page_map_00115
3172  0DC4              l_game_page_map_00117:
3173  0DC4  01 20 00    	ld	bc,0x0020
3174  0DC7              l_game_page_map_00118:
3175  0DC7  79          	ld	a, c
3176  0DC8  D6 24       	sub	a,0x24
3177  0DCA  78          	ld	a, b
3178  0DCB  DE 00       	sbc	a,0x00
3179  0DCD  30 21       	jr	NC,l_game_page_map_00120
3180  0DCF  DD 6E E4    	ld	l,(ix-28)
3181  0DD2  DD 66 E5    	ld	h,(ix-27)
3182  0DD5  09          	add	hl, bc
3183  0DD6  11 00 00    	ld	de,_btiles
3184  0DD9  19          	add	hl,de
3185  0DDA  59          	ld	e,c
3186  0DDB  EB          	ex	de,hl
3187  0DDC  2C          	inc	l
3188  0DDD  2C          	inc	l
3189  0DDE  2C          	inc	l
3190  0DDF  2C          	inc	l
3191  0DE0  DD 7E F3    	ld	a,(ix-13)
3192  0DE3  85          	add	a, l
3193  0DE4  6F          	ld	l, a
3194  0DE5  DD 7E F4    	ld	a,(ix-12)
3195  0DE8  CE 00       	adc	a,0x00
3196  0DEA  67          	ld	h, a
3197  0DEB  7E          	ld	a, (hl)
3198  0DEC  12          	ld	(de), a
3199  0DED  03          	inc	bc
3200  0DEE  18 D7       	jr	l_game_page_map_00118
3201  0DF0              l_game_page_map_00120:
3202  0DF0  01 28 00    	ld	bc,0x0028
3203  0DF3              l_game_page_map_00121:
3204  0DF3  79          	ld	a, c
3205  0DF4  D6 2C       	sub	a,0x2c
3206  0DF6  78          	ld	a, b
3207  0DF7  DE 00       	sbc	a,0x00
3208  0DF9  30 21       	jr	NC,l_game_page_map_00126
3209  0DFB  DD 6E E4    	ld	l,(ix-28)
3210  0DFE  DD 66 E5    	ld	h,(ix-27)
3211  0E01  09          	add	hl, bc
3212  0E02  11 00 00    	ld	de,_btiles
3213  0E05  19          	add	hl,de
3214  0E06  59          	ld	e,c
3215  0E07  EB          	ex	de,hl
3216  0E08  2C          	inc	l
3217  0E09  2C          	inc	l
3218  0E0A  2C          	inc	l
3219  0E0B  2C          	inc	l
3220  0E0C  DD 7E F1    	ld	a,(ix-15)
3221  0E0F  85          	add	a, l
3222  0E10  6F          	ld	l, a
3223  0E11  DD 7E F2    	ld	a,(ix-14)
3224  0E14  CE 00       	adc	a,0x00
3225  0E16  67          	ld	h, a
3226  0E17  7E          	ld	a, (hl)
3227  0E18  12          	ld	(de), a
3228  0E19  03          	inc	bc
3229  0E1A  18 D7       	jr	l_game_page_map_00121
3230  0E1C              l_game_page_map_00126:
3231  0E1C  DD 7E E4    	ld	a,(ix-28)
3232  0E1F  C6 30       	add	a,0x30
3233  0E21  DD 77 E4    	ld	(ix-28),a
3234  0E24  DD 7E E5    	ld	a,(ix-27)
3235  0E27  CE 00       	adc	a,0x00
3236  0E29  DD 77 E5    	ld	(ix-27),a
3237  0E2C  C3 66 0C    	jp	l_game_page_map_00127
3238  0E2F              l_game_page_map_00129:
3239  0E2F  DD 36 E8 C0 	ld	(ix-24),0xc0
3240  0E33  DD 36 E9 00 	ld	(ix-23),0x00
3241  0E37              l_game_page_map_00130:
3242  0E37  DD 7E E8    	ld	a,(ix-24)
3243  0E3A  D6 80       	sub	a,0x80
3244  0E3C  DD 7E E9    	ld	a,(ix-23)
3245  0E3F  DE 01       	sbc	a,0x01
3246  0E41  30 18       	jr	NC,l_game_page_map_00132
3247  0E43  3E 00       	ld	a, +((_btiles) & 0xFF)
3248  0E45  DD 86 E8    	add	a,(ix-24)
3249  0E48  4F          	ld	c, a
3250  0E49  3E 00       	ld	a, +((_btiles) / 256)
3251  0E4B  DD 8E E9    	adc	a,(ix-23)
3252  0E4E  47          	ld	b, a
3253  0E4F  AF          	xor	a, a
3254  0E50  02          	ld	(bc), a
3255  0E51  DD 34 E8    	inc	(ix-24)
3256  0E54  20 E1       	jr	NZ,l_game_page_map_00130
3257  0E56  DD 34 E9    	inc	(ix-23)
3258  0E59  18 DC       	jr	l_game_page_map_00130
3259  0E5B              l_game_page_map_00132:
3260  0E5B  DD 7E DF    	ld	a,(ix-33)
3261  0E5E  F6 07       	or	a,0x07
3262  0E60  DD 77 ED    	ld	(ix-19),a
3263  0E63  DD 36 E4 E0 	ld	(ix-28),0xe0
3264  0E67  DD 36 E5 00 	ld	(ix-27),0x00
3265  0E6B              l_game_page_map_00136:
3266  0E6B  DD 7E E4    	ld	a,(ix-28)
3267  0E6E  D6 80       	sub	a,0x80
3268  0E70  DD 7E E5    	ld	a,(ix-27)
3269  0E73  DE 01       	sbc	a,0x01
3270  0E75  30 2F       	jr	NC,l_game_page_map_00138
3271  0E77  01 00 00    	ld	bc,0x0000
3272  0E7A              l_game_page_map_00133:
3273  0E7A  79          	ld	a, c
3274  0E7B  D6 10       	sub	a,0x10
3275  0E7D  78          	ld	a, b
3276  0E7E  DE 00       	sbc	a,0x00
3277  0E80  30 12       	jr	NC,l_game_page_map_00135
3278  0E82  DD 6E E4    	ld	l,(ix-28)
3279  0E85  DD 66 E5    	ld	h,(ix-27)
3280  0E88  09          	add	hl, bc
3281  0E89  11 00 00    	ld	de,_btiles
3282  0E8C  19          	add	hl, de
3283  0E8D  DD 7E ED    	ld	a,(ix-19)
3284  0E90  77          	ld	(hl), a
3285  0E91  03          	inc	bc
3286  0E92  18 E6       	jr	l_game_page_map_00133
3287  0E94              l_game_page_map_00135:
3288  0E94  DD 7E E4    	ld	a,(ix-28)
3289  0E97  C6 30       	add	a,0x30
3290  0E99  DD 77 E4    	ld	(ix-28),a
3291  0E9C  DD 7E E5    	ld	a,(ix-27)
3292  0E9F  CE 00       	adc	a,0x00
3293  0EA1  DD 77 E5    	ld	(ix-27),a
3294  0EA4  18 C5       	jr	l_game_page_map_00136
3295  0EA6              l_game_page_map_00138:
3296  0EA6  DD 36 E8 00 	ld	(ix-24),0x00
3297  0EAA  DD 36 E9 00 	ld	(ix-23),0x00
3298  0EAE              l_game_page_map_00139:
3299  0EAE  DD 7E E8    	ld	a,(ix-24)
3300  0EB1  D6 10       	sub	a,0x10
3301  0EB3  DD 7E E9    	ld	a,(ix-23)
3302  0EB6  DE 00       	sbc	a,0x00
3303  0EB8  30 30       	jr	NC,l_game_page_map_00141
3304  0EBA  DD 7E E8    	ld	a,(ix-24)
3305  0EBD  C6 C0       	add	a,0xc0
3306  0EBF  4F          	ld	c, a
3307  0EC0  DD 7E E9    	ld	a,(ix-23)
3308  0EC3  CE 00       	adc	a,0x00
3309  0EC5  47          	ld	b, a
3310  0EC6  21 00 00    	ld	hl,_btiles
3311  0EC9  09          	add	hl,bc
3312  0ECA  3E 00       	ld	a,+((_btiles) & 0xFF)
3313  0ECC  DD 86 E8    	add	a,(ix-24)
3314  0ECF  5F          	ld	e,a
3315  0ED0  3E 00       	ld	a,+((_btiles) / 256)
3316  0ED2  DD 8E E9    	adc	a,(ix-23)
3317  0ED5  57          	ld	d,a
3318  0ED6  1A          	ld	a,(de)
3319  0ED7  77          	ld	(hl),a
3320  0ED8  DD 7E E8    	ld	a,(ix-24)
3321  0EDB  C6 02       	add	a,0x02
3322  0EDD  DD 77 E8    	ld	(ix-24),a
3323  0EE0  DD 7E E9    	ld	a,(ix-23)
3324  0EE3  CE 00       	adc	a,0x00
3325  0EE5  DD 77 E9    	ld	(ix-23),a
3326  0EE8  18 C4       	jr	l_game_page_map_00139
3327  0EEA              l_game_page_map_00141:
3328  0EEA  DD 36 E8 00 	ld	(ix-24),0x00
3329  0EEE  DD 36 E9 00 	ld	(ix-23),0x00
3330  0EF2              l_game_page_map_00142:
3331  0EF2  DD 7E E8    	ld	a,(ix-24)
3332  0EF5  D6 10       	sub	a,0x10
3333  0EF7  DD 7E E9    	ld	a,(ix-23)
3334  0EFA  DE 00       	sbc	a,0x00
3335  0EFC  30 20       	jr	NC,l_game_page_map_00144
3336  0EFE  3E 00       	ld	a, +((_btiles) & 0xFF)
3337  0F00  DD 86 E8    	add	a,(ix-24)
3338  0F03  4F          	ld	c, a
3339  0F04  3E 00       	ld	a, +((_btiles) / 256)
3340  0F06  DD 8E E9    	adc	a,(ix-23)
3341  0F09  47          	ld	b, a
3342  0F0A  AF          	xor	a, a
3343  0F0B  02          	ld	(bc), a
3344  0F0C  DD 7E E8    	ld	a,(ix-24)
3345  0F0F  C6 02       	add	a,0x02
3346  0F11  DD 77 E8    	ld	(ix-24),a
3347  0F14  DD 7E E9    	ld	a,(ix-23)
3348  0F17  CE 00       	adc	a,0x00
3349  0F19  DD 77 E9    	ld	(ix-23),a
3350  0F1C  18 D4       	jr	l_game_page_map_00142
3351  0F1E              l_game_page_map_00144:
3352  0F1E  01 30 00    	ld	bc,_btiles + 48
3353  0F21  0A          	ld	a, (bc)
3354  0F22  32 C3 00    	ld	((_btiles + 0x00c3)),a
3355  0F25  3A 32 00    	ld	a,(_btiles + 0x0032)
3356  0F28  32 C5 00    	ld	((_btiles + 0x00c5)),a
3357  0F2B  3A 34 00    	ld	a,(_btiles + 0x0034)
3358  0F2E  32 C7 00    	ld	((_btiles + 0x00c7)),a
3359  0F31  3A 36 00    	ld	a,(_btiles + 0x0036)
3360  0F34  32 C9 00    	ld	((_btiles + 0x00c9)),a
3361  0F37  3A 38 00    	ld	a,(_btiles + 0x0038)
3362  0F3A  32 CB 00    	ld	((_btiles + 0x00cb)),a
3363  0F3D  3A 3A 00    	ld	a, (_btiles + 58)
3364  0F40  32 CD 00    	ld	((_btiles + 0x00cd)),a
3365  0F43  11 50 00    	ld	de,_btiles + 80
3366  0F46  1A          	ld	a, (de)
3367  0F47  32 E8 00    	ld	((_btiles + 0x00e8)),a
3368  0F4A  3A 51 00    	ld	a,(_btiles + 0x0051)
3369  0F4D  32 E9 00    	ld	((_btiles + 0x00e9)),a
3370  0F50  3A 52 00    	ld	a,(_btiles + 0x0052)
3371  0F53  32 EA 00    	ld	((_btiles + 0x00ea)),a
3372  0F56  3A 53 00    	ld	a, (_btiles + 83)
3373  0F59  32 EB 00    	ld	((_btiles + 0x00eb)),a
3374  0F5C  0A          	ld	a, (bc)
3375  0F5D  32 F4 00    	ld	((_btiles + 0x00f4)),a
3376  0F60  3A 32 00    	ld	a,(_btiles + 0x0032)
3377  0F63  32 F6 00    	ld	((_btiles + 0x00f6)),a
3378  0F66  3A 34 00    	ld	a,(_btiles + 0x0034)
3379  0F69  32 F8 00    	ld	((_btiles + 0x00f8)),a
3380  0F6C  3A 36 00    	ld	a,(_btiles + 0x0036)
3381  0F6F  32 FA 00    	ld	((_btiles + 0x00fa)),a
3382  0F72  3A 38 00    	ld	a,(_btiles + 0x0038)
3383  0F75  32 FC 00    	ld	((_btiles + 0x00fc)),a
3384  0F78  1A          	ld	a, (de)
3385  0F79  32 11 01    	ld	((_btiles + 0x0111)),a
3386  0F7C  3A 51 00    	ld	a,(_btiles + 0x0051)
3387  0F7F  32 12 01    	ld	((_btiles + 0x0112)),a
3388  0F82  3A 52 00    	ld	a,(_btiles + 0x0052)
3389  0F85  32 13 01    	ld	((_btiles + 0x0113)),a
3390  0F88  0A          	ld	a, (bc)
3391  0F89  32 F7 00    	ld	((_btiles + 0x00f7)),a
3392  0F8C  3A 32 00    	ld	a,(_btiles + 0x0032)
3393  0F8F  32 F9 00    	ld	((_btiles + 0x00f9)),a
3394  0F92  3A 34 00    	ld	a,(_btiles + 0x0034)
3395  0F95  32 FB 00    	ld	((_btiles + 0x00fb)),a
3396  0F98  3A 36 00    	ld	a,(_btiles + 0x0036)
3397  0F9B  32 FD 00    	ld	((_btiles + 0x00fd)),a
3398  0F9E  1A          	ld	a, (de)
3399  0F9F  32 19 01    	ld	((_btiles + 0x0119)),a
3400  0FA2  3A 51 00    	ld	a,(_btiles + 0x0051)
3401  0FA5  32 1A 01    	ld	((_btiles + 0x011a)),a
3402  0FA8  3A 52 00    	ld	a,(_btiles + 0x0052)
3403  0FAB  32 1B 01    	ld	((_btiles + 0x011b)),a
3404  0FAE  0A          	ld	a, (bc)
3405  0FAF  32 28 01    	ld	((_btiles + 0x0128)),a
3406  0FB2  3A 32 00    	ld	a,(_btiles + 0x0032)
3407  0FB5  32 2A 01    	ld	((_btiles + 0x012a)),a
3408  0FB8  3A 34 00    	ld	a,(_btiles + 0x0034)
3409  0FBB  32 2C 01    	ld	((_btiles + 0x012c)),a
3410  0FBE  1A          	ld	a, (de)
3411  0FBF  32 42 01    	ld	((_btiles + 0x0142)),a
3412  0FC2  3A 51 00    	ld	a,(_btiles + 0x0051)
3413  0FC5  32 43 01    	ld	((_btiles + 0x0143)),a
3414  0FC8  0A          	ld	a, (bc)
3415  0FC9  32 2B 01    	ld	((_btiles + 0x012b)),a
3416  0FCC  3A 32 00    	ld	a,(_btiles + 0x0032)
3417  0FCF  32 2D 01    	ld	((_btiles + 0x012d)),a
3418  0FD2  1A          	ld	a, (de)
3419  0FD3  32 4A 01    	ld	((_btiles + 0x014a)),a
3420  0FD6  3A 51 00    	ld	a,(_btiles + 0x0051)
3421  0FD9  32 4B 01    	ld	((_btiles + 0x014b)),a
3422  0FDC  0A          	ld	a, (bc)
3423  0FDD  32 5C 01    	ld	((_btiles + 0x015c)),a
3424  0FE0  1A          	ld	a, (de)
3425  0FE1  32 73 01    	ld	((_btiles + 0x0173)),a
3426  0FE4  3E 00       	ld	a,0x00
3427  0FE6  DD 77 E4    	ld	(ix-28),a
3428  0FE9  DD 77 E5    	ld	(ix-27),a
3429  0FEC  DD 77 E0    	ld	(ix-32),a
3430  0FEF  DD 77 E1    	ld	(ix-31),a
3431  0FF2  DD 36 E6 00 	ld	(ix-26),0x00
3432  0FF6  DD 36 E7 00 	ld	(ix-25),0x00
3433  0FFA              l_game_page_map_00145:
3434  0FFA  DD 4E DD    	ld	c,(ix-35)
3435  0FFD  06 00       	ld	b,0x00
3436  0FFF  DD 7E E6    	ld	a,(ix-26)
3437  1002  91          	sub	a, c
3438  1003  DD 7E E7    	ld	a,(ix-25)
3439  1006  98          	sbc	a, b
3440  1007  30 3A       	jr	NC,l_game_page_map_00147
3441  1009  3E 16       	ld	a,0x16
3442  100B  01 FD 7F    	ld	bc,_IO_7FFD
3443  100E  ED 79       	out	(c),a
3444  1010  01 00 00    	ld	bc,_lenght0
3445  1013  DD 6E E6    	ld	l,(ix-26)
3446  1016  DD 66 E7    	ld	h,(ix-25)
3447  1019  09          	add	hl,bc
3448  101A  4E          	ld	c, (hl)
3449  101B  06 00       	ld	b,0x00
3450  101D  21 00 00    	ld	hl,_GLOBAL_ZX_PORT_7FFD
3451  1020  36 10       	ld	(hl),0x10
3452  1022  C5          	push	bc
3453  1023  3E 10       	ld	a,0x10
3454  1025  01 FD 7F    	ld	bc,_IO_7FFD
3455  1028  ED 79       	out	(c),a
3456  102A  C1          	pop	bc
3457  102B  DD 7E E0    	ld	a,(ix-32)
3458  102E  81          	add	a, c
3459  102F  DD 77 E0    	ld	(ix-32),a
3460  1032  DD 7E E1    	ld	a,(ix-31)
3461  1035  88          	adc	a, b
3462  1036  DD 77 E1    	ld	(ix-31),a
3463  1039  DD 34 E6    	inc	(ix-26)
3464  103C  20 BC       	jr	NZ,l_game_page_map_00145
3465  103E  DD 34 E7    	inc	(ix-25)
3466  1041  18 B7       	jr	l_game_page_map_00145
3467  1043              l_game_page_map_00147:
3468  1043  DD 36 E8 00 	ld	(ix-24),0x00
3469  1047  DD 36 E9 00 	ld	(ix-23),0x00
3470  104B              l_game_page_map_00160:
3471  104B  3E 16       	ld	a,0x16
3472  104D  01 FD 7F    	ld	bc,_IO_7FFD
3473  1050  ED 79       	out	(c),a
3474  1052  DD 7E E0    	ld	a,(ix-32)
3475  1055  DD 86 E8    	add	a,(ix-24)
3476  1058  4F          	ld	c, a
3477  1059  DD 7E E1    	ld	a,(ix-31)
3478  105C  DD 8E E9    	adc	a,(ix-23)
3479  105F  47          	ld	b, a
3480  1060  21 00 00    	ld	hl,_world0
3481  1063  09          	add	hl, bc
3482  1064  7E          	ld	a, (hl)
3483  1065  DD 77 EC    	ld	(ix-20),a
3484  1068  03          	inc	bc
3485  1069  21 00 00    	ld	hl,_world0
3486  106C  09          	add	hl, bc
3487  106D  7E          	ld	a, (hl)
3488  106E  DD 77 EB    	ld	(ix-21),a
3489  1071  3E 10       	ld	a,0x10
3490  1073  32 00 00    	ld	(_GLOBAL_ZX_PORT_7FFD),a
3491  1076  01 FD 7F    	ld	bc,_IO_7FFD
3492  1079  ED 79       	out	(c),a
3493  107B  DD 7E EC    	ld	a,(ix-20)
3494  107E  D6 80       	sub	a,0x80
3495  1080  30 1F       	jr	NC,l_game_page_map_00152
3496  1082  DD 6E E4    	ld	l,(ix-28)
3497  1085  DD 66 E5    	ld	h,(ix-27)
3498  1088  01 00 00    	ld	bc,_scr_map
3499  108B  09          	add	hl,bc
3500  108C  DD 75 ED    	ld	(ix-19),l
3501  108F  DD 74 EE    	ld	(ix-18),h
3502  1092  DD 7E EC    	ld	a,(ix-20)
3503  1095  77          	ld	(hl), a
3504  1096  DD 34 E4    	inc	(ix-28)
3505  1099  C2 16 11    	jp	NZ,l_game_page_map_00153
3506  109C  DD 34 E5    	inc	(ix-27)
3507  109F  18 75       	jr	l_game_page_map_00153
3508  10A1              l_game_page_map_00152:
3509  10A1  DD 7E EC    	ld	a,(ix-20)
3510  10A4  C6 80       	add	a,0x80
3511  10A6  DD 77 EA    	ld	(ix-22),a
3512  10A9  DD 7E E4    	ld	a,(ix-28)
3513  10AC  DD 77 ED    	ld	(ix-19),a
3514  10AF  DD 7E E5    	ld	a,(ix-27)
3515  10B2  DD 77 EE    	ld	(ix-18),a
3516  10B5  DD 36 E6 00 	ld	(ix-26),0x00
3517  10B9  DD 36 E7 00 	ld	(ix-25),0x00
3518  10BD              l_game_page_map_00158:
3519  10BD  DD 7E EA    	ld	a,(ix-22)
3520  10C0  DD 77 EF    	ld	(ix-17),a
3521  10C3  DD 36 F0 00 	ld	(ix-16),0x00
3522  10C7  DD 7E E6    	ld	a,(ix-26)
3523  10CA  DD 96 EF    	sub	a,(ix-17)
3524  10CD  DD 7E E7    	ld	a,(ix-25)
3525  10D0  DD 9E F0    	sbc	a,(ix-16)
3526  10D3  30 2D       	jr	NC,l_game_page_map_00212
3527  10D5  DD 6E ED    	ld	l,(ix-19)
3528  10D8  DD 66 EE    	ld	h,(ix-18)
3529  10DB  01 00 00    	ld	bc,_scr_map
3530  10DE  09          	add	hl,bc
3531  10DF  DD 75 EF    	ld	(ix-17),l
3532  10E2  DD 74 F0    	ld	(ix-16),h
3533  10E5  DD 7E EB    	ld	a,(ix-21)
3534  10E8  77          	ld	(hl), a
3535  10E9  DD 34 ED    	inc	(ix-19)
3536  10EC  20 03       	jr	NZ,l_game_page_map_00330
3537  10EE  DD 34 EE    	inc	(ix-18)
3538  10F1              l_game_page_map_00330:
3539  10F1  DD 7E EE    	ld	a,(ix-18)
3540  10F4  D6 02       	sub	a,0x02
3541  10F6  30 0A       	jr	NC,l_game_page_map_00212
3542  10F8  DD 34 E6    	inc	(ix-26)
3543  10FB  20 C0       	jr	NZ,l_game_page_map_00158
3544  10FD  DD 34 E7    	inc	(ix-25)
3545  1100  18 BB       	jr	l_game_page_map_00158
3546  1102              l_game_page_map_00212:
3547  1102  DD 7E ED    	ld	a,(ix-19)
3548  1105  DD 77 E4    	ld	(ix-28),a
3549  1108  DD 7E EE    	ld	a,(ix-18)
3550  110B  DD 77 E5    	ld	(ix-27),a
3551  110E  DD 34 E8    	inc	(ix-24)
3552  1111  20 03       	jr	NZ,l_game_page_map_00332
3553  1113  DD 34 E9    	inc	(ix-23)
3554  1116              l_game_page_map_00332:
3555  1116              l_game_page_map_00153:
3556  1116  DD 7E E5    	ld	a,(ix-27)
3557  1119  D6 02       	sub	a,0x02
3558  111B  30 10       	jr	NC,l_game_page_map_00156
3559  111D  DD 34 E8    	inc	(ix-24)
3560  1120  20 03       	jr	NZ,l_game_page_map_00333
3561  1122  DD 34 E9    	inc	(ix-23)
3562  1125              l_game_page_map_00333:
3563  1125  DD 7E E9    	ld	a,(ix-23)
3564  1128  D6 02       	sub	a,0x02
3565  112A  DA 4B 10    	jp	C, l_game_page_map_00160
3566  112D              l_game_page_map_00156:
3567  112D  DD 7E DE    	ld	a,(ix-34)
3568  1130  32 00 00    	ld	(_scr_curr),a
3569  1133  DD 7E DF    	ld	a,(ix-33)
3570  1136  32 00 00    	ld	(_map_paper),a
3571  1139  FB          	ei
3572  113A  DD F9       	ld	sp, ix
3573  113C  DD E1       	pop	ix
3574  113E  C9          	ret
3575  113F              	SECTION IGNORE
3576  0000              
