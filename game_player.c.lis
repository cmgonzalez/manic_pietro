1     0000              MODULE game_player_c
2     0000              LINE 0, "game_player.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_get_floor
204   0000              	GLOBAL _player_collision
205   0000              	GLOBAL _player_check_conveyor_int
206   0000              	GLOBAL _player_check_conveyor
207   0000              	GLOBAL _player_handle_fall
208   0000              	GLOBAL _player_handle_walk
209   0000              	GLOBAL _player_handle_lock
210   0000              	GLOBAL _player_check_exit
211   0000              	GLOBAL _player_debug_keys
212   0000              	GLOBAL _player_init
213   0000              	GLOBAL _player_turn
214   0000              	GLOBAL _player_move
215   0000              	GLOBAL _player_move_jump
216   0000              	GLOBAL _player_move_walk
217   0000              	GLOBAL _player_handle_conveyor
218   0000              	GLOBAL _player_new_jump
219   0000              	GLOBAL _player_pick
220   0000              	GLOBAL _player_check_input
221   0000              	GLOBAL _player_tile
222   0000              	GLOBAL _player_score_add
223   0000              	GLOBAL _player_pick_item
224   0000              	GLOBAL _player_pick_deadly
225   0000              	GLOBAL _player_pick_extra
226   0000              	GLOBAL _player_check_ceil
227   0000              	GLOBAL _player_crumble
228   0000              	GLOBAL _player_check_floor
229   0000              	GLOBAL _player_lost_life
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printQ_callee
370   0000              	GLOBAL _NIRVANAP_printQ
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _zx_print_str
382   0000              	GLOBAL _zx_print_int
383   0000              	GLOBAL _zx_print_chr
384   0000              	GLOBAL _zx_isr
385   0000              	GLOBAL _z80_otdr_callee
386   0000              	GLOBAL _z80_otdr
387   0000              	GLOBAL _z80_otir_callee
388   0000              	GLOBAL _z80_otir
389   0000              	GLOBAL _z80_outp_callee
390   0000              	GLOBAL _z80_outp
391   0000              	GLOBAL _z80_indr_callee
392   0000              	GLOBAL _z80_indr
393   0000              	GLOBAL _z80_inir_callee
394   0000              	GLOBAL _z80_inir
395   0000              	GLOBAL _z80_inp_fastcall
396   0000              	GLOBAL _z80_inp
397   0000              	GLOBAL _z80_set_int_state_fastcall
398   0000              	GLOBAL _z80_set_int_state
399   0000              	GLOBAL _z80_get_int_state
400   0000              	GLOBAL _z80_delay_tstate_fastcall
401   0000              	GLOBAL _z80_delay_tstate
402   0000              	GLOBAL _z80_delay_ms_fastcall
403   0000              	GLOBAL _z80_delay_ms
404   0000              	GLOBAL _im2_remove_generic_callback_callee
405   0000              	GLOBAL _im2_remove_generic_callback
406   0000              	GLOBAL _im2_prepend_generic_callback_callee
407   0000              	GLOBAL _im2_prepend_generic_callback
408   0000              	GLOBAL _im2_append_generic_callback_callee
409   0000              	GLOBAL _im2_append_generic_callback
410   0000              	GLOBAL _im2_create_generic_isr_8080_callee
411   0000              	GLOBAL _im2_create_generic_isr_8080
412   0000              	GLOBAL _im2_create_generic_isr_callee
413   0000              	GLOBAL _im2_create_generic_isr
414   0000              	GLOBAL _im2_install_isr_callee
415   0000              	GLOBAL _im2_install_isr
416   0000              	GLOBAL _im2_init_fastcall
417   0000              	GLOBAL _im2_init
418   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
419   0000              	GLOBAL _intrinsic_swap_word_32
420   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
421   0000              	GLOBAL _intrinsic_swap_endian_32
422   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
423   0000              	GLOBAL _intrinsic_swap_endian_16
424   0000              	GLOBAL _intrinsic_return_de
425   0000              	GLOBAL _intrinsic_return_bc
426   0000              	GLOBAL _intrinsic_exx
427   0000              	GLOBAL _intrinsic_ex_de_hl
428   0000              	GLOBAL _intrinsic_nop
429   0000              	GLOBAL _intrinsic_im_2
430   0000              	GLOBAL _intrinsic_im_1
431   0000              	GLOBAL _intrinsic_im_0
432   0000              	GLOBAL _intrinsic_retn
433   0000              	GLOBAL _intrinsic_reti
434   0000              	GLOBAL _intrinsic_halt
435   0000              	GLOBAL _intrinsic_ei
436   0000              	GLOBAL _intrinsic_di
437   0000              	GLOBAL _intrinsic_stub
438   0000              	GLOBAL _intrinsic_ini
439   0000              	GLOBAL _intrinsic_outi
440   0000              	GLOBAL _intrinsic_ldi
441   0000              	GLOBAL _zx_pattern_fill_callee
442   0000              	GLOBAL _zx_pattern_fill
443   0000              	GLOBAL _zx_saddrpup_fastcall
444   0000              	GLOBAL _zx_saddrpup
445   0000              	GLOBAL _zx_saddrpright_callee
446   0000              	GLOBAL _zx_saddrpright
447   0000              	GLOBAL _zx_saddrpleft_callee
448   0000              	GLOBAL _zx_saddrpleft
449   0000              	GLOBAL _zx_saddrpdown_fastcall
450   0000              	GLOBAL _zx_saddrpdown
451   0000              	GLOBAL _zx_saddrcup_fastcall
452   0000              	GLOBAL _zx_saddrcup
453   0000              	GLOBAL _zx_saddrcright_fastcall
454   0000              	GLOBAL _zx_saddrcright
455   0000              	GLOBAL _zx_saddrcleft_fastcall
456   0000              	GLOBAL _zx_saddrcleft
457   0000              	GLOBAL _zx_saddrcdown_fastcall
458   0000              	GLOBAL _zx_saddrcdown
459   0000              	GLOBAL _zx_saddr2py_fastcall
460   0000              	GLOBAL _zx_saddr2py
461   0000              	GLOBAL _zx_saddr2px_fastcall
462   0000              	GLOBAL _zx_saddr2px
463   0000              	GLOBAL _zx_saddr2cy_fastcall
464   0000              	GLOBAL _zx_saddr2cy
465   0000              	GLOBAL _zx_saddr2cx_fastcall
466   0000              	GLOBAL _zx_saddr2cx
467   0000              	GLOBAL _zx_saddr2aaddr_fastcall
468   0000              	GLOBAL _zx_saddr2aaddr
469   0000              	GLOBAL _zx_py2saddr_fastcall
470   0000              	GLOBAL _zx_py2saddr
471   0000              	GLOBAL _zx_py2aaddr_fastcall
472   0000              	GLOBAL _zx_py2aaddr
473   0000              	GLOBAL _zx_pxy2saddr_callee
474   0000              	GLOBAL _zx_pxy2saddr
475   0000              	GLOBAL _zx_pxy2aaddr_callee
476   0000              	GLOBAL _zx_pxy2aaddr
477   0000              	GLOBAL _zx_px2bitmask_fastcall
478   0000              	GLOBAL _zx_px2bitmask
479   0000              	GLOBAL _zx_cy2saddr_fastcall
480   0000              	GLOBAL _zx_cy2saddr
481   0000              	GLOBAL _zx_cy2aaddr_fastcall
482   0000              	GLOBAL _zx_cy2aaddr
483   0000              	GLOBAL _zx_cxy2saddr_callee
484   0000              	GLOBAL _zx_cxy2saddr
485   0000              	GLOBAL _zx_cxy2aaddr_callee
486   0000              	GLOBAL _zx_cxy2aaddr
487   0000              	GLOBAL _zx_bitmask2px_fastcall
488   0000              	GLOBAL _zx_bitmask2px
489   0000              	GLOBAL _zx_aaddrcup_fastcall
490   0000              	GLOBAL _zx_aaddrcup
491   0000              	GLOBAL _zx_aaddrcright_fastcall
492   0000              	GLOBAL _zx_aaddrcright
493   0000              	GLOBAL _zx_aaddrcleft_fastcall
494   0000              	GLOBAL _zx_aaddrcleft
495   0000              	GLOBAL _zx_aaddrcdown_fastcall
496   0000              	GLOBAL _zx_aaddrcdown
497   0000              	GLOBAL _zx_aaddr2saddr_fastcall
498   0000              	GLOBAL _zx_aaddr2saddr
499   0000              	GLOBAL _zx_aaddr2py_fastcall
500   0000              	GLOBAL _zx_aaddr2py
501   0000              	GLOBAL _zx_aaddr2px_fastcall
502   0000              	GLOBAL _zx_aaddr2px
503   0000              	GLOBAL _zx_aaddr2cy_fastcall
504   0000              	GLOBAL _zx_aaddr2cy
505   0000              	GLOBAL _zx_aaddr2cx_fastcall
506   0000              	GLOBAL _zx_aaddr2cx
507   0000              	GLOBAL _zx_visit_wc_pix_callee
508   0000              	GLOBAL _zx_visit_wc_pix
509   0000              	GLOBAL _zx_visit_wc_attr_callee
510   0000              	GLOBAL _zx_visit_wc_attr
511   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
512   0000              	GLOBAL _zx_scroll_wc_up_pix
513   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
514   0000              	GLOBAL _zx_scroll_wc_up_attr
515   0000              	GLOBAL _zx_scroll_wc_up_callee
516   0000              	GLOBAL _zx_scroll_wc_up
517   0000              	GLOBAL _zx_scroll_up_pix_callee
518   0000              	GLOBAL _zx_scroll_up_pix
519   0000              	GLOBAL _zx_scroll_up_attr_callee
520   0000              	GLOBAL _zx_scroll_up_attr
521   0000              	GLOBAL _zx_scroll_up_callee
522   0000              	GLOBAL _zx_scroll_up
523   0000              	GLOBAL _zx_cls_wc_pix_callee
524   0000              	GLOBAL _zx_cls_wc_pix
525   0000              	GLOBAL _zx_cls_wc_attr_callee
526   0000              	GLOBAL _zx_cls_wc_attr
527   0000              	GLOBAL _zx_cls_wc_callee
528   0000              	GLOBAL _zx_cls_wc
529   0000              	GLOBAL _zx_cls_pix_fastcall
530   0000              	GLOBAL _zx_cls_pix
531   0000              	GLOBAL _zx_cls_attr_fastcall
532   0000              	GLOBAL _zx_cls_attr
533   0000              	GLOBAL _zx_cls_fastcall
534   0000              	GLOBAL _zx_cls
535   0000              	GLOBAL _zx_border_fastcall
536   0000              	GLOBAL _zx_border
537   0000              	GLOBAL _zx_tape_verify_block_callee
538   0000              	GLOBAL _zx_tape_verify_block
539   0000              	GLOBAL _zx_tape_save_block_callee
540   0000              	GLOBAL _zx_tape_save_block
541   0000              	GLOBAL _zx_tape_load_block_callee
542   0000              	GLOBAL _zx_tape_load_block
543   0000              	GLOBAL _spr_horizontal_check
544   0000              	GLOBAL _spr_draw8
545   0000              	GLOBAL _spr_destroy
546   0000              	GLOBAL _spr_turn_horizontal
547   0000              	GLOBAL _spr_clear_scr
548   0000              	GLOBAL _spr_back_repaint
549   0000              	GLOBAL _spr_get_tile_dir
550   0000              	GLOBAL _spr_get_tile
551   0000              	GLOBAL _spr_paint_player
552   0000              	GLOBAL _spr_clear_fast_hor
553   0000              	GLOBAL _spr_clear_fast_vert
554   0000              	GLOBAL _spr_clear_fast
555   0000              	GLOBAL _spr_paint
556   0000              	GLOBAL _spr_move_left
557   0000              	GLOBAL _spr_move_right
558   0000              	GLOBAL _spr_move_left_f
559   0000              	GLOBAL _spr_move_right_f
560   0000              	GLOBAL _spr_move_horizontal
561   0000              	GLOBAL _spr_move_down_f
562   0000              	GLOBAL _spr_move_up_f
563   0000              	GLOBAL _spr_set_right
564   0000              	GLOBAL _spr_set_left
565   0000              	GLOBAL _spr_set_down
566   0000              	GLOBAL _spr_set_up
567   0000              	GLOBAL _spr_calc_index
568   0000              	GLOBAL _spr_chktime
569   0000              	GLOBAL _player_use_floor
570   0000              	GLOBAL _game_text
571   0000              	GLOBAL _game_logo1
572   0000              	GLOBAL _game_anim_conveyor
573   0000              	GLOBAL _zx_print_char
574   0000              	GLOBAL _reverse
575   0000              	GLOBAL _page
576   0000              	GLOBAL _game_set_attr
577   0000              	GLOBAL _game_crumble
578   0000              	GLOBAL _game_solar_ray0
579   0000              	GLOBAL _game_solar_ray1
580   0000              	GLOBAL _game_solar_ray
581   0000              	GLOBAL _game_anim_air
582   0000              	GLOBAL _game_shoe
583   0000              	GLOBAL _game_intro
584   0000              	GLOBAL _game_copy_sprite
585   0000              	GLOBAL _game_copy_sprite_color_reset
586   0000              	GLOBAL _game_copy_sprite_std
587   0000              	GLOBAL _game_flash_exit
588   0000              	GLOBAL _game_page_map
589   0000              	GLOBAL _game_attribs
590   0000              	GLOBAL _game_print_header
591   0000              	GLOBAL _game_check_time
592   0000              	GLOBAL _game_key_paint
593   0000              	GLOBAL _game_colour_message
594   0000              	GLOBAL _game_paint_attrib
595   0000              	GLOBAL _game_print_score
596   0000              	GLOBAL _game_cell_paint_index
597   0000              	GLOBAL _game_cell_paint
598   0000              	GLOBAL _game_check_cell
599   0000              	GLOBAL _game_check_map
600   0000              	GLOBAL _game_loop
601   0000              	GLOBAL _game_round_init
602   0000              	GLOBAL _game_start_timer
603   0000              	GLOBAL _game_update_stats
604   0000              	GLOBAL _game_print_footer
605   0000              	GLOBAL _game_fill_row
606   0000              	GLOBAL _game_cls
607   0000              	GLOBAL _game_fps
608   0000              	GLOBAL _game_draw_map
609   0000              	GLOBAL _enemy_init
610   0000              	GLOBAL _enemy_move
611   0000              	GLOBAL _enemy_turn
612   0000              	GLOBAL _enemy_static
613   0000              	GLOBAL _enemy_horizontal
614   0000              	GLOBAL _enemy_vertical
615   0000              	GLOBAL _ay_reset
616   0000              	GLOBAL _ay_song_stop
617   0000              	GLOBAL _ay_song_play
618   0000              	GLOBAL _ay_fx_stop
619   0000              	GLOBAL _ay_fx_play
620   0000              	GLOBAL _ay_is_playing
621   0000              	GLOBAL _audio_game_over
622   0000              	GLOBAL _audio_round_init
623   0000              	GLOBAL _audio_levelup
624   0000              	GLOBAL _audio_menu
625   0000              	GLOBAL _audio_game_end
626   0000              	GLOBAL _audio_game_start
627   0000              	GLOBAL _audio_level_complete
628   0000              	GLOBAL _audio_level_start
629   0000              	GLOBAL _audio_puerta
630   0000              	GLOBAL _audio_crumble
631   0000              	GLOBAL _audio_tick
632   0000              	GLOBAL _audio_door_open
633   0000              	GLOBAL _audio_coin_noentiendo
634   0000              	GLOBAL _audio_coin
635   0000              	GLOBAL _audio_fall
636   0000              	GLOBAL _audio_jump
637   0000              	GLOBAL _audio_dead
638   0000              	GLOBAL _audio_time
639   0000              	GLOBAL _audio_ingame
640   0000              	GLOBAL _test_func
641   0000              	GLOBAL _test_proc
642   0000              	GLOBAL _in_mouse_kempston_wheel_delta
643   0000              	GLOBAL _in_mouse_kempston_wheel
644   0000              	GLOBAL _in_mouse_kempston_callee
645   0000              	GLOBAL _in_mouse_kempston
646   0000              	GLOBAL _in_mouse_kempston_setpos_callee
647   0000              	GLOBAL _in_mouse_kempston_setpos
648   0000              	GLOBAL _in_mouse_kempston_reset
649   0000              	GLOBAL _in_mouse_kempston_init
650   0000              	GLOBAL _in_mouse_amx_wheel_delta
651   0000              	GLOBAL _in_mouse_amx_wheel
652   0000              	GLOBAL _in_mouse_amx_callee
653   0000              	GLOBAL _in_mouse_amx
654   0000              	GLOBAL _in_mouse_amx_setpos_callee
655   0000              	GLOBAL _in_mouse_amx_setpos
656   0000              	GLOBAL _in_mouse_amx_reset
657   0000              	GLOBAL _in_mouse_amx_init_callee
658   0000              	GLOBAL _in_mouse_amx_init
659   0000              	GLOBAL _in_stick_sinclair2
660   0000              	GLOBAL _in_stick_sinclair1
661   0000              	GLOBAL _in_stick_kempston
662   0000              	GLOBAL _in_stick_fuller
663   0000              	GLOBAL _in_stick_cursor
664   0000              	GLOBAL _in_stick_keyboard_fastcall
665   0000              	GLOBAL _in_stick_keyboard
666   0000              	GLOBAL _in_wait_nokey
667   0000              	GLOBAL _in_wait_key
668   0000              	GLOBAL _in_test_key
669   0000              	GLOBAL _in_pause_fastcall
670   0000              	GLOBAL _in_pause
671   0000              	GLOBAL _in_key_scancode_fastcall
672   0000              	GLOBAL _in_key_scancode
673   0000              	GLOBAL _in_key_pressed_fastcall
674   0000              	GLOBAL _in_key_pressed
675   0000              	GLOBAL _in_inkey
676   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
677   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
678   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
679   0000              	GLOBAL _NIRVANAP_HOLE
680   0000              	GLOBAL _NIRVANAP_ISR_HOOK
681   0000              	GLOBAL _game_tune
682   0000              	GLOBAL _code1
683   0000              	GLOBAL _code0
684   0000              	GLOBAL _deltas
685   0000              	GLOBAL _attribs
686   0000              	GLOBAL _air_curr_byte
687   0000              	GLOBAL _spr_clr
688   0000              	GLOBAL _spr_init_bright
689   0000              	GLOBAL _spr_init_cout3
690   0000              	GLOBAL _spr_init_cin3
691   0000              	GLOBAL _spr_init_cout2
692   0000              	GLOBAL _spr_init_cin2
693   0000              	GLOBAL _spr_init_cout1
694   0000              	GLOBAL _spr_init_cin1
695   0000              	GLOBAL _spr_init_cout0
696   0000              	GLOBAL _spr_init_cin0
697   0000              	GLOBAL _map_clear
698   0000              	GLOBAL _map_paper
699   0000              	GLOBAL _map_border
700   0000              	GLOBAL _gbyte
701   0000              	GLOBAL _scr_curr
702   0000              	GLOBAL _color
703   0000              	GLOBAL _scr_map
704   0000              	GLOBAL _spr_kind
705   0000              	GLOBAL _spr_altset
706   0000              	GLOBAL _spr_frames
707   0000              	GLOBAL _spr_speed_a
708   0000              	GLOBAL _spr_speed_b
709   0000              	GLOBAL _spr_speed
710   0000              	GLOBAL _spr_tile
711   0000              	GLOBAL _screen_ink
712   0000              	GLOBAL _screen_paper
713   0000              	GLOBAL _game_start_scr
714   0000              	GLOBAL _player_next_extra
715   0000              	GLOBAL _game_score_top
716   0000              	GLOBAL _player_coins
717   0000              	GLOBAL _player_lives
718   0000              	GLOBAL _game_crumb_end
719   0000              	GLOBAL _game_crumb_start
720   0000              	GLOBAL _game_over
721   0000              	GLOBAL _game_tile_cnt
722   0000              	GLOBAL _game_sound
723   0000              	GLOBAL _game_inf_lives
724   0000              	GLOBAL _game_inmune
725   0000              	GLOBAL _spr_count
726   0000              	GLOBAL _key_ink
727   0000              	GLOBAL _key_last
728   0000              	GLOBAL _lapse_crumb
729   0000              	GLOBAL _time_key
730   0000              	GLOBAL _time_conv
731   0000              	GLOBAL _time_air
732   0000              	GLOBAL _frame_time
733   0000              	GLOBAL _curr_time
734   0000              	GLOBAL _key_attrib
735   0000              	GLOBAL _g_ray1
736   0000              	GLOBAL _attrib_sol1
737   0000              	GLOBAL _attrib_sol0
738   0000              	GLOBAL _attrib_osd
739   0000              	GLOBAL _attrib_hl
740   0000              	GLOBAL _attrib
741   0000              	GLOBAL _zx_val_asm
742   0000              	GLOBAL _index1
743   0000              	GLOBAL _index0
744   0000              	GLOBAL _loop_count
745   0000              	GLOBAL _s_row1
746   0000              	GLOBAL _s_col1
747   0000              	GLOBAL _s_col0
748   0000              	GLOBAL _s_lin1
749   0000              	GLOBAL _s_lin0
750   0000              	GLOBAL _nirv_sprite_index
751   0000              	GLOBAL _player_kill_index
752   0000              	GLOBAL _player_jump_top
753   0000              	GLOBAL _game_fps_show
754   0000              	GLOBAL _game_debug
755   0000              	GLOBAL _sprite
756   0000              	GLOBAL _fps
757   0000              	GLOBAL _game_effect
758   0000              	GLOBAL _game_menu
759   0000              	GLOBAL _game_atrac
760   0000              	GLOBAL _game_mode
761   0000              	GLOBAL _game_tileset
762   0000              	GLOBAL _menu_curr_sel
763   0000              	GLOBAL _game_round_up
764   0000              	GLOBAL _game_lives
765   0000              	GLOBAL _game_code
766   0000              	GLOBAL _game_exit_lin
767   0000              	GLOBAL _game_exit_col
768   0000              	GLOBAL _game_conveyor_col1
769   0000              	GLOBAL _game_conveyor_col0
770   0000              	GLOBAL _game_conveyor_lin
771   0000              	GLOBAL _game_conveyor_dir
772   0000              	GLOBAL _game_song_play_start
773   0000              	GLOBAL _game_song_play
774   0000              	GLOBAL _game_gravity
775   0000              	GLOBAL _player_lin_scr
776   0000              	GLOBAL _player_col_scr
777   0000              	GLOBAL _player_fall_start
778   0000              	GLOBAL _player_jump_lin
779   0000              	GLOBAL _player_jump_count
780   0000              	GLOBAL _player_jump_hack
781   0000              	GLOBAL _player_vel_inc
782   0000              	GLOBAL _player_vel_y0
783   0000              	GLOBAL _player_vel_y
784   0000              	GLOBAL _player_score
785   0000              	GLOBAL _tbuffer
786   0000              	GLOBAL _obj_count
787   0000              	GLOBAL _obj_col
788   0000              	GLOBAL _obj_lin
789   0000              	GLOBAL _last_time_b
790   0000              	GLOBAL _last_time_a
791   0000              	GLOBAL _last_time
792   0000              	GLOBAL _colint
793   0000              	GLOBAL _col
794   0000              	GLOBAL _lin
795   0000              	GLOBAL _tile
796   0000              	GLOBAL _value_c
797   0000              	GLOBAL _value_b
798   0000              	GLOBAL _value_a
799   0000              	GLOBAL _state_a
800   0000              	GLOBAL _state
801   0000              	GLOBAL _class
802   0000              	GLOBAL _dirs_last
803   0000              	GLOBAL _dirs
804   0000              	GLOBAL _k2
805   0000              	GLOBAL _k1
806   0000              	GLOBAL _joyfunc2
807   0000              	GLOBAL _joyfunc1
808   0000              	GLOBAL _btiles
809   0000              	GLOBAL _v3
810   0000              	GLOBAL _v2
811   0000              	GLOBAL _v1
812   0000              	GLOBAL _v0
813   0000              	GLOBAL _i
814   0000              	GLOBAL _spec128
815   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
816   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
817   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
818   0000              	GLOBAL _hitiles2
819   0000              	GLOBAL _hitiles1
820   0000              	GLOBAL _ay_song_coin_noentiendo
821   0000              	GLOBAL _ay_song_game_over
822   0000              	GLOBAL _ay_song_time_atack
823   0000              	GLOBAL _ay_fx_crumble
824   0000              	GLOBAL _ay_fx_door_open
825   0000              	GLOBAL _ay_fx_tick
826   0000              	GLOBAL _ay_fx_game_start
827   0000              	GLOBAL _ay_fx_fall
828   0000              	GLOBAL _ay_fx_jump
829   0000              	GLOBAL _ay_fx_dead
830   0000              	GLOBAL _ay_fx_coin
831   0000              	GLOBAL _ay_song_round_init
832   0000              	GLOBAL _ay_song_menu
833   0000              	GLOBAL _ay_song_ingame1
834   0000              	GLOBAL _ay_song_ingame0
835   0000              	GLOBAL _hisprites2
836   0000              	GLOBAL _hisprites1
837   0000              	GLOBAL _logo2
838   0000              	GLOBAL _logo1
839   0000              	GLOBAL _cartoon2
840   0000              	GLOBAL _cartoon1
841   0000              	GLOBAL _cartoon0
842   0000              	GLOBAL _img1
843   0000              	GLOBAL _air_end_byte
844   0000              	GLOBAL _air_start_byte
845   0000              	GLOBAL _tile_class
846   0000              	GLOBAL _texts
847   0000              	GLOBAL _map_names0
848   0000              	GLOBAL _game_borders0
849   0000              	GLOBAL _spr_init2
850   0000              	GLOBAL _spr_init1
851   0000              	GLOBAL _tile_class2
852   0000              	GLOBAL _tile_class1
853   0000              	GLOBAL _paper0
854   0000              	GLOBAL _lenght0
855   0000              	GLOBAL _world0
856   0000              	GLOBAL _spr_init
857   0000              	GLOBAL _game_encode
858   0000              	GLOBAL _player_jump_hor
859   0000              ;--------------------------------------------------------
860   0000              ; special function registers
861   0000              ;--------------------------------------------------------
862   0000              defc _IO_FE	=	0x00fe
863   0000              defc _IO_1FFD	=	0x1ffd
864   0000              defc _IO_7FFD	=	0x7ffd
865   0000              ;--------------------------------------------------------
866   0000              ; ram data
867   0000              ;--------------------------------------------------------
868   0000              	SECTION bss_compiler
869   0000              ;--------------------------------------------------------
870   0000              ; ram data
871   0000              ;--------------------------------------------------------
872   0000              
873   0000              IF 0
874   0000              
875   0000              ; .area _INITIALIZED removed by z88dk
876   0000              
877   0000              
878   0000              ENDIF
879   0000              
880   0000              ;--------------------------------------------------------
881   0000              ; absolute external ram data
882   0000              ;--------------------------------------------------------
883   0000              	SECTION IGNORE
884   0000              ;--------------------------------------------------------
885   0000              ; global & static initialisations
886   0000              ;--------------------------------------------------------
887   0000              	SECTION code_crt_init
888   0000              ;--------------------------------------------------------
889   0000              ; Home
890   0000              ;--------------------------------------------------------
891   0000              	SECTION IGNORE
892   0000              ;--------------------------------------------------------
893   0000              ; code
894   0000              ;--------------------------------------------------------
895   0000              	SECTION code_compiler
896   0000              ;	---------------------------------
897   0000              ; Function player_init
898   0000              ; ---------------------------------
899   0000              _player_init:
900   0000  CD 00 00    	call	___sdcc_enter_ix
901   0003  F5          	push	af
902   0004  21 08 00    	ld	hl, +(_class + 0x0008)
903   0007  36 FF       	ld	(hl),0xff
904   0009  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
905   000C  36 04       	ld	(hl),0x04
906   000E  21 08 00    	ld	hl, +(_spr_frames + 0x0008)
907   0011  36 04       	ld	(hl),0x04
908   0013  21 08 00    	ld	hl, +(_lin + 0x0008)
909   0016  DD 7E 04    	ld	a,(ix+4)
910   0019  77          	ld	(hl), a
911   001A  21 08 00    	ld	hl, +(_col + 0x0008)
912   001D  DD 7E 05    	ld	a,(ix+5)
913   0020  77          	ld	(hl), a
914   0021  DD 7E 04    	ld	a,(ix+4)
915   0024  32 00 00    	ld	(_player_jump_top),a
916   0027  01 08 00    	ld	bc,_state+8
917   002A  AF          	xor	a, a
918   002B  02          	ld	(bc), a
919   002C  11 08 00    	ld	de,_state_a+8
920   002F  AF          	xor	a, a
921   0030  12          	ld	(de), a
922   0031  2A 00 00    	ld	hl,(_curr_time)
923   0034  C5          	push	bc
924   0035  D5          	push	de
925   0036  DD 74 FF    	ld	(ix-1),h
926   0039  DD 75 FE    	ld	(ix-2),l
927   003C  D1          	pop	de
928   003D  C1          	pop	bc
929   003E  21 10 00    	ld	hl, +(_last_time + 0x0010)
930   0041  DD 7E FE    	ld	a,(ix-2)
931   0044  77          	ld	(hl), a
932   0045  23          	inc	hl
933   0046  DD 7E FF    	ld	a,(ix-1)
934   0049  77          	ld	(hl), a
935   004A  21 00 00    	ld	hl,0x0000
936   004D  22 00 00    	ld	(_player_vel_y),hl
937   0050  21 08 00    	ld	hl, +(_spr_frames + 0x0008)
938   0053  36 04       	ld	(hl),0x04
939   0055  3A 08 00    	ld	a,(_value_a + 0x0008)
940   0058  DD 77 FE    	ld	(ix-2),a
941   005B  B7          	or	a, a
942   005C  28 1C       	jr	Z,l_player_init_00102
943   005E  21 08 00    	ld	hl, +(_colint + 0x0008)
944   0061  36 03       	ld	(hl),0x03
945   0063  0A          	ld	a, (bc)
946   0064  F6 08       	or	a,0x08
947   0066  02          	ld	(bc), a
948   0067  1A          	ld	a, (de)
949   0068  F6 08       	or	a,0x08
950   006A  12          	ld	(de), a
951   006B  01 08 00    	ld	bc,_tile+8
952   006E  DD 7E 06    	ld	a,(ix+6)
953   0071  C6 04       	add	a,0x04
954   0073  02          	ld	(bc), a
955   0074  3A 08 00    	ld	a,(_value_b + 0x0008)
956   0077  77          	ld	(hl), a
957   0078  18 15       	jr	l_player_init_00104
958   007A              l_player_init_00102:
959   007A  0A          	ld	a, (bc)
960   007B  F6 04       	or	a,0x04
961   007D  02          	ld	(bc), a
962   007E  1A          	ld	a, (de)
963   007F  F6 10       	or	a,0x10
964   0081  12          	ld	(de), a
965   0082  21 08 00    	ld	hl, +(_tile + 0x0008)
966   0085  DD 7E 06    	ld	a,(ix+6)
967   0088  77          	ld	(hl), a
968   0089  3A 08 00    	ld	a,(_value_b + 0x0008)
969   008C  32 08 00    	ld	(_colint+8),a
970   008F              l_player_init_00104:
971   008F  F1          	pop	af
972   0090  DD E1       	pop	ix
973   0092  C9          	ret
974   0093              	SECTION code_compiler
975   0093              ;	---------------------------------
976   0093              ; Function player_turn
977   0093              ; ---------------------------------
978   0093              _player_turn:
979   0093  21 00 00    	ld	hl,_sprite
980   0096  36 08       	ld	(hl),0x08
981   0098  CD 00 00    	call	_spr_chktime
982   009B  7D          	ld	a, l
983   009C  B7          	or	a, a
984   009D  CA 1E 01    	jp	Z, l_player_turn_00116
985   00A0  3A 08 00    	ld	a,(_lin + 0x0008)
986   00A3  32 00 00    	ld	(_s_lin0),a
987   00A6  3A 08 00    	ld	a,(_col + 0x0008)
988   00A9  32 00 00    	ld	(_s_col0),a
989   00AC  21 00 00    	ld	hl,_k1
990   00AF  E5          	push	hl
991   00B0  2A 00 00    	ld	hl,(_joyfunc1)
992   00B3  CD 00 00    	call	___sdcc_call_hl
993   00B6  F1          	pop	af
994   00B7  7D          	ld	a,l
995   00B8  32 00 00    	ld	(_dirs),a
996   00BB  CD 89 02    	call	_player_move
997   00BE  CD E0 04    	call	_player_handle_lock
998   00C1  CD 65 07    	call	_player_collision
999   00C4  CD FD 01    	call	_player_check_exit
1000  00C7  3A 08 00    	ld	a,(_state + 0x0008)
1001  00CA  CB 6F       	bit	5, a
1002  00CC  28 11       	jr	Z,l_player_turn_00102
1003  00CE  3A 00 00    	ld	a,(_game_inmune)
1004  00D1  B7          	or	a, a
1005  00D2  20 0B       	jr	NZ,l_player_turn_00102
1006  00D4  CD AB 0E    	call	_player_lost_life
1007  00D7  3A 08 00    	ld	a,(_state + 0x0008)
1008  00DA  E6 DF       	and	a,0xdf
1009  00DC  32 08 00    	ld	((_state + 0x0008)),a
1010  00DF              l_player_turn_00102:
1011  00DF  3A 00 00    	ld	a,(_scr_curr)
1012  00E2  D6 14       	sub	a,0x14
1013  00E4  30 05       	jr	NC,l_player_turn_00107
1014  00E6  CD 00 00    	call	_game_crumble
1015  00E9  18 1A       	jr	l_player_turn_00108
1016  00EB              l_player_turn_00107:
1017  00EB  21 08 00    	ld	hl,0x0008
1018  00EE  E5          	push	hl
1019  00EF  21 10 00    	ld	hl, +(_last_time_b + 0x0010)
1020  00F2  E5          	push	hl
1021  00F3  CD 00 00    	call	_game_check_time
1022  00F6  F1          	pop	af
1023  00F7  F1          	pop	af
1024  00F8  7D          	ld	a, l
1025  00F9  B7          	or	a, a
1026  00FA  28 09       	jr	Z,l_player_turn_00108
1027  00FC  CD 00 00    	call	_game_crumble
1028  00FF  2A 00 00    	ld	hl,(_curr_time)
1029  0102  22 10 00    	ld	(_last_time_b + 0x0010),hl
1030  0105              l_player_turn_00108:
1031  0105  3A 08 00    	ld	a,(_state + 0x0008)
1032  0108  CB 47       	bit	0, a
1033  010A  20 0A       	jr	NZ,l_player_turn_00110
1034  010C  CB 4F       	bit	1, a
1035  010E  20 06       	jr	NZ,l_player_turn_00110
1036  0110  3A 00 00    	ld	a,(_dirs)
1037  0113  32 00 00    	ld	(_dirs_last),a
1038  0116              l_player_turn_00110:
1039  0116  3A 00 00    	ld	a,(_game_debug)
1040  0119  B7          	or	a, a
1041  011A  C8          	ret	Z
1042  011B  CD 1F 01    	call	_player_debug_keys
1043  011E              l_player_turn_00116:
1044  011E  C9          	ret
1045  011F              	SECTION code_compiler
1046  011F              ;	---------------------------------
1047  011F              ; Function player_debug_keys
1048  011F              ; ---------------------------------
1049  011F              _player_debug_keys:
1050  011F  CD 00 00    	call	_in_inkey
1051  0122  7D          	ld	a,l
1052  0123  D6 20       	sub	a,0x20
1053  0125  4D          	ld	c,l
1054  0126  44          	ld	b,h
1055  0127  20 16       	jr	NZ,l_player_debug_keys_00105
1056  0129  21 00 00    	ld	hl,_game_song_play_start
1057  012C  7E          	ld	a, (hl)
1058  012D  B7          	or	a, a
1059  012E  28 07       	jr	Z,l_player_debug_keys_00102
1060  0130  36 00       	ld	(hl),0x00
1061  0132  CD 00 00    	call	_ay_song_stop
1062  0135  18 05       	jr	l_player_debug_keys_00103
1063  0137              l_player_debug_keys_00102:
1064  0137  C5          	push	bc
1065  0138  CD 00 00    	call	_audio_ingame
1066  013B  C1          	pop	bc
1067  013C              l_player_debug_keys_00103:
1068  013C  CD 00 00    	call	_in_wait_nokey
1069  013F              l_player_debug_keys_00105:
1070  013F  79          	ld	a, c
1071  0140  D6 31       	sub	a,0x31
1072  0142  20 17       	jr	NZ,l_player_debug_keys_00109
1073  0144  21 00 00    	ld	hl,_scr_curr
1074  0147  35          	dec	(hl)
1075  0148  21 00 00    	ld	hl,_game_round_up
1076  014B  36 01       	ld	(hl),0x01
1077  014D  3A 00 00    	ld	a,(_scr_curr)
1078  0150  3C          	inc	a
1079  0151  20 05       	jr	NZ,l_player_debug_keys_00107
1080  0153  21 00 00    	ld	hl,_scr_curr
1081  0156  36 27       	ld	(hl),0x27
1082  0158              l_player_debug_keys_00107:
1083  0158  CD 00 00    	call	_in_wait_nokey
1084  015B              l_player_debug_keys_00109:
1085  015B  79          	ld	a, c
1086  015C  D6 32       	sub	a,0x32
1087  015E  20 18       	jr	NZ,l_player_debug_keys_00113
1088  0160  21 00 00    	ld	hl,_scr_curr
1089  0163  34          	inc	(hl)
1090  0164  21 00 00    	ld	hl,_game_round_up
1091  0167  36 01       	ld	(hl),0x01
1092  0169  3A 00 00    	ld	a,(_scr_curr)
1093  016C  D6 28       	sub	a,0x28
1094  016E  20 05       	jr	NZ,l_player_debug_keys_00111
1095  0170  21 00 00    	ld	hl,_scr_curr
1096  0173  36 00       	ld	(hl),0x00
1097  0175              l_player_debug_keys_00111:
1098  0175  CD 00 00    	call	_in_wait_nokey
1099  0178              l_player_debug_keys_00113:
1100  0178  79          	ld	a, c
1101  0179  D6 33       	sub	a,0x33
1102  017B  20 46       	jr	NZ,l_player_debug_keys_00118
1103  017D  21 00 00    	ld	hl,_game_inmune
1104  0180  7E          	ld	a, (hl)
1105  0181  D6 01       	sub	a,0x01
1106  0183  3E 00       	ld	a,0x00
1107  0185  17          	rla
1108  0186  47          	ld	b, a
1109  0187  70          	ld	(hl), b
1110  0188  11 08 00    	ld	de,_state+8
1111  018B  1A          	ld	a, (de)
1112  018C  E6 DF       	and	a,0xdf
1113  018E  12          	ld	(de), a
1114  018F  7E          	ld	a, (hl)
1115  0190  B7          	or	a, a
1116  0191  28 0F       	jr	Z,l_player_debug_keys_00115
1117  0193  C5          	push	bc
1118  0194  21 00 00    	ld	hl,___str_0
1119  0197  E5          	push	hl
1120  0198  21 15 00    	ld	hl,0x0015
1121  019B  E5          	push	hl
1122  019C  CD 00 00    	call	_zx_print_str
1123  019F  C1          	pop	bc
1124  01A0  18 0D       	jr	l_player_debug_keys_00116
1125  01A2              l_player_debug_keys_00115:
1126  01A2  C5          	push	bc
1127  01A3  21 0F 00    	ld	hl,___str_1
1128  01A6  E5          	push	hl
1129  01A7  21 15 00    	ld	hl,0x0015
1130  01AA  E5          	push	hl
1131  01AB  CD 00 00    	call	_zx_print_str
1132  01AE  C1          	pop	bc
1133  01AF              l_player_debug_keys_00116:
1134  01AF  C5          	push	bc
1135  01B0  21 19 00    	ld	hl,0x0019
1136  01B3  CD 00 00    	call	_z80_delay_ms_fastcall
1137  01B6  C1          	pop	bc
1138  01B7  CD 00 00    	call	_in_wait_nokey
1139  01BA  C5          	push	bc
1140  01BB  21 15 20    	ld	hl,0x2015
1141  01BE  E5          	push	hl
1142  01BF  CD 00 00    	call	_game_fill_row
1143  01C2  C1          	pop	bc
1144  01C3              l_player_debug_keys_00118:
1145  01C3  79          	ld	a, c
1146  01C4  D6 34       	sub	a,0x34
1147  01C6  20 10       	jr	NZ,l_player_debug_keys_00120
1148  01C8  21 00 00    	ld	hl,_game_round_up
1149  01CB  36 01       	ld	(hl),0x01
1150  01CD  C5          	push	bc
1151  01CE  21 FA 00    	ld	hl,0x00fa
1152  01D1  CD 00 00    	call	_z80_delay_ms_fastcall
1153  01D4  C1          	pop	bc
1154  01D5  CD 00 00    	call	_in_wait_nokey
1155  01D8              l_player_debug_keys_00120:
1156  01D8  79          	ld	a, c
1157  01D9  D6 35       	sub	a,0x35
1158  01DB  20 1F       	jr	NZ,l_player_debug_keys_00126
1159  01DD  21 00 00    	ld	hl,_scr_curr
1160  01E0  7E          	ld	a, (hl)
1161  01E1  D6 14       	sub	a,0x14
1162  01E3  38 04       	jr	C,l_player_debug_keys_00122
1163  01E5  36 00       	ld	(hl),0x00
1164  01E7  18 05       	jr	l_player_debug_keys_00123
1165  01E9              l_player_debug_keys_00122:
1166  01E9  21 00 00    	ld	hl,_scr_curr
1167  01EC  36 14       	ld	(hl),0x14
1168  01EE              l_player_debug_keys_00123:
1169  01EE  21 00 00    	ld	hl,_game_round_up
1170  01F1  36 01       	ld	(hl),0x01
1171  01F3  21 FA 00    	ld	hl,0x00fa
1172  01F6  CD 00 00    	call	_z80_delay_ms_fastcall
1173  01F9  CD 00 00    	call	_in_wait_nokey
1174  01FC              l_player_debug_keys_00126:
1175  01FC  C9          	ret
1176  01FD              	SECTION rodata_compiler
1177  0000              ___str_0:
1178  0000  4D 49 4C 4C 45 4E 49 41 4C 20 4D 4F 44 45 
                        	DEFM "MILLENIAL MODE"
1179  000E  00          	DEFB 0x00
1180  000F              	SECTION rodata_compiler
1181  000F              ___str_1:
1182  000F  47 45 4E 58 20 4D 4F 44 45 
                        	DEFM "GENX MODE"
1183  0018  00          	DEFB 0x00
1184  0019              	SECTION code_compiler
1185  01FD              ;	---------------------------------
1186  01FD              ; Function player_check_exit
1187  01FD              ; ---------------------------------
1188  01FD              _player_check_exit:
1189  01FD  3A 00 00    	ld	a,(_obj_count)
1190  0200  3C          	inc	a
1191  0201  C2 88 02    	jp	NZ,l_player_check_exit_00114
1192  0204  21 08 00    	ld	hl,+(_col + 0x0008)
1193  0207  5E          	ld	e, (hl)
1194  0208  3A 00 00    	ld	a,(_game_exit_col)
1195  020B  BB          	cp	a,e
1196  020C  28 0E       	jr	Z,l_player_check_exit_00110
1197  020E  4F          	ld	c,a
1198  020F  06 00       	ld	b,0x00
1199  0211  03          	inc	bc
1200  0212  16 00       	ld	d,0x00
1201  0214  79          	ld	a, c
1202  0215  93          	sub	a, e
1203  0216  20 70       	jr	NZ,l_player_check_exit_00114
1204  0218  78          	ld	a, b
1205  0219  92          	sub	a, d
1206  021A  20 6C       	jr	NZ,l_player_check_exit_00114
1207  021C              l_player_check_exit_00110:
1208  021C  2A 08 00    	ld	hl,(_lin + 0x0008)
1209  021F  26 00       	ld	h,0x00
1210  0221  01 10 00    	ld	bc,0x0010
1211  0224  09          	add	hl,bc
1212  0225  3A 00 00    	ld	a,(_game_exit_lin)
1213  0228  5F          	ld	e,a
1214  0229  16 00       	ld	d,0x00
1215  022B  7D          	ld	a,l
1216  022C  93          	sub	a,e
1217  022D  44          	ld	b,h
1218  022E  6F          	ld	l, a
1219  022F  78          	ld	a, b
1220  0230  9A          	sbc	a, d
1221  0231  67          	ld	h, a
1222  0232  CD 00 00    	call	_abs_fastcall
1223  0235  7D          	ld	a,l
1224  0236  32 00 00    	ld	(_v0),a
1225  0239  D6 08       	sub	a,0x08
1226  023B  30 4B       	jr	NC,l_player_check_exit_00114
1227  023D  21 00 00    	ld	hl,_scr_curr
1228  0240  7E          	ld	a,(hl)
1229  0241  3C          	inc	a
1230  0242  77          	ld	(hl),a
1231  0243  D6 14       	sub	a,0x14
1232  0245  20 05       	jr	NZ,l_player_check_exit_00102
1233  0247  21 00 00    	ld	hl,_scr_curr
1234  024A  36 00       	ld	(hl),0x00
1235  024C              l_player_check_exit_00102:
1236  024C  3A 00 00    	ld	a,(_scr_curr)
1237  024F  D6 28       	sub	a,0x28
1238  0251  20 05       	jr	NZ,l_player_check_exit_00104
1239  0253  21 00 00    	ld	hl,_scr_curr
1240  0256  36 14       	ld	(hl),0x14
1241  0258              l_player_check_exit_00104:
1242  0258  21 00 00    	ld	hl,_game_round_up
1243  025B  36 01       	ld	(hl),0x01
1244  025D  01 08 00    	ld	bc,_state+8
1245  0260  0A          	ld	a, (bc)
1246  0261  E6 DF       	and	a,0xdf
1247  0263  02          	ld	(bc), a
1248  0264  CD 00 00    	call	_ay_song_stop
1249  0267              l_player_check_exit_00105:
1250  0267  ED 4B 00 00 	ld	bc,(_air_curr_byte)
1251  026B  ED 5B 00 00 	ld	de,(_air_end_byte)
1252  026F  7B          	ld	a,e
1253  0270  91          	sub	a,c
1254  0271  7A          	ld	a,d
1255  0272  98          	sbc	a,b
1256  0273  D0          	ret	NC
1257  0274  CD 00 00    	call	_audio_tick
1258  0277  CD 00 00    	call	_game_anim_air
1259  027A  21 08 00    	ld	hl,0x0008
1260  027D  CD 97 09    	call	_player_score_add
1261  0280  21 05 00    	ld	hl,0x0005
1262  0283  CD 00 00    	call	_z80_delay_ms_fastcall
1263  0286  18 DF       	jr	l_player_check_exit_00105
1264  0288              l_player_check_exit_00114:
1265  0288  C9          	ret
1266  0289              	SECTION code_compiler
1267  0289              ;	---------------------------------
1268  0289              ; Function player_move
1269  0289              ; ---------------------------------
1270  0289              _player_move:
1271  0289  3A 08 00    	ld	a,(_state + 0x0008)
1272  028C  CB 47       	bit	0, a
1273  028E  20 04       	jr	NZ,l_player_move_00101
1274  0290  CB 4F       	bit	1, a
1275  0292  28 05       	jr	Z,l_player_move_00102
1276  0294              l_player_move_00101:
1277  0294  CD A2 02    	call	_player_move_jump
1278  0297  18 03       	jr	l_player_move_00103
1279  0299              l_player_move_00102:
1280  0299  CD 66 04    	call	_player_move_walk
1281  029C              l_player_move_00103:
1282  029C  CD 00 00    	call	_spr_paint_player
1283  029F  2E 00       	ld	l,0x00
1284  02A1  C9          	ret
1285  02A2              	SECTION code_compiler
1286  02A2              ;	---------------------------------
1287  02A2              ; Function player_move_jump
1288  02A2              ; ---------------------------------
1289  02A2              _player_move_jump:
1290  02A2  CD 00 00    	call	___sdcc_enter_ix
1291  02A5  F5          	push	af
1292  02A6  3B          	dec	sp
1293  02A7  21 00 00    	ld	hl,_player_jump_count
1294  02AA  34          	inc	(hl)
1295  02AB  3E 11       	ld	a,0x11
1296  02AD  96          	sub	a, (hl)
1297  02AE  30 07       	jr	NC,l_player_move_jump_00102
1298  02B0  01 08 00    	ld	bc,_state+8
1299  02B3  0A          	ld	a, (bc)
1300  02B4  E6 F3       	and	a,+(0xfb&0xf7)
1301  02B6  02          	ld	(bc),a
1302  02B7              l_player_move_jump_00102:
1303  02B7  3A 08 00    	ld	a,(_state_a + 0x0008)
1304  02BA  CB 57       	bit	2, a
1305  02BC  28 19       	jr	Z,l_player_move_jump_00108
1306  02BE  3E 02       	ld	a,0x02
1307  02C0  21 00 00    	ld	hl,_player_jump_count
1308  02C3  96          	sub	a, (hl)
1309  02C4  30 0C       	jr	NC,l_player_move_jump_00104
1310  02C6  7E          	ld	a, (hl)
1311  02C7  D6 09       	sub	a,0x09
1312  02C9  30 07       	jr	NC,l_player_move_jump_00104
1313  02CB  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1314  02CE  36 07       	ld	(hl),0x07
1315  02D0  18 05       	jr	l_player_move_jump_00108
1316  02D2              l_player_move_jump_00104:
1317  02D2  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1318  02D5  36 04       	ld	(hl),0x04
1319  02D7              l_player_move_jump_00108:
1320  02D7  2A 00 00    	ld	hl,(_player_vel_y)
1321  02DA  ED 5B 00 00 	ld	de,(_game_gravity)
1322  02DE  19          	add	hl,de
1323  02DF  22 00 00    	ld	(_player_vel_y),hl
1324  02E2  3A 08 00    	ld	a,(_state + 0x0008)
1325  02E5  E6 EF       	and	a,0xef
1326  02E7  32 08 00    	ld	((_state + 0x0008)),a
1327  02EA  21 64 00    	ld	hl,0x0064
1328  02ED  E5          	push	hl
1329  02EE  2A 00 00    	ld	hl,(_player_vel_y)
1330  02F1  E5          	push	hl
1331  02F2  CD 00 00    	call	__divsint_callee
1332  02F5  4D          	ld	c, l
1333  02F6  44          	ld	b, h
1334  02F7  CB 41       	bit	0,c
1335  02F9  21 00 00    	ld	hl,_s_lin1
1336  02FC  71          	ld	(hl),c
1337  02FD  28 04       	jr	Z,l_player_move_jump_00110
1338  02FF  21 00 00    	ld	hl,_s_lin1
1339  0302  35          	dec	(hl)
1340  0303              l_player_move_jump_00110:
1341  0303  3A 08 00    	ld	a,(_lin + 0x0008)
1342  0306  21 00 00    	ld	hl,_s_lin1
1343  0309  86          	add	a, (hl)
1344  030A  77          	ld	(hl), a
1345  030B  AF          	xor	a, a
1346  030C  B9          	cp	a, c
1347  030D  98          	sbc	a, b
1348  030E  E2 13 03    	jp	PO, l_player_move_jump_00210
1349  0311  EE 80       	xor	a,0x80
1350  0313              l_player_move_jump_00210:
1351  0313  FA 57 03    	jp	M, l_player_move_jump_00131
1352  0316  CD 00 00    	call	_spr_set_up
1353  0319  21 08 00    	ld	hl,+(_col + 0x0008)
1354  031C  46          	ld	b, (hl)
1355  031D  3A 00 00    	ld	a,(_s_lin1)
1356  0320  4F          	ld	c,a
1357  0321  C5          	push	bc
1358  0322  CD 14 0C    	call	_player_check_ceil
1359  0325  F1          	pop	af
1360  0326  DD 75 FD    	ld	(ix-3),l
1361  0329  7D          	ld	a, l
1362  032A  B7          	or	a, a
1363  032B  20 1B       	jr	NZ,l_player_move_jump_00112
1364  032D  21 00 00    	ld	hl,0x0000
1365  0330  22 00 00    	ld	(_player_vel_y),hl
1366  0333  3A 08 00    	ld	a,(_state + 0x0008)
1367  0336  DD 77 FD    	ld	(ix-3),a
1368  0339  4F          	ld	c, a
1369  033A  CB 91       	res	2, c
1370  033C  21 08 00    	ld	hl, +(_state + 0x0008)
1371  033F  71          	ld	(hl), c
1372  0340  CB 99       	res	3, c
1373  0342  71          	ld	(hl), c
1374  0343  CB 81       	res	0, c
1375  0345  71          	ld	(hl), c
1376  0346  18 06       	jr	l_player_move_jump_00113
1377  0348              l_player_move_jump_00112:
1378  0348  3A 00 00    	ld	a,(_s_lin1)
1379  034B  32 08 00    	ld	((_lin + 0x0008)),a
1380  034E              l_player_move_jump_00113:
1381  034E  3A 00 00    	ld	a,(_s_lin1)
1382  0351  32 00 00    	ld	(_player_jump_top),a
1383  0354  C3 1D 04    	jp	l_player_move_jump_00132
1384  0357              l_player_move_jump_00131:
1385  0357  3E 70       	ld	a,0x70
1386  0359  21 00 00    	ld	hl,_s_lin1
1387  035C  96          	sub	a, (hl)
1388  035D  30 18       	jr	NC,l_player_move_jump_00118
1389  035F  3E C8       	ld	a,0xc8
1390  0361  96          	sub	a, (hl)
1391  0362  30 07       	jr	NC,l_player_move_jump_00115
1392  0364  21 00 00    	ld	hl,_v0
1393  0367  36 00       	ld	(hl),0x00
1394  0369  18 19       	jr	l_player_move_jump_00119
1395  036B              l_player_move_jump_00115:
1396  036B  21 00 00    	ld	hl,_v0
1397  036E  36 70       	ld	(hl),0x70
1398  0370  21 00 00    	ld	hl,_s_lin1
1399  0373  36 70       	ld	(hl),0x70
1400  0375  18 0D       	jr	l_player_move_jump_00119
1401  0377              l_player_move_jump_00118:
1402  0377  CD AD 0D    	call	_player_get_floor
1403  037A  DD 74 FF    	ld	(ix-1),h
1404  037D  DD 75 FE    	ld	(ix-2),l
1405  0380  7D          	ld	a, l
1406  0381  32 00 00    	ld	(_v0),a
1407  0384              l_player_move_jump_00119:
1408  0384  3A 00 00    	ld	a,(_s_lin1)
1409  0387  21 00 00    	ld	hl,_v0
1410  038A  96          	sub	a, (hl)
1411  038B  DA 14 04    	jp	C, l_player_move_jump_00128
1412  038E  7E          	ld	a, (hl)
1413  038F  21 00 00    	ld	hl,_s_lin0
1414  0392  96          	sub	a, (hl)
1415  0393  DA 14 04    	jp	C, l_player_move_jump_00128
1416  0396  3A 00 00    	ld	a,(_v0)
1417  0399  4F          	ld	c,a
1418  039A  06 00       	ld	b,0x00
1419  039C  3A 00 00    	ld	a,(_player_jump_top)
1420  039F  5F          	ld	e,a
1421  03A0  16 00       	ld	d,0x00
1422  03A2  79          	ld	a, c
1423  03A3  93          	sub	a, e
1424  03A4  4F          	ld	c, a
1425  03A5  78          	ld	a, b
1426  03A6  9A          	sbc	a, d
1427  03A7  47          	ld	b, a
1428  03A8  79          	ld	a, c
1429  03A9  D6 28       	sub	a,0x28
1430  03AB  78          	ld	a, b
1431  03AC  17          	rla
1432  03AD  3F          	ccf
1433  03AE  1F          	rra
1434  03AF  DE 80       	sbc	a,0x80
1435  03B1  38 08       	jr	C,l_player_move_jump_00121
1436  03B3  3A 08 00    	ld	a,(_state + 0x0008)
1437  03B6  F6 20       	or	a,0x20
1438  03B8  32 08 00    	ld	((_state + 0x0008)),a
1439  03BB              l_player_move_jump_00121:
1440  03BB  3A 00 00    	ld	a,(_v0)
1441  03BE  32 08 00    	ld	((_lin + 0x0008)),a
1442  03C1  21 00 00    	ld	hl,0x0000
1443  03C4  22 00 00    	ld	(_player_vel_y),hl
1444  03C7  3A 08 00    	ld	a,(_state + 0x0008)
1445  03CA  E6 FC       	and	a,+(0xfd&0xfe)
1446  03CC  32 08 00    	ld	((_state + 0x0008)),a
1447  03CF  3A 00 00    	ld	a,(_player_jump_lin)
1448  03D2  21 00 00    	ld	hl,_v0
1449  03D5  96          	sub	a, (hl)
1450  03D6  20 0C       	jr	NZ,l_player_move_jump_00123
1451  03D8  3A 08 00    	ld	a,(_state_a + 0x0008)
1452  03DB  CB 57       	bit	2, a
1453  03DD  28 05       	jr	Z,l_player_move_jump_00123
1454  03DF  E6 FE       	and	a,0xfe
1455  03E1  32 08 00    	ld	((_state_a + 0x0008)),a
1456  03E4              l_player_move_jump_00123:
1457  03E4  3A 08 00    	ld	a,(_state_a + 0x0008)
1458  03E7  E6 7B       	and	a,+(0x7f&0xfb)
1459  03E9  32 08 00    	ld	((_state_a + 0x0008)),a
1460  03EC  CD 27 06    	call	_player_handle_conveyor
1461  03EF  CD 00 00    	call	_ay_fx_stop
1462  03F2  21 00 00    	ld	hl,_dirs
1463  03F5  CB 7E       	bit	7, (hl)
1464  03F7  28 0F       	jr	Z,l_player_move_jump_00126
1465  03F9  AF          	xor	a, a
1466  03FA  F5          	push	af
1467  03FB  33          	inc	sp
1468  03FC  CD 35 0D    	call	_player_check_floor
1469  03FF  33          	inc	sp
1470  0400  3E 01       	ld	a,0x01
1471  0402  F5          	push	af
1472  0403  33          	inc	sp
1473  0404  CD 35 0D    	call	_player_check_floor
1474  0407  33          	inc	sp
1475  0408              l_player_move_jump_00126:
1476  0408  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1477  040B  36 04       	ld	(hl),0x04
1478  040D  CD CB 05    	call	_player_check_conveyor
1479  0410  2E 00       	ld	l,0x00
1480  0412  18 4D       	jr	l_player_move_jump_00138
1481  0414              l_player_move_jump_00128:
1482  0414  CD 00 00    	call	_spr_set_down
1483  0417  3A 00 00    	ld	a,(_s_lin1)
1484  041A  32 08 00    	ld	((_lin + 0x0008)),a
1485  041D              l_player_move_jump_00132:
1486  041D  3A 08 00    	ld	a,(_state + 0x0008)
1487  0420  CB 5F       	bit	3, a
1488  0422  20 04       	jr	NZ,l_player_move_jump_00135
1489  0424  CB 57       	bit	2, a
1490  0426  28 37       	jr	Z,l_player_move_jump_00136
1491  0428              l_player_move_jump_00135:
1492  0428  3E 00       	ld	a, +((_player_jump_hor) & 0xFF)
1493  042A  21 00 00    	ld	hl,_player_jump_count
1494  042D  86          	add	a, (hl)
1495  042E  DD 77 FE    	ld	(ix-2),a
1496  0431  6F          	ld	l,a
1497  0432  3E 00       	ld	a,+((_player_jump_hor) / 256)
1498  0434  CE 00       	adc	a,0x00
1499  0436  DD 77 FF    	ld	(ix-1),a
1500  0439  67          	ld	h,a
1501  043A  7E          	ld	a, (hl)
1502  043B  DD 77 FE    	ld	(ix-2),a
1503  043E  B7          	or	a, a
1504  043F  28 1B       	jr	Z,l_player_move_jump_00134
1505  0441  3A 00 00    	ld	a,(_player_vel_y)
1506  0444  21 00 00    	ld	hl,_game_gravity
1507  0447  96          	sub	a, (hl)
1508  0448  21 00 00    	ld	hl,_player_vel_y
1509  044B  77          	ld	(hl), a
1510  044C  23          	inc	hl
1511  044D  7E          	ld	a, (hl)
1512  044E  21 01 00    	ld	hl,_game_gravity + 1
1513  0451  9E          	sbc	a, (hl)
1514  0452  32 01 00    	ld	(_player_vel_y + 1),a
1515  0455  CD 00 00    	call	_spr_move_horizontal
1516  0458  2E 00       	ld	l,0x00
1517  045A  18 05       	jr	l_player_move_jump_00138
1518  045C              l_player_move_jump_00134:
1519  045C  CD 00 00    	call	_spr_move_horizontal
1520  045F              l_player_move_jump_00136:
1521  045F  2E 01       	ld	l,0x01
1522  0461              l_player_move_jump_00138:
1523  0461  DD F9       	ld	sp, ix
1524  0463  DD E1       	pop	ix
1525  0465  C9          	ret
1526  0466              	SECTION code_compiler
1527  0466              ;	---------------------------------
1528  0466              ; Function player_move_walk
1529  0466              ; ---------------------------------
1530  0466              _player_move_walk:
1531  0466  CD 5A 09    	call	_player_check_input
1532  0469  7D          	ld	a, l
1533  046A  B7          	or	a, a
1534  046B  28 5C       	jr	Z,l_player_move_walk_00117
1535  046D  21 00 00    	ld	hl,_dirs
1536  0470  CB 7E       	bit	7, (hl)
1537  0472  28 0E       	jr	Z,l_player_move_walk_00104
1538  0474  CD 5F 06    	call	_player_new_jump
1539  0477  7D          	ld	a, l
1540  0478  B7          	or	a, a
1541  0479  28 03       	jr	Z,l_player_move_walk_00102
1542  047B  CD 00 00    	call	_spr_move_horizontal
1543  047E              l_player_move_walk_00102:
1544  047E  2E 01       	ld	l,0x01
1545  0480  18 5D       	jr	l_player_move_walk_00119
1546  0482              l_player_move_walk_00104:
1547  0482  11 08 00    	ld	de,_state_a+8
1548  0485  1A          	ld	a, (de)
1549  0486  E6 FD       	and	a,0xfd
1550  0488  12          	ld	(de), a
1551  0489  01 08 00    	ld	bc,_state+8
1552  048C  0A          	ld	a, (bc)
1553  048D  CB 67       	bit	4, a
1554  048F  20 07       	jr	NZ,l_player_move_walk_00106
1555  0491  C5          	push	bc
1556  0492  D5          	push	de
1557  0493  CD 5B 05    	call	_player_handle_walk
1558  0496  D1          	pop	de
1559  0497  C1          	pop	bc
1560  0498              l_player_move_walk_00106:
1561  0498  1A          	ld	a, (de)
1562  0499  0F          	rrca
1563  049A  38 05       	jr	C,l_player_move_walk_00112
1564  049C  CD 27 06    	call	_player_handle_conveyor
1565  049F  18 1E       	jr	l_player_move_walk_00113
1566  04A1              l_player_move_walk_00112:
1567  04A1  21 00 00    	ld	hl,_dirs
1568  04A4  CB 5E       	bit	3, (hl)
1569  04A6  28 04       	jr	Z,l_player_move_walk_00108
1570  04A8  0A          	ld	a, (bc)
1571  04A9  F6 04       	or	a,0x04
1572  04AB  02          	ld	(bc), a
1573  04AC              l_player_move_walk_00108:
1574  04AC  21 00 00    	ld	hl,_dirs
1575  04AF  CB 56       	bit	2, (hl)
1576  04B1  28 04       	jr	Z,l_player_move_walk_00110
1577  04B3  0A          	ld	a, (bc)
1578  04B4  F6 08       	or	a,0x08
1579  04B6  02          	ld	(bc), a
1580  04B7              l_player_move_walk_00110:
1581  04B7  21 08 04    	ld	hl,0x0408
1582  04BA  E5          	push	hl
1583  04BB  CD 7D 09    	call	_player_tile
1584  04BE  F1          	pop	af
1585  04BF              l_player_move_walk_00113:
1586  04BF  CD 93 05    	call	_player_handle_fall
1587  04C2  CD 00 00    	call	_spr_move_horizontal
1588  04C5  2E 01       	ld	l,0x01
1589  04C7  18 16       	jr	l_player_move_walk_00119
1590  04C9              l_player_move_walk_00117:
1591  04C9  01 08 00    	ld	bc,_state_a+8
1592  04CC  0A          	ld	a, (bc)
1593  04CD  E6 FD       	and	a,0xfd
1594  04CF  02          	ld	(bc), a
1595  04D0  CD 27 06    	call	_player_handle_conveyor
1596  04D3  7D          	ld	a, l
1597  04D4  B7          	or	a, a
1598  04D5  28 03       	jr	Z,l_player_move_walk_00115
1599  04D7  CD 00 00    	call	_spr_move_horizontal
1600  04DA              l_player_move_walk_00115:
1601  04DA  CD 93 05    	call	_player_handle_fall
1602  04DD  2E 00       	ld	l,0x00
1603  04DF              l_player_move_walk_00119:
1604  04DF  C9          	ret
1605  04E0              	SECTION code_compiler
1606  04E0              ;	---------------------------------
1607  04E0              ; Function player_handle_lock
1608  04E0              ; ---------------------------------
1609  04E0              _player_handle_lock:
1610  04E0  3A 08 00    	ld	a,(_state + 0x0008)
1611  04E3  CB 67       	bit	4, a
1612  04E5  20 6C       	jr	NZ,l_player_handle_lock_00119
1613  04E7  3A 00 00    	ld	a,(_dirs)
1614  04EA  B7          	or	a, a
1615  04EB  20 09       	jr	NZ,l_player_handle_lock_00116
1616  04ED  01 08 00    	ld	bc,_state_a+8
1617  04F0  0A          	ld	a, (bc)
1618  04F1  E6 FE       	and	a,0xfe
1619  04F3  02          	ld	(bc), a
1620  04F4  18 64       	jr	l_player_handle_lock_00121
1621  04F6              l_player_handle_lock_00116:
1622  04F6  21 00 00    	ld	hl,_dirs
1623  04F9  7E          	ld	a, (hl)
1624  04FA  E6 80       	and	a,0x80
1625  04FC  CB 56       	bit	2, (hl)
1626  04FE  20 07       	jr	NZ,l_player_handle_lock_00111
1627  0500  21 00 00    	ld	hl,_dirs
1628  0503  CB 5E       	bit	3, (hl)
1629  0505  28 30       	jr	Z,l_player_handle_lock_00112
1630  0507              l_player_handle_lock_00111:
1631  0507  B7          	or	a, a
1632  0508  28 07       	jr	Z,l_player_handle_lock_00102
1633  050A  21 00 00    	ld	hl,_dirs_last
1634  050D  CB FE       	set	7, (hl)
1635  050F  18 05       	jr	l_player_handle_lock_00103
1636  0511              l_player_handle_lock_00102:
1637  0511  21 00 00    	ld	hl,_dirs_last
1638  0514  CB BE       	res	7, (hl)
1639  0516              l_player_handle_lock_00103:
1640  0516  3A 00 00    	ld	a,(_dirs)
1641  0519  21 00 00    	ld	hl,_dirs_last
1642  051C  96          	sub	a, (hl)
1643  051D  20 0F       	jr	NZ,l_player_handle_lock_00105
1644  051F  01 08 00    	ld	bc,_state_a+8
1645  0522  0A          	ld	a, (bc)
1646  0523  F6 01       	or	a,0x01
1647  0525  02          	ld	(bc), a
1648  0526  3A 00 00    	ld	a,(_dirs)
1649  0529  32 00 00    	ld	(_dirs_last),a
1650  052C  18 2C       	jr	l_player_handle_lock_00121
1651  052E              l_player_handle_lock_00105:
1652  052E  01 08 00    	ld	bc,_state_a+8
1653  0531  0A          	ld	a, (bc)
1654  0532  E6 FE       	and	a,0xfe
1655  0534  02          	ld	(bc), a
1656  0535  18 23       	jr	l_player_handle_lock_00121
1657  0537              l_player_handle_lock_00112:
1658  0537  B7          	or	a, a
1659  0538  28 10       	jr	Z,l_player_handle_lock_00108
1660  053A  21 00 00    	ld	hl,_dirs_last
1661  053D  CB 7E       	bit	7, (hl)
1662  053F  28 09       	jr	Z,l_player_handle_lock_00108
1663  0541  01 08 00    	ld	bc,_state_a+8
1664  0544  0A          	ld	a, (bc)
1665  0545  F6 01       	or	a,0x01
1666  0547  02          	ld	(bc), a
1667  0548  18 10       	jr	l_player_handle_lock_00121
1668  054A              l_player_handle_lock_00108:
1669  054A  01 08 00    	ld	bc,_state_a+8
1670  054D  0A          	ld	a, (bc)
1671  054E  E6 FE       	and	a,0xfe
1672  0550  02          	ld	(bc), a
1673  0551  18 07       	jr	l_player_handle_lock_00121
1674  0553              l_player_handle_lock_00119:
1675  0553  01 08 00    	ld	bc,_state_a+8
1676  0556  0A          	ld	a, (bc)
1677  0557  E6 FE       	and	a,0xfe
1678  0559  02          	ld	(bc), a
1679  055A              l_player_handle_lock_00121:
1680  055A  C9          	ret
1681  055B              	SECTION code_compiler
1682  055B              ;	---------------------------------
1683  055B              ; Function player_handle_walk
1684  055B              ; ---------------------------------
1685  055B              _player_handle_walk:
1686  055B  21 00 00    	ld	hl,_dirs
1687  055E  CB 5E       	bit	3, (hl)
1688  0560  28 11       	jr	Z,l_player_handle_walk_00104
1689  0562  3A 08 00    	ld	a,(_state_a + 0x0008)
1690  0565  CB 5F       	bit	3, a
1691  0567  28 07       	jr	Z,l_player_handle_walk_00102
1692  0569  01 08 00    	ld	bc,_colint+8
1693  056C  0A          	ld	a, (bc)
1694  056D  C6 FF       	add	a,0xff
1695  056F  02          	ld	(bc), a
1696  0570              l_player_handle_walk_00102:
1697  0570  CD 00 00    	call	_spr_set_right
1698  0573              l_player_handle_walk_00104:
1699  0573  21 00 00    	ld	hl,_dirs
1700  0576  CB 56       	bit	2, (hl)
1701  0578  28 10       	jr	Z,l_player_handle_walk_00108
1702  057A  3A 08 00    	ld	a,(_state_a + 0x0008)
1703  057D  CB 67       	bit	4, a
1704  057F  28 06       	jr	Z,l_player_handle_walk_00106
1705  0581  01 08 00    	ld	bc,_colint+8
1706  0584  0A          	ld	a, (bc)
1707  0585  3C          	inc	a
1708  0586  02          	ld	(bc), a
1709  0587              l_player_handle_walk_00106:
1710  0587  CD 00 00    	call	_spr_set_left
1711  058A              l_player_handle_walk_00108:
1712  058A  21 08 04    	ld	hl,0x0408
1713  058D  E5          	push	hl
1714  058E  CD 7D 09    	call	_player_tile
1715  0591  F1          	pop	af
1716  0592  C9          	ret
1717  0593              	SECTION code_compiler
1718  0593              ;	---------------------------------
1719  0593              ; Function player_handle_fall
1720  0593              ; ---------------------------------
1721  0593              _player_handle_fall:
1722  0593  AF          	xor	a, a
1723  0594  F5          	push	af
1724  0595  33          	inc	sp
1725  0596  CD 35 0D    	call	_player_check_floor
1726  0599  33          	inc	sp
1727  059A  7D          	ld	a, l
1728  059B  B7          	or	a, a
1729  059C  C8          	ret	Z
1730  059D  3E 01       	ld	a,0x01
1731  059F  F5          	push	af
1732  05A0  33          	inc	sp
1733  05A1  CD 35 0D    	call	_player_check_floor
1734  05A4  33          	inc	sp
1735  05A5  7D          	ld	a, l
1736  05A6  B7          	or	a, a
1737  05A7  C8          	ret	Z
1738  05A8  3A 08 00    	ld	a,(_lin + 0x0008)
1739  05AB  32 00 00    	ld	(_player_jump_top),a
1740  05AE  01 08 00    	ld	bc,_state+8
1741  05B1  0A          	ld	a, (bc)
1742  05B2  F6 02       	or	a,0x02
1743  05B4  E6 F3       	and	a,+(0xf7&0xfb)
1744  05B6  02          	ld	(bc),a
1745  05B7  01 08 00    	ld	bc,_state_a+8
1746  05BA  0A          	ld	a, (bc)
1747  05BB  E6 FC       	and	a,+(0xfe&0xfd)
1748  05BD  02          	ld	(bc),a
1749  05BE  21 00 00    	ld	hl,_player_jump_count
1750  05C1  36 FF       	ld	(hl),0xff
1751  05C3  21 00 00    	ld	hl,_player_fall_start
1752  05C6  36 01       	ld	(hl),0x01
1753  05C8  C3 00 00    	jp  _audio_fall
1754  05CB              	SECTION code_compiler
1755  05CB              ;	---------------------------------
1756  05CB              ; Function player_check_conveyor
1757  05CB              ; ---------------------------------
1758  05CB              _player_check_conveyor:
1759  05CB  3A 08 00    	ld	a,(_state_a + 0x0008)
1760  05CE  0F          	rrca
1761  05CF  D8          	ret	C
1762  05D0  C3 D3 05    	jp  _player_check_conveyor_int
1763  05D3              	SECTION code_compiler
1764  05D3              ;	---------------------------------
1765  05D3              ; Function player_check_conveyor_int
1766  05D3              ; ---------------------------------
1767  05D3              _player_check_conveyor_int:
1768  05D3  21 08 00    	ld	hl,+(_col + 0x0008)
1769  05D6  56          	ld	d, (hl)
1770  05D7  3A 08 00    	ld	a,(_lin + 0x0008)
1771  05DA  C6 10       	add	a,0x10
1772  05DC  5F          	ld	e, a
1773  05DD  D5          	push	de
1774  05DE  CD 00 00    	call	_spr_calc_index
1775  05E1  F1          	pop	af
1776  05E2  22 00 00    	ld	(_index1),hl
1777  05E5  01 00 00    	ld	bc,_tile_class+0
1778  05E8  11 00 00    	ld	de,_scr_map
1779  05EB  2A 00 00    	ld	hl,(_index1)
1780  05EE  19          	add	hl,de
1781  05EF  6E          	ld	l,(hl)
1782  05F0  26 00       	ld	h,0x00
1783  05F2  09          	add	hl, bc
1784  05F3  7E          	ld	a, (hl)
1785  05F4  32 00 00    	ld	(_v0),a
1786  05F7  ED 5B 00 00 	ld	de,(_index1)
1787  05FB  13          	inc	de
1788  05FC  21 00 00    	ld	hl,_scr_map
1789  05FF  19          	add	hl, de
1790  0600  6E          	ld	l, (hl)
1791  0601  26 00       	ld	h,0x00
1792  0603  09          	add	hl, bc
1793  0604  7E          	ld	a, (hl)
1794  0605  32 00 00    	ld	(_v1),a
1795  0608  3A 00 00    	ld	a,(_v0)
1796  060B  D6 04       	sub	a,0x04
1797  060D  28 07       	jr	Z,l_player_check_conveyor_int_00101
1798  060F  3A 00 00    	ld	a,(_v1)
1799  0612  D6 04       	sub	a,0x04
1800  0614  20 09       	jr	NZ,l_player_check_conveyor_int_00102
1801  0616              l_player_check_conveyor_int_00101:
1802  0616  01 08 00    	ld	bc,_state+8
1803  0619  0A          	ld	a, (bc)
1804  061A  F6 10       	or	a,0x10
1805  061C  02          	ld	(bc), a
1806  061D  18 07       	jr	l_player_check_conveyor_int_00105
1807  061F              l_player_check_conveyor_int_00102:
1808  061F  01 08 00    	ld	bc,_state+8
1809  0622  0A          	ld	a, (bc)
1810  0623  E6 EF       	and	a,0xef
1811  0625  02          	ld	(bc), a
1812  0626              l_player_check_conveyor_int_00105:
1813  0626  C9          	ret
1814  0627              	SECTION code_compiler
1815  0627              ;	---------------------------------
1816  0627              ; Function player_handle_conveyor
1817  0627              ; ---------------------------------
1818  0627              _player_handle_conveyor:
1819  0627  CD CB 05    	call	_player_check_conveyor
1820  062A  3A 08 00    	ld	a,(_state + 0x0008)
1821  062D  CB 67       	bit	4, a
1822  062F  28 2B       	jr	Z,l_player_handle_conveyor_00106
1823  0631  3A 00 00    	ld	a,(_game_conveyor_dir)
1824  0634  D6 02       	sub	a,0x02
1825  0636  20 0F       	jr	NZ,l_player_handle_conveyor_00102
1826  0638  CD 00 00    	call	_spr_set_right
1827  063B  21 08 04    	ld	hl,0x0408
1828  063E  E5          	push	hl
1829  063F  CD 7D 09    	call	_player_tile
1830  0642  F1          	pop	af
1831  0643  2E 01       	ld	l,0x01
1832  0645  18 17       	jr	l_player_handle_conveyor_00107
1833  0647              l_player_handle_conveyor_00102:
1834  0647  3A 00 00    	ld	a,(_game_conveyor_dir)
1835  064A  3D          	dec	a
1836  064B  20 0F       	jr	NZ,l_player_handle_conveyor_00106
1837  064D  CD 00 00    	call	_spr_set_left
1838  0650  21 08 04    	ld	hl,0x0408
1839  0653  E5          	push	hl
1840  0654  CD 7D 09    	call	_player_tile
1841  0657  F1          	pop	af
1842  0658  2E 01       	ld	l,0x01
1843  065A  18 02       	jr	l_player_handle_conveyor_00107
1844  065C              l_player_handle_conveyor_00106:
1845  065C  2E 00       	ld	l,0x00
1846  065E              l_player_handle_conveyor_00107:
1847  065E  C9          	ret
1848  065F              	SECTION code_compiler
1849  065F              ;	---------------------------------
1850  065F              ; Function player_new_jump
1851  065F              ; ---------------------------------
1852  065F              _player_new_jump:
1853  065F  21 08 00    	ld	hl,+(_col + 0x0008)
1854  0662  56          	ld	d, (hl)
1855  0663  21 08 00    	ld	hl,+(_lin + 0x0008)
1856  0666  46          	ld	b, (hl)
1857  0667  05          	dec	b
1858  0668  05          	dec	b
1859  0669  58          	ld	e,b
1860  066A  D5          	push	de
1861  066B  CD 14 0C    	call	_player_check_ceil
1862  066E  F1          	pop	af
1863  066F  7D          	ld	a, l
1864  0670  B7          	or	a, a
1865  0671  CA 5C 07    	jp	Z, l_player_new_jump_00128
1866  0674  21 08 00    	ld	hl,+(_state_a + 0x0008)
1867  0677  4E          	ld	c, (hl)
1868  0678  CB 49       	bit	1, c
1869  067A  20 08       	jr	NZ,l_player_new_jump_00102
1870  067C  3A 00 00    	ld	a,(_dirs)
1871  067F  32 00 00    	ld	(_dirs_last),a
1872  0682  18 0B       	jr	l_player_new_jump_00103
1873  0684              l_player_new_jump_00102:
1874  0684  21 00 00    	ld	hl,_dirs_last
1875  0687  36 00       	ld	(hl),0x00
1876  0689  CB 81       	res	0, c
1877  068B  21 08 00    	ld	hl, +(_state_a + 0x0008)
1878  068E  71          	ld	(hl), c
1879  068F              l_player_new_jump_00103:
1880  068F  3A 08 00    	ld	a,(_state_a + 0x0008)
1881  0692  E6 FB       	and	a,0xfb
1882  0694  F6 80       	or	a,0x80
1883  0696  32 08 00    	ld	((_state_a + 0x0008)),a
1884  0699  21 64 00    	ld	hl,0x0064
1885  069C  22 00 00    	ld	(_game_gravity),hl
1886  069F  21 A8 FD    	ld	hl,0xfda8
1887  06A2  22 00 00    	ld	(_player_vel_y0),hl
1888  06A5  21 00 00    	ld	hl,_player_vel_inc
1889  06A8  36 01       	ld	(hl),0x01
1890  06AA  21 00 00    	ld	hl,_player_jump_count
1891  06AD  36 FF       	ld	(hl),0xff
1892  06AF  3A 00 00    	ld	a,(_s_lin0)
1893  06B2  32 00 00    	ld	(_player_jump_lin),a
1894  06B5  CD 00 00    	call	_audio_jump
1895  06B8  CD 00 00    	call	_spr_set_up
1896  06BB  2A 00 00    	ld	hl,(_player_vel_y0)
1897  06BE  22 00 00    	ld	(_player_vel_y),hl
1898  06C1  3A 08 00    	ld	a,(_state_a + 0x0008)
1899  06C4  E6 FB       	and	a,0xfb
1900  06C6  32 08 00    	ld	((_state_a + 0x0008)),a
1901  06C9  CD CB 05    	call	_player_check_conveyor
1902  06CC  2A 08 00    	ld	hl,(_state + 0x0008)
1903  06CF  5D          	ld	e, l
1904  06D0  CB 9B       	res	3, e
1905  06D2  4B          	ld	c, e
1906  06D3  CB 91       	res	2, c
1907  06D5  CB 65       	bit	4, l
1908  06D7  28 43       	jr	Z,l_player_new_jump_00122
1909  06D9  3A 08 00    	ld	a,(_state_a + 0x0008)
1910  06DC  CB 47       	bit	0, a
1911  06DE  28 2F       	jr	Z,l_player_new_jump_00115
1912  06E0  21 00 00    	ld	hl,_dirs
1913  06E3  CB 56       	bit	2,(hl)
1914  06E5  20 12       	jr	NZ,l_player_new_jump_00108
1915  06E7  CB 5E       	bit	3, (hl)
1916  06E9  20 0E       	jr	NZ,l_player_new_jump_00108
1917  06EB  CB 4F       	bit	1, a
1918  06ED  20 07       	jr	NZ,l_player_new_jump_00105
1919  06EF  21 08 00    	ld	hl, +(_state + 0x0008)
1920  06F2  73          	ld	(hl), e
1921  06F3  71          	ld	(hl), c
1922  06F4  18 03       	jr	l_player_new_jump_00108
1923  06F6              l_player_new_jump_00105:
1924  06F6  CD 27 06    	call	_player_handle_conveyor
1925  06F9              l_player_new_jump_00108:
1926  06F9  21 00 00    	ld	hl,_dirs
1927  06FC  CB 56       	bit	2, (hl)
1928  06FE  28 03       	jr	Z,l_player_new_jump_00111
1929  0700  CD 00 00    	call	_spr_set_left
1930  0703              l_player_new_jump_00111:
1931  0703  21 00 00    	ld	hl,_dirs
1932  0706  CB 5E       	bit	3, (hl)
1933  0708  28 08       	jr	Z,l_player_new_jump_00116
1934  070A  CD 00 00    	call	_spr_set_right
1935  070D  18 03       	jr	l_player_new_jump_00116
1936  070F              l_player_new_jump_00115:
1937  070F  CD 27 06    	call	_player_handle_conveyor
1938  0712              l_player_new_jump_00116:
1939  0712  3A 08 00    	ld	a,(_state_a + 0x0008)
1940  0715  F6 02       	or	a,0x02
1941  0717  32 08 00    	ld	((_state_a + 0x0008)),a
1942  071A  18 21       	jr	l_player_new_jump_00123
1943  071C              l_player_new_jump_00122:
1944  071C  21 08 00    	ld	hl, +(_state + 0x0008)
1945  071F  73          	ld	(hl), e
1946  0720  71          	ld	(hl), c
1947  0721  3A 08 00    	ld	a,(_state_a + 0x0008)
1948  0724  E6 FD       	and	a,0xfd
1949  0726  32 08 00    	ld	((_state_a + 0x0008)),a
1950  0729  21 00 00    	ld	hl,_dirs
1951  072C  CB 56       	bit	2, (hl)
1952  072E  28 03       	jr	Z,l_player_new_jump_00118
1953  0730  CD 00 00    	call	_spr_set_left
1954  0733              l_player_new_jump_00118:
1955  0733  21 00 00    	ld	hl,_dirs
1956  0736  CB 5E       	bit	3, (hl)
1957  0738  28 03       	jr	Z,l_player_new_jump_00123
1958  073A  CD 00 00    	call	_spr_set_right
1959  073D              l_player_new_jump_00123:
1960  073D  3A 08 00    	ld	a,(_state + 0x0008)
1961  0740  CB 5F       	bit	3, a
1962  0742  20 0C       	jr	NZ,l_player_new_jump_00125
1963  0744  CB 57       	bit	2, a
1964  0746  20 08       	jr	NZ,l_player_new_jump_00125
1965  0748  3A 08 00    	ld	a,(_state_a + 0x0008)
1966  074B  F6 04       	or	a,0x04
1967  074D  32 08 00    	ld	((_state_a + 0x0008)),a
1968  0750              l_player_new_jump_00125:
1969  0750  21 08 04    	ld	hl,0x0408
1970  0753  E5          	push	hl
1971  0754  CD 7D 09    	call	_player_tile
1972  0757  F1          	pop	af
1973  0758  2E 01       	ld	l,0x01
1974  075A  18 08       	jr	l_player_new_jump_00130
1975  075C              l_player_new_jump_00128:
1976  075C  CD 00 00    	call	_spr_move_horizontal
1977  075F  CD 93 05    	call	_player_handle_fall
1978  0762  2E 00       	ld	l,0x00
1979  0764              l_player_new_jump_00130:
1980  0764  C9          	ret
1981  0765              	SECTION code_compiler
1982  0765              ;	---------------------------------
1983  0765              ; Function player_collision
1984  0765              ; ---------------------------------
1985  0765              _player_collision:
1986  0765  21 08 00    	ld	hl,+(_col + 0x0008)
1987  0768  56          	ld	d, (hl)
1988  0769  21 08 00    	ld	hl,+(_lin + 0x0008)
1989  076C  5E          	ld	e, (hl)
1990  076D  D5          	push	de
1991  076E  CD 00 00    	call	_spr_calc_index
1992  0771  F1          	pop	af
1993  0772  22 00 00    	ld	(_index1),hl
1994  0775  CD 2B 09    	call	_player_pick
1995  0778  21 08 00    	ld	hl,+(_col + 0x0008)
1996  077B  56          	ld	d, (hl)
1997  077C  3A 08 00    	ld	a,(_lin + 0x0008)
1998  077F  C6 0E       	add	a,0x0e
1999  0781  5F          	ld	e, a
2000  0782  D5          	push	de
2001  0783  CD 00 00    	call	_spr_calc_index
2002  0786  F1          	pop	af
2003  0787  22 00 00    	ld	(_index1),hl
2004  078A  CD 2B 09    	call	_player_pick
2005  078D  21 08 00    	ld	hl,+(_col + 0x0008)
2006  0790  56          	ld	d, (hl)
2007  0791  14          	inc	d
2008  0792  21 08 00    	ld	hl,+(_lin + 0x0008)
2009  0795  5E          	ld	e, (hl)
2010  0796  D5          	push	de
2011  0797  CD 00 00    	call	_spr_calc_index
2012  079A  F1          	pop	af
2013  079B  22 00 00    	ld	(_index1),hl
2014  079E  CD 2B 09    	call	_player_pick
2015  07A1  21 08 00    	ld	hl,+(_col + 0x0008)
2016  07A4  56          	ld	d, (hl)
2017  07A5  14          	inc	d
2018  07A6  3A 08 00    	ld	a,(_lin + 0x0008)
2019  07A9  C6 0E       	add	a,0x0e
2020  07AB  5F          	ld	e, a
2021  07AC  D5          	push	de
2022  07AD  CD 00 00    	call	_spr_calc_index
2023  07B0  F1          	pop	af
2024  07B1  22 00 00    	ld	(_index1),hl
2025  07B4  CD 2B 09    	call	_player_pick
2026  07B7  21 00 00    	ld	hl,_i
2027  07BA  36 00       	ld	(hl),0x00
2028  07BC              l_player_collision_00141:
2029  07BC  2A 00 00    	ld	hl,(_i)
2030  07BF  26 00       	ld	h,0x00
2031  07C1  01 00 00    	ld	bc,_class
2032  07C4  09          	add	hl,bc
2033  07C5  7E          	ld	a,(hl)
2034  07C6  B7          	or	a,a
2035  07C7  CA 1F 09    	jp	Z,l_player_collision_00142
2036  07CA  2A 00 00    	ld	hl,(_i)
2037  07CD  26 00       	ld	h,0x00
2038  07CF  01 00 00    	ld	bc,_col
2039  07D2  09          	add	hl,bc
2040  07D3  4E          	ld	c, (hl)
2041  07D4  06 00       	ld	b,0x00
2042  07D6  ED 5B 08 00 	ld	de,(_col + 0x0008)
2043  07DA  50          	ld	d,b
2044  07DB  79          	ld	a, c
2045  07DC  93          	sub	a, e
2046  07DD  6F          	ld	l, a
2047  07DE  78          	ld	a, b
2048  07DF  9A          	sbc	a, d
2049  07E0  67          	ld	h, a
2050  07E1  CD 00 00    	call	_abs_fastcall
2051  07E4  7D          	ld	a,l
2052  07E5  32 00 00    	ld	(_v0),a
2053  07E8  2A 00 00    	ld	hl,(_i)
2054  07EB  26 00       	ld	h,0x00
2055  07ED  01 00 00    	ld	bc,_spr_kind
2056  07F0  09          	add	hl,bc
2057  07F1  7E          	ld	a,(hl)
2058  07F2  FE 01       	cp	a,0x01
2059  07F4  28 19       	jr	Z,l_player_collision_00102
2060  07F6  FE 02       	cp	a,0x02
2061  07F8  28 24       	jr	Z,l_player_collision_00103
2062  07FA  FE 06       	cp	a,0x06
2063  07FC  28 0A       	jr	Z,l_player_collision_00101
2064  07FE  FE 08       	cp	a,0x08
2065  0800  28 2A       	jr	Z,l_player_collision_00105
2066  0802  D6 09       	sub	a,0x09
2067  0804  28 1F       	jr	Z,l_player_collision_00104
2068  0806  18 31       	jr	l_player_collision_00106
2069  0808              l_player_collision_00101:
2070  0808  21 00 00    	ld	hl,_v1
2071  080B  36 01       	ld	(hl),0x01
2072  080D  18 2A       	jr	l_player_collision_00106
2073  080F              l_player_collision_00102:
2074  080F  2A 00 00    	ld	hl,(_i)
2075  0812  26 00       	ld	h,0x00
2076  0814  01 00 00    	ld	bc,_colint
2077  0817  09          	add	hl,bc
2078  0818  7E          	ld	a,(hl)
2079  0819  32 00 00    	ld	(_v1),a
2080  081C  18 1B       	jr	l_player_collision_00106
2081  081E              l_player_collision_00103:
2082  081E  21 00 00    	ld	hl,_v1
2083  0821  36 01       	ld	(hl),0x01
2084  0823  18 14       	jr	l_player_collision_00106
2085  0825              l_player_collision_00104:
2086  0825  21 00 00    	ld	hl,_v1
2087  0828  36 01       	ld	(hl),0x01
2088  082A  18 0D       	jr	l_player_collision_00106
2089  082C              l_player_collision_00105:
2090  082C  2A 00 00    	ld	hl,(_i)
2091  082F  26 00       	ld	h,0x00
2092  0831  01 00 00    	ld	bc,_colint
2093  0834  09          	add	hl,bc
2094  0835  7E          	ld	a,(hl)
2095  0836  32 00 00    	ld	(_v1),a
2096  0839              l_player_collision_00106:
2097  0839  3A 00 00    	ld	a,(_v0)
2098  083C  3D          	dec	a
2099  083D  20 4F       	jr	NZ,l_player_collision_00122
2100  083F  21 08 00    	ld	hl,+(_colint + 0x0008)
2101  0842  4E          	ld	c, (hl)
2102  0843  3A 00 00    	ld	a,(_i)
2103  0846  C6 00       	add	a,+((_col) & 0xFF)
2104  0848  5F          	ld	e,a
2105  0849  3E 00       	ld	a,+((_col) / 256)
2106  084B  CE 00       	adc	a,0x00
2107  084D  57          	ld	d,a
2108  084E  79          	ld	a, c
2109  084F  B7          	or	a, a
2110  0850  20 1C       	jr	NZ,l_player_collision_00113
2111  0852  21 08 00    	ld	hl,+(_col + 0x0008)
2112  0855  46          	ld	b, (hl)
2113  0856  1A          	ld	a, (de)
2114  0857  6F          	ld	l, a
2115  0858  78          	ld	a, b
2116  0859  95          	sub	a, l
2117  085A  30 07       	jr	NC,l_player_collision_00110
2118  085C  21 00 00    	ld	hl,_v0
2119  085F  36 FF       	ld	(hl),0xff
2120  0861  18 0B       	jr	l_player_collision_00113
2121  0863              l_player_collision_00110:
2122  0863  3A 00 00    	ld	a,(_v1)
2123  0866  B7          	or	a, a
2124  0867  20 05       	jr	NZ,l_player_collision_00113
2125  0869  21 00 00    	ld	hl,_v0
2126  086C  36 FF       	ld	(hl),0xff
2127  086E              l_player_collision_00113:
2128  086E  79          	ld	a, c
2129  086F  D6 03       	sub	a,0x03
2130  0871  20 1B       	jr	NZ,l_player_collision_00122
2131  0873  21 08 00    	ld	hl,+(_col + 0x0008)
2132  0876  4E          	ld	c, (hl)
2133  0877  1A          	ld	a, (de)
2134  0878  91          	sub	a, c
2135  0879  30 07       	jr	NC,l_player_collision_00117
2136  087B  21 00 00    	ld	hl,_v0
2137  087E  36 FF       	ld	(hl),0xff
2138  0880  18 0C       	jr	l_player_collision_00122
2139  0882              l_player_collision_00117:
2140  0882  3A 00 00    	ld	a,(_v1)
2141  0885  D6 03       	sub	a,0x03
2142  0887  20 05       	jr	NZ,l_player_collision_00122
2143  0889  21 00 00    	ld	hl,_v0
2144  088C  36 FF       	ld	(hl),0xff
2145  088E              l_player_collision_00122:
2146  088E  3A 00 00    	ld	a,(_v0)
2147  0891  D6 02       	sub	a,0x02
2148  0893  D2 1F 09    	jp	NC, l_player_collision_00142
2149  0896  2A 00 00    	ld	hl,(_i)
2150  0899  26 00       	ld	h,0x00
2151  089B  01 00 00    	ld	bc,_lin
2152  089E  09          	add	hl,bc
2153  089F  4E          	ld	c,(hl)
2154  08A0  06 00       	ld	b,0x00
2155  08A2  ED 5B 08 00 	ld	de,(_lin + 0x0008)
2156  08A6  50          	ld	d,b
2157  08A7  79          	ld	a, c
2158  08A8  93          	sub	a, e
2159  08A9  6F          	ld	l, a
2160  08AA  78          	ld	a, b
2161  08AB  9A          	sbc	a, d
2162  08AC  67          	ld	h, a
2163  08AD  CD 00 00    	call	_abs_fastcall
2164  08B0  7D          	ld	a,l
2165  08B1  32 00 00    	ld	(_v0),a
2166  08B4  2A 00 00    	ld	hl,(_i)
2167  08B7  26 00       	ld	h,0x00
2168  08B9  01 00 00    	ld	bc,_lin
2169  08BC  09          	add	hl,bc
2170  08BD  4E          	ld	c,(hl)
2171  08BE  21 08 00    	ld	hl,+(_lin + 0x0008)
2172  08C1  46          	ld	b, (hl)
2173  08C2  79          	ld	a, c
2174  08C3  90          	sub	a, b
2175  08C4  30 13       	jr	NC,l_player_collision_00130
2176  08C6  21 00 00    	ld	hl,_v0
2177  08C9  7E          	ld	a, (hl)
2178  08CA  D6 10       	sub	a,0x10
2179  08CC  30 04       	jr	NC,l_player_collision_00124
2180  08CE  36 01       	ld	(hl),0x01
2181  08D0  18 18       	jr	l_player_collision_00131
2182  08D2              l_player_collision_00124:
2183  08D2  21 00 00    	ld	hl,_v0
2184  08D5  36 00       	ld	(hl),0x00
2185  08D7  18 11       	jr	l_player_collision_00131
2186  08D9              l_player_collision_00130:
2187  08D9  21 00 00    	ld	hl,_v0
2188  08DC  7E          	ld	a, (hl)
2189  08DD  D6 0E       	sub	a,0x0e
2190  08DF  30 04       	jr	NC,l_player_collision_00127
2191  08E1  36 01       	ld	(hl),0x01
2192  08E3  18 05       	jr	l_player_collision_00131
2193  08E5              l_player_collision_00127:
2194  08E5  21 00 00    	ld	hl,_v0
2195  08E8  36 00       	ld	(hl),0x00
2196  08EA              l_player_collision_00131:
2197  08EA  3A 00 00    	ld	a,(_v0)
2198  08ED  B7          	or	a, a
2199  08EE  28 2F       	jr	Z,l_player_collision_00142
2200  08F0  2A 00 00    	ld	hl,(_i)
2201  08F3  26 00       	ld	h,0x00
2202  08F5  01 00 00    	ld	bc,_colint
2203  08F8  09          	add	hl,bc
2204  08F9  4E          	ld	c,(hl)
2205  08FA  06 00       	ld	b,0x00
2206  08FC  ED 5B 08 00 	ld	de,(_colint + 0x0008)
2207  0900  50          	ld	d,b
2208  0901  79          	ld	a, c
2209  0902  93          	sub	a, e
2210  0903  6F          	ld	l, a
2211  0904  78          	ld	a, b
2212  0905  9A          	sbc	a, d
2213  0906  67          	ld	h, a
2214  0907  CD 00 00    	call	_abs_fastcall
2215  090A  7D          	ld	a,l
2216  090B  32 00 00    	ld	(_v0),a
2217  090E  D6 02       	sub	a,0x02
2218  0910  30 0D       	jr	NC,l_player_collision_00142
2219  0912  21 FF FF    	ld	hl,0xffff
2220  0915  22 00 00    	ld	(_player_kill_index),hl
2221  0918  01 08 00    	ld	bc,_state+8
2222  091B  0A          	ld	a,(bc)
2223  091C  F6 20       	or	a,0x20
2224  091E  02          	ld	(bc), a
2225  091F              l_player_collision_00142:
2226  091F  21 00 00    	ld	hl,_i
2227  0922  7E          	ld	a,(hl)
2228  0923  3C          	inc	a
2229  0924  77          	ld	(hl),a
2230  0925  D6 08       	sub	a,0x08
2231  0927  DA BC 07    	jp	C, l_player_collision_00141
2232  092A  C9          	ret
2233  092B              	SECTION code_compiler
2234  092B              ;	---------------------------------
2235  092B              ; Function player_pick
2236  092B              ; ---------------------------------
2237  092B              _player_pick:
2238  092B  01 00 00    	ld	bc,_scr_map
2239  092E  2A 00 00    	ld	hl,(_index1)
2240  0931  09          	add	hl,bc
2241  0932  7E          	ld	a,(hl)
2242  0933  32 00 00    	ld	(_v0),a
2243  0936  F5          	push	af
2244  0937  33          	inc	sp
2245  0938  CD 45 0B    	call	_player_pick_deadly
2246  093B  33          	inc	sp
2247  093C  7D          	ld	a,l
2248  093D  32 00 00    	ld	(_v0),a
2249  0940  2A 00 00    	ld	hl,(_index1)
2250  0943  E5          	push	hl
2251  0944  F5          	push	af
2252  0945  33          	inc	sp
2253  0946  CD FD 0A    	call	_player_pick_item
2254  0949  F1          	pop	af
2255  094A  33          	inc	sp
2256  094B  7D          	ld	a,l
2257  094C  32 00 00    	ld	(_v0),a
2258  094F  F5          	push	af
2259  0950  33          	inc	sp
2260  0951  CD 7C 0B    	call	_player_pick_extra
2261  0954  33          	inc	sp
2262  0955  7D          	ld	a,l
2263  0956  32 00 00    	ld	(_v0),a
2264  0959  C9          	ret
2265  095A              	SECTION code_compiler
2266  095A              ;	---------------------------------
2267  095A              ; Function player_check_input
2268  095A              ; ---------------------------------
2269  095A              _player_check_input:
2270  095A  21 00 00    	ld	hl,_dirs
2271  095D  CB 56       	bit	2,(hl)
2272  095F  28 06       	jr	Z,l_player_check_input_00102
2273  0961  CB 5E       	bit	3,(hl)
2274  0963  28 02       	jr	Z,l_player_check_input_00102
2275  0965  36 00       	ld	(hl),0x00
2276  0967              l_player_check_input_00102:
2277  0967  21 00 00    	ld	hl,_dirs
2278  096A  CB 56       	bit	2,(hl)
2279  096C  20 08       	jr	NZ,l_player_check_input_00104
2280  096E  CB 5E       	bit	3,(hl)
2281  0970  20 04       	jr	NZ,l_player_check_input_00104
2282  0972  CB 7E       	bit	7, (hl)
2283  0974  28 04       	jr	Z,l_player_check_input_00105
2284  0976              l_player_check_input_00104:
2285  0976  2E 01       	ld	l,0x01
2286  0978  18 02       	jr	l_player_check_input_00108
2287  097A              l_player_check_input_00105:
2288  097A  2E 00       	ld	l,0x00
2289  097C              l_player_check_input_00108:
2290  097C  C9          	ret
2291  097D              	SECTION code_compiler
2292  097D              ;	---------------------------------
2293  097D              ; Function player_tile
2294  097D              ; ---------------------------------
2295  097D              _player_tile:
2296  097D  CD 00 00    	call	___sdcc_enter_ix
2297  0980  21 05 00    	ld	hl,0x0005
2298  0983  39          	add	hl, sp
2299  0984  EB          	ex	de,hl
2300  0985  21 04 00    	ld	hl,0x0004
2301  0988  39          	add	hl, sp
2302  0989  D5          	push	de
2303  098A  E5          	push	hl
2304  098B  CD 00 00    	call	_spr_get_tile_dir
2305  098E  F1          	pop	af
2306  098F  F1          	pop	af
2307  0990  7D          	ld	a,l
2308  0991  32 08 00    	ld	((_tile + 0x0008)),a
2309  0994  DD E1       	pop	ix
2310  0996  C9          	ret
2311  0997              	SECTION code_compiler
2312  0997              ;	---------------------------------
2313  0997              ; Function player_score_add
2314  0997              ; ---------------------------------
2315  0997              _player_score_add:
2316  0997  CD 00 00    	call	___sdcc_enter_ix
2317  099A  F5          	push	af
2318  099B  F5          	push	af
2319  099C  F5          	push	af
2320  099D  F5          	push	af
2321  099E  DD 75 F8    	ld	(ix-8),l
2322  09A1  DD 74 F9    	ld	(ix-7),h
2323  09A4  3E 00       	ld	a,0x00
2324  09A6  DD 77 FA    	ld	(ix-6),a
2325  09A9  DD 77 FB    	ld	(ix-5),a
2326  09AC  DD 77 FC    	ld	(ix-4),a
2327  09AF  DD 77 FD    	ld	(ix-3),a
2328  09B2  DD 36 FE 00 	ld	(ix-2),0x00
2329  09B6  DD 36 FF 00 	ld	(ix-1),0x00
2330  09BA  2A 00 00    	ld	hl,(_player_score)
2331  09BD  DD 5E F8    	ld	e,(ix-8)
2332  09C0  DD 56 F9    	ld	d,(ix-7)
2333  09C3  19          	add	hl,de
2334  09C4  22 00 00    	ld	(_player_score),hl
2335  09C7  21 02 00    	ld	hl,_player_score + 2
2336  09CA  7E          	ld	a, (hl)
2337  09CB  DD 8E FA    	adc	a,(ix-6)
2338  09CE  77          	ld	(hl), a
2339  09CF  23          	inc	hl
2340  09D0  7E          	ld	a, (hl)
2341  09D1  DD 8E FB    	adc	a,(ix-5)
2342  09D4  77          	ld	(hl), a
2343  09D5  23          	inc	hl
2344  09D6  7E          	ld	a, (hl)
2345  09D7  DD 8E FC    	adc	a,(ix-4)
2346  09DA  77          	ld	(hl), a
2347  09DB  23          	inc	hl
2348  09DC  7E          	ld	a, (hl)
2349  09DD  DD 8E FD    	adc	a,(ix-3)
2350  09E0  77          	ld	(hl), a
2351  09E1  23          	inc	hl
2352  09E2  7E          	ld	a, (hl)
2353  09E3  DD 8E FE    	adc	a,(ix-2)
2354  09E6  77          	ld	(hl), a
2355  09E7  23          	inc	hl
2356  09E8  7E          	ld	a, (hl)
2357  09E9  DD 8E FF    	adc	a,(ix-1)
2358  09EC  77          	ld	(hl), a
2359  09ED  2A 00 00    	ld	hl,(_game_score_top)
2360  09F0  ED 5B 00 00 	ld	de,(_player_score)
2361  09F4  AF          	xor	a,a
2362  09F5  ED 52       	sbc	hl,de
2363  09F7  2A 02 00    	ld	hl,(_game_score_top + 2)
2364  09FA  ED 5B 02 00 	ld	de,(_player_score + 2)
2365  09FE  ED 52       	sbc	hl,de
2366  0A00  3A 04 00    	ld	a,(_game_score_top + 4)
2367  0A03  21 04 00    	ld	hl,_player_score + 4
2368  0A06  9E          	sbc	a, (hl)
2369  0A07  3A 05 00    	ld	a,(_game_score_top + 5)
2370  0A0A  21 05 00    	ld	hl,_player_score + 5
2371  0A0D  9E          	sbc	a, (hl)
2372  0A0E  3A 06 00    	ld	a,(_game_score_top + 6)
2373  0A11  21 06 00    	ld	hl,_player_score + 6
2374  0A14  9E          	sbc	a, (hl)
2375  0A15  3A 07 00    	ld	a,(_game_score_top + 7)
2376  0A18  21 07 00    	ld	hl,_player_score + 7
2377  0A1B  9E          	sbc	a, (hl)
2378  0A1C  30 24       	jr	NC,l_player_score_add_00102
2379  0A1E  2A 00 00    	ld	hl,(_player_score)
2380  0A21  22 00 00    	ld	(_game_score_top),hl
2381  0A24  2A 02 00    	ld	hl,(_player_score + 2)
2382  0A27  22 02 00    	ld	(_game_score_top + 2),hl
2383  0A2A  3A 04 00    	ld	a,(_player_score + 4)
2384  0A2D  32 04 00    	ld	(_game_score_top + 4),a
2385  0A30  3A 05 00    	ld	a,(_player_score + 5)
2386  0A33  32 05 00    	ld	(_game_score_top + 5),a
2387  0A36  3A 06 00    	ld	a,(_player_score + 6)
2388  0A39  32 06 00    	ld	(_game_score_top + 6),a
2389  0A3C  3A 07 00    	ld	a,(_player_score + 7)
2390  0A3F  32 07 00    	ld	(_game_score_top + 7),a
2391  0A42              l_player_score_add_00102:
2392  0A42  2A 00 00    	ld	hl,(_player_next_extra)
2393  0A45  ED 5B 00 00 	ld	de,(_player_score)
2394  0A49  AF          	xor	a,a
2395  0A4A  ED 52       	sbc	hl,de
2396  0A4C  2A 02 00    	ld	hl,(_player_next_extra + 2)
2397  0A4F  ED 5B 02 00 	ld	de,(_player_score + 2)
2398  0A53  ED 52       	sbc	hl,de
2399  0A55  3A 04 00    	ld	a,(_player_next_extra + 4)
2400  0A58  21 04 00    	ld	hl,_player_score + 4
2401  0A5B  9E          	sbc	a, (hl)
2402  0A5C  3A 05 00    	ld	a,(_player_next_extra + 5)
2403  0A5F  21 05 00    	ld	hl,_player_score + 5
2404  0A62  9E          	sbc	a, (hl)
2405  0A63  3A 06 00    	ld	a,(_player_next_extra + 6)
2406  0A66  21 06 00    	ld	hl,_player_score + 6
2407  0A69  9E          	sbc	a, (hl)
2408  0A6A  3A 07 00    	ld	a,(_player_next_extra + 7)
2409  0A6D  21 07 00    	ld	hl,_player_score + 7
2410  0A70  9E          	sbc	a, (hl)
2411  0A71  30 33       	jr	NC,l_player_score_add_00106
2412  0A73  21 00 00    	ld	hl,_player_lives
2413  0A76  7E          	ld	a, (hl)
2414  0A77  D6 FF       	sub	a,0xff
2415  0A79  30 01       	jr	NC,l_player_score_add_00104
2416  0A7B  34          	inc	(hl)
2417  0A7C              l_player_score_add_00104:
2418  0A7C  2A 00 00    	ld	hl,(_player_next_extra)
2419  0A7F  11 10 27    	ld	de,0x2710
2420  0A82  19          	add	hl,de
2421  0A83  22 00 00    	ld	(_player_next_extra),hl
2422  0A86  21 02 00    	ld	hl,_player_next_extra + 2
2423  0A89  7E          	ld	a, (hl)
2424  0A8A  CE 00       	adc	a,0x00
2425  0A8C  77          	ld	(hl), a
2426  0A8D  23          	inc	hl
2427  0A8E  7E          	ld	a, (hl)
2428  0A8F  CE 00       	adc	a,0x00
2429  0A91  77          	ld	(hl), a
2430  0A92  23          	inc	hl
2431  0A93  7E          	ld	a, (hl)
2432  0A94  CE 00       	adc	a,0x00
2433  0A96  77          	ld	(hl), a
2434  0A97  23          	inc	hl
2435  0A98  7E          	ld	a, (hl)
2436  0A99  CE 00       	adc	a,0x00
2437  0A9B  77          	ld	(hl), a
2438  0A9C  23          	inc	hl
2439  0A9D  7E          	ld	a, (hl)
2440  0A9E  CE 00       	adc	a,0x00
2441  0AA0  77          	ld	(hl), a
2442  0AA1  23          	inc	hl
2443  0AA2  7E          	ld	a, (hl)
2444  0AA3  CE 00       	adc	a,0x00
2445  0AA5  77          	ld	(hl), a
2446  0AA6              l_player_score_add_00106:
2447  0AA6  3E 40       	ld	a,0x40
2448  0AA8  21 00 00    	ld	hl,_player_score
2449  0AAB  BE          	cp	a, (hl)
2450  0AAC  3E 42       	ld	a,0x42
2451  0AAE  23          	inc	hl
2452  0AAF  9E          	sbc	a, (hl)
2453  0AB0  3E 0F       	ld	a,0x0f
2454  0AB2  23          	inc	hl
2455  0AB3  9E          	sbc	a, (hl)
2456  0AB4  3E 00       	ld	a,0x00
2457  0AB6  23          	inc	hl
2458  0AB7  9E          	sbc	a, (hl)
2459  0AB8  3E 00       	ld	a,0x00
2460  0ABA  23          	inc	hl
2461  0ABB  9E          	sbc	a, (hl)
2462  0ABC  3E 00       	ld	a,0x00
2463  0ABE  23          	inc	hl
2464  0ABF  9E          	sbc	a, (hl)
2465  0AC0  3E 00       	ld	a,0x00
2466  0AC2  23          	inc	hl
2467  0AC3  9E          	sbc	a, (hl)
2468  0AC4  3E 00       	ld	a,0x00
2469  0AC6  23          	inc	hl
2470  0AC7  9E          	sbc	a, (hl)
2471  0AC8  30 2B       	jr	NC,l_player_score_add_00108
2472  0ACA  21 00 00    	ld	hl,0x0000
2473  0ACD  7D          	ld	a,l
2474  0ACE  22 00 00    	ld	(_player_score),hl
2475  0AD1  22 02 00    	ld	(_player_score + 2),hl
2476  0AD4  21 04 00    	ld	hl,_player_score + 4
2477  0AD7  77          	ld	(hl), a
2478  0AD8  23          	inc	hl
2479  0AD9  77          	ld	(hl), a
2480  0ADA  23          	inc	hl
2481  0ADB  77          	ld	(hl), a
2482  0ADC  23          	inc	hl
2483  0ADD  77          	ld	(hl), a
2484  0ADE  21 10 27    	ld	hl,0x2710
2485  0AE1  22 00 00    	ld	(_player_next_extra),hl
2486  0AE4  AF          	xor	a,a
2487  0AE5  6F          	ld	l,a
2488  0AE6  67          	ld	h,a
2489  0AE7  22 02 00    	ld	(_player_next_extra + 2),hl
2490  0AEA  21 04 00    	ld	hl,_player_next_extra + 4
2491  0AED  77          	ld	(hl), a
2492  0AEE  23          	inc	hl
2493  0AEF  77          	ld	(hl), a
2494  0AF0  23          	inc	hl
2495  0AF1  AF          	xor	a, a
2496  0AF2  77          	ld	(hl), a
2497  0AF3  23          	inc	hl
2498  0AF4  77          	ld	(hl), a
2499  0AF5              l_player_score_add_00108:
2500  0AF5  CD 00 00    	call	_game_print_score
2501  0AF8  DD F9       	ld	sp, ix
2502  0AFA  DD E1       	pop	ix
2503  0AFC  C9          	ret
2504  0AFD              	SECTION code_compiler
2505  0AFD              ;	---------------------------------
2506  0AFD              ; Function player_pick_item
2507  0AFD              ; ---------------------------------
2508  0AFD              _player_pick_item:
2509  0AFD  CD 00 00    	call	___sdcc_enter_ix
2510  0B00  DD 7E 04    	ld	a,(ix+4)
2511  0B03  D6 08       	sub	a,0x08
2512  0B05  20 38       	jr	NZ,l_player_pick_item_00104
2513  0B07  21 64 00    	ld	hl,0x0064
2514  0B0A  CD 97 09    	call	_player_score_add
2515  0B0D  3E 00       	ld	a, +((_scr_map) & 0xFF)
2516  0B0F  DD 86 05    	add	a,(ix+5)
2517  0B12  4F          	ld	c, a
2518  0B13  3E 00       	ld	a, +((_scr_map) / 256)
2519  0B15  DD 8E 06    	adc	a,(ix+6)
2520  0B18  47          	ld	b, a
2521  0B19  AF          	xor	a, a
2522  0B1A  02          	ld	(bc), a
2523  0B1B  21 00 00    	ld	hl,_player_coins
2524  0B1E  34          	inc	(hl)
2525  0B1F  CD 00 00    	call	_audio_coin
2526  0B22  3A 00 00    	ld	a,(_obj_count)
2527  0B25  21 00 00    	ld	hl,_player_coins
2528  0B28  96          	sub	a, (hl)
2529  0B29  20 10       	jr	NZ,l_player_pick_item_00102
2530  0B2B  CD 00 00    	call	_audio_door_open
2531  0B2E  3E 80       	ld	a,0x80
2532  0B30  F5          	push	af
2533  0B31  33          	inc	sp
2534  0B32  CD 00 00    	call	_game_flash_exit
2535  0B35  33          	inc	sp
2536  0B36  21 00 00    	ld	hl,_obj_count
2537  0B39  36 FF       	ld	(hl),0xff
2538  0B3B              l_player_pick_item_00102:
2539  0B3B  2E 00       	ld	l,0x00
2540  0B3D  18 03       	jr	l_player_pick_item_00105
2541  0B3F              l_player_pick_item_00104:
2542  0B3F  DD 6E 04    	ld	l,(ix+4)
2543  0B42              l_player_pick_item_00105:
2544  0B42  DD E1       	pop	ix
2545  0B44  C9          	ret
2546  0B45              	SECTION code_compiler
2547  0B45              ;	---------------------------------
2548  0B45              ; Function player_pick_deadly
2549  0B45              ; ---------------------------------
2550  0B45              _player_pick_deadly:
2551  0B45  CD 00 00    	call	___sdcc_enter_ix
2552  0B48  3E 00       	ld	a, +((_tile_class) & 0xFF)
2553  0B4A  DD 86 04    	add	a,(ix+4)
2554  0B4D  4F          	ld	c, a
2555  0B4E  3E 00       	ld	a, +((_tile_class) / 256)
2556  0B50  CE 00       	adc	a,0x00
2557  0B52  47          	ld	b, a
2558  0B53  0A          	ld	a, (bc)
2559  0B54  DD 77 04    	ld	(ix+4),a
2560  0B57  D6 05       	sub	a,0x05
2561  0B59  20 1B       	jr	NZ,l_player_pick_deadly_00102
2562  0B5B  01 08 00    	ld	bc,_state+8
2563  0B5E  0A          	ld	a, (bc)
2564  0B5F  F6 20       	or	a,0x20
2565  0B61  02          	ld	(bc), a
2566  0B62  2A 00 00    	ld	hl,(_index1)
2567  0B65  22 00 00    	ld	(_player_kill_index),hl
2568  0B68  21 00 00    	ld	hl,_v0
2569  0B6B  36 00       	ld	(hl),0x00
2570  0B6D  21 00 00    	ld	hl,_v1
2571  0B70  36 00       	ld	(hl),0x00
2572  0B72  2E 00       	ld	l,0x00
2573  0B74  18 03       	jr	l_player_pick_deadly_00103
2574  0B76              l_player_pick_deadly_00102:
2575  0B76  DD 6E 04    	ld	l,(ix+4)
2576  0B79              l_player_pick_deadly_00103:
2577  0B79  DD E1       	pop	ix
2578  0B7B  C9          	ret
2579  0B7C              	SECTION code_compiler
2580  0B7C              ;	---------------------------------
2581  0B7C              ; Function player_pick_extra
2582  0B7C              ; ---------------------------------
2583  0B7C              _player_pick_extra:
2584  0B7C  CD 00 00    	call	___sdcc_enter_ix
2585  0B7F  DD 7E 04    	ld	a,(ix+4)
2586  0B82  D6 06       	sub	a,0x06
2587  0B84  C2 0E 0C    	jp	NZ,l_player_pick_extra_00110
2588  0B87  3A 00 00    	ld	a,(_scr_curr)
2589  0B8A  FE 07       	cp	a,0x07
2590  0B8C  28 04       	jr	Z,l_player_pick_extra_00106
2591  0B8E  D6 0B       	sub	a,0x0b
2592  0B90  20 78       	jr	NZ,l_player_pick_extra_00107
2593  0B92              l_player_pick_extra_00106:
2594  0B92  01 00 00    	ld	bc,_scr_map
2595  0B95  2A 00 00    	ld	hl,(_index1)
2596  0B98  09          	add	hl,bc
2597  0B99  36 08       	ld	(hl),0x08
2598  0B9B  CD 00 00    	call	_game_cell_paint_index
2599  0B9E  21 00 00    	ld	hl,_index1
2600  0BA1  7E          	ld	a, (hl)
2601  0BA2  D6 05       	sub	a,0x05
2602  0BA4  23          	inc	hl
2603  0BA5  B6          	or	a, (hl)
2604  0BA6  28 0A       	jr	Z,l_player_pick_extra_00101
2605  0BA8  21 00 00    	ld	hl,_index1
2606  0BAB  7E          	ld	a, (hl)
2607  0BAC  D6 06       	sub	a,0x06
2608  0BAE  23          	inc	hl
2609  0BAF  B6          	or	a, (hl)
2610  0BB0  20 21       	jr	NZ,l_player_pick_extra_00102
2611  0BB2              l_player_pick_extra_00101:
2612  0BB2  21 71 01    	ld	hl,0x0171
2613  0BB5  22 00 00    	ld	(_index1),hl
2614  0BB8  21 71 01    	ld	hl, +(_scr_map + 0x0171)
2615  0BBB  36 00       	ld	(hl),0x00
2616  0BBD  CD 00 00    	call	_game_cell_paint_index
2617  0BC0  21 91 01    	ld	hl,0x0191
2618  0BC3  22 00 00    	ld	(_index1),hl
2619  0BC6  21 91 01    	ld	hl, +(_scr_map + 0x0191)
2620  0BC9  36 00       	ld	(hl),0x00
2621  0BCB  CD 00 00    	call	_game_cell_paint_index
2622  0BCE  21 02 00    	ld	hl, +(_value_b + 0x0002)
2623  0BD1  36 12       	ld	(hl),0x12
2624  0BD3              l_player_pick_extra_00102:
2625  0BD3  21 00 00    	ld	hl,_index1
2626  0BD6  7E          	ld	a, (hl)
2627  0BD7  D6 12       	sub	a,0x12
2628  0BD9  23          	inc	hl
2629  0BDA  B6          	or	a, (hl)
2630  0BDB  20 2D       	jr	NZ,l_player_pick_extra_00107
2631  0BDD  01 00 00    	ld	bc,_tile+0
2632  0BE0  0A          	ld	a, (bc)
2633  0BE1  C6 02       	add	a,0x02
2634  0BE3  02          	ld	(bc), a
2635  0BE4  21 00 00    	ld	hl,_spr_kind
2636  0BE7  36 07       	ld	(hl),0x07
2637  0BE9  21 00 00    	ld	hl,_spr_speed
2638  0BEC  36 04       	ld	(hl),0x04
2639  0BEE  21 4F 00    	ld	hl,0x004f
2640  0BF1  22 00 00    	ld	(_index1),hl
2641  0BF4  21 4F 00    	ld	hl, +(_scr_map + 0x004f)
2642  0BF7  36 00       	ld	(hl),0x00
2643  0BF9  CD 00 00    	call	_game_cell_paint_index
2644  0BFC  21 50 00    	ld	hl,0x0050
2645  0BFF  22 00 00    	ld	(_index1),hl
2646  0C02  21 50 00    	ld	hl, +(_scr_map + 0x0050)
2647  0C05  36 00       	ld	(hl),0x00
2648  0C07  CD 00 00    	call	_game_cell_paint_index
2649  0C0A              l_player_pick_extra_00107:
2650  0C0A  2E 00       	ld	l,0x00
2651  0C0C  18 03       	jr	l_player_pick_extra_00111
2652  0C0E              l_player_pick_extra_00110:
2653  0C0E  DD 6E 04    	ld	l,(ix+4)
2654  0C11              l_player_pick_extra_00111:
2655  0C11  DD E1       	pop	ix
2656  0C13  C9          	ret
2657  0C14              	SECTION code_compiler
2658  0C14              ;	---------------------------------
2659  0C14              ; Function player_check_ceil
2660  0C14              ; ---------------------------------
2661  0C14              _player_check_ceil:
2662  0C14  CD 00 00    	call	___sdcc_enter_ix
2663  0C17  DD 66 05    	ld	h,(ix+5)
2664  0C1A  DD 6E 04    	ld	l,(ix+4)
2665  0C1D  E5          	push	hl
2666  0C1E  CD 00 00    	call	_spr_calc_index
2667  0C21  F1          	pop	af
2668  0C22  22 00 00    	ld	(_index1),hl
2669  0C25  01 00 00    	ld	bc,_scr_map
2670  0C28  09          	add	hl,bc
2671  0C29  7E          	ld	a,(hl)
2672  0C2A  32 00 00    	ld	(_v0),a
2673  0C2D  DD 46 05    	ld	b,(ix+5)
2674  0C30  04          	inc	b
2675  0C31  DD 4E 04    	ld	c,(ix+4)
2676  0C34  C5          	push	bc
2677  0C35  CD 00 00    	call	_spr_calc_index
2678  0C38  F1          	pop	af
2679  0C39  22 00 00    	ld	(_index1),hl
2680  0C3C  01 00 00    	ld	bc,_scr_map
2681  0C3F  09          	add	hl,bc
2682  0C40  7E          	ld	a,(hl)
2683  0C41  32 00 00    	ld	(_v1),a
2684  0C44  3E 1F       	ld	a,0x1f
2685  0C46  21 00 00    	ld	hl,_v0
2686  0C49  96          	sub	a, (hl)
2687  0C4A  30 02       	jr	NC,l_player_check_ceil_00102
2688  0C4C  36 00       	ld	(hl),0x00
2689  0C4E              l_player_check_ceil_00102:
2690  0C4E  3E 1F       	ld	a,0x1f
2691  0C50  21 00 00    	ld	hl,_v1
2692  0C53  96          	sub	a, (hl)
2693  0C54  30 02       	jr	NC,l_player_check_ceil_00104
2694  0C56  36 00       	ld	(hl),0x00
2695  0C58              l_player_check_ceil_00104:
2696  0C58  01 00 00    	ld	bc,_tile_class+0
2697  0C5B  79          	ld	a, c
2698  0C5C  21 00 00    	ld	hl,_v0
2699  0C5F  86          	add	a, (hl)
2700  0C60  5F          	ld	e, a
2701  0C61  78          	ld	a, b
2702  0C62  CE 00       	adc	a,0x00
2703  0C64  57          	ld	d, a
2704  0C65  1A          	ld	a, (de)
2705  0C66  77          	ld	(hl), a
2706  0C67  79          	ld	a, c
2707  0C68  21 00 00    	ld	hl,_v1
2708  0C6B  86          	add	a, (hl)
2709  0C6C  4F          	ld	c, a
2710  0C6D  78          	ld	a, b
2711  0C6E  CE 00       	adc	a,0x00
2712  0C70  47          	ld	b, a
2713  0C71  0A          	ld	a, (bc)
2714  0C72  77          	ld	(hl), a
2715  0C73  3A 00 00    	ld	a,(_v0)
2716  0C76  D6 03       	sub	a,0x03
2717  0C78  28 0B       	jr	Z,l_player_check_ceil_00106
2718  0C7A  3A 00 00    	ld	a,(_v1)
2719  0C7D  D6 03       	sub	a,0x03
2720  0C7F  28 04       	jr	Z,l_player_check_ceil_00106
2721  0C81  2E 01       	ld	l,0x01
2722  0C83  18 02       	jr	l_player_check_ceil_00108
2723  0C85              l_player_check_ceil_00106:
2724  0C85  2E 00       	ld	l,0x00
2725  0C87              l_player_check_ceil_00108:
2726  0C87  DD E1       	pop	ix
2727  0C89  C9          	ret
2728  0C8A              	SECTION code_compiler
2729  0C8A              ;	---------------------------------
2730  0C8A              ; Function player_crumble
2731  0C8A              ; ---------------------------------
2732  0C8A              _player_crumble:
2733  0C8A  CD 00 00    	call	___sdcc_enter_ix
2734  0C8D  F5          	push	af
2735  0C8E  3B          	dec	sp
2736  0C8F  01 00 00    	ld	bc,_tile_class+0
2737  0C92  11 00 00    	ld	de,_scr_map+0
2738  0C95  7B          	ld	a, e
2739  0C96  21 00 00    	ld	hl,_index1
2740  0C99  86          	add	a, (hl)
2741  0C9A  DD 77 FE    	ld	(ix-2),a
2742  0C9D  7A          	ld	a, d
2743  0C9E  23          	inc	hl
2744  0C9F  8E          	adc	a, (hl)
2745  0CA0  DD 6E FE    	ld	l,(ix-2)
2746  0CA3  DD 77 FF    	ld	(ix-1),a
2747  0CA6  67          	ld	h,a
2748  0CA7  7E          	ld	a, (hl)
2749  0CA8  DD 77 FD    	ld	(ix-3),a
2750  0CAB  6F          	ld	l, a
2751  0CAC  26 00       	ld	h,0x00
2752  0CAE  09          	add	hl, bc
2753  0CAF  7E          	ld	a, (hl)
2754  0CB0  32 00 00    	ld	(_v0),a
2755  0CB3  D6 02       	sub	a,0x02
2756  0CB5  20 73       	jr	NZ,l_player_crumble_00107
2757  0CB7  DD 7E FD    	ld	a,(ix-3)
2758  0CBA  D6 02       	sub	a,0x02
2759  0CBC  20 0F       	jr	NZ,l_player_crumble_00104
2760  0CBE  D5          	push	de
2761  0CBF  CD 00 00    	call	_audio_crumble
2762  0CC2  D1          	pop	de
2763  0CC3  2A 00 00    	ld	hl,(_index1)
2764  0CC6  19          	add	hl,de
2765  0CC7  3A 00 00    	ld	a,(_game_crumb_start)
2766  0CCA  77          	ld	(hl),a
2767  0CCB  18 1D       	jr	l_player_crumble_00105
2768  0CCD              l_player_crumble_00104:
2769  0CCD  DD 4E FD    	ld	c,(ix-3)
2770  0CD0  0C          	inc	c
2771  0CD1  DD 6E FE    	ld	l,(ix-2)
2772  0CD4  DD 66 FF    	ld	h,(ix-1)
2773  0CD7  71          	ld	(hl), c
2774  0CD8  2A 00 00    	ld	hl,(_index1)
2775  0CDB  19          	add	hl,de
2776  0CDC  7E          	ld	a,(hl)
2777  0CDD  DD 77 FD    	ld	(ix-3),a
2778  0CE0  3A 00 00    	ld	a,(_game_crumb_end)
2779  0CE3  DD 96 FD    	sub	a,(ix-3)
2780  0CE6  30 02       	jr	NC,l_player_crumble_00105
2781  0CE8  AF          	xor	a,a
2782  0CE9  77          	ld	(hl),a
2783  0CEA              l_player_crumble_00105:
2784  0CEA  2A 08 00    	ld	hl,(_lin + 0x0008)
2785  0CED  26 00       	ld	h,0x00
2786  0CEF  01 10 00    	ld	bc,0x0010
2787  0CF2  09          	add	hl,bc
2788  0CF3  06 03       	ld	b,0x03
2789  0CF5              l_player_crumble_00127:
2790  0CF5  CB 2C       	sra	h
2791  0CF7  CB 1D       	rr	l
2792  0CF9  10 FA       	djnz	l_player_crumble_00127
2793  0CFB  2C          	inc	l
2794  0CFC  7D          	ld	a, l
2795  0CFD  07          	rlca
2796  0CFE  07          	rlca
2797  0CFF  07          	rlca
2798  0D00  E6 F8       	and	a,0xf8
2799  0D02  32 00 00    	ld	(_s_row1),a
2800  0D05  7B          	ld	a, e
2801  0D06  21 00 00    	ld	hl,_index1
2802  0D09  86          	add	a, (hl)
2803  0D0A  DD 77 FE    	ld	(ix-2),a
2804  0D0D  7A          	ld	a, d
2805  0D0E  23          	inc	hl
2806  0D0F  8E          	adc	a, (hl)
2807  0D10  DD 6E FE    	ld	l,(ix-2)
2808  0D13  DD 77 FF    	ld	(ix-1),a
2809  0D16  67          	ld	h,a
2810  0D17  4E          	ld	c, (hl)
2811  0D18  2A FF FF    	ld	hl,(_s_col1 - 1)
2812  0D1B  3A 00 00    	ld	a,(_s_row1)
2813  0D1E  6F          	ld	l,a
2814  0D1F  E5          	push	hl
2815  0D20  79          	ld	a, c
2816  0D21  F5          	push	af
2817  0D22  33          	inc	sp
2818  0D23  CD 00 00    	call	_spr_draw8
2819  0D26  F1          	pop	af
2820  0D27  33          	inc	sp
2821  0D28  18 06       	jr	l_player_crumble_00109
2822  0D2A              l_player_crumble_00107:
2823  0D2A  21 00 00    	ld	hl,0x0000
2824  0D2D  22 10 00    	ld	(_last_time_b + 0x0010),hl
2825  0D30              l_player_crumble_00109:
2826  0D30  DD F9       	ld	sp, ix
2827  0D32  DD E1       	pop	ix
2828  0D34  C9          	ret
2829  0D35              	SECTION code_compiler
2830  0D35              ;	---------------------------------
2831  0D35              ; Function player_check_floor
2832  0D35              ; ---------------------------------
2833  0D35              _player_check_floor:
2834  0D35  CD 00 00    	call	___sdcc_enter_ix
2835  0D38  3A 08 00    	ld	a,(_col + 0x0008)
2836  0D3B  DD 86 04    	add	a,(ix+4)
2837  0D3E  57          	ld	d, a
2838  0D3F  3A 08 00    	ld	a,(_lin + 0x0008)
2839  0D42  C6 10       	add	a,0x10
2840  0D44  5F          	ld	e, a
2841  0D45  D5          	push	de
2842  0D46  CD 00 00    	call	_spr_calc_index
2843  0D49  F1          	pop	af
2844  0D4A  22 00 00    	ld	(_index1),hl
2845  0D4D  21 01 00    	ld	hl,_index1 + 1
2846  0D50  7E          	ld	a, (hl)
2847  0D51  D6 02       	sub	a,0x02
2848  0D53  30 25       	jr	NC,l_player_check_floor_00107
2849  0D55  3E 00       	ld	a, +((_scr_map) & 0xFF)
2850  0D57  2B          	dec	hl
2851  0D58  86          	add	a, (hl)
2852  0D59  4F          	ld	c, a
2853  0D5A  3E 00       	ld	a, +((_scr_map) / 256)
2854  0D5C  23          	inc	hl
2855  0D5D  8E          	adc	a, (hl)
2856  0D5E  47          	ld	b, a
2857  0D5F  0A          	ld	a, (bc)
2858  0D60  21 00 00    	ld	hl,_v0
2859  0D63  77          	ld	(hl), a
2860  0D64  3E 1F       	ld	a,0x1f
2861  0D66  96          	sub	a, (hl)
2862  0D67  30 02       	jr	NC,l_player_check_floor_00102
2863  0D69  36 00       	ld	(hl),0x00
2864  0D6B              l_player_check_floor_00102:
2865  0D6B  2A 00 00    	ld	hl,(_v0)
2866  0D6E  26 00       	ld	h,0x00
2867  0D70  01 00 00    	ld	bc,_tile_class
2868  0D73  09          	add	hl,bc
2869  0D74  7E          	ld	a,(hl)
2870  0D75  32 00 00    	ld	(_v0),a
2871  0D78  18 15       	jr	l_player_check_floor_00108
2872  0D7A              l_player_check_floor_00107:
2873  0D7A  21 08 00    	ld	hl,+(_lin + 0x0008)
2874  0D7D  4E          	ld	c, (hl)
2875  0D7E  3E C8       	ld	a,0xc8
2876  0D80  91          	sub	a, c
2877  0D81  30 07       	jr	NC,l_player_check_floor_00104
2878  0D83  21 00 00    	ld	hl,_v0
2879  0D86  36 00       	ld	(hl),0x00
2880  0D88  18 05       	jr	l_player_check_floor_00108
2881  0D8A              l_player_check_floor_00104:
2882  0D8A  21 00 00    	ld	hl,_v0
2883  0D8D  36 03       	ld	(hl),0x03
2884  0D8F              l_player_check_floor_00108:
2885  0D8F  3A 00 00    	ld	a,(_v0)
2886  0D92  B7          	or	a, a
2887  0D93  28 0F       	jr	Z,l_player_check_floor_00109
2888  0D95  D6 08       	sub	a,0x08
2889  0D97  28 0B       	jr	Z,l_player_check_floor_00109
2890  0D99  3A 00 00    	ld	a,(_v0)
2891  0D9C  FE 05       	cp	a,0x05
2892  0D9E  28 04       	jr	Z,l_player_check_floor_00109
2893  0DA0  D6 06       	sub	a,0x06
2894  0DA2  20 04       	jr	NZ,l_player_check_floor_00110
2895  0DA4              l_player_check_floor_00109:
2896  0DA4  2E 01       	ld	l,0x01
2897  0DA6  18 02       	jr	l_player_check_floor_00114
2898  0DA8              l_player_check_floor_00110:
2899  0DA8  2E 00       	ld	l,0x00
2900  0DAA              l_player_check_floor_00114:
2901  0DAA  DD E1       	pop	ix
2902  0DAC  C9          	ret
2903  0DAD              	SECTION code_compiler
2904  0DAD              ;	---------------------------------
2905  0DAD              ; Function player_get_floor
2906  0DAD              ; ---------------------------------
2907  0DAD              _player_get_floor:
2908  0DAD  21 08 00    	ld	hl,+(_lin + 0x0008)
2909  0DB0  4E          	ld	c, (hl)
2910  0DB1  59          	ld	e, c
2911  0DB2  16 00       	ld	d,0x00
2912  0DB4  21 10 00    	ld	hl,0x0010
2913  0DB7  19          	add	hl, de
2914  0DB8  3E 80       	ld	a,0x80
2915  0DBA  BD          	cp	a, l
2916  0DBB  3E 00       	ld	a,0x00
2917  0DBD  9C          	sbc	a, h
2918  0DBE  E2 C3 0D    	jp	PO, l_player_get_floor_00195
2919  0DC1  EE 80       	xor	a,0x80
2920  0DC3              l_player_get_floor_00195:
2921  0DC3  F2 CD 0D    	jp	P, l_player_get_floor_00102
2922  0DC6  21 00 00    	ld	hl,_v0
2923  0DC9  36 80       	ld	(hl),0x80
2924  0DCB  18 06       	jr	l_player_get_floor_00103
2925  0DCD              l_player_get_floor_00102:
2926  0DCD  79          	ld	a, c
2927  0DCE  C6 18       	add	a,0x18
2928  0DD0  32 00 00    	ld	(_v0),a
2929  0DD3              l_player_get_floor_00103:
2930  0DD3  21 08 00    	ld	hl,+(_col + 0x0008)
2931  0DD6  46          	ld	b, (hl)
2932  0DD7  3A 00 00    	ld	a,(_v0)
2933  0DDA  4F          	ld	c,a
2934  0DDB  C5          	push	bc
2935  0DDC  CD 00 00    	call	_spr_calc_index
2936  0DDF  F1          	pop	af
2937  0DE0  22 00 00    	ld	(_index1),hl
2938  0DE3  21 00 00    	ld	hl,_i
2939  0DE6  36 00       	ld	(hl),0x00
2940  0DE8              l_player_get_floor_00112:
2941  0DE8  3A 00 00    	ld	a,(_i)
2942  0DEB  D6 10       	sub	a,0x10
2943  0DED  D2 A8 0E    	jp	NC, l_player_get_floor_00114
2944  0DF0  01 00 00    	ld	bc,_scr_map
2945  0DF3  2A 00 00    	ld	hl,(_index1)
2946  0DF6  09          	add	hl,bc
2947  0DF7  7E          	ld	a,(hl)
2948  0DF8  32 00 00    	ld	(_v0),a
2949  0DFB  ED 4B 00 00 	ld	bc,(_index1)
2950  0DFF  03          	inc	bc
2951  0E00  21 00 00    	ld	hl,_scr_map
2952  0E03  09          	add	hl, bc
2953  0E04  7E          	ld	a, (hl)
2954  0E05  32 00 00    	ld	(_v1),a
2955  0E08  3E 1F       	ld	a,0x1f
2956  0E0A  21 00 00    	ld	hl,_v0
2957  0E0D  96          	sub	a, (hl)
2958  0E0E  30 02       	jr	NC,l_player_get_floor_00105
2959  0E10  36 00       	ld	(hl),0x00
2960  0E12              l_player_get_floor_00105:
2961  0E12  3E 1F       	ld	a,0x1f
2962  0E14  21 00 00    	ld	hl,_v1
2963  0E17  96          	sub	a, (hl)
2964  0E18  30 02       	jr	NC,l_player_get_floor_00107
2965  0E1A  36 00       	ld	(hl),0x00
2966  0E1C              l_player_get_floor_00107:
2967  0E1C  2A 00 00    	ld	hl,(_v0)
2968  0E1F  26 00       	ld	h,0x00
2969  0E21  01 00 00    	ld	bc,_tile_class
2970  0E24  09          	add	hl,bc
2971  0E25  7E          	ld	a,(hl)
2972  0E26  32 00 00    	ld	(_v0),a
2973  0E29  2A 00 00    	ld	hl,(_v1)
2974  0E2C  26 00       	ld	h,0x00
2975  0E2E  01 00 00    	ld	bc,_tile_class
2976  0E31  09          	add	hl,bc
2977  0E32  7E          	ld	a,(hl)
2978  0E33  32 00 00    	ld	(_v1),a
2979  0E36  3A 00 00    	ld	a,(_v0)
2980  0E39  B7          	or	a,a
2981  0E3A  28 13       	jr	Z,l_player_get_floor_00118
2982  0E3C  D6 08       	sub	a,0x08
2983  0E3E  28 0F       	jr	Z,l_player_get_floor_00118
2984  0E40  3A 00 00    	ld	a,(_v0)
2985  0E43  FE 05       	cp	a,0x05
2986  0E45  28 08       	jr	Z,l_player_get_floor_00118
2987  0E47  D6 06       	sub	a,0x06
2988  0E49  28 04       	jr	Z,l_player_get_floor_00118
2989  0E4B  0E 00       	ld	c,0x00
2990  0E4D  18 02       	jr	l_player_get_floor_00119
2991  0E4F              l_player_get_floor_00118:
2992  0E4F  0E 01       	ld	c,0x01
2993  0E51              l_player_get_floor_00119:
2994  0E51  21 00 00    	ld	hl,_v0
2995  0E54  71          	ld	(hl), c
2996  0E55  3A 00 00    	ld	a,(_v1)
2997  0E58  B7          	or	a, a
2998  0E59  28 13       	jr	Z,l_player_get_floor_00127
2999  0E5B  D6 08       	sub	a,0x08
3000  0E5D  28 0F       	jr	Z,l_player_get_floor_00127
3001  0E5F  3A 00 00    	ld	a,(_v1)
3002  0E62  FE 05       	cp	a,0x05
3003  0E64  28 08       	jr	Z,l_player_get_floor_00127
3004  0E66  D6 06       	sub	a,0x06
3005  0E68  28 04       	jr	Z,l_player_get_floor_00127
3006  0E6A  0E 00       	ld	c,0x00
3007  0E6C  18 02       	jr	l_player_get_floor_00128
3008  0E6E              l_player_get_floor_00127:
3009  0E6E  0E 01       	ld	c,0x01
3010  0E70              l_player_get_floor_00128:
3011  0E70  21 00 00    	ld	hl,_v1
3012  0E73  71          	ld	(hl), c
3013  0E74  3A 00 00    	ld	a,(_v0)
3014  0E77  B7          	or	a, a
3015  0E78  28 17       	jr	Z,l_player_get_floor_00109
3016  0E7A  3A 00 00    	ld	a,(_v1)
3017  0E7D  B7          	or	a, a
3018  0E7E  28 11       	jr	Z,l_player_get_floor_00109
3019  0E80  2A 00 00    	ld	hl,(_index1)
3020  0E83  11 20 00    	ld	de,0x0020
3021  0E86  19          	add	hl,de
3022  0E87  22 00 00    	ld	(_index1),hl
3023  0E8A  21 00 00    	ld	hl,_i
3024  0E8D  34          	inc	(hl)
3025  0E8E  C3 E8 0D    	jp	l_player_get_floor_00112
3026  0E91              l_player_get_floor_00109:
3027  0E91  2A 00 00    	ld	hl,(_index1)
3028  0E94  4D          	ld	c,l
3029  0E95  5C          	ld	e,h
3030  0E96  06 05       	ld	b,0x05
3031  0E98  79          	ld	a,c
3032  0E99              l_player_get_floor_00202:
3033  0E99  CB 3B       	srl	e
3034  0E9B  1F          	rra
3035  0E9C  10 FB       	djnz	l_player_get_floor_00202
3036  0E9E  07          	rlca
3037  0E9F  07          	rlca
3038  0EA0  07          	rlca
3039  0EA1  E6 F8       	and	a,0xf8
3040  0EA3  C6 F0       	add	a,0xf0
3041  0EA5  6F          	ld	l, a
3042  0EA6  18 02       	jr	l_player_get_floor_00115
3043  0EA8              l_player_get_floor_00114:
3044  0EA8  2E 70       	ld	l,0x70
3045  0EAA              l_player_get_floor_00115:
3046  0EAA  C9          	ret
3047  0EAB              	SECTION code_compiler
3048  0EAB              ;	---------------------------------
3049  0EAB              ; Function player_lost_life
3050  0EAB              ; ---------------------------------
3051  0EAB              _player_lost_life:
3052  0EAB  CD 00 00    	call	___sdcc_enter_ix
3053  0EAE  F5          	push	af
3054  0EAF  CD 00 00    	call	_ay_reset
3055  0EB2  CD 00 00    	call	_audio_dead
3056  0EB5  4F          	ld	c, a
3057  0EB6              l_player_lost_life_00104:
3058  0EB6  79          	ld	a, c
3059  0EB7  D6 20       	sub	a,0x20
3060  0EB9  30 79       	jr	NC,l_player_lost_life_00106
3061  0EBB  21 00 00    	ld	hl,_player_kill_index
3062  0EBE  7E          	ld	a, (hl)
3063  0EBF  3C          	inc	a
3064  0EC0  20 05       	jr	NZ,l_player_lost_life_00135
3065  0EC2  23          	inc	hl
3066  0EC3  7E          	ld	a, (hl)
3067  0EC4  3C          	inc	a
3068  0EC5  28 3D       	jr	Z,l_player_lost_life_00102
3069  0EC7              l_player_lost_life_00135:
3070  0EC7  2A 00 00    	ld	hl,(_player_kill_index)
3071  0ECA  22 00 00    	ld	(_index1),hl
3072  0ECD  21 08 00    	ld	hl,+(_col + 0x0008)
3073  0ED0  56          	ld	d, (hl)
3074  0ED1  3A 08 00    	ld	a,(_lin + 0x0008)
3075  0ED4  C6 10       	add	a,0x10
3076  0ED6  5F          	ld	e, a
3077  0ED7  3A 08 00    	ld	a,(_tile + 0x0008)
3078  0EDA  DD 77 FF    	ld	(ix-1),a
3079  0EDD  2A 08 00    	ld	hl,(_colint + 0x0008)
3080  0EE0  DD 7E FF    	ld	a,(ix-1)
3081  0EE3  85          	add	a, l
3082  0EE4  47          	ld	b, a
3083  0EE5  C5          	push	bc
3084  0EE6  D5          	push	de
3085  0EE7  0E 05       	ld	c,0x05
3086  0EE9  C5          	push	bc
3087  0EEA  CD 00 00    	call	_NIRVANAP_spriteT_callee
3088  0EED  C1          	pop	bc
3089  0EEE  76          	halt
3090  0EEF  C5          	push	bc
3091  0EF0  21 00 00    	ld	hl,0x0000
3092  0EF3  E5          	push	hl
3093  0EF4  2E 05       	ld	l,0x05
3094  0EF6  E5          	push	hl
3095  0EF7  CD 00 00    	call	_NIRVANAP_spriteT_callee
3096  0EFA  C1          	pop	bc
3097  0EFB  76          	halt
3098  0EFC  C5          	push	bc
3099  0EFD  CD 00 00    	call	_game_cell_paint_index
3100  0F00  C1          	pop	bc
3101  0F01  76          	halt
3102  0F02  18 2C       	jr	l_player_lost_life_00103
3103  0F04              l_player_lost_life_00102:
3104  0F04  21 08 00    	ld	hl,+(_col + 0x0008)
3105  0F07  46          	ld	b, (hl)
3106  0F08  3A 08 00    	ld	a,(_lin + 0x0008)
3107  0F0B  C6 10       	add	a,0x10
3108  0F0D  57          	ld	d, a
3109  0F0E  21 08 00    	ld	hl,+(_tile + 0x0008)
3110  0F11  5E          	ld	e, (hl)
3111  0F12  2A 08 00    	ld	hl,(_colint + 0x0008)
3112  0F15  7B          	ld	a, e
3113  0F16  85          	add	a, l
3114  0F17  C5          	push	bc
3115  0F18  4A          	ld	c, d
3116  0F19  C5          	push	bc
3117  0F1A  57          	ld	d,a
3118  0F1B  1E 05       	ld	e,0x05
3119  0F1D  D5          	push	de
3120  0F1E  CD 00 00    	call	_NIRVANAP_spriteT_callee
3121  0F21  C1          	pop	bc
3122  0F22  76          	halt
3123  0F23  C5          	push	bc
3124  0F24  21 00 00    	ld	hl,0x0000
3125  0F27  E5          	push	hl
3126  0F28  2E 05       	ld	l,0x05
3127  0F2A  E5          	push	hl
3128  0F2B  CD 00 00    	call	_NIRVANAP_spriteT_callee
3129  0F2E  C1          	pop	bc
3130  0F2F  76          	halt
3131  0F30              l_player_lost_life_00103:
3132  0F30  0C          	inc	c
3133  0F31  C3 B6 0E    	jp	l_player_lost_life_00104
3134  0F34              l_player_lost_life_00106:
3135  0F34  3A 08 00    	ld	a,(_lin + 0x0008)
3136  0F37  32 00 00    	ld	(_s_lin0),a
3137  0F3A  3A 08 00    	ld	a,(_col + 0x0008)
3138  0F3D  32 00 00    	ld	(_s_col0),a
3139  0F40  3A 00 00    	ld	a,(_game_inf_lives)
3140  0F43  B7          	or	a, a
3141  0F44  20 04       	jr	NZ,l_player_lost_life_00108
3142  0F46  21 00 00    	ld	hl,_player_lives
3143  0F49  35          	dec	(hl)
3144  0F4A              l_player_lost_life_00108:
3145  0F4A  3A 00 00    	ld	a,(_player_lives)
3146  0F4D  B7          	or	a, a
3147  0F4E  28 05       	jr	Z,l_player_lost_life_00110
3148  0F50  CD 00 00    	call	_game_round_init
3149  0F53  18 0A       	jr	l_player_lost_life_00112
3150  0F55              l_player_lost_life_00110:
3151  0F55  21 00 00    	ld	hl,_player_lives
3152  0F58  36 00       	ld	(hl),0x00
3153  0F5A  21 00 00    	ld	hl,_game_over
3154  0F5D  36 01       	ld	(hl),0x01
3155  0F5F              l_player_lost_life_00112:
3156  0F5F  F1          	pop	af
3157  0F60  DD E1       	pop	ix
3158  0F62  C9          	ret
3159  0F63              	SECTION IGNORE
3160  0000              
