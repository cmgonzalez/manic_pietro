1     0000              MODULE game_player_c
2     0000              LINE 0, "game_player.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_1up
204   0000              	GLOBAL _player_get_floor
205   0000              	GLOBAL _player_collision
206   0000              	GLOBAL _player_init
207   0000              	GLOBAL _player_turn
208   0000              	GLOBAL _player_move
209   0000              	GLOBAL _player_check_input
210   0000              	GLOBAL _player_move_jump
211   0000              	GLOBAL _player_move_walk
212   0000              	GLOBAL _player_tile
213   0000              	GLOBAL _player_score_add
214   0000              	GLOBAL _player_pick_item
215   0000              	GLOBAL _player_pick_deadly
216   0000              	GLOBAL _player_check_ceil
217   0000              	GLOBAL _player_check_floor_jump
218   0000              	GLOBAL _player_check_floor_walk
219   0000              	GLOBAL _player_lost_life
220   0000              ;--------------------------------------------------------
221   0000              ; Externals used
222   0000              ;--------------------------------------------------------
223   0000              	GLOBAL _ulltoa_callee
224   0000              	GLOBAL _ulltoa
225   0000              	GLOBAL _strtoull_callee
226   0000              	GLOBAL _strtoull
227   0000              	GLOBAL _strtoll_callee
228   0000              	GLOBAL _strtoll
229   0000              	GLOBAL _lltoa_callee
230   0000              	GLOBAL _lltoa
231   0000              	GLOBAL _llabs_callee
232   0000              	GLOBAL _llabs
233   0000              	GLOBAL __lldivu__callee
234   0000              	GLOBAL __lldivu_
235   0000              	GLOBAL __lldiv__callee
236   0000              	GLOBAL __lldiv_
237   0000              	GLOBAL _atoll_callee
238   0000              	GLOBAL _atoll
239   0000              	GLOBAL _realloc_unlocked_callee
240   0000              	GLOBAL _realloc_unlocked
241   0000              	GLOBAL _malloc_unlocked_fastcall
242   0000              	GLOBAL _malloc_unlocked
243   0000              	GLOBAL _free_unlocked_fastcall
244   0000              	GLOBAL _free_unlocked
245   0000              	GLOBAL _calloc_unlocked_callee
246   0000              	GLOBAL _calloc_unlocked
247   0000              	GLOBAL _aligned_alloc_unlocked_callee
248   0000              	GLOBAL _aligned_alloc_unlocked
249   0000              	GLOBAL _realloc_callee
250   0000              	GLOBAL _realloc
251   0000              	GLOBAL _malloc_fastcall
252   0000              	GLOBAL _malloc
253   0000              	GLOBAL _free_fastcall
254   0000              	GLOBAL _free
255   0000              	GLOBAL _calloc_callee
256   0000              	GLOBAL _calloc
257   0000              	GLOBAL _aligned_alloc_callee
258   0000              	GLOBAL _aligned_alloc
259   0000              	GLOBAL _utoa_callee
260   0000              	GLOBAL _utoa
261   0000              	GLOBAL _ultoa_callee
262   0000              	GLOBAL _ultoa
263   0000              	GLOBAL _system_fastcall
264   0000              	GLOBAL _system
265   0000              	GLOBAL _strtoul_callee
266   0000              	GLOBAL _strtoul
267   0000              	GLOBAL _strtol_callee
268   0000              	GLOBAL _strtol
269   0000              	GLOBAL _strtof_callee
270   0000              	GLOBAL _strtof
271   0000              	GLOBAL _strtod_callee
272   0000              	GLOBAL _strtod
273   0000              	GLOBAL _srand_fastcall
274   0000              	GLOBAL _srand
275   0000              	GLOBAL _rand
276   0000              	GLOBAL _quick_exit_fastcall
277   0000              	GLOBAL _quick_exit
278   0000              	GLOBAL _qsort_callee
279   0000              	GLOBAL _qsort
280   0000              	GLOBAL _ltoa_callee
281   0000              	GLOBAL _ltoa
282   0000              	GLOBAL _labs_fastcall
283   0000              	GLOBAL _labs
284   0000              	GLOBAL _itoa_callee
285   0000              	GLOBAL _itoa
286   0000              	GLOBAL _ftoh_callee
287   0000              	GLOBAL _ftoh
288   0000              	GLOBAL _ftog_callee
289   0000              	GLOBAL _ftog
290   0000              	GLOBAL _ftoe_callee
291   0000              	GLOBAL _ftoe
292   0000              	GLOBAL _ftoa_callee
293   0000              	GLOBAL _ftoa
294   0000              	GLOBAL _exit_fastcall
295   0000              	GLOBAL _exit
296   0000              	GLOBAL _dtoh_callee
297   0000              	GLOBAL _dtoh
298   0000              	GLOBAL _dtog_callee
299   0000              	GLOBAL _dtog
300   0000              	GLOBAL _dtoe_callee
301   0000              	GLOBAL _dtoe
302   0000              	GLOBAL _dtoa_callee
303   0000              	GLOBAL _dtoa
304   0000              	GLOBAL _bsearch_callee
305   0000              	GLOBAL _bsearch
306   0000              	GLOBAL _atol_fastcall
307   0000              	GLOBAL _atol
308   0000              	GLOBAL _atoi_fastcall
309   0000              	GLOBAL _atoi
310   0000              	GLOBAL _atof_fastcall
311   0000              	GLOBAL _atof
312   0000              	GLOBAL _atexit_fastcall
313   0000              	GLOBAL _atexit
314   0000              	GLOBAL _at_quick_exit_fastcall
315   0000              	GLOBAL _at_quick_exit
316   0000              	GLOBAL _abs_fastcall
317   0000              	GLOBAL _abs
318   0000              	GLOBAL _abort
319   0000              	GLOBAL __strtou__callee
320   0000              	GLOBAL __strtou_
321   0000              	GLOBAL __strtoi__callee
322   0000              	GLOBAL __strtoi_
323   0000              	GLOBAL __random_uniform_xor_8__fastcall
324   0000              	GLOBAL __random_uniform_xor_8_
325   0000              	GLOBAL __random_uniform_xor_32__fastcall
326   0000              	GLOBAL __random_uniform_xor_32_
327   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
328   0000              	GLOBAL __random_uniform_cmwc_8_
329   0000              	GLOBAL __shellsort__callee
330   0000              	GLOBAL __shellsort_
331   0000              	GLOBAL __quicksort__callee
332   0000              	GLOBAL __quicksort_
333   0000              	GLOBAL __insertion_sort__callee
334   0000              	GLOBAL __insertion_sort_
335   0000              	GLOBAL __ldivu__callee
336   0000              	GLOBAL __ldivu_
337   0000              	GLOBAL __ldiv__callee
338   0000              	GLOBAL __ldiv_
339   0000              	GLOBAL __divu__callee
340   0000              	GLOBAL __divu_
341   0000              	GLOBAL __div__callee
342   0000              	GLOBAL __div_
343   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
344   0000              	GLOBAL _NIRVANAP_drawTW_raw
345   0000              	GLOBAL _NIRVANAP_drawTW_callee
346   0000              	GLOBAL _NIRVANAP_drawTW
347   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
348   0000              	GLOBAL _NIRVANAP_drawW_raw
349   0000              	GLOBAL _NIRVANAP_drawW_callee
350   0000              	GLOBAL _NIRVANAP_drawW
351   0000              	GLOBAL _NIRVANAP_spriteT_callee
352   0000              	GLOBAL _NIRVANAP_spriteT
353   0000              	GLOBAL _NIRVANAP_fillC_callee
354   0000              	GLOBAL _NIRVANAP_fillC
355   0000              	GLOBAL _NIRVANAP_readC_callee
356   0000              	GLOBAL _NIRVANAP_readC
357   0000              	GLOBAL _NIRVANAP_paintC_callee
358   0000              	GLOBAL _NIRVANAP_paintC
359   0000              	GLOBAL _NIRVANAP_printC_callee
360   0000              	GLOBAL _NIRVANAP_printC
361   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
362   0000              	GLOBAL _NIRVANAP_fillT_raw
363   0000              	GLOBAL _NIRVANAP_fillT_callee
364   0000              	GLOBAL _NIRVANAP_fillT
365   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
366   0000              	GLOBAL _NIRVANAP_drawT_raw
367   0000              	GLOBAL _NIRVANAP_drawT_callee
368   0000              	GLOBAL _NIRVANAP_drawT
369   0000              	GLOBAL _NIRVANAP_stop
370   0000              	GLOBAL _NIRVANAP_start
371   0000              	GLOBAL _zx_print_str
372   0000              	GLOBAL _zx_print_int
373   0000              	GLOBAL _zx_print_chr
374   0000              	GLOBAL _zx_print_bonus_time
375   0000              	GLOBAL _zx_isr
376   0000              	GLOBAL _z80_otdr_callee
377   0000              	GLOBAL _z80_otdr
378   0000              	GLOBAL _z80_otir_callee
379   0000              	GLOBAL _z80_otir
380   0000              	GLOBAL _z80_outp_callee
381   0000              	GLOBAL _z80_outp
382   0000              	GLOBAL _z80_indr_callee
383   0000              	GLOBAL _z80_indr
384   0000              	GLOBAL _z80_inir_callee
385   0000              	GLOBAL _z80_inir
386   0000              	GLOBAL _z80_inp_fastcall
387   0000              	GLOBAL _z80_inp
388   0000              	GLOBAL _z80_set_int_state_fastcall
389   0000              	GLOBAL _z80_set_int_state
390   0000              	GLOBAL _z80_get_int_state
391   0000              	GLOBAL _z80_delay_tstate_fastcall
392   0000              	GLOBAL _z80_delay_tstate
393   0000              	GLOBAL _z80_delay_ms_fastcall
394   0000              	GLOBAL _z80_delay_ms
395   0000              	GLOBAL _im2_remove_generic_callback_callee
396   0000              	GLOBAL _im2_remove_generic_callback
397   0000              	GLOBAL _im2_prepend_generic_callback_callee
398   0000              	GLOBAL _im2_prepend_generic_callback
399   0000              	GLOBAL _im2_append_generic_callback_callee
400   0000              	GLOBAL _im2_append_generic_callback
401   0000              	GLOBAL _im2_create_generic_isr_8080_callee
402   0000              	GLOBAL _im2_create_generic_isr_8080
403   0000              	GLOBAL _im2_create_generic_isr_callee
404   0000              	GLOBAL _im2_create_generic_isr
405   0000              	GLOBAL _im2_install_isr_callee
406   0000              	GLOBAL _im2_install_isr
407   0000              	GLOBAL _im2_init_fastcall
408   0000              	GLOBAL _im2_init
409   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
410   0000              	GLOBAL _intrinsic_swap_word_32
411   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
412   0000              	GLOBAL _intrinsic_swap_endian_32
413   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
414   0000              	GLOBAL _intrinsic_swap_endian_16
415   0000              	GLOBAL _intrinsic_return_de
416   0000              	GLOBAL _intrinsic_return_bc
417   0000              	GLOBAL _intrinsic_exx
418   0000              	GLOBAL _intrinsic_ex_de_hl
419   0000              	GLOBAL _intrinsic_nop
420   0000              	GLOBAL _intrinsic_im_2
421   0000              	GLOBAL _intrinsic_im_1
422   0000              	GLOBAL _intrinsic_im_0
423   0000              	GLOBAL _intrinsic_retn
424   0000              	GLOBAL _intrinsic_reti
425   0000              	GLOBAL _intrinsic_halt
426   0000              	GLOBAL _intrinsic_ei
427   0000              	GLOBAL _intrinsic_di
428   0000              	GLOBAL _intrinsic_stub
429   0000              	GLOBAL _intrinsic_ini
430   0000              	GLOBAL _intrinsic_outi
431   0000              	GLOBAL _intrinsic_ldi
432   0000              	GLOBAL _zx_pattern_fill_callee
433   0000              	GLOBAL _zx_pattern_fill
434   0000              	GLOBAL _zx_saddrpup_fastcall
435   0000              	GLOBAL _zx_saddrpup
436   0000              	GLOBAL _zx_saddrpright_callee
437   0000              	GLOBAL _zx_saddrpright
438   0000              	GLOBAL _zx_saddrpleft_callee
439   0000              	GLOBAL _zx_saddrpleft
440   0000              	GLOBAL _zx_saddrpdown_fastcall
441   0000              	GLOBAL _zx_saddrpdown
442   0000              	GLOBAL _zx_saddrcup_fastcall
443   0000              	GLOBAL _zx_saddrcup
444   0000              	GLOBAL _zx_saddrcright_fastcall
445   0000              	GLOBAL _zx_saddrcright
446   0000              	GLOBAL _zx_saddrcleft_fastcall
447   0000              	GLOBAL _zx_saddrcleft
448   0000              	GLOBAL _zx_saddrcdown_fastcall
449   0000              	GLOBAL _zx_saddrcdown
450   0000              	GLOBAL _zx_saddr2py_fastcall
451   0000              	GLOBAL _zx_saddr2py
452   0000              	GLOBAL _zx_saddr2px_fastcall
453   0000              	GLOBAL _zx_saddr2px
454   0000              	GLOBAL _zx_saddr2cy_fastcall
455   0000              	GLOBAL _zx_saddr2cy
456   0000              	GLOBAL _zx_saddr2cx_fastcall
457   0000              	GLOBAL _zx_saddr2cx
458   0000              	GLOBAL _zx_saddr2aaddr_fastcall
459   0000              	GLOBAL _zx_saddr2aaddr
460   0000              	GLOBAL _zx_py2saddr_fastcall
461   0000              	GLOBAL _zx_py2saddr
462   0000              	GLOBAL _zx_py2aaddr_fastcall
463   0000              	GLOBAL _zx_py2aaddr
464   0000              	GLOBAL _zx_pxy2saddr_callee
465   0000              	GLOBAL _zx_pxy2saddr
466   0000              	GLOBAL _zx_pxy2aaddr_callee
467   0000              	GLOBAL _zx_pxy2aaddr
468   0000              	GLOBAL _zx_px2bitmask_fastcall
469   0000              	GLOBAL _zx_px2bitmask
470   0000              	GLOBAL _zx_cy2saddr_fastcall
471   0000              	GLOBAL _zx_cy2saddr
472   0000              	GLOBAL _zx_cy2aaddr_fastcall
473   0000              	GLOBAL _zx_cy2aaddr
474   0000              	GLOBAL _zx_cxy2saddr_callee
475   0000              	GLOBAL _zx_cxy2saddr
476   0000              	GLOBAL _zx_cxy2aaddr_callee
477   0000              	GLOBAL _zx_cxy2aaddr
478   0000              	GLOBAL _zx_bitmask2px_fastcall
479   0000              	GLOBAL _zx_bitmask2px
480   0000              	GLOBAL _zx_aaddrcup_fastcall
481   0000              	GLOBAL _zx_aaddrcup
482   0000              	GLOBAL _zx_aaddrcright_fastcall
483   0000              	GLOBAL _zx_aaddrcright
484   0000              	GLOBAL _zx_aaddrcleft_fastcall
485   0000              	GLOBAL _zx_aaddrcleft
486   0000              	GLOBAL _zx_aaddrcdown_fastcall
487   0000              	GLOBAL _zx_aaddrcdown
488   0000              	GLOBAL _zx_aaddr2saddr_fastcall
489   0000              	GLOBAL _zx_aaddr2saddr
490   0000              	GLOBAL _zx_aaddr2py_fastcall
491   0000              	GLOBAL _zx_aaddr2py
492   0000              	GLOBAL _zx_aaddr2px_fastcall
493   0000              	GLOBAL _zx_aaddr2px
494   0000              	GLOBAL _zx_aaddr2cy_fastcall
495   0000              	GLOBAL _zx_aaddr2cy
496   0000              	GLOBAL _zx_aaddr2cx_fastcall
497   0000              	GLOBAL _zx_aaddr2cx
498   0000              	GLOBAL _zx_visit_wc_pix_callee
499   0000              	GLOBAL _zx_visit_wc_pix
500   0000              	GLOBAL _zx_visit_wc_attr_callee
501   0000              	GLOBAL _zx_visit_wc_attr
502   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
503   0000              	GLOBAL _zx_scroll_wc_up_pix
504   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
505   0000              	GLOBAL _zx_scroll_wc_up_attr
506   0000              	GLOBAL _zx_scroll_wc_up_callee
507   0000              	GLOBAL _zx_scroll_wc_up
508   0000              	GLOBAL _zx_scroll_up_pix_callee
509   0000              	GLOBAL _zx_scroll_up_pix
510   0000              	GLOBAL _zx_scroll_up_attr_callee
511   0000              	GLOBAL _zx_scroll_up_attr
512   0000              	GLOBAL _zx_scroll_up_callee
513   0000              	GLOBAL _zx_scroll_up
514   0000              	GLOBAL _zx_cls_wc_pix_callee
515   0000              	GLOBAL _zx_cls_wc_pix
516   0000              	GLOBAL _zx_cls_wc_attr_callee
517   0000              	GLOBAL _zx_cls_wc_attr
518   0000              	GLOBAL _zx_cls_wc_callee
519   0000              	GLOBAL _zx_cls_wc
520   0000              	GLOBAL _zx_cls_pix_fastcall
521   0000              	GLOBAL _zx_cls_pix
522   0000              	GLOBAL _zx_cls_attr_fastcall
523   0000              	GLOBAL _zx_cls_attr
524   0000              	GLOBAL _zx_cls_fastcall
525   0000              	GLOBAL _zx_cls
526   0000              	GLOBAL _zx_border_fastcall
527   0000              	GLOBAL _zx_border
528   0000              	GLOBAL _zx_tape_verify_block_callee
529   0000              	GLOBAL _zx_tape_verify_block
530   0000              	GLOBAL _zx_tape_save_block_callee
531   0000              	GLOBAL _zx_tape_save_block
532   0000              	GLOBAL _zx_tape_load_block_callee
533   0000              	GLOBAL _zx_tape_load_block
534   0000              	GLOBAL _spr_destroy
535   0000              	GLOBAL _spr_unflattenP1
536   0000              	GLOBAL _spr_flatten
537   0000              	GLOBAL _spr_btile_paint_back
538   0000              	GLOBAL _spr_init_effects
539   0000              	GLOBAL _spr_turn_horizontal
540   0000              	GLOBAL _spr_play_anim
541   0000              	GLOBAL _spr_add_anim
542   0000              	GLOBAL _spr_clear_scr
543   0000              	GLOBAL _spr_back_repaint
544   0000              	GLOBAL _spr_get_tile_dir
545   0000              	GLOBAL _spr_get_tile
546   0000              	GLOBAL _spr_paint_player
547   0000              	GLOBAL _spr_paint
548   0000              	GLOBAL _spr_move_left
549   0000              	GLOBAL _spr_move_right
550   0000              	GLOBAL _spr_move_left_f
551   0000              	GLOBAL _spr_move_right_f
552   0000              	GLOBAL _spr_move_horizontal
553   0000              	GLOBAL _spr_move_down
554   0000              	GLOBAL _spr_move_up
555   0000              	GLOBAL _spr_set_right
556   0000              	GLOBAL _spr_set_left
557   0000              	GLOBAL _spr_set_down
558   0000              	GLOBAL _spr_set_up
559   0000              	GLOBAL _spr_calc_index
560   0000              	GLOBAL _spr_chktime
561   0000              	GLOBAL _player_use_floor
562   0000              	GLOBAL _game_page_map
563   0000              	GLOBAL _game_attribs
564   0000              	GLOBAL _game_print_header
565   0000              	GLOBAL _game_check_time
566   0000              	GLOBAL _game_rotate_attrib_osd
567   0000              	GLOBAL _game_rotate_attrib
568   0000              	GLOBAL _game_colour_message
569   0000              	GLOBAL _game_paint_attrib
570   0000              	GLOBAL _game_print_score
571   0000              	GLOBAL _game_cell_paint_index
572   0000              	GLOBAL _game_cell_paint
573   0000              	GLOBAL _game_check_cell
574   0000              	GLOBAL _game_check_map
575   0000              	GLOBAL _game_loop
576   0000              	GLOBAL _game_round_init
577   0000              	GLOBAL _game_start_timer
578   0000              	GLOBAL _game_update_stats
579   0000              	GLOBAL _game_print_footer
580   0000              	GLOBAL _game_fill_row
581   0000              	GLOBAL _game_cls
582   0000              	GLOBAL _game_fps
583   0000              	GLOBAL _game_draw_map
584   0000              	GLOBAL _enemy_avoid_dead
585   0000              	GLOBAL _enemy_avoid_fall
586   0000              	GLOBAL _enemy_kill
587   0000              	GLOBAL _enemy_init
588   0000              	GLOBAL _enemy_move
589   0000              	GLOBAL _enemy_turn
590   0000              	GLOBAL _enemy_static
591   0000              	GLOBAL _enemy_walk
592   0000              	GLOBAL _enemy_horizontal
593   0000              	GLOBAL _enemy_vertical
594   0000              	GLOBAL _ay_reset
595   0000              	GLOBAL _ay_song_stop
596   0000              	GLOBAL _ay_song_play
597   0000              	GLOBAL _ay_fx_stop
598   0000              	GLOBAL _ay_fx_play
599   0000              	GLOBAL _ay_is_playing
600   0000              	GLOBAL _audio_levelup
601   0000              	GLOBAL _audio_menu
602   0000              	GLOBAL _audio_game_end
603   0000              	GLOBAL _audio_level_complete
604   0000              	GLOBAL _audio_level_start
605   0000              	GLOBAL _audio_lotr_lose_a_life
606   0000              	GLOBAL _audio_puerta
607   0000              	GLOBAL _audio_sin_mana
608   0000              	GLOBAL _audio_magic1
609   0000              	GLOBAL _audio_coin
610   0000              	GLOBAL _audio_golpe
611   0000              	GLOBAL _audio_salto
612   0000              	GLOBAL _audio_efecto
613   0000              	GLOBAL _audio_disparo_fire
614   0000              	GLOBAL _audio_disparo_axe
615   0000              	GLOBAL _audio_disparo2
616   0000              	GLOBAL _audio_disparo1
617   0000              	GLOBAL _audio_explosion1
618   0000              	GLOBAL _audio_explosion
619   0000              	GLOBAL _audio_ingame
620   0000              	GLOBAL _game_sprite_draw8
621   0000              	GLOBAL _test_func
622   0000              	GLOBAL _test_proc
623   0000              	GLOBAL _in_mouse_kempston_wheel_delta
624   0000              	GLOBAL _in_mouse_kempston_wheel
625   0000              	GLOBAL _in_mouse_kempston_callee
626   0000              	GLOBAL _in_mouse_kempston
627   0000              	GLOBAL _in_mouse_kempston_setpos_callee
628   0000              	GLOBAL _in_mouse_kempston_setpos
629   0000              	GLOBAL _in_mouse_kempston_reset
630   0000              	GLOBAL _in_mouse_kempston_init
631   0000              	GLOBAL _in_mouse_amx_wheel_delta
632   0000              	GLOBAL _in_mouse_amx_wheel
633   0000              	GLOBAL _in_mouse_amx_callee
634   0000              	GLOBAL _in_mouse_amx
635   0000              	GLOBAL _in_mouse_amx_setpos_callee
636   0000              	GLOBAL _in_mouse_amx_setpos
637   0000              	GLOBAL _in_mouse_amx_reset
638   0000              	GLOBAL _in_mouse_amx_init_callee
639   0000              	GLOBAL _in_mouse_amx_init
640   0000              	GLOBAL _in_stick_sinclair2
641   0000              	GLOBAL _in_stick_sinclair1
642   0000              	GLOBAL _in_stick_kempston
643   0000              	GLOBAL _in_stick_fuller
644   0000              	GLOBAL _in_stick_cursor
645   0000              	GLOBAL _in_stick_keyboard_fastcall
646   0000              	GLOBAL _in_stick_keyboard
647   0000              	GLOBAL _in_wait_nokey
648   0000              	GLOBAL _in_wait_key
649   0000              	GLOBAL _in_test_key
650   0000              	GLOBAL _in_pause_fastcall
651   0000              	GLOBAL _in_pause
652   0000              	GLOBAL _in_key_scancode_fastcall
653   0000              	GLOBAL _in_key_scancode
654   0000              	GLOBAL _in_key_pressed_fastcall
655   0000              	GLOBAL _in_key_pressed
656   0000              	GLOBAL _in_inkey
657   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
658   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
659   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
660   0000              	GLOBAL _NIRVANAP_HOLE
661   0000              	GLOBAL _NIRVANAP_ISR_HOOK
662   0000              	GLOBAL _scan_map
663   0000              	GLOBAL _map_paper_last_a
664   0000              	GLOBAL _map_paper_last
665   0000              	GLOBAL _map_paper_clr
666   0000              	GLOBAL _map_paper
667   0000              	GLOBAL _anim_count
668   0000              	GLOBAL _anim_respanwn
669   0000              	GLOBAL _anim_loop
670   0000              	GLOBAL _anim_end
671   0000              	GLOBAL _anim_int
672   0000              	GLOBAL _anim_tile
673   0000              	GLOBAL _anim_col
674   0000              	GLOBAL _anim_lin
675   0000              	GLOBAL _map_heigth
676   0000              	GLOBAL _map_width
677   0000              	GLOBAL _scr_curr
678   0000              	GLOBAL _scr_map
679   0000              	GLOBAL _spr_kind
680   0000              	GLOBAL _spr_frames
681   0000              	GLOBAL _spr_speed
682   0000              	GLOBAL _spr_tile
683   0000              	GLOBAL _screen_ink
684   0000              	GLOBAL _screen_paper
685   0000              	GLOBAL _game_start_scr
686   0000              	GLOBAL _game_score_top
687   0000              	GLOBAL _player_coins
688   0000              	GLOBAL _player_lives
689   0000              	GLOBAL _game_over
690   0000              	GLOBAL _game_sound
691   0000              	GLOBAL _game_inf_lives
692   0000              	GLOBAL _game_inmune
693   0000              	GLOBAL _sprite_curr_index
694   0000              	GLOBAL _spr_count
695   0000              	GLOBAL _last_rotated
696   0000              	GLOBAL _anim_time
697   0000              	GLOBAL _frame_time
698   0000              	GLOBAL _curr_time
699   0000              	GLOBAL _game_conveyor_flag
700   0000              	GLOBAL _game_conveyor_tile
701   0000              	GLOBAL _p_state_a
702   0000              	GLOBAL _p_state
703   0000              	GLOBAL _attrib_key
704   0000              	GLOBAL _attrib7
705   0000              	GLOBAL _attrib6
706   0000              	GLOBAL _attrib5
707   0000              	GLOBAL _attrib4
708   0000              	GLOBAL _attrib3
709   0000              	GLOBAL _attrib2
710   0000              	GLOBAL _attrib1
711   0000              	GLOBAL _attrib0
712   0000              	GLOBAL _attrib_red
713   0000              	GLOBAL _game_attrib_osd
714   0000              	GLOBAL _attrib_osd
715   0000              	GLOBAL _attrib_hl
716   0000              	GLOBAL _attrib
717   0000              	GLOBAL _zx_val_asm
718   0000              	GLOBAL _enemies
719   0000              	GLOBAL _tmp_ui
720   0000              	GLOBAL _tmp_sc
721   0000              	GLOBAL _tmp_uc
722   0000              	GLOBAL _tmp1
723   0000              	GLOBAL _tmp0
724   0000              	GLOBAL _tmp
725   0000              	GLOBAL _index1
726   0000              	GLOBAL _index0
727   0000              	GLOBAL _index_tmp
728   0000              	GLOBAL _loop_count
729   0000              	GLOBAL _s_class
730   0000              	GLOBAL _s_row1
731   0000              	GLOBAL _s_col1
732   0000              	GLOBAL _s_col0
733   0000              	GLOBAL _s_lin1
734   0000              	GLOBAL _s_lin0
735   0000              	GLOBAL _s_tile1
736   0000              	GLOBAL _s_tile0
737   0000              	GLOBAL _player_kill_index
738   0000              	GLOBAL _player_killed
739   0000              	GLOBAL _player_jump_top
740   0000              	GLOBAL _player_hit_count
741   0000              	GLOBAL _game_fps_show
742   0000              	GLOBAL _game_debug
743   0000              	GLOBAL _sprite
744   0000              	GLOBAL _fps
745   0000              	GLOBAL _game_tileset
746   0000              	GLOBAL _menu_curr_sel
747   0000              	GLOBAL _game_round_up
748   0000              	GLOBAL _game_conveyor_col1
749   0000              	GLOBAL _game_conveyor_col0
750   0000              	GLOBAL _game_conveyor_lin
751   0000              	GLOBAL _game_conveyor_dir
752   0000              	GLOBAL _game_song_play_start
753   0000              	GLOBAL _game_song_play
754   0000              	GLOBAL _game_world
755   0000              	GLOBAL _game_gravity
756   0000              	GLOBAL _player_jumpcount
757   0000              	GLOBAL _player_hit
758   0000              	GLOBAL _player_hit_time
759   0000              	GLOBAL _player_lin_scr
760   0000              	GLOBAL _player_col_scr
761   0000              	GLOBAL _player_max_vita
762   0000              	GLOBAL _player_max_mana
763   0000              	GLOBAL _player_keys
764   0000              	GLOBAL _player_vel_inc
765   0000              	GLOBAL _player_vel_y0
766   0000              	GLOBAL _player_vel_y
767   0000              	GLOBAL _player_score
768   0000              	GLOBAL _last_time
769   0000              	GLOBAL _obj_count
770   0000              	GLOBAL _obj_col
771   0000              	GLOBAL _obj_lin
772   0000              	GLOBAL _spr_timer
773   0000              	GLOBAL _jump_lin
774   0000              	GLOBAL _colint
775   0000              	GLOBAL _col
776   0000              	GLOBAL _tbuffer
777   0000              	GLOBAL _lin
778   0000              	GLOBAL _tile
779   0000              	GLOBAL _value_b
780   0000              	GLOBAL _value_a
781   0000              	GLOBAL _state_a
782   0000              	GLOBAL _state
783   0000              	GLOBAL _class
784   0000              	GLOBAL _dirs
785   0000              	GLOBAL _k1
786   0000              	GLOBAL _joyfunc2
787   0000              	GLOBAL _joyfunc1
788   0000              	GLOBAL _btiles
789   0000              	GLOBAL _v3
790   0000              	GLOBAL _v2
791   0000              	GLOBAL _v1
792   0000              	GLOBAL _v0
793   0000              	GLOBAL _i
794   0000              	GLOBAL _spec128
795   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
796   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
797   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
798   0000              	GLOBAL _ay_fx_06_disparo_fire
799   0000              	GLOBAL _ay_fx_06_disparo_axe
800   0000              	GLOBAL _ay_fx_06_explosion1
801   0000              	GLOBAL _ay_fx_06_efecto
802   0000              	GLOBAL _ay_fx_06_disparo2
803   0000              	GLOBAL _ay_fx_06_disparo1
804   0000              	GLOBAL _ay_fx_06_levelup
805   0000              	GLOBAL _ay_fx_06_magic
806   0000              	GLOBAL _ay_fx_06_sin_mana
807   0000              	GLOBAL _ay_fx_06_salto
808   0000              	GLOBAL _ay_fx_06_puerta
809   0000              	GLOBAL _ay_fx_06_magic1
810   0000              	GLOBAL _ay_fx_06_golpe
811   0000              	GLOBAL _ay_fx_06_explosion
812   0000              	GLOBAL _ay_fx_06_dano_por_toque
813   0000              	GLOBAL _ay_fx_06_coin
814   0000              	GLOBAL _ay_song_06_lotr_level_start
815   0000              	GLOBAL _ay_song_06_lotr_level_complete
816   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
817   0000              	GLOBAL _ay_song_04_ingame0
818   0000              	GLOBAL _ay_song_04_ingame
819   0000              	GLOBAL _hibtiles
820   0000              	GLOBAL _key_map
821   0000              	GLOBAL _start_scr0
822   0000              	GLOBAL _paper0
823   0000              	GLOBAL _lenght0
824   0000              	GLOBAL _world0
825   0000              	GLOBAL _spr_init
826   0000              ;--------------------------------------------------------
827   0000              ; special function registers
828   0000              ;--------------------------------------------------------
829   0000              defc _IO_FE	=	0x00fe
830   0000              defc _IO_1FFD	=	0x1ffd
831   0000              defc _IO_7FFD	=	0x7ffd
832   0000              ;--------------------------------------------------------
833   0000              ; ram data
834   0000              ;--------------------------------------------------------
835   0000              	SECTION bss_compiler
836   0000              ;--------------------------------------------------------
837   0000              ; ram data
838   0000              ;--------------------------------------------------------
839   0000              
840   0000              IF 0
841   0000              
842   0000              ; .area _INITIALIZED removed by z88dk
843   0000              
844   0000              
845   0000              ENDIF
846   0000              
847   0000              ;--------------------------------------------------------
848   0000              ; absolute external ram data
849   0000              ;--------------------------------------------------------
850   0000              	SECTION IGNORE
851   0000              ;--------------------------------------------------------
852   0000              ; global & static initialisations
853   0000              ;--------------------------------------------------------
854   0000              	SECTION code_crt_init
855   0000              ;--------------------------------------------------------
856   0000              ; Home
857   0000              ;--------------------------------------------------------
858   0000              	SECTION IGNORE
859   0000              ;--------------------------------------------------------
860   0000              ; code
861   0000              ;--------------------------------------------------------
862   0000              	SECTION code_compiler
863   0000              ;	---------------------------------
864   0000              ; Function player_init
865   0000              ; ---------------------------------
866   0000              _player_init:
867   0000  CD 00 00    	call	___sdcc_enter_ix
868   0003  21 07 00    	ld	hl, +(_class + 0x0007)
869   0006  36 FF       	ld	(hl),0xff
870   0008  21 07 00    	ld	hl, +(_spr_speed + 0x0007)
871   000B  36 04       	ld	(hl),0x04
872   000D  21 07 00    	ld	hl,_spr_frames+7
873   0010  36 04       	ld	(hl),0x04
874   0012  4D          	ld	c,l
875   0013  44          	ld	b,h
876   0014  21 07 00    	ld	hl, +(_lin + 0x0007)
877   0017  DD 7E 04    	ld	a,(ix+4)
878   001A  77          	ld	(hl), a
879   001B  21 07 00    	ld	hl, +(_col + 0x0007)
880   001E  DD 7E 05    	ld	a,(ix+5)
881   0021  77          	ld	(hl), a
882   0022  21 07 00    	ld	hl, +(_state + 0x0007)
883   0025  36 00       	ld	(hl),0x00
884   0027  21 07 00    	ld	hl, +(_state_a + 0x0007)
885   002A  36 00       	ld	(hl),0x00
886   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
887   002F  DD 7E 04    	ld	a,(ix+4)
888   0032  77          	ld	(hl), a
889   0033  ED 5B 00 00 	ld	de,(_curr_time)
890   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
891   003B  21 00 00    	ld	hl,0x0000
892   003E  22 00 00    	ld	(_player_vel_y),hl
893   0041  11 07 00    	ld	de,_colint+7
894   0044  AF          	xor	a, a
895   0045  12          	ld	(de), a
896   0046  3E 04       	ld	a,0x04
897   0048  02          	ld	(bc), a
898   0049  DD 7E 05    	ld	a,(ix+5)
899   004C  D6 10       	sub	a,0x10
900   004E  30 19       	jr	NC,l_player_init_00102
901   0050  ED 4B 00 00 	ld	bc,(_p_state)
902   0054  0A          	ld	a,(bc)
903   0055  F6 04       	or	a,0x04
904   0057  02          	ld	(bc), a
905   0058  ED 4B 00 00 	ld	bc,(_p_state_a)
906   005C  0A          	ld	a,(bc)
907   005D  F6 10       	or	a,0x10
908   005F  02          	ld	(bc), a
909   0060  21 07 00    	ld	hl, +(_tile + 0x0007)
910   0063  DD 7E 06    	ld	a,(ix+6)
911   0066  77          	ld	(hl), a
912   0067  18 1D       	jr	l_player_init_00104
913   0069              l_player_init_00102:
914   0069  3E 03       	ld	a,0x03
915   006B  12          	ld	(de), a
916   006C  ED 5B 00 00 	ld	de,(_p_state)
917   0070  1A          	ld	a,(de)
918   0071  F6 08       	or	a,0x08
919   0073  12          	ld	(de), a
920   0074  ED 5B 00 00 	ld	de,(_p_state_a)
921   0078  1A          	ld	a,(de)
922   0079  F6 08       	or	a,0x08
923   007B  12          	ld	(de), a
924   007C  11 07 00    	ld	de,_tile+7
925   007F  0A          	ld	a, (bc)
926   0080  4F          	ld	c, a
927   0081  DD 7E 06    	ld	a,(ix+6)
928   0084  81          	add	a, c
929   0085  12          	ld	(de), a
930   0086              l_player_init_00104:
931   0086  DD E1       	pop	ix
932   0088  C9          	ret
933   0089              	SECTION code_compiler
934   0089              ;	---------------------------------
935   0089              ; Function player_turn
936   0089              ; ---------------------------------
937   0089              _player_turn:
938   0089  21 00 00    	ld	hl,_sprite
939   008C  CD 00 00    	call	_spr_chktime
940   008F  7D          	ld	a, l
941   0090  B7          	or	a, a
942   0091  CA 1B 01    	jp	Z, l_player_turn_00116
943   0094  CD 00 00    	call	_in_inkey
944   0097  7D          	ld	a,l
945   0098  D6 31       	sub	a,0x31
946   009A  4D          	ld	c,l
947   009B  20 14       	jr	NZ,l_player_turn_00104
948   009D  21 00 00    	ld	hl,_scr_curr
949   00A0  35          	dec	(hl)
950   00A1  21 00 00    	ld	hl,_game_round_up
951   00A4  36 01       	ld	(hl),0x01
952   00A6  3A 00 00    	ld	a,(_scr_curr)
953   00A9  3C          	inc	a
954   00AA  20 05       	jr	NZ,l_player_turn_00104
955   00AC  21 00 00    	ld	hl,_scr_curr
956   00AF  36 13       	ld	(hl),0x13
957   00B1              l_player_turn_00104:
958   00B1  79          	ld	a, c
959   00B2  D6 32       	sub	a,0x32
960   00B4  20 15       	jr	NZ,l_player_turn_00108
961   00B6  21 00 00    	ld	hl,_scr_curr
962   00B9  34          	inc	(hl)
963   00BA  21 00 00    	ld	hl,_game_round_up
964   00BD  36 01       	ld	(hl),0x01
965   00BF  3A 00 00    	ld	a,(_scr_curr)
966   00C2  D6 14       	sub	a,0x14
967   00C4  20 05       	jr	NZ,l_player_turn_00108
968   00C6  21 00 00    	ld	hl,_scr_curr
969   00C9  36 00       	ld	(hl),0x00
970   00CB              l_player_turn_00108:
971   00CB  2E 02       	ld	l,0x02
972   00CD  CD 00 00    	call	_zx_border_fastcall
973   00D0  21 00 00    	ld	hl,_k1
974   00D3  E5          	push	hl
975   00D4  2A 00 00    	ld	hl,(_joyfunc1)
976   00D7  CD 00 00    	call	___sdcc_call_hl
977   00DA  F1          	pop	af
978   00DB  7D          	ld	a,l
979   00DC  32 00 00    	ld	(_dirs),a
980   00DF  21 07 00    	ld	hl,+(_state + 0x0007)
981   00E2  22 00 00    	ld	(_p_state),hl
982   00E5  21 07 00    	ld	hl,+(_state_a + 0x0007)
983   00E8  22 00 00    	ld	(_p_state_a),hl
984   00EB  3A 07 00    	ld	a,(_lin + 0x0007)
985   00EE  32 00 00    	ld	(_s_lin0),a
986   00F1  3A 07 00    	ld	a,(_col + 0x0007)
987   00F4  32 00 00    	ld	(_s_col0),a
988   00F7  21 00 00    	ld	hl,_s_class
989   00FA  36 00       	ld	(hl),0x00
990   00FC  CD DB 02    	call	_player_move
991   00FF  CD 1C 01    	call	_player_collision
992   0102  21 00 00    	ld	hl,_player_killed
993   0105  7E          	ld	a, (hl)
994   0106  B7          	or	a, a
995   0107  28 12       	jr	Z,l_player_turn_00116
996   0109  36 00       	ld	(hl),0x00
997   010B  3A 00 00    	ld	a,(_game_inmune)
998   010E  B7          	or	a, a
999   010F  28 07       	jr	Z,l_player_turn_00110
1000  0111  2E 02       	ld	l,0x02
1001  0113  CD 00 00    	call	_zx_border_fastcall
1002  0116  18 03       	jr	l_player_turn_00116
1003  0118              l_player_turn_00110:
1004  0118  CD 97 07    	call	_player_lost_life
1005  011B              l_player_turn_00116:
1006  011B  C9          	ret
1007  011C              	SECTION code_compiler
1008  011C              ;	---------------------------------
1009  011C              ; Function player_collision
1010  011C              ; ---------------------------------
1011  011C              _player_collision:
1012  011C  21 07 00    	ld	hl,+(_col + 0x0007)
1013  011F  56          	ld	d, (hl)
1014  0120  21 07 00    	ld	hl,+(_lin + 0x0007)
1015  0123  5E          	ld	e, (hl)
1016  0124  D5          	push	de
1017  0125  CD 00 00    	call	_spr_calc_index
1018  0128  F1          	pop	af
1019  0129  22 00 00    	ld	(_index1),hl
1020  012C  01 00 00    	ld	bc,_scr_map
1021  012F  09          	add	hl,bc
1022  0130  7E          	ld	a,(hl)
1023  0131  32 00 00    	ld	(_v0),a
1024  0134  F5          	push	af
1025  0135  33          	inc	sp
1026  0136  CD CF 05    	call	_player_pick_deadly
1027  0139  33          	inc	sp
1028  013A  7D          	ld	a,l
1029  013B  32 00 00    	ld	(_v0),a
1030  013E  2A 00 00    	ld	hl,(_index1)
1031  0141  E5          	push	hl
1032  0142  F5          	push	af
1033  0143  33          	inc	sp
1034  0144  CD A1 05    	call	_player_pick_item
1035  0147  F1          	pop	af
1036  0148  33          	inc	sp
1037  0149  7D          	ld	a,l
1038  014A  32 00 00    	ld	(_v0),a
1039  014D  21 07 00    	ld	hl,+(_col + 0x0007)
1040  0150  56          	ld	d, (hl)
1041  0151  3A 07 00    	ld	a,(_lin + 0x0007)
1042  0154  C6 0E       	add	a,0x0e
1043  0156  5F          	ld	e, a
1044  0157  D5          	push	de
1045  0158  CD 00 00    	call	_spr_calc_index
1046  015B  F1          	pop	af
1047  015C  22 00 00    	ld	(_index1),hl
1048  015F  01 00 00    	ld	bc,_scr_map
1049  0162  09          	add	hl,bc
1050  0163  7E          	ld	a,(hl)
1051  0164  32 00 00    	ld	(_v0),a
1052  0167  F5          	push	af
1053  0168  33          	inc	sp
1054  0169  CD CF 05    	call	_player_pick_deadly
1055  016C  33          	inc	sp
1056  016D  7D          	ld	a,l
1057  016E  32 00 00    	ld	(_v0),a
1058  0171  2A 00 00    	ld	hl,(_index1)
1059  0174  E5          	push	hl
1060  0175  F5          	push	af
1061  0176  33          	inc	sp
1062  0177  CD A1 05    	call	_player_pick_item
1063  017A  F1          	pop	af
1064  017B  33          	inc	sp
1065  017C  7D          	ld	a,l
1066  017D  32 00 00    	ld	(_v0),a
1067  0180  21 07 00    	ld	hl,+(_col + 0x0007)
1068  0183  56          	ld	d, (hl)
1069  0184  14          	inc	d
1070  0185  21 07 00    	ld	hl,+(_lin + 0x0007)
1071  0188  5E          	ld	e, (hl)
1072  0189  D5          	push	de
1073  018A  CD 00 00    	call	_spr_calc_index
1074  018D  F1          	pop	af
1075  018E  22 00 00    	ld	(_index1),hl
1076  0191  01 00 00    	ld	bc,_scr_map
1077  0194  09          	add	hl,bc
1078  0195  7E          	ld	a,(hl)
1079  0196  32 00 00    	ld	(_v0),a
1080  0199  F5          	push	af
1081  019A  33          	inc	sp
1082  019B  CD CF 05    	call	_player_pick_deadly
1083  019E  33          	inc	sp
1084  019F  7D          	ld	a,l
1085  01A0  32 00 00    	ld	(_v0),a
1086  01A3  2A 00 00    	ld	hl,(_index1)
1087  01A6  E5          	push	hl
1088  01A7  F5          	push	af
1089  01A8  33          	inc	sp
1090  01A9  CD A1 05    	call	_player_pick_item
1091  01AC  F1          	pop	af
1092  01AD  33          	inc	sp
1093  01AE  7D          	ld	a,l
1094  01AF  32 00 00    	ld	(_v0),a
1095  01B2  21 07 00    	ld	hl,+(_col + 0x0007)
1096  01B5  56          	ld	d, (hl)
1097  01B6  14          	inc	d
1098  01B7  3A 07 00    	ld	a,(_lin + 0x0007)
1099  01BA  C6 0E       	add	a,0x0e
1100  01BC  5F          	ld	e, a
1101  01BD  D5          	push	de
1102  01BE  CD 00 00    	call	_spr_calc_index
1103  01C1  F1          	pop	af
1104  01C2  22 00 00    	ld	(_index1),hl
1105  01C5  01 00 00    	ld	bc,_scr_map
1106  01C8  09          	add	hl,bc
1107  01C9  7E          	ld	a,(hl)
1108  01CA  32 00 00    	ld	(_v0),a
1109  01CD  F5          	push	af
1110  01CE  33          	inc	sp
1111  01CF  CD CF 05    	call	_player_pick_deadly
1112  01D2  33          	inc	sp
1113  01D3  7D          	ld	a,l
1114  01D4  32 00 00    	ld	(_v0),a
1115  01D7  2A 00 00    	ld	hl,(_index1)
1116  01DA  E5          	push	hl
1117  01DB  F5          	push	af
1118  01DC  33          	inc	sp
1119  01DD  CD A1 05    	call	_player_pick_item
1120  01E0  F1          	pop	af
1121  01E1  33          	inc	sp
1122  01E2  7D          	ld	a,l
1123  01E3  32 00 00    	ld	(_v0),a
1124  01E6  21 00 00    	ld	hl,_i
1125  01E9  36 00       	ld	(hl),0x00
1126  01EB              l_player_collision_00108:
1127  01EB  2A 00 00    	ld	hl,(_i)
1128  01EE  26 00       	ld	h,0x00
1129  01F0  01 00 00    	ld	bc,_class
1130  01F3  09          	add	hl,bc
1131  01F4  7E          	ld	a,(hl)
1132  01F5  B7          	or	a,a
1133  01F6  28 4F       	jr	Z,l_player_collision_00109
1134  01F8  2A 00 00    	ld	hl,(_i)
1135  01FB  26 00       	ld	h,0x00
1136  01FD  01 00 00    	ld	bc,_col
1137  0200  09          	add	hl,bc
1138  0201  4E          	ld	c, (hl)
1139  0202  06 00       	ld	b,0x00
1140  0204  ED 5B 07 00 	ld	de,(_col + 0x0007)
1141  0208  50          	ld	d,b
1142  0209  79          	ld	a, c
1143  020A  93          	sub	a, e
1144  020B  6F          	ld	l, a
1145  020C  78          	ld	a, b
1146  020D  9A          	sbc	a, d
1147  020E  67          	ld	h, a
1148  020F  CD 00 00    	call	_abs_fastcall
1149  0212  7D          	ld	a,l
1150  0213  32 00 00    	ld	(_v0),a
1151  0216  D6 02       	sub	a,0x02
1152  0218  30 2D       	jr	NC,l_player_collision_00109
1153  021A  2A 00 00    	ld	hl,(_i)
1154  021D  26 00       	ld	h,0x00
1155  021F  01 00 00    	ld	bc,_lin
1156  0222  09          	add	hl,bc
1157  0223  4E          	ld	c,(hl)
1158  0224  06 00       	ld	b,0x00
1159  0226  ED 5B 07 00 	ld	de,(_lin + 0x0007)
1160  022A  50          	ld	d,b
1161  022B  79          	ld	a, c
1162  022C  93          	sub	a, e
1163  022D  6F          	ld	l, a
1164  022E  78          	ld	a, b
1165  022F  9A          	sbc	a, d
1166  0230  67          	ld	h, a
1167  0231  CD 00 00    	call	_abs_fastcall
1168  0234  7D          	ld	a,l
1169  0235  32 00 00    	ld	(_v1),a
1170  0238  D6 10       	sub	a,0x10
1171  023A  30 0B       	jr	NC,l_player_collision_00109
1172  023C  21 FF FF    	ld	hl,0xffff
1173  023F  22 00 00    	ld	(_player_kill_index),hl
1174  0242  21 00 00    	ld	hl,_player_killed
1175  0245  36 01       	ld	(hl),0x01
1176  0247              l_player_collision_00109:
1177  0247  21 00 00    	ld	hl,_i
1178  024A  7E          	ld	a,(hl)
1179  024B  3C          	inc	a
1180  024C  77          	ld	(hl),a
1181  024D  D6 07       	sub	a,0x07
1182  024F  38 9A       	jr	C,l_player_collision_00108
1183  0251  C9          	ret
1184  0252              	SECTION code_compiler
1185  0252              ;	---------------------------------
1186  0252              ; Function player_get_floor
1187  0252              ; ---------------------------------
1188  0252              _player_get_floor:
1189  0252  21 07 00    	ld	hl,+(_col + 0x0007)
1190  0255  56          	ld	d, (hl)
1191  0256  3A 07 00    	ld	a,(_lin + 0x0007)
1192  0259  C6 10       	add	a,0x10
1193  025B  5F          	ld	e, a
1194  025C  D5          	push	de
1195  025D  CD 00 00    	call	_spr_calc_index
1196  0260  F1          	pop	af
1197  0261  22 00 00    	ld	(_index1),hl
1198  0264  21 00 00    	ld	hl,_i
1199  0267  36 00       	ld	(hl),0x00
1200  0269  01 00 00    	ld	bc,_scr_map+0
1201  026C              l_player_get_floor_00111:
1202  026C  3A 00 00    	ld	a,(_i)
1203  026F  D6 10       	sub	a,0x10
1204  0271  30 65       	jr	NC,l_player_get_floor_00113
1205  0273  2A 00 00    	ld	hl,(_index1)
1206  0276  09          	add	hl,bc
1207  0277  7E          	ld	a,(hl)
1208  0278  32 00 00    	ld	(_v0),a
1209  027B  ED 5B 00 00 	ld	de,(_index1)
1210  027F  13          	inc	de
1211  0280  69          	ld	l, c
1212  0281  60          	ld	h, b
1213  0282  19          	add	hl, de
1214  0283  7E          	ld	a, (hl)
1215  0284  32 00 00    	ld	(_v1),a
1216  0287  3A 00 00    	ld	a,(_v0)
1217  028A  B7          	or	a, a
1218  028B  28 0F       	jr	Z,l_player_get_floor_00110
1219  028D  D6 08       	sub	a,0x08
1220  028F  28 0B       	jr	Z,l_player_get_floor_00110
1221  0291  3A 00 00    	ld	a,(_v0)
1222  0294  FE 05       	cp	a,0x05
1223  0296  28 04       	jr	Z,l_player_get_floor_00110
1224  0298  D6 06       	sub	a,0x06
1225  029A  20 25       	jr	NZ,l_player_get_floor_00102
1226  029C              l_player_get_floor_00110:
1227  029C  3A 00 00    	ld	a,(_v1)
1228  029F  B7          	or	a, a
1229  02A0  28 0F       	jr	Z,l_player_get_floor_00101
1230  02A2  D6 08       	sub	a,0x08
1231  02A4  28 0B       	jr	Z,l_player_get_floor_00101
1232  02A6  3A 00 00    	ld	a,(_v1)
1233  02A9  FE 05       	cp	a,0x05
1234  02AB  28 04       	jr	Z,l_player_get_floor_00101
1235  02AD  D6 06       	sub	a,0x06
1236  02AF  20 10       	jr	NZ,l_player_get_floor_00102
1237  02B1              l_player_get_floor_00101:
1238  02B1  2A 00 00    	ld	hl,(_index1)
1239  02B4  11 20 00    	ld	de,0x0020
1240  02B7  19          	add	hl,de
1241  02B8  22 00 00    	ld	(_index1),hl
1242  02BB  21 00 00    	ld	hl,_i
1243  02BE  34          	inc	(hl)
1244  02BF  18 AB       	jr	l_player_get_floor_00111
1245  02C1              l_player_get_floor_00102:
1246  02C1  2A 00 00    	ld	hl,(_index1)
1247  02C4  4D          	ld	c,l
1248  02C5  5C          	ld	e,h
1249  02C6  06 05       	ld	b,0x05
1250  02C8  79          	ld	a,c
1251  02C9              l_player_get_floor_00156:
1252  02C9  CB 3B       	srl	e
1253  02CB  1F          	rra
1254  02CC  10 FB       	djnz	l_player_get_floor_00156
1255  02CE  07          	rlca
1256  02CF  07          	rlca
1257  02D0  07          	rlca
1258  02D1  E6 F8       	and	a,0xf8
1259  02D3  C6 F0       	add	a,0xf0
1260  02D5  6F          	ld	l, a
1261  02D6  18 02       	jr	l_player_get_floor_00114
1262  02D8              l_player_get_floor_00113:
1263  02D8  2E 68       	ld	l,0x68
1264  02DA              l_player_get_floor_00114:
1265  02DA  C9          	ret
1266  02DB              	SECTION code_compiler
1267  02DB              ;	---------------------------------
1268  02DB              ; Function player_move
1269  02DB              ; ---------------------------------
1270  02DB              _player_move:
1271  02DB  2A 00 00    	ld	hl,(_p_state)
1272  02DE  7E          	ld	a,(hl)
1273  02DF  CB 47       	bit	0, a
1274  02E1  20 04       	jr	NZ,l_player_move_00104
1275  02E3  CB 4F       	bit	1, a
1276  02E5  28 08       	jr	Z,l_player_move_00105
1277  02E7              l_player_move_00104:
1278  02E7  CD 72 03    	call	_player_move_jump
1279  02EA  CD 00 00    	call	_spr_move_horizontal
1280  02ED  18 47       	jr	l_player_move_00106
1281  02EF              l_player_move_00105:
1282  02EF  CD 44 04    	call	_player_move_walk
1283  02F2  21 07 00    	ld	hl,+(_col + 0x0007)
1284  02F5  4E          	ld	c, (hl)
1285  02F6  3A 07 00    	ld	a,(_lin + 0x0007)
1286  02F9  C6 10       	add	a,0x10
1287  02FB  5F          	ld	e, a
1288  02FC  51          	ld	d,c
1289  02FD  D5          	push	de
1290  02FE  CD B6 06    	call	_player_check_floor_walk
1291  0301  F1          	pop	af
1292  0302  7D          	ld	a, l
1293  0303  B7          	or	a, a
1294  0304  28 30       	jr	Z,l_player_move_00106
1295  0306  21 07 00    	ld	hl,+(_col + 0x0007)
1296  0309  4E          	ld	c, (hl)
1297  030A  0C          	inc	c
1298  030B  3A 07 00    	ld	a,(_lin + 0x0007)
1299  030E  C6 10       	add	a,0x10
1300  0310  5F          	ld	e, a
1301  0311  51          	ld	d,c
1302  0312  D5          	push	de
1303  0313  CD B6 06    	call	_player_check_floor_walk
1304  0316  F1          	pop	af
1305  0317  7D          	ld	a, l
1306  0318  B7          	or	a, a
1307  0319  28 1B       	jr	Z,l_player_move_00106
1308  031B  CD 00 00    	call	_spr_move_horizontal
1309  031E  ED 4B 00 00 	ld	bc,(_p_state)
1310  0322  0A          	ld	a,(bc)
1311  0323  F6 02       	or	a,0x02
1312  0325  02          	ld	(bc),a
1313  0326  ED 4B 00 00 	ld	bc,(_p_state)
1314  032A  0A          	ld	a,(bc)
1315  032B  E6 F7       	and	a,0xf7
1316  032D  02          	ld	(bc),a
1317  032E  ED 4B 00 00 	ld	bc,(_p_state)
1318  0332  0A          	ld	a,(bc)
1319  0333  E6 FB       	and	a,0xfb
1320  0335  02          	ld	(bc), a
1321  0336              l_player_move_00106:
1322  0336  CD 00 00    	call	_spr_paint_player
1323  0339  2E 00       	ld	l,0x00
1324  033B  C9          	ret
1325  033C              	SECTION code_compiler
1326  033C              ;	---------------------------------
1327  033C              ; Function player_check_input
1328  033C              ; ---------------------------------
1329  033C              _player_check_input:
1330  033C  21 00 00    	ld	hl,_dirs
1331  033F  CB 56       	bit	2,(hl)
1332  0341  28 06       	jr	Z,l_player_check_input_00102
1333  0343  CB 5E       	bit	3,(hl)
1334  0345  28 02       	jr	Z,l_player_check_input_00102
1335  0347  36 00       	ld	(hl),0x00
1336  0349              l_player_check_input_00102:
1337  0349  2A 00 00    	ld	hl,(_p_state)
1338  034C  4E          	ld	c, (hl)
1339  034D  3A 00 00    	ld	a,(_dirs)
1340  0350  E6 80       	and	a,0x80
1341  0352  CB 61       	bit	4, c
1342  0354  28 07       	jr	Z,l_player_check_input_00111
1343  0356  B7          	or	a, a
1344  0357  28 16       	jr	Z,l_player_check_input_00112
1345  0359  2E 01       	ld	l,0x01
1346  035B  18 14       	jr	l_player_check_input_00113
1347  035D              l_player_check_input_00111:
1348  035D  21 00 00    	ld	hl,_dirs
1349  0360  CB 56       	bit	2,(hl)
1350  0362  20 07       	jr	NZ,l_player_check_input_00106
1351  0364  CB 5E       	bit	3, (hl)
1352  0366  20 03       	jr	NZ,l_player_check_input_00106
1353  0368  B7          	or	a, a
1354  0369  28 04       	jr	Z,l_player_check_input_00112
1355  036B              l_player_check_input_00106:
1356  036B  2E 01       	ld	l,0x01
1357  036D  18 02       	jr	l_player_check_input_00113
1358  036F              l_player_check_input_00112:
1359  036F  2E 00       	ld	l,0x00
1360  0371              l_player_check_input_00113:
1361  0371  C9          	ret
1362  0372              	SECTION code_compiler
1363  0372              ;	---------------------------------
1364  0372              ; Function player_move_jump
1365  0372              ; ---------------------------------
1366  0372              _player_move_jump:
1367  0372  CD 00 00    	call	___sdcc_enter_ix
1368  0375  3B          	dec	sp
1369  0376  2A 00 00    	ld	hl,(_player_vel_y)
1370  0379  ED 5B 00 00 	ld	de,(_game_gravity)
1371  037D  19          	add	hl,de
1372  037E  22 00 00    	ld	(_player_vel_y),hl
1373  0381  21 64 00    	ld	hl,0x0064
1374  0384  E5          	push	hl
1375  0385  2A 00 00    	ld	hl,(_player_vel_y)
1376  0388  E5          	push	hl
1377  0389  CD 00 00    	call	__divsint_callee
1378  038C  EB          	ex	de,hl
1379  038D  CB 43       	bit	0,e
1380  038F  21 00 00    	ld	hl,_s_lin1
1381  0392  73          	ld	(hl),e
1382  0393  28 04       	jr	Z,l_player_move_jump_00102
1383  0395  21 00 00    	ld	hl,_s_lin1
1384  0398  35          	dec	(hl)
1385  0399              l_player_move_jump_00102:
1386  0399  01 07 00    	ld	bc,_lin+7
1387  039C  0A          	ld	a, (bc)
1388  039D  DD 77 FF    	ld	(ix-1),a
1389  03A0  21 00 00    	ld	hl,_s_lin1
1390  03A3  86          	add	a, (hl)
1391  03A4  77          	ld	(hl), a
1392  03A5  AF          	xor	a, a
1393  03A6  BB          	cp	a, e
1394  03A7  9A          	sbc	a, d
1395  03A8  E2 AD 03    	jp	PO, l_player_move_jump_00142
1396  03AB  EE 80       	xor	a,0x80
1397  03AD              l_player_move_jump_00142:
1398  03AD  FA F8 03    	jp	M, l_player_move_jump_00113
1399  03B0  C5          	push	bc
1400  03B1  CD 00 00    	call	_spr_set_up
1401  03B4  C1          	pop	bc
1402  03B5  3E 80       	ld	a,0x80
1403  03B7  21 00 00    	ld	hl,_s_lin1
1404  03BA  96          	sub	a, (hl)
1405  03BB  30 02       	jr	NC,l_player_move_jump_00104
1406  03BD  36 00       	ld	(hl),0x00
1407  03BF              l_player_move_jump_00104:
1408  03BF  21 07 00    	ld	hl,+(_col + 0x0007)
1409  03C2  56          	ld	d, (hl)
1410  03C3  C5          	push	bc
1411  03C4  D5          	push	de
1412  03C5  33          	inc	sp
1413  03C6  3A 00 00    	ld	a,(_s_lin1)
1414  03C9  F5          	push	af
1415  03CA  33          	inc	sp
1416  03CB  CD 04 06    	call	_player_check_ceil
1417  03CE  F1          	pop	af
1418  03CF  C1          	pop	bc
1419  03D0  7D          	ld	a, l
1420  03D1  B7          	or	a, a
1421  03D2  20 18       	jr	NZ,l_player_move_jump_00106
1422  03D4  21 00 00    	ld	hl,0x0000
1423  03D7  22 00 00    	ld	(_player_vel_y),hl
1424  03DA  ED 4B 00 00 	ld	bc,(_p_state)
1425  03DE  0A          	ld	a,(bc)
1426  03DF  E6 FB       	and	a,0xfb
1427  03E1  02          	ld	(bc),a
1428  03E2  ED 4B 00 00 	ld	bc,(_p_state)
1429  03E6  0A          	ld	a,(bc)
1430  03E7  E6 F7       	and	a,0xf7
1431  03E9  02          	ld	(bc), a
1432  03EA  18 04       	jr	l_player_move_jump_00107
1433  03EC              l_player_move_jump_00106:
1434  03EC  3A 00 00    	ld	a,(_s_lin1)
1435  03EF  02          	ld	(bc), a
1436  03F0              l_player_move_jump_00107:
1437  03F0  3A 00 00    	ld	a,(_s_lin1)
1438  03F3  32 00 00    	ld	(_player_jump_top),a
1439  03F6  18 46       	jr	l_player_move_jump_00114
1440  03F8              l_player_move_jump_00113:
1441  03F8  C5          	push	bc
1442  03F9  CD 52 02    	call	_player_get_floor
1443  03FC  C1          	pop	bc
1444  03FD  7D          	ld	a,l
1445  03FE  32 00 00    	ld	(_v0),a
1446  0401  3E 68       	ld	a,0x68
1447  0403  21 00 00    	ld	hl,_s_lin1
1448  0406  96          	sub	a, (hl)
1449  0407  38 0E       	jr	C,l_player_move_jump_00108
1450  0409  7E          	ld	a, (hl)
1451  040A  21 00 00    	ld	hl,_v0
1452  040D  96          	sub	a, (hl)
1453  040E  38 25       	jr	C,l_player_move_jump_00109
1454  0410  7E          	ld	a, (hl)
1455  0411  21 00 00    	ld	hl,_s_lin0
1456  0414  96          	sub	a, (hl)
1457  0415  38 1E       	jr	C,l_player_move_jump_00109
1458  0417              l_player_move_jump_00108:
1459  0417  3A 00 00    	ld	a,(_v0)
1460  041A  02          	ld	(bc), a
1461  041B  21 00 00    	ld	hl,0x0000
1462  041E  22 00 00    	ld	(_player_vel_y),hl
1463  0421  ED 4B 00 00 	ld	bc,(_p_state)
1464  0425  0A          	ld	a,(bc)
1465  0426  E6 FD       	and	a,0xfd
1466  0428  02          	ld	(bc),a
1467  0429  ED 4B 00 00 	ld	bc,(_p_state)
1468  042D  0A          	ld	a,(bc)
1469  042E  E6 FE       	and	a,0xfe
1470  0430  02          	ld	(bc), a
1471  0431  2E 00       	ld	l,0x00
1472  0433  18 0B       	jr	l_player_move_jump_00115
1473  0435              l_player_move_jump_00109:
1474  0435  C5          	push	bc
1475  0436  CD 00 00    	call	_spr_set_down
1476  0439  C1          	pop	bc
1477  043A  3A 00 00    	ld	a,(_s_lin1)
1478  043D  02          	ld	(bc), a
1479  043E              l_player_move_jump_00114:
1480  043E  2E 01       	ld	l,0x01
1481  0440              l_player_move_jump_00115:
1482  0440  33          	inc	sp
1483  0441  DD E1       	pop	ix
1484  0443  C9          	ret
1485  0444              	SECTION code_compiler
1486  0444              ;	---------------------------------
1487  0444              ; Function player_move_walk
1488  0444              ; ---------------------------------
1489  0444              _player_move_walk:
1490  0444  CD 3C 03    	call	_player_check_input
1491  0447  7D          	ld	a,l
1492  0448  B7          	or	a,a
1493  0449  CA F5 04    	jp	Z, l_player_move_walk_00126
1494  044C  21 00 00    	ld	hl,_dirs
1495  044F  CB 7E       	bit	7, (hl)
1496  0451  CA CF 04    	jp	Z,l_player_move_walk_00115
1497  0454  21 07 00    	ld	hl,+(_col + 0x0007)
1498  0457  56          	ld	d, (hl)
1499  0458  21 07 00    	ld	hl,+(_lin + 0x0007)
1500  045B  46          	ld	b, (hl)
1501  045C  05          	dec	b
1502  045D  05          	dec	b
1503  045E  58          	ld	e,b
1504  045F  D5          	push	de
1505  0460  CD 04 06    	call	_player_check_ceil
1506  0463  F1          	pop	af
1507  0464  7D          	ld	a, l
1508  0465  B7          	or	a, a
1509  0466  28 63       	jr	Z,l_player_move_walk_00113
1510  0468  21 00 00    	ld	hl,_player_vel_inc
1511  046B  36 01       	ld	(hl),0x01
1512  046D  21 00 00    	ld	hl,_player_jumpcount
1513  0470  36 FF       	ld	(hl),0xff
1514  0472  CD 00 00    	call	_audio_salto
1515  0475  CD 00 00    	call	_spr_set_up
1516  0478  3A 07 00    	ld	a,(_lin + 0x0007)
1517  047B  32 07 00    	ld	(_jump_lin+7),a
1518  047E  2A 00 00    	ld	hl,(_player_vel_y0)
1519  0481  22 00 00    	ld	(_player_vel_y),hl
1520  0484  ED 4B 00 00 	ld	bc,(_p_state)
1521  0488  0A          	ld	a,(bc)
1522  0489  E6 F7       	and	a,0xf7
1523  048B  02          	ld	(bc),a
1524  048C  ED 4B 00 00 	ld	bc,(_p_state)
1525  0490  0A          	ld	a,(bc)
1526  0491  E6 FB       	and	a,0xfb
1527  0493  02          	ld	(bc),a
1528  0494  2A 00 00    	ld	hl,(_p_state)
1529  0497  CB 66       	bit	4,(hl)
1530  0499  28 14       	jr	Z,l_player_move_walk_00110
1531  049B  3A 00 00    	ld	a,(_game_conveyor_dir)
1532  049E  3C          	inc	a
1533  049F  20 03       	jr	NZ,l_player_move_walk_00102
1534  04A1  CD 00 00    	call	_spr_set_left
1535  04A4              l_player_move_walk_00102:
1536  04A4  3A 00 00    	ld	a,(_game_conveyor_dir)
1537  04A7  3D          	dec	a
1538  04A8  20 19       	jr	NZ,l_player_move_walk_00111
1539  04AA  CD 00 00    	call	_spr_set_right
1540  04AD  18 14       	jr	l_player_move_walk_00111
1541  04AF              l_player_move_walk_00110:
1542  04AF  21 00 00    	ld	hl,_dirs
1543  04B2  CB 56       	bit	2, (hl)
1544  04B4  28 03       	jr	Z,l_player_move_walk_00106
1545  04B6  CD 00 00    	call	_spr_set_left
1546  04B9              l_player_move_walk_00106:
1547  04B9  21 00 00    	ld	hl,_dirs
1548  04BC  CB 5E       	bit	3, (hl)
1549  04BE  28 03       	jr	Z,l_player_move_walk_00111
1550  04C0  CD 00 00    	call	_spr_set_right
1551  04C3              l_player_move_walk_00111:
1552  04C3  21 08 04    	ld	hl,0x0408
1553  04C6  E5          	push	hl
1554  04C7  CD 67 05    	call	_player_tile
1555  04CA  F1          	pop	af
1556  04CB              l_player_move_walk_00113:
1557  04CB  2E 01       	ld	l,0x01
1558  04CD  18 65       	jr	l_player_move_walk_00128
1559  04CF              l_player_move_walk_00115:
1560  04CF  21 00 00    	ld	hl,_dirs
1561  04D2  CB 5E       	bit	3, (hl)
1562  04D4  28 06       	jr	Z,l_player_move_walk_00117
1563  04D6  CD 00 00    	call	_spr_set_right
1564  04D9  CD 00 00    	call	_spr_move_horizontal
1565  04DC              l_player_move_walk_00117:
1566  04DC  21 00 00    	ld	hl,_dirs
1567  04DF  CB 56       	bit	2, (hl)
1568  04E1  28 06       	jr	Z,l_player_move_walk_00119
1569  04E3  CD 00 00    	call	_spr_set_left
1570  04E6  CD 00 00    	call	_spr_move_horizontal
1571  04E9              l_player_move_walk_00119:
1572  04E9  21 08 04    	ld	hl,0x0408
1573  04EC  E5          	push	hl
1574  04ED  CD 67 05    	call	_player_tile
1575  04F0  F1          	pop	af
1576  04F1  2E 01       	ld	l,0x01
1577  04F3  18 3F       	jr	l_player_move_walk_00128
1578  04F5              l_player_move_walk_00126:
1579  04F5  ED 4B 00 00 	ld	bc,(_p_state)
1580  04F9  0A          	ld	a,(bc)
1581  04FA  E6 F7       	and	a,0xf7
1582  04FC  02          	ld	(bc),a
1583  04FD  ED 4B 00 00 	ld	bc,(_p_state)
1584  0501  0A          	ld	a,(bc)
1585  0502  E6 FB       	and	a,0xfb
1586  0504  02          	ld	(bc),a
1587  0505  ED 4B 00 00 	ld	bc,(_p_state)
1588  0509  0A          	ld	a,(bc)
1589  050A  CB 67       	bit	4,a
1590  050C  28 24       	jr	Z,l_player_move_walk_00127
1591  050E  5F          	ld	e,a
1592  050F  3A 00 00    	ld	a,(_game_conveyor_dir)
1593  0512  3C          	inc	a
1594  0513  20 0E       	jr	NZ,l_player_move_walk_00121
1595  0515  7B          	ld	a, e
1596  0516  F6 08       	or	a,0x08
1597  0518  02          	ld	(bc), a
1598  0519  21 08 04    	ld	hl,0x0408
1599  051C  E5          	push	hl
1600  051D  CD 67 05    	call	_player_tile
1601  0520  F1          	pop	af
1602  0521  18 0C       	jr	l_player_move_walk_00122
1603  0523              l_player_move_walk_00121:
1604  0523  7B          	ld	a, e
1605  0524  F6 04       	or	a,0x04
1606  0526  02          	ld	(bc), a
1607  0527  21 08 04    	ld	hl,0x0408
1608  052A  E5          	push	hl
1609  052B  CD 67 05    	call	_player_tile
1610  052E  F1          	pop	af
1611  052F              l_player_move_walk_00122:
1612  052F  CD 00 00    	call	_spr_move_horizontal
1613  0532              l_player_move_walk_00127:
1614  0532  2E 00       	ld	l,0x00
1615  0534              l_player_move_walk_00128:
1616  0534  C9          	ret
1617  0535              	SECTION code_compiler
1618  0535              ;	---------------------------------
1619  0535              ; Function player_1up
1620  0535              ; ---------------------------------
1621  0535              _player_1up:
1622  0535  21 00 00    	ld	hl,_player_lives
1623  0538  7E          	ld	a, (hl)
1624  0539  D6 64       	sub	a,0x64
1625  053B  D0          	ret	NC
1626  053C  34          	inc	(hl)
1627  053D  CD 00 00    	call	_spr_flatten
1628  0540  21 00 00    	ld	hl,___str_0
1629  0543  E5          	push	hl
1630  0544  21 0C 0C    	ld	hl,0x0c0c
1631  0547  E5          	push	hl
1632  0548  CD 00 00    	call	_zx_print_str
1633  054B  AF          	xor	a, a
1634  054C  F5          	push	af
1635  054D  33          	inc	sp
1636  054E  21 19 00    	ld	hl,0x0019
1637  0551  E5          	push	hl
1638  0552  21 0C 11    	ld	hl,0x110c
1639  0555  E5          	push	hl
1640  0556  3E 0C       	ld	a,0x0c
1641  0558  F5          	push	af
1642  0559  33          	inc	sp
1643  055A  CD 00 00    	call	_game_colour_message
1644  055D  F1          	pop	af
1645  055E  F1          	pop	af
1646  055F  F1          	pop	af
1647  0560  CD 00 00    	call	_game_update_stats
1648  0563  CD 00 00    	call	_spr_unflattenP1
1649  0566  C9          	ret
1650  0567              	SECTION rodata_compiler
1651  0000              ___str_0:
1652  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1653  0005  00          	DEFB 0x00
1654  0006              	SECTION code_compiler
1655  0567              ;	---------------------------------
1656  0567              ; Function player_tile
1657  0567              ; ---------------------------------
1658  0567              _player_tile:
1659  0567  CD 00 00    	call	___sdcc_enter_ix
1660  056A  21 05 00    	ld	hl,0x0005
1661  056D  39          	add	hl, sp
1662  056E  EB          	ex	de,hl
1663  056F  21 04 00    	ld	hl,0x0004
1664  0572  39          	add	hl, sp
1665  0573  D5          	push	de
1666  0574  E5          	push	hl
1667  0575  CD 00 00    	call	_spr_get_tile_dir
1668  0578  F1          	pop	af
1669  0579  F1          	pop	af
1670  057A  7D          	ld	a,l
1671  057B  32 07 00    	ld	((_tile + 0x0007)),a
1672  057E  DD E1       	pop	ix
1673  0580  C9          	ret
1674  0581              	SECTION code_compiler
1675  0581              ;	---------------------------------
1676  0581              ; Function player_score_add
1677  0581              ; ---------------------------------
1678  0581              _player_score_add:
1679  0581  ED 4B 00 00 	ld	bc,(_player_score)
1680  0585  09          	add	hl,bc
1681  0586  22 00 00    	ld	(_player_score),hl
1682  0589  3A 00 00    	ld	a,(_game_score_top)
1683  058C  21 00 00    	ld	hl,_player_score
1684  058F  96          	sub	a, (hl)
1685  0590  3A 01 00    	ld	a,(_game_score_top + 1)
1686  0593  23          	inc	hl
1687  0594  9E          	sbc	a, (hl)
1688  0595  D2 00 00    	jp	NC,_game_print_score
1689  0598  2A 00 00    	ld	hl,(_player_score)
1690  059B  22 00 00    	ld	(_game_score_top),hl
1691  059E  C3 00 00    	jp  _game_print_score
1692  05A1              	SECTION code_compiler
1693  05A1              ;	---------------------------------
1694  05A1              ; Function player_pick_item
1695  05A1              ; ---------------------------------
1696  05A1              _player_pick_item:
1697  05A1  CD 00 00    	call	___sdcc_enter_ix
1698  05A4  DD 7E 04    	ld	a,(ix+4)
1699  05A7  D6 08       	sub	a,0x08
1700  05A9  20 1E       	jr	NZ,l_player_pick_item_00102
1701  05AB  3E 00       	ld	a, +((_scr_map) & 0xFF)
1702  05AD  DD 86 05    	add	a,(ix+5)
1703  05B0  4F          	ld	c, a
1704  05B1  3E 00       	ld	a, +((_scr_map) / 256)
1705  05B3  DD 8E 06    	adc	a,(ix+6)
1706  05B6  47          	ld	b, a
1707  05B7  AF          	xor	a, a
1708  05B8  02          	ld	(bc), a
1709  05B9  21 00 00    	ld	hl,_player_coins
1710  05BC  34          	inc	(hl)
1711  05BD  2E 06       	ld	l,0x06
1712  05BF  CD 00 00    	call	_zx_border_fastcall
1713  05C2  CD 00 00    	call	_audio_coin
1714  05C5  2E 00       	ld	l,0x00
1715  05C7  18 03       	jr	l_player_pick_item_00103
1716  05C9              l_player_pick_item_00102:
1717  05C9  DD 6E 04    	ld	l,(ix+4)
1718  05CC              l_player_pick_item_00103:
1719  05CC  DD E1       	pop	ix
1720  05CE  C9          	ret
1721  05CF              	SECTION code_compiler
1722  05CF              ;	---------------------------------
1723  05CF              ; Function player_pick_deadly
1724  05CF              ; ---------------------------------
1725  05CF              _player_pick_deadly:
1726  05CF  CD 00 00    	call	___sdcc_enter_ix
1727  05D2  DD 7E 04    	ld	a,(ix+4)
1728  05D5  D6 05       	sub	a,0x05
1729  05D7  28 07       	jr	Z,l_player_pick_deadly_00101
1730  05D9  DD 7E 04    	ld	a,(ix+4)
1731  05DC  D6 06       	sub	a,0x06
1732  05DE  20 1E       	jr	NZ,l_player_pick_deadly_00102
1733  05E0              l_player_pick_deadly_00101:
1734  05E0  21 00 00    	ld	hl,_player_killed
1735  05E3  36 01       	ld	(hl),0x01
1736  05E5  2A 00 00    	ld	hl,(_index1)
1737  05E8  22 00 00    	ld	(_player_kill_index),hl
1738  05EB  2E 02       	ld	l,0x02
1739  05ED  CD 00 00    	call	_zx_border_fastcall
1740  05F0  21 00 00    	ld	hl,_v0
1741  05F3  36 00       	ld	(hl),0x00
1742  05F5  21 00 00    	ld	hl,_v1
1743  05F8  36 00       	ld	(hl),0x00
1744  05FA  2E 00       	ld	l,0x00
1745  05FC  18 03       	jr	l_player_pick_deadly_00104
1746  05FE              l_player_pick_deadly_00102:
1747  05FE  DD 6E 04    	ld	l,(ix+4)
1748  0601              l_player_pick_deadly_00104:
1749  0601  DD E1       	pop	ix
1750  0603  C9          	ret
1751  0604              	SECTION code_compiler
1752  0604              ;	---------------------------------
1753  0604              ; Function player_check_ceil
1754  0604              ; ---------------------------------
1755  0604              _player_check_ceil:
1756  0604  CD 00 00    	call	___sdcc_enter_ix
1757  0607  3A 07 00    	ld	a,(_colint + 0x0007)
1758  060A  D6 03       	sub	a,0x03
1759  060C  30 18       	jr	NC,l_player_check_ceil_00102
1760  060E  DD 66 05    	ld	h,(ix+5)
1761  0611  DD 6E 04    	ld	l,(ix+4)
1762  0614  E5          	push	hl
1763  0615  CD 00 00    	call	_spr_calc_index
1764  0618  F1          	pop	af
1765  0619  22 00 00    	ld	(_index1),hl
1766  061C  01 00 00    	ld	bc,_scr_map
1767  061F  09          	add	hl,bc
1768  0620  7E          	ld	a,(hl)
1769  0621  32 00 00    	ld	(_v0),a
1770  0624  18 05       	jr	l_player_check_ceil_00103
1771  0626              l_player_check_ceil_00102:
1772  0626  21 00 00    	ld	hl,_v0
1773  0629  36 00       	ld	(hl),0x00
1774  062B              l_player_check_ceil_00103:
1775  062B  3A 07 00    	ld	a,(_colint + 0x0007)
1776  062E  B7          	or	a, a
1777  062F  28 19       	jr	Z,l_player_check_ceil_00105
1778  0631  DD 46 05    	ld	b,(ix+5)
1779  0634  04          	inc	b
1780  0635  DD 4E 04    	ld	c,(ix+4)
1781  0638  C5          	push	bc
1782  0639  CD 00 00    	call	_spr_calc_index
1783  063C  F1          	pop	af
1784  063D  22 00 00    	ld	(_index1),hl
1785  0640  01 00 00    	ld	bc,_scr_map
1786  0643  09          	add	hl,bc
1787  0644  7E          	ld	a,(hl)
1788  0645  32 00 00    	ld	(_v1),a
1789  0648  18 05       	jr	l_player_check_ceil_00106
1790  064A              l_player_check_ceil_00105:
1791  064A  21 00 00    	ld	hl,_v1
1792  064D  36 00       	ld	(hl),0x00
1793  064F              l_player_check_ceil_00106:
1794  064F  3A 00 00    	ld	a,(_v0)
1795  0652  D6 03       	sub	a,0x03
1796  0654  28 0B       	jr	Z,l_player_check_ceil_00108
1797  0656  3A 00 00    	ld	a,(_v1)
1798  0659  D6 03       	sub	a,0x03
1799  065B  28 04       	jr	Z,l_player_check_ceil_00108
1800  065D  2E 01       	ld	l,0x01
1801  065F  18 02       	jr	l_player_check_ceil_00110
1802  0661              l_player_check_ceil_00108:
1803  0661  2E 00       	ld	l,0x00
1804  0663              l_player_check_ceil_00110:
1805  0663  DD E1       	pop	ix
1806  0665  C9          	ret
1807  0666              	SECTION code_compiler
1808  0666              ;	---------------------------------
1809  0666              ; Function player_check_floor_jump
1810  0666              ; ---------------------------------
1811  0666              _player_check_floor_jump:
1812  0666  CD 00 00    	call	___sdcc_enter_ix
1813  0669  DD 7E 04    	ld	a,(ix+4)
1814  066C  C6 12       	add	a,0x12
1815  066E  47          	ld	b, a
1816  066F  DD 7E 05    	ld	a,(ix+5)
1817  0672  48          	ld	c,b
1818  0673  47          	ld	b,a
1819  0674  C5          	push	bc
1820  0675  CD 00 00    	call	_spr_calc_index
1821  0678  F1          	pop	af
1822  0679  22 00 00    	ld	(_index1),hl
1823  067C  01 00 00    	ld	bc,_scr_map
1824  067F  09          	add	hl,bc
1825  0680  7E          	ld	a,(hl)
1826  0681  32 00 00    	ld	(_v0),a
1827  0684  B7          	or	a,a
1828  0685  28 0F       	jr	Z,l_player_check_floor_jump_00101
1829  0687  D6 08       	sub	a,0x08
1830  0689  28 0B       	jr	Z,l_player_check_floor_jump_00101
1831  068B  3A 00 00    	ld	a,(_v0)
1832  068E  FE 05       	cp	a,0x05
1833  0690  28 04       	jr	Z,l_player_check_floor_jump_00101
1834  0692  D6 06       	sub	a,0x06
1835  0694  20 04       	jr	NZ,l_player_check_floor_jump_00102
1836  0696              l_player_check_floor_jump_00101:
1837  0696  2E 00       	ld	l,0x00
1838  0698  18 19       	jr	l_player_check_floor_jump_00109
1839  069A              l_player_check_floor_jump_00102:
1840  069A  ED 4B 00 00 	ld	bc,(_p_state)
1841  069E  0A          	ld	a,(bc)
1842  069F  5F          	ld	e,a
1843  06A0  3A 00 00    	ld	a,(_v0)
1844  06A3  D6 04       	sub	a,0x04
1845  06A5  20 06       	jr	NZ,l_player_check_floor_jump_00107
1846  06A7  7B          	ld	a, e
1847  06A8  F6 10       	or	a,0x10
1848  06AA  02          	ld	(bc), a
1849  06AB  18 04       	jr	l_player_check_floor_jump_00108
1850  06AD              l_player_check_floor_jump_00107:
1851  06AD  CB A3       	res	4, e
1852  06AF  7B          	ld	a, e
1853  06B0  02          	ld	(bc), a
1854  06B1              l_player_check_floor_jump_00108:
1855  06B1  2E 01       	ld	l,0x01
1856  06B3              l_player_check_floor_jump_00109:
1857  06B3  DD E1       	pop	ix
1858  06B5  C9          	ret
1859  06B6              	SECTION code_compiler
1860  06B6              ;	---------------------------------
1861  06B6              ; Function player_check_floor_walk
1862  06B6              ; ---------------------------------
1863  06B6              _player_check_floor_walk:
1864  06B6  CD 00 00    	call	___sdcc_enter_ix
1865  06B9  F5          	push	af
1866  06BA  3B          	dec	sp
1867  06BB  DD 66 05    	ld	h,(ix+5)
1868  06BE  DD 6E 04    	ld	l,(ix+4)
1869  06C1  E5          	push	hl
1870  06C2  CD 00 00    	call	_spr_calc_index
1871  06C5  F1          	pop	af
1872  06C6  22 00 00    	ld	(_index1),hl
1873  06C9  3E 00       	ld	a,+((_scr_map) & 0xFF)
1874  06CB  21 00 00    	ld	hl,_index1
1875  06CE  86          	add	a, (hl)
1876  06CF  DD 77 FD    	ld	(ix-3),a
1877  06D2  3E 00       	ld	a, +((_scr_map) / 256)
1878  06D4  23          	inc	hl
1879  06D5  8E          	adc	a, (hl)
1880  06D6  DD 77 FE    	ld	(ix-2),a
1881  06D9  E1          	pop	hl
1882  06DA  4E          	ld	c,(hl)
1883  06DB  E5          	push	hl
1884  06DC  21 00 00    	ld	hl,_v0
1885  06DF  71          	ld	(hl),c
1886  06E0  79          	ld	a,c
1887  06E1  B7          	or	a, a
1888  06E2  28 0F       	jr	Z,l_player_check_floor_walk_00101
1889  06E4  D6 08       	sub	a,0x08
1890  06E6  28 0B       	jr	Z,l_player_check_floor_walk_00101
1891  06E8  3A 00 00    	ld	a,(_v0)
1892  06EB  FE 05       	cp	a,0x05
1893  06ED  28 04       	jr	Z,l_player_check_floor_walk_00101
1894  06EF  D6 06       	sub	a,0x06
1895  06F1  20 05       	jr	NZ,l_player_check_floor_walk_00102
1896  06F3              l_player_check_floor_walk_00101:
1897  06F3  2E 01       	ld	l,0x01
1898  06F5  C3 92 07    	jp	l_player_check_floor_walk_00117
1899  06F8              l_player_check_floor_walk_00102:
1900  06F8  3A 00 00    	ld	a,(_v0)
1901  06FB  D6 02       	sub	a,0x02
1902  06FD  20 04       	jr	NZ,l_player_check_floor_walk_00151
1903  06FF  3E 01       	ld	a,0x01
1904  0701  18 01       	jr	l_player_check_floor_walk_00152
1905  0703              l_player_check_floor_walk_00151:
1906  0703  AF          	xor	a,a
1907  0704              l_player_check_floor_walk_00152:
1908  0704  5F          	ld	e,a
1909  0705  B7          	or	a, a
1910  0706  20 07       	jr	NZ,l_player_check_floor_walk_00111
1911  0708  3A 00 00    	ld	a,(_v0)
1912  070B  D6 09       	sub	a,0x09
1913  070D  38 59       	jr	C,l_player_check_floor_walk_00112
1914  070F              l_player_check_floor_walk_00111:
1915  070F  DD 7E 05    	ld	a,(ix+5)
1916  0712  32 00 00    	ld	(_s_col1),a
1917  0715  7B          	ld	a, e
1918  0716  B7          	or	a, a
1919  0717  28 06       	jr	Z,l_player_check_floor_walk_00109
1920  0719  E1          	pop	hl
1921  071A  E5          	push	hl
1922  071B  36 09       	ld	(hl),0x09
1923  071D  18 13       	jr	l_player_check_floor_walk_00110
1924  071F              l_player_check_floor_walk_00109:
1925  071F  0C          	inc	c
1926  0720  E1          	pop	hl
1927  0721  E5          	push	hl
1928  0722  71          	ld	(hl), c
1929  0723  01 00 00    	ld	bc,_scr_map
1930  0726  2A 00 00    	ld	hl,(_index1)
1931  0729  09          	add	hl,bc
1932  072A  5E          	ld	e,(hl)
1933  072B  3E 0F       	ld	a,0x0f
1934  072D  93          	sub	a,e
1935  072E  30 02       	jr	NC,l_player_check_floor_walk_00110
1936  0730  AF          	xor	a,a
1937  0731  77          	ld	(hl),a
1938  0732              l_player_check_floor_walk_00110:
1939  0732  DD 7E 04    	ld	a,(ix+4)
1940  0735  0F          	rrca
1941  0736  0F          	rrca
1942  0737  0F          	rrca
1943  0738  E6 1F       	and	a,0x1f
1944  073A  21 00 00    	ld	hl,_s_lin1
1945  073D  77          	ld	(hl),a
1946  073E  07          	rlca
1947  073F  07          	rlca
1948  0740  07          	rlca
1949  0741  E6 F8       	and	a,0xf8
1950  0743  77          	ld	(hl),a
1951  0744  0F          	rrca
1952  0745  0F          	rrca
1953  0746  0F          	rrca
1954  0747  E6 1F       	and	a,0x1f
1955  0749  3C          	inc	a
1956  074A  32 00 00    	ld	(_s_row1),a
1957  074D  07          	rlca
1958  074E  07          	rlca
1959  074F  07          	rlca
1960  0750  E6 F8       	and	a,0xf8
1961  0752  4F          	ld	c, a
1962  0753  11 00 00    	ld	de,_scr_map
1963  0756  2A 00 00    	ld	hl,(_index1)
1964  0759  19          	add	hl,de
1965  075A  6E          	ld	l, (hl)
1966  075B  3A 00 00    	ld	a,(_s_col1)
1967  075E  EB          	ex	de,hl
1968  075F  F5          	push	af
1969  0760  33          	inc	sp
1970  0761  51          	ld	d,c
1971  0762  D5          	push	de
1972  0763  CD 00 00    	call	_game_sprite_draw8
1973  0766  F1          	pop	af
1974  0767  33          	inc	sp
1975  0768              l_player_check_floor_walk_00112:
1976  0768  11 FD FF    	ld	de,-3
1977  076B  21 00 00    	ld	hl,_p_state
1978  076E  CD 00 00    	call	____sdcc_2_copy_src_mhl_dst_deix
1979  0771  E1          	pop	hl
1980  0772  7E          	ld	a,(hl)
1981  0773  E5          	push	hl
1982  0774  DD 77 FF    	ld	(ix-1),a
1983  0777  3A 00 00    	ld	a,(_v0)
1984  077A  D6 04       	sub	a,0x04
1985  077C  20 0A       	jr	NZ,l_player_check_floor_walk_00115
1986  077E  DD 7E FF    	ld	a,(ix-1)
1987  0781  F6 10       	or	a,0x10
1988  0783  E1          	pop	hl
1989  0784  E5          	push	hl
1990  0785  77          	ld	(hl), a
1991  0786  18 08       	jr	l_player_check_floor_walk_00116
1992  0788              l_player_check_floor_walk_00115:
1993  0788  DD 4E FF    	ld	c,(ix-1)
1994  078B  CB A1       	res	4, c
1995  078D  E1          	pop	hl
1996  078E  E5          	push	hl
1997  078F  71          	ld	(hl), c
1998  0790              l_player_check_floor_walk_00116:
1999  0790  2E 00       	ld	l,0x00
2000  0792              l_player_check_floor_walk_00117:
2001  0792  DD F9       	ld	sp, ix
2002  0794  DD E1       	pop	ix
2003  0796  C9          	ret
2004  0797              	SECTION code_compiler
2005  0797              ;	---------------------------------
2006  0797              ; Function player_lost_life
2007  0797              ; ---------------------------------
2008  0797              _player_lost_life:
2009  0797  CD 00 00    	call	___sdcc_enter_ix
2010  079A  F5          	push	af
2011  079B  CD 00 00    	call	_ay_reset
2012  079E  CD 00 00    	call	_audio_explosion
2013  07A1  CD 00 00    	call	_game_update_stats
2014  07A4  4F          	ld	c, a
2015  07A5              l_player_lost_life_00104:
2016  07A5  79          	ld	a, c
2017  07A6  D6 20       	sub	a,0x20
2018  07A8  30 7C       	jr	NC,l_player_lost_life_00106
2019  07AA  21 00 00    	ld	hl,_player_kill_index
2020  07AD  7E          	ld	a, (hl)
2021  07AE  3C          	inc	a
2022  07AF  20 05       	jr	NZ,l_player_lost_life_00147
2023  07B1  23          	inc	hl
2024  07B2  7E          	ld	a, (hl)
2025  07B3  3C          	inc	a
2026  07B4  28 3D       	jr	Z,l_player_lost_life_00102
2027  07B6              l_player_lost_life_00147:
2028  07B6  2A 00 00    	ld	hl,(_player_kill_index)
2029  07B9  22 00 00    	ld	(_index1),hl
2030  07BC  21 07 00    	ld	hl,+(_col + 0x0007)
2031  07BF  56          	ld	d, (hl)
2032  07C0  3A 07 00    	ld	a,(_lin + 0x0007)
2033  07C3  C6 10       	add	a,0x10
2034  07C5  5F          	ld	e, a
2035  07C6  3A 07 00    	ld	a,(_tile + 0x0007)
2036  07C9  DD 77 FF    	ld	(ix-1),a
2037  07CC  2A 07 00    	ld	hl,(_colint + 0x0007)
2038  07CF  DD 7E FF    	ld	a,(ix-1)
2039  07D2  85          	add	a, l
2040  07D3  47          	ld	b, a
2041  07D4  C5          	push	bc
2042  07D5  D5          	push	de
2043  07D6  0E 07       	ld	c,0x07
2044  07D8  C5          	push	bc
2045  07D9  CD 00 00    	call	_NIRVANAP_spriteT_callee
2046  07DC  C1          	pop	bc
2047  07DD  76          	halt
2048  07DE  C5          	push	bc
2049  07DF  21 00 00    	ld	hl,0x0000
2050  07E2  E5          	push	hl
2051  07E3  2E 07       	ld	l,0x07
2052  07E5  E5          	push	hl
2053  07E6  CD 00 00    	call	_NIRVANAP_spriteT_callee
2054  07E9  C1          	pop	bc
2055  07EA  76          	halt
2056  07EB  C5          	push	bc
2057  07EC  CD 00 00    	call	_game_cell_paint_index
2058  07EF  C1          	pop	bc
2059  07F0  76          	halt
2060  07F1  18 2A       	jr	l_player_lost_life_00103
2061  07F3              l_player_lost_life_00102:
2062  07F3  21 07 00    	ld	hl,+(_col + 0x0007)
2063  07F6  46          	ld	b, (hl)
2064  07F7  3A 07 00    	ld	a,(_lin + 0x0007)
2065  07FA  C6 10       	add	a,0x10
2066  07FC  57          	ld	d, a
2067  07FD  3A 07 00    	ld	a,(_tile + 0x0007)
2068  0800  2A 07 00    	ld	hl, (_colint + 0x0007)
2069  0803  85          	add	a, l
2070  0804  C5          	push	bc
2071  0805  4A          	ld	c, d
2072  0806  C5          	push	bc
2073  0807  57          	ld	d,a
2074  0808  1E 07       	ld	e,0x07
2075  080A  D5          	push	de
2076  080B  CD 00 00    	call	_NIRVANAP_spriteT_callee
2077  080E  C1          	pop	bc
2078  080F  76          	halt
2079  0810  C5          	push	bc
2080  0811  21 00 00    	ld	hl,0x0000
2081  0814  E5          	push	hl
2082  0815  2E 07       	ld	l,0x07
2083  0817  E5          	push	hl
2084  0818  CD 00 00    	call	_NIRVANAP_spriteT_callee
2085  081B  C1          	pop	bc
2086  081C  76          	halt
2087  081D              l_player_lost_life_00103:
2088  081D  C5          	push	bc
2089  081E  CD 00 00    	call	_game_rotate_attrib
2090  0821  C1          	pop	bc
2091  0822  0C          	inc	c
2092  0823  C3 A5 07    	jp	l_player_lost_life_00104
2093  0826              l_player_lost_life_00106:
2094  0826  3A 07 00    	ld	a,(_lin + 0x0007)
2095  0829  32 00 00    	ld	(_s_lin0),a
2096  082C  3A 07 00    	ld	a,(_col + 0x0007)
2097  082F  32 00 00    	ld	(_s_col0),a
2098  0832  CD 00 00    	call	_spr_init_effects
2099  0835  06 00       	ld	b,0x00
2100  0837              l_player_lost_life_00113:
2101  0837  C5          	push	bc
2102  0838  21 00 00    	ld	hl,0x0000
2103  083B  E5          	push	hl
2104  083C  AF          	xor	a, a
2105  083D  48          	ld	c,b
2106  083E  47          	ld	b,a
2107  083F  C5          	push	bc
2108  0840  CD 00 00    	call	_NIRVANAP_spriteT_callee
2109  0843  C1          	pop	bc
2110  0844  04          	inc	b
2111  0845  3E 07       	ld	a,0x07
2112  0847  90          	sub	a, b
2113  0848  30 ED       	jr	NC,l_player_lost_life_00113
2114  084A  3A 00 00    	ld	a,(_game_inf_lives)
2115  084D  B7          	or	a, a
2116  084E  20 04       	jr	NZ,l_player_lost_life_00109
2117  0850  21 00 00    	ld	hl,_player_lives
2118  0853  35          	dec	(hl)
2119  0854              l_player_lost_life_00109:
2120  0854  3A 00 00    	ld	a,(_player_lives)
2121  0857  B7          	or	a, a
2122  0858  28 05       	jr	Z,l_player_lost_life_00111
2123  085A  CD 00 00    	call	_game_round_init
2124  085D  18 0A       	jr	l_player_lost_life_00115
2125  085F              l_player_lost_life_00111:
2126  085F  21 00 00    	ld	hl,_player_lives
2127  0862  36 00       	ld	(hl),0x00
2128  0864  21 00 00    	ld	hl,_game_over
2129  0867  36 01       	ld	(hl),0x01
2130  0869              l_player_lost_life_00115:
2131  0869  F1          	pop	af
2132  086A  DD E1       	pop	ix
2133  086C  C9          	ret
2134  086D              	SECTION IGNORE
2135  0000              
