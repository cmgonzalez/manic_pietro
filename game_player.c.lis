1     0000              MODULE game_player_c
2     0000              LINE 0, "game_player.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_get_floor
204   0000              	GLOBAL _player_check_conveyor
205   0000              	GLOBAL _player_1up
206   0000              	GLOBAL _player_collision
207   0000              	GLOBAL _player_new_jump
208   0000              	GLOBAL _player_handle_fall
209   0000              	GLOBAL _player_handle_walk
210   0000              	GLOBAL _player_handle_lock
211   0000              	GLOBAL _player_init
212   0000              	GLOBAL _player_turn
213   0000              	GLOBAL _player_move
214   0000              	GLOBAL _player_move_jump
215   0000              	GLOBAL _player_move_walk
216   0000              	GLOBAL _player_handle_conveyor
217   0000              	GLOBAL _player_pick
218   0000              	GLOBAL _player_check_input
219   0000              	GLOBAL _player_tile
220   0000              	GLOBAL _player_score_add
221   0000              	GLOBAL _player_pick_item
222   0000              	GLOBAL _player_pick_deadly
223   0000              	GLOBAL _player_pick_exit
224   0000              	GLOBAL _player_pick_extra
225   0000              	GLOBAL _player_check_ceil
226   0000              	GLOBAL _player_check_floor
227   0000              	GLOBAL _player_lost_life
228   0000              ;--------------------------------------------------------
229   0000              ; Externals used
230   0000              ;--------------------------------------------------------
231   0000              	GLOBAL _ulltoa_callee
232   0000              	GLOBAL _ulltoa
233   0000              	GLOBAL _strtoull_callee
234   0000              	GLOBAL _strtoull
235   0000              	GLOBAL _strtoll_callee
236   0000              	GLOBAL _strtoll
237   0000              	GLOBAL _lltoa_callee
238   0000              	GLOBAL _lltoa
239   0000              	GLOBAL _llabs_callee
240   0000              	GLOBAL _llabs
241   0000              	GLOBAL __lldivu__callee
242   0000              	GLOBAL __lldivu_
243   0000              	GLOBAL __lldiv__callee
244   0000              	GLOBAL __lldiv_
245   0000              	GLOBAL _atoll_callee
246   0000              	GLOBAL _atoll
247   0000              	GLOBAL _realloc_unlocked_callee
248   0000              	GLOBAL _realloc_unlocked
249   0000              	GLOBAL _malloc_unlocked_fastcall
250   0000              	GLOBAL _malloc_unlocked
251   0000              	GLOBAL _free_unlocked_fastcall
252   0000              	GLOBAL _free_unlocked
253   0000              	GLOBAL _calloc_unlocked_callee
254   0000              	GLOBAL _calloc_unlocked
255   0000              	GLOBAL _aligned_alloc_unlocked_callee
256   0000              	GLOBAL _aligned_alloc_unlocked
257   0000              	GLOBAL _realloc_callee
258   0000              	GLOBAL _realloc
259   0000              	GLOBAL _malloc_fastcall
260   0000              	GLOBAL _malloc
261   0000              	GLOBAL _free_fastcall
262   0000              	GLOBAL _free
263   0000              	GLOBAL _calloc_callee
264   0000              	GLOBAL _calloc
265   0000              	GLOBAL _aligned_alloc_callee
266   0000              	GLOBAL _aligned_alloc
267   0000              	GLOBAL _utoa_callee
268   0000              	GLOBAL _utoa
269   0000              	GLOBAL _ultoa_callee
270   0000              	GLOBAL _ultoa
271   0000              	GLOBAL _system_fastcall
272   0000              	GLOBAL _system
273   0000              	GLOBAL _strtoul_callee
274   0000              	GLOBAL _strtoul
275   0000              	GLOBAL _strtol_callee
276   0000              	GLOBAL _strtol
277   0000              	GLOBAL _strtof_callee
278   0000              	GLOBAL _strtof
279   0000              	GLOBAL _strtod_callee
280   0000              	GLOBAL _strtod
281   0000              	GLOBAL _srand_fastcall
282   0000              	GLOBAL _srand
283   0000              	GLOBAL _rand
284   0000              	GLOBAL _quick_exit_fastcall
285   0000              	GLOBAL _quick_exit
286   0000              	GLOBAL _qsort_callee
287   0000              	GLOBAL _qsort
288   0000              	GLOBAL _ltoa_callee
289   0000              	GLOBAL _ltoa
290   0000              	GLOBAL _labs_fastcall
291   0000              	GLOBAL _labs
292   0000              	GLOBAL _itoa_callee
293   0000              	GLOBAL _itoa
294   0000              	GLOBAL _ftoh_callee
295   0000              	GLOBAL _ftoh
296   0000              	GLOBAL _ftog_callee
297   0000              	GLOBAL _ftog
298   0000              	GLOBAL _ftoe_callee
299   0000              	GLOBAL _ftoe
300   0000              	GLOBAL _ftoa_callee
301   0000              	GLOBAL _ftoa
302   0000              	GLOBAL _exit_fastcall
303   0000              	GLOBAL _exit
304   0000              	GLOBAL _dtoh_callee
305   0000              	GLOBAL _dtoh
306   0000              	GLOBAL _dtog_callee
307   0000              	GLOBAL _dtog
308   0000              	GLOBAL _dtoe_callee
309   0000              	GLOBAL _dtoe
310   0000              	GLOBAL _dtoa_callee
311   0000              	GLOBAL _dtoa
312   0000              	GLOBAL _bsearch_callee
313   0000              	GLOBAL _bsearch
314   0000              	GLOBAL _atol_fastcall
315   0000              	GLOBAL _atol
316   0000              	GLOBAL _atoi_fastcall
317   0000              	GLOBAL _atoi
318   0000              	GLOBAL _atof_fastcall
319   0000              	GLOBAL _atof
320   0000              	GLOBAL _atexit_fastcall
321   0000              	GLOBAL _atexit
322   0000              	GLOBAL _at_quick_exit_fastcall
323   0000              	GLOBAL _at_quick_exit
324   0000              	GLOBAL _abs_fastcall
325   0000              	GLOBAL _abs
326   0000              	GLOBAL _abort
327   0000              	GLOBAL __strtou__callee
328   0000              	GLOBAL __strtou_
329   0000              	GLOBAL __strtoi__callee
330   0000              	GLOBAL __strtoi_
331   0000              	GLOBAL __random_uniform_xor_8__fastcall
332   0000              	GLOBAL __random_uniform_xor_8_
333   0000              	GLOBAL __random_uniform_xor_32__fastcall
334   0000              	GLOBAL __random_uniform_xor_32_
335   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
336   0000              	GLOBAL __random_uniform_cmwc_8_
337   0000              	GLOBAL __shellsort__callee
338   0000              	GLOBAL __shellsort_
339   0000              	GLOBAL __quicksort__callee
340   0000              	GLOBAL __quicksort_
341   0000              	GLOBAL __insertion_sort__callee
342   0000              	GLOBAL __insertion_sort_
343   0000              	GLOBAL __ldivu__callee
344   0000              	GLOBAL __ldivu_
345   0000              	GLOBAL __ldiv__callee
346   0000              	GLOBAL __ldiv_
347   0000              	GLOBAL __divu__callee
348   0000              	GLOBAL __divu_
349   0000              	GLOBAL __div__callee
350   0000              	GLOBAL __div_
351   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
352   0000              	GLOBAL _NIRVANAP_drawTW_raw
353   0000              	GLOBAL _NIRVANAP_drawTW_callee
354   0000              	GLOBAL _NIRVANAP_drawTW
355   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
356   0000              	GLOBAL _NIRVANAP_drawW_raw
357   0000              	GLOBAL _NIRVANAP_drawW_callee
358   0000              	GLOBAL _NIRVANAP_drawW
359   0000              	GLOBAL _NIRVANAP_spriteT_callee
360   0000              	GLOBAL _NIRVANAP_spriteT
361   0000              	GLOBAL _NIRVANAP_fillC_callee
362   0000              	GLOBAL _NIRVANAP_fillC
363   0000              	GLOBAL _NIRVANAP_readC_callee
364   0000              	GLOBAL _NIRVANAP_readC
365   0000              	GLOBAL _NIRVANAP_paintC_callee
366   0000              	GLOBAL _NIRVANAP_paintC
367   0000              	GLOBAL _NIRVANAP_printQ_callee
368   0000              	GLOBAL _NIRVANAP_printQ
369   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
370   0000              	GLOBAL _NIRVANAP_fillT_raw
371   0000              	GLOBAL _NIRVANAP_fillT_callee
372   0000              	GLOBAL _NIRVANAP_fillT
373   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
374   0000              	GLOBAL _NIRVANAP_drawT_raw
375   0000              	GLOBAL _NIRVANAP_drawT_callee
376   0000              	GLOBAL _NIRVANAP_drawT
377   0000              	GLOBAL _NIRVANAP_stop
378   0000              	GLOBAL _NIRVANAP_start
379   0000              	GLOBAL _zx_print_str
380   0000              	GLOBAL _zx_print_int
381   0000              	GLOBAL _zx_print_chr
382   0000              	GLOBAL _zx_isr
383   0000              	GLOBAL _z80_otdr_callee
384   0000              	GLOBAL _z80_otdr
385   0000              	GLOBAL _z80_otir_callee
386   0000              	GLOBAL _z80_otir
387   0000              	GLOBAL _z80_outp_callee
388   0000              	GLOBAL _z80_outp
389   0000              	GLOBAL _z80_indr_callee
390   0000              	GLOBAL _z80_indr
391   0000              	GLOBAL _z80_inir_callee
392   0000              	GLOBAL _z80_inir
393   0000              	GLOBAL _z80_inp_fastcall
394   0000              	GLOBAL _z80_inp
395   0000              	GLOBAL _z80_set_int_state_fastcall
396   0000              	GLOBAL _z80_set_int_state
397   0000              	GLOBAL _z80_get_int_state
398   0000              	GLOBAL _z80_delay_tstate_fastcall
399   0000              	GLOBAL _z80_delay_tstate
400   0000              	GLOBAL _z80_delay_ms_fastcall
401   0000              	GLOBAL _z80_delay_ms
402   0000              	GLOBAL _im2_remove_generic_callback_callee
403   0000              	GLOBAL _im2_remove_generic_callback
404   0000              	GLOBAL _im2_prepend_generic_callback_callee
405   0000              	GLOBAL _im2_prepend_generic_callback
406   0000              	GLOBAL _im2_append_generic_callback_callee
407   0000              	GLOBAL _im2_append_generic_callback
408   0000              	GLOBAL _im2_create_generic_isr_8080_callee
409   0000              	GLOBAL _im2_create_generic_isr_8080
410   0000              	GLOBAL _im2_create_generic_isr_callee
411   0000              	GLOBAL _im2_create_generic_isr
412   0000              	GLOBAL _im2_install_isr_callee
413   0000              	GLOBAL _im2_install_isr
414   0000              	GLOBAL _im2_init_fastcall
415   0000              	GLOBAL _im2_init
416   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
417   0000              	GLOBAL _intrinsic_swap_word_32
418   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
419   0000              	GLOBAL _intrinsic_swap_endian_32
420   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
421   0000              	GLOBAL _intrinsic_swap_endian_16
422   0000              	GLOBAL _intrinsic_return_de
423   0000              	GLOBAL _intrinsic_return_bc
424   0000              	GLOBAL _intrinsic_exx
425   0000              	GLOBAL _intrinsic_ex_de_hl
426   0000              	GLOBAL _intrinsic_nop
427   0000              	GLOBAL _intrinsic_im_2
428   0000              	GLOBAL _intrinsic_im_1
429   0000              	GLOBAL _intrinsic_im_0
430   0000              	GLOBAL _intrinsic_retn
431   0000              	GLOBAL _intrinsic_reti
432   0000              	GLOBAL _intrinsic_halt
433   0000              	GLOBAL _intrinsic_ei
434   0000              	GLOBAL _intrinsic_di
435   0000              	GLOBAL _intrinsic_stub
436   0000              	GLOBAL _intrinsic_ini
437   0000              	GLOBAL _intrinsic_outi
438   0000              	GLOBAL _intrinsic_ldi
439   0000              	GLOBAL _zx_pattern_fill_callee
440   0000              	GLOBAL _zx_pattern_fill
441   0000              	GLOBAL _zx_saddrpup_fastcall
442   0000              	GLOBAL _zx_saddrpup
443   0000              	GLOBAL _zx_saddrpright_callee
444   0000              	GLOBAL _zx_saddrpright
445   0000              	GLOBAL _zx_saddrpleft_callee
446   0000              	GLOBAL _zx_saddrpleft
447   0000              	GLOBAL _zx_saddrpdown_fastcall
448   0000              	GLOBAL _zx_saddrpdown
449   0000              	GLOBAL _zx_saddrcup_fastcall
450   0000              	GLOBAL _zx_saddrcup
451   0000              	GLOBAL _zx_saddrcright_fastcall
452   0000              	GLOBAL _zx_saddrcright
453   0000              	GLOBAL _zx_saddrcleft_fastcall
454   0000              	GLOBAL _zx_saddrcleft
455   0000              	GLOBAL _zx_saddrcdown_fastcall
456   0000              	GLOBAL _zx_saddrcdown
457   0000              	GLOBAL _zx_saddr2py_fastcall
458   0000              	GLOBAL _zx_saddr2py
459   0000              	GLOBAL _zx_saddr2px_fastcall
460   0000              	GLOBAL _zx_saddr2px
461   0000              	GLOBAL _zx_saddr2cy_fastcall
462   0000              	GLOBAL _zx_saddr2cy
463   0000              	GLOBAL _zx_saddr2cx_fastcall
464   0000              	GLOBAL _zx_saddr2cx
465   0000              	GLOBAL _zx_saddr2aaddr_fastcall
466   0000              	GLOBAL _zx_saddr2aaddr
467   0000              	GLOBAL _zx_py2saddr_fastcall
468   0000              	GLOBAL _zx_py2saddr
469   0000              	GLOBAL _zx_py2aaddr_fastcall
470   0000              	GLOBAL _zx_py2aaddr
471   0000              	GLOBAL _zx_pxy2saddr_callee
472   0000              	GLOBAL _zx_pxy2saddr
473   0000              	GLOBAL _zx_pxy2aaddr_callee
474   0000              	GLOBAL _zx_pxy2aaddr
475   0000              	GLOBAL _zx_px2bitmask_fastcall
476   0000              	GLOBAL _zx_px2bitmask
477   0000              	GLOBAL _zx_cy2saddr_fastcall
478   0000              	GLOBAL _zx_cy2saddr
479   0000              	GLOBAL _zx_cy2aaddr_fastcall
480   0000              	GLOBAL _zx_cy2aaddr
481   0000              	GLOBAL _zx_cxy2saddr_callee
482   0000              	GLOBAL _zx_cxy2saddr
483   0000              	GLOBAL _zx_cxy2aaddr_callee
484   0000              	GLOBAL _zx_cxy2aaddr
485   0000              	GLOBAL _zx_bitmask2px_fastcall
486   0000              	GLOBAL _zx_bitmask2px
487   0000              	GLOBAL _zx_aaddrcup_fastcall
488   0000              	GLOBAL _zx_aaddrcup
489   0000              	GLOBAL _zx_aaddrcright_fastcall
490   0000              	GLOBAL _zx_aaddrcright
491   0000              	GLOBAL _zx_aaddrcleft_fastcall
492   0000              	GLOBAL _zx_aaddrcleft
493   0000              	GLOBAL _zx_aaddrcdown_fastcall
494   0000              	GLOBAL _zx_aaddrcdown
495   0000              	GLOBAL _zx_aaddr2saddr_fastcall
496   0000              	GLOBAL _zx_aaddr2saddr
497   0000              	GLOBAL _zx_aaddr2py_fastcall
498   0000              	GLOBAL _zx_aaddr2py
499   0000              	GLOBAL _zx_aaddr2px_fastcall
500   0000              	GLOBAL _zx_aaddr2px
501   0000              	GLOBAL _zx_aaddr2cy_fastcall
502   0000              	GLOBAL _zx_aaddr2cy
503   0000              	GLOBAL _zx_aaddr2cx_fastcall
504   0000              	GLOBAL _zx_aaddr2cx
505   0000              	GLOBAL _zx_visit_wc_pix_callee
506   0000              	GLOBAL _zx_visit_wc_pix
507   0000              	GLOBAL _zx_visit_wc_attr_callee
508   0000              	GLOBAL _zx_visit_wc_attr
509   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
510   0000              	GLOBAL _zx_scroll_wc_up_pix
511   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
512   0000              	GLOBAL _zx_scroll_wc_up_attr
513   0000              	GLOBAL _zx_scroll_wc_up_callee
514   0000              	GLOBAL _zx_scroll_wc_up
515   0000              	GLOBAL _zx_scroll_up_pix_callee
516   0000              	GLOBAL _zx_scroll_up_pix
517   0000              	GLOBAL _zx_scroll_up_attr_callee
518   0000              	GLOBAL _zx_scroll_up_attr
519   0000              	GLOBAL _zx_scroll_up_callee
520   0000              	GLOBAL _zx_scroll_up
521   0000              	GLOBAL _zx_cls_wc_pix_callee
522   0000              	GLOBAL _zx_cls_wc_pix
523   0000              	GLOBAL _zx_cls_wc_attr_callee
524   0000              	GLOBAL _zx_cls_wc_attr
525   0000              	GLOBAL _zx_cls_wc_callee
526   0000              	GLOBAL _zx_cls_wc
527   0000              	GLOBAL _zx_cls_pix_fastcall
528   0000              	GLOBAL _zx_cls_pix
529   0000              	GLOBAL _zx_cls_attr_fastcall
530   0000              	GLOBAL _zx_cls_attr
531   0000              	GLOBAL _zx_cls_fastcall
532   0000              	GLOBAL _zx_cls
533   0000              	GLOBAL _zx_border_fastcall
534   0000              	GLOBAL _zx_border
535   0000              	GLOBAL _zx_tape_verify_block_callee
536   0000              	GLOBAL _zx_tape_verify_block
537   0000              	GLOBAL _zx_tape_save_block_callee
538   0000              	GLOBAL _zx_tape_save_block
539   0000              	GLOBAL _zx_tape_load_block_callee
540   0000              	GLOBAL _zx_tape_load_block
541   0000              	GLOBAL _spr_horizontal_check
542   0000              	GLOBAL _spr_draw8
543   0000              	GLOBAL _spr_destroy
544   0000              	GLOBAL _spr_unflattenP1
545   0000              	GLOBAL _spr_flatten
546   0000              	GLOBAL _spr_btile_paint_back
547   0000              	GLOBAL _spr_turn_horizontal
548   0000              	GLOBAL _spr_clear_scr
549   0000              	GLOBAL _spr_back_repaint
550   0000              	GLOBAL _spr_get_tile_dir
551   0000              	GLOBAL _spr_get_tile
552   0000              	GLOBAL _spr_paint_player
553   0000              	GLOBAL _spr_paint
554   0000              	GLOBAL _spr_move_left
555   0000              	GLOBAL _spr_move_right
556   0000              	GLOBAL _spr_move_left_f
557   0000              	GLOBAL _spr_move_right_f
558   0000              	GLOBAL _spr_move_horizontal
559   0000              	GLOBAL _spr_move_down_f
560   0000              	GLOBAL _spr_move_up_f
561   0000              	GLOBAL _spr_set_right
562   0000              	GLOBAL _spr_set_left
563   0000              	GLOBAL _spr_set_down
564   0000              	GLOBAL _spr_set_up
565   0000              	GLOBAL _spr_calc_index
566   0000              	GLOBAL _spr_chktime
567   0000              	GLOBAL _player_use_floor
568   0000              	GLOBAL _page
569   0000              	GLOBAL _game_anim_air
570   0000              	GLOBAL _reverse
571   0000              	GLOBAL _game_copy_sprite
572   0000              	GLOBAL _game_copy_sprite_color_reset
573   0000              	GLOBAL _game_copy_sprite_std
574   0000              	GLOBAL _game_flash_exit
575   0000              	GLOBAL _game_page_map
576   0000              	GLOBAL _game_attribs
577   0000              	GLOBAL _game_print_header
578   0000              	GLOBAL _game_check_time
579   0000              	GLOBAL _game_rotate_attrib_osd
580   0000              	GLOBAL _game_key_paint
581   0000              	GLOBAL _game_colour_message
582   0000              	GLOBAL _game_paint_attrib
583   0000              	GLOBAL _game_print_score
584   0000              	GLOBAL _game_cell_paint_index
585   0000              	GLOBAL _game_cell_paint
586   0000              	GLOBAL _game_check_cell
587   0000              	GLOBAL _game_check_map
588   0000              	GLOBAL _game_loop
589   0000              	GLOBAL _game_round_init
590   0000              	GLOBAL _game_start_timer
591   0000              	GLOBAL _game_update_stats
592   0000              	GLOBAL _game_print_footer
593   0000              	GLOBAL _game_fill_row
594   0000              	GLOBAL _game_cls
595   0000              	GLOBAL _game_fps
596   0000              	GLOBAL _game_draw_map
597   0000              	GLOBAL _enemy_kill
598   0000              	GLOBAL _enemy_init
599   0000              	GLOBAL _enemy_move
600   0000              	GLOBAL _enemy_turn
601   0000              	GLOBAL _enemy_static
602   0000              	GLOBAL _enemy_walk
603   0000              	GLOBAL _enemy_horizontal
604   0000              	GLOBAL _enemy_vertical
605   0000              	GLOBAL _ay_reset
606   0000              	GLOBAL _ay_song_stop
607   0000              	GLOBAL _ay_song_play
608   0000              	GLOBAL _ay_fx_stop
609   0000              	GLOBAL _ay_fx_play
610   0000              	GLOBAL _ay_is_playing
611   0000              	GLOBAL _audio_levelup
612   0000              	GLOBAL _audio_menu
613   0000              	GLOBAL _audio_game_end
614   0000              	GLOBAL _audio_game_start
615   0000              	GLOBAL _audio_level_complete
616   0000              	GLOBAL _audio_level_start
617   0000              	GLOBAL _audio_puerta
618   0000              	GLOBAL _audio_tick
619   0000              	GLOBAL _audio_door
620   0000              	GLOBAL _audio_coin
621   0000              	GLOBAL _audio_fall
622   0000              	GLOBAL _audio_jump
623   0000              	GLOBAL _audio_dead
624   0000              	GLOBAL _audio_ingame
625   0000              	GLOBAL _test_func
626   0000              	GLOBAL _test_proc
627   0000              	GLOBAL _in_mouse_kempston_wheel_delta
628   0000              	GLOBAL _in_mouse_kempston_wheel
629   0000              	GLOBAL _in_mouse_kempston_callee
630   0000              	GLOBAL _in_mouse_kempston
631   0000              	GLOBAL _in_mouse_kempston_setpos_callee
632   0000              	GLOBAL _in_mouse_kempston_setpos
633   0000              	GLOBAL _in_mouse_kempston_reset
634   0000              	GLOBAL _in_mouse_kempston_init
635   0000              	GLOBAL _in_mouse_amx_wheel_delta
636   0000              	GLOBAL _in_mouse_amx_wheel
637   0000              	GLOBAL _in_mouse_amx_callee
638   0000              	GLOBAL _in_mouse_amx
639   0000              	GLOBAL _in_mouse_amx_setpos_callee
640   0000              	GLOBAL _in_mouse_amx_setpos
641   0000              	GLOBAL _in_mouse_amx_reset
642   0000              	GLOBAL _in_mouse_amx_init_callee
643   0000              	GLOBAL _in_mouse_amx_init
644   0000              	GLOBAL _in_stick_sinclair2
645   0000              	GLOBAL _in_stick_sinclair1
646   0000              	GLOBAL _in_stick_kempston
647   0000              	GLOBAL _in_stick_fuller
648   0000              	GLOBAL _in_stick_cursor
649   0000              	GLOBAL _in_stick_keyboard_fastcall
650   0000              	GLOBAL _in_stick_keyboard
651   0000              	GLOBAL _in_wait_nokey
652   0000              	GLOBAL _in_wait_key
653   0000              	GLOBAL _in_test_key
654   0000              	GLOBAL _in_pause_fastcall
655   0000              	GLOBAL _in_pause
656   0000              	GLOBAL _in_key_scancode_fastcall
657   0000              	GLOBAL _in_key_scancode
658   0000              	GLOBAL _in_key_pressed_fastcall
659   0000              	GLOBAL _in_key_pressed
660   0000              	GLOBAL _in_inkey
661   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
662   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
663   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
664   0000              	GLOBAL _NIRVANAP_HOLE
665   0000              	GLOBAL _NIRVANAP_ISR_HOOK
666   0000              	GLOBAL _air_curr_byte
667   0000              	GLOBAL _spr_init_bright
668   0000              	GLOBAL _spr_init_cout3
669   0000              	GLOBAL _spr_init_cin3
670   0000              	GLOBAL _spr_init_cout2
671   0000              	GLOBAL _spr_init_cin2
672   0000              	GLOBAL _spr_init_cout1
673   0000              	GLOBAL _spr_init_cin1
674   0000              	GLOBAL _spr_init_cout0
675   0000              	GLOBAL _spr_init_cin0
676   0000              	GLOBAL _map_paper_last
677   0000              	GLOBAL _map_paper_clr
678   0000              	GLOBAL _map_paper
679   0000              	GLOBAL _map_border
680   0000              	GLOBAL _map_heigth
681   0000              	GLOBAL _map_width
682   0000              	GLOBAL _scr_curr
683   0000              	GLOBAL _scr_map
684   0000              	GLOBAL _spr_kind
685   0000              	GLOBAL _spr_frames
686   0000              	GLOBAL _spr_speed
687   0000              	GLOBAL _spr_tile
688   0000              	GLOBAL _screen_ink
689   0000              	GLOBAL _screen_paper
690   0000              	GLOBAL _game_start_scr
691   0000              	GLOBAL _game_score_top
692   0000              	GLOBAL _player_coins
693   0000              	GLOBAL _player_lives
694   0000              	GLOBAL _game_over
695   0000              	GLOBAL _game_tile_cnt
696   0000              	GLOBAL _game_sound
697   0000              	GLOBAL _game_inf_lives
698   0000              	GLOBAL _game_inmune
699   0000              	GLOBAL _spr_count
700   0000              	GLOBAL _key_ink
701   0000              	GLOBAL _key_last
702   0000              	GLOBAL _time_key
703   0000              	GLOBAL _time_conv
704   0000              	GLOBAL _time_air
705   0000              	GLOBAL _frame_time
706   0000              	GLOBAL _curr_time
707   0000              	GLOBAL _p_state_a
708   0000              	GLOBAL _p_state
709   0000              	GLOBAL _key_attrib
710   0000              	GLOBAL _game_attrib_osd
711   0000              	GLOBAL _attrib_osd
712   0000              	GLOBAL _attrib_hl
713   0000              	GLOBAL _attrib
714   0000              	GLOBAL _zx_val_asm
715   0000              	GLOBAL _tmp_ui
716   0000              	GLOBAL _index1
717   0000              	GLOBAL _index0
718   0000              	GLOBAL _index_tmp
719   0000              	GLOBAL _loop_count
720   0000              	GLOBAL _s_class
721   0000              	GLOBAL _s_row1
722   0000              	GLOBAL _s_col1
723   0000              	GLOBAL _s_col0
724   0000              	GLOBAL _s_lin1
725   0000              	GLOBAL _s_lin0
726   0000              	GLOBAL _s_tile1
727   0000              	GLOBAL _s_tile0
728   0000              	GLOBAL _nirv_sprite_index
729   0000              	GLOBAL _player_kill_index
730   0000              	GLOBAL _player_killed
731   0000              	GLOBAL _player_jump_top
732   0000              	GLOBAL _game_fps_show
733   0000              	GLOBAL _game_debug
734   0000              	GLOBAL _sprite
735   0000              	GLOBAL _fps
736   0000              	GLOBAL _game_mode
737   0000              	GLOBAL _game_tileset
738   0000              	GLOBAL _menu_curr_sel
739   0000              	GLOBAL _game_round_up
740   0000              	GLOBAL _game_exit_lin
741   0000              	GLOBAL _game_exit_col
742   0000              	GLOBAL _game_conveyor_col1
743   0000              	GLOBAL _game_conveyor_col0
744   0000              	GLOBAL _game_conveyor_lin
745   0000              	GLOBAL _game_conveyor_dir
746   0000              	GLOBAL _game_song_play_start
747   0000              	GLOBAL _game_song_play
748   0000              	GLOBAL _game_gravity
749   0000              	GLOBAL _player_lin_scr
750   0000              	GLOBAL _player_col_scr
751   0000              	GLOBAL _player_fall_start
752   0000              	GLOBAL _player_jump_count
753   0000              	GLOBAL _player_jump_hack
754   0000              	GLOBAL _player_vel_inc
755   0000              	GLOBAL _player_vel_y0
756   0000              	GLOBAL _player_vel_y
757   0000              	GLOBAL _player_score
758   0000              	GLOBAL _tbuffer
759   0000              	GLOBAL _obj_count
760   0000              	GLOBAL _obj_col
761   0000              	GLOBAL _obj_lin
762   0000              	GLOBAL _spr_timer
763   0000              	GLOBAL _last_time
764   0000              	GLOBAL _colint
765   0000              	GLOBAL _col
766   0000              	GLOBAL _lin
767   0000              	GLOBAL _tile
768   0000              	GLOBAL _value_b
769   0000              	GLOBAL _value_a
770   0000              	GLOBAL _state_a
771   0000              	GLOBAL _state
772   0000              	GLOBAL _class
773   0000              	GLOBAL _dirs_last
774   0000              	GLOBAL _dirs
775   0000              	GLOBAL _k1
776   0000              	GLOBAL _joyfunc1
777   0000              	GLOBAL _btiles
778   0000              	GLOBAL _v3
779   0000              	GLOBAL _v2
780   0000              	GLOBAL _v1
781   0000              	GLOBAL _v0
782   0000              	GLOBAL _i
783   0000              	GLOBAL _spec128
784   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
785   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
786   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
787   0000              	GLOBAL _hitiles2
788   0000              	GLOBAL _hitiles1
789   0000              	GLOBAL _ay_fx_door
790   0000              	GLOBAL _ay_fx_tick
791   0000              	GLOBAL _ay_fx_game_start
792   0000              	GLOBAL _ay_fx_fall
793   0000              	GLOBAL _ay_fx_jump
794   0000              	GLOBAL _ay_fx_dead
795   0000              	GLOBAL _ay_fx_coin
796   0000              	GLOBAL _ay_song_menu
797   0000              	GLOBAL _ay_song_ingame1
798   0000              	GLOBAL _ay_song_ingame0
799   0000              	GLOBAL _hisprites2
800   0000              	GLOBAL _hisprites1
801   0000              	GLOBAL _img1
802   0000              	GLOBAL _air_end_byte
803   0000              	GLOBAL _air_start_byte
804   0000              	GLOBAL _tile_class
805   0000              	GLOBAL _scan_map
806   0000              	GLOBAL _key_map
807   0000              	GLOBAL _map_names0
808   0000              	GLOBAL _game_borders0
809   0000              	GLOBAL _paper0
810   0000              	GLOBAL _lenght0
811   0000              	GLOBAL _world0
812   0000              	GLOBAL _spr_init_len
813   0000              	GLOBAL _spr_init
814   0000              	GLOBAL _player_jump_hor
815   0000              ;--------------------------------------------------------
816   0000              ; special function registers
817   0000              ;--------------------------------------------------------
818   0000              defc _IO_FE	=	0x00fe
819   0000              defc _IO_1FFD	=	0x1ffd
820   0000              defc _IO_7FFD	=	0x7ffd
821   0000              ;--------------------------------------------------------
822   0000              ; ram data
823   0000              ;--------------------------------------------------------
824   0000              	SECTION bss_compiler
825   0000              ;--------------------------------------------------------
826   0000              ; ram data
827   0000              ;--------------------------------------------------------
828   0000              
829   0000              IF 0
830   0000              
831   0000              ; .area _INITIALIZED removed by z88dk
832   0000              
833   0000              
834   0000              ENDIF
835   0000              
836   0000              ;--------------------------------------------------------
837   0000              ; absolute external ram data
838   0000              ;--------------------------------------------------------
839   0000              	SECTION IGNORE
840   0000              ;--------------------------------------------------------
841   0000              ; global & static initialisations
842   0000              ;--------------------------------------------------------
843   0000              	SECTION code_crt_init
844   0000              ;--------------------------------------------------------
845   0000              ; Home
846   0000              ;--------------------------------------------------------
847   0000              	SECTION IGNORE
848   0000              ;--------------------------------------------------------
849   0000              ; code
850   0000              ;--------------------------------------------------------
851   0000              	SECTION code_compiler
852   0000              ;	---------------------------------
853   0000              ; Function player_init
854   0000              ; ---------------------------------
855   0000              _player_init:
856   0000  CD 00 00    	call	___sdcc_enter_ix
857   0003  21 0F 00    	ld	hl, +(_class + 0x000f)
858   0006  36 FF       	ld	(hl),0xff
859   0008  21 0F 00    	ld	hl, +(_spr_speed + 0x000f)
860   000B  36 04       	ld	(hl),0x04
861   000D  21 0F 00    	ld	hl, +(_spr_frames + 0x000f)
862   0010  36 04       	ld	(hl),0x04
863   0012  21 0F 00    	ld	hl, +(_lin + 0x000f)
864   0015  DD 7E 04    	ld	a,(ix+4)
865   0018  77          	ld	(hl), a
866   0019  21 0F 00    	ld	hl, +(_col + 0x000f)
867   001C  DD 7E 05    	ld	a,(ix+5)
868   001F  77          	ld	(hl), a
869   0020  DD 7E 04    	ld	a,(ix+4)
870   0023  32 00 00    	ld	(_player_jump_top),a
871   0026  21 0F 00    	ld	hl, +(_state + 0x000f)
872   0029  36 00       	ld	(hl),0x00
873   002B  21 0F 00    	ld	hl, +(_state_a + 0x000f)
874   002E  36 00       	ld	(hl),0x00
875   0030  2A 00 00    	ld	hl,(_curr_time)
876   0033  22 1E 00    	ld	(_last_time + 0x001e),hl
877   0036  21 00 00    	ld	hl,0x0000
878   0039  22 00 00    	ld	(_player_vel_y),hl
879   003C  21 0F 00    	ld	hl, +(_spr_frames + 0x000f)
880   003F  36 04       	ld	(hl),0x04
881   0041  21 0F 00    	ld	hl,+(_state + 0x000f)
882   0044  22 00 00    	ld	(_p_state),hl
883   0047  21 0F 00    	ld	hl,+(_state_a + 0x000f)
884   004A  22 00 00    	ld	(_p_state_a),hl
885   004D  DD 7E 05    	ld	a,(ix+5)
886   0050  D6 10       	sub	a,0x10
887   0052  30 1E       	jr	NC,l_player_init_00102
888   0054  ED 4B 00 00 	ld	bc,(_p_state)
889   0058  0A          	ld	a,(bc)
890   0059  F6 04       	or	a,0x04
891   005B  02          	ld	(bc), a
892   005C  ED 4B 00 00 	ld	bc,(_p_state_a)
893   0060  0A          	ld	a,(bc)
894   0061  F6 10       	or	a,0x10
895   0063  02          	ld	(bc), a
896   0064  21 0F 00    	ld	hl, +(_tile + 0x000f)
897   0067  DD 7E 06    	ld	a,(ix+6)
898   006A  77          	ld	(hl), a
899   006B  21 0F 00    	ld	hl, +(_colint + 0x000f)
900   006E  36 00       	ld	(hl),0x00
901   0070  18 20       	jr	l_player_init_00104
902   0072              l_player_init_00102:
903   0072  21 0F 00    	ld	hl,_colint+15
904   0075  36 03       	ld	(hl),0x03
905   0077  ED 5B 00 00 	ld	de,(_p_state)
906   007B  1A          	ld	a,(de)
907   007C  F6 08       	or	a,0x08
908   007E  12          	ld	(de),a
909   007F  ED 5B 00 00 	ld	de,(_p_state_a)
910   0083  1A          	ld	a,(de)
911   0084  F6 08       	or	a,0x08
912   0086  12          	ld	(de),a
913   0087  11 0F 00    	ld	de,_tile+15
914   008A  DD 7E 06    	ld	a,(ix+6)
915   008D  C6 04       	add	a,0x04
916   008F  12          	ld	(de),a
917   0090  36 03       	ld	(hl),0x03
918   0092              l_player_init_00104:
919   0092  DD E1       	pop	ix
920   0094  C9          	ret
921   0095              	SECTION code_compiler
922   0095              ;	---------------------------------
923   0095              ; Function player_turn
924   0095              ; ---------------------------------
925   0095              _player_turn:
926   0095  21 00 00    	ld	hl,_sprite
927   0098  36 0F       	ld	(hl),0x0f
928   009A  21 00 00    	ld	hl,_sprite
929   009D  CD 00 00    	call	_spr_chktime
930   00A0  7D          	ld	a, l
931   00A1  B7          	or	a, a
932   00A2  CA 15 02    	jp	Z, l_player_turn_00135
933   00A5  CD 00 00    	call	_in_inkey
934   00A8  7D          	ld	a,l
935   00A9  D6 31       	sub	a,0x31
936   00AB  4D          	ld	c,l
937   00AC  44          	ld	b,h
938   00AD  20 17       	jr	NZ,l_player_turn_00104
939   00AF  21 00 00    	ld	hl,_scr_curr
940   00B2  35          	dec	(hl)
941   00B3  21 00 00    	ld	hl,_game_round_up
942   00B6  36 01       	ld	(hl),0x01
943   00B8  3A 00 00    	ld	a,(_scr_curr)
944   00BB  3C          	inc	a
945   00BC  20 05       	jr	NZ,l_player_turn_00102
946   00BE  21 00 00    	ld	hl,_scr_curr
947   00C1  36 27       	ld	(hl),0x27
948   00C3              l_player_turn_00102:
949   00C3  CD 00 00    	call	_in_wait_nokey
950   00C6              l_player_turn_00104:
951   00C6  79          	ld	a, c
952   00C7  D6 32       	sub	a,0x32
953   00C9  20 18       	jr	NZ,l_player_turn_00108
954   00CB  21 00 00    	ld	hl,_scr_curr
955   00CE  34          	inc	(hl)
956   00CF  21 00 00    	ld	hl,_game_round_up
957   00D2  36 01       	ld	(hl),0x01
958   00D4  3A 00 00    	ld	a,(_scr_curr)
959   00D7  D6 28       	sub	a,0x28
960   00D9  20 05       	jr	NZ,l_player_turn_00106
961   00DB  21 00 00    	ld	hl,_scr_curr
962   00DE  36 00       	ld	(hl),0x00
963   00E0              l_player_turn_00106:
964   00E0  CD 00 00    	call	_in_wait_nokey
965   00E3              l_player_turn_00108:
966   00E3  79          	ld	a, c
967   00E4  D6 33       	sub	a,0x33
968   00E6  20 3E       	jr	NZ,l_player_turn_00113
969   00E8  21 00 00    	ld	hl,_game_inmune
970   00EB  7E          	ld	a, (hl)
971   00EC  D6 01       	sub	a,0x01
972   00EE  3E 00       	ld	a,0x00
973   00F0  17          	rla
974   00F1  47          	ld	b,a
975   00F2  70          	ld	(hl),b
976   00F3  B7          	or	a, a
977   00F4  28 0F       	jr	Z,l_player_turn_00110
978   00F6  C5          	push	bc
979   00F7  21 00 00    	ld	hl,___str_0
980   00FA  E5          	push	hl
981   00FB  21 15 00    	ld	hl,0x0015
982   00FE  E5          	push	hl
983   00FF  CD 00 00    	call	_zx_print_str
984   0102  C1          	pop	bc
985   0103  18 0D       	jr	l_player_turn_00111
986   0105              l_player_turn_00110:
987   0105  C5          	push	bc
988   0106  21 0F 00    	ld	hl,___str_1
989   0109  E5          	push	hl
990   010A  21 15 00    	ld	hl,0x0015
991   010D  E5          	push	hl
992   010E  CD 00 00    	call	_zx_print_str
993   0111  C1          	pop	bc
994   0112              l_player_turn_00111:
995   0112  C5          	push	bc
996   0113  21 19 00    	ld	hl,0x0019
997   0116  CD 00 00    	call	_z80_delay_ms_fastcall
998   0119  C1          	pop	bc
999   011A  CD 00 00    	call	_in_wait_nokey
1000  011D  C5          	push	bc
1001  011E  21 15 20    	ld	hl,0x2015
1002  0121  E5          	push	hl
1003  0122  CD 00 00    	call	_game_fill_row
1004  0125  C1          	pop	bc
1005  0126              l_player_turn_00113:
1006  0126  79          	ld	a, c
1007  0127  D6 34       	sub	a,0x34
1008  0129  20 10       	jr	NZ,l_player_turn_00115
1009  012B  21 00 00    	ld	hl,_game_round_up
1010  012E  36 01       	ld	(hl),0x01
1011  0130  C5          	push	bc
1012  0131  21 FA 00    	ld	hl,0x00fa
1013  0134  CD 00 00    	call	_z80_delay_ms_fastcall
1014  0137  C1          	pop	bc
1015  0138  CD 00 00    	call	_in_wait_nokey
1016  013B              l_player_turn_00115:
1017  013B  79          	ld	a, c
1018  013C  D6 35       	sub	a,0x35
1019  013E  20 1F       	jr	NZ,l_player_turn_00120
1020  0140  21 00 00    	ld	hl,_scr_curr
1021  0143  7E          	ld	a, (hl)
1022  0144  D6 14       	sub	a,0x14
1023  0146  38 04       	jr	C,l_player_turn_00117
1024  0148  36 00       	ld	(hl),0x00
1025  014A  18 05       	jr	l_player_turn_00118
1026  014C              l_player_turn_00117:
1027  014C  21 00 00    	ld	hl,_scr_curr
1028  014F  36 14       	ld	(hl),0x14
1029  0151              l_player_turn_00118:
1030  0151  21 00 00    	ld	hl,_game_round_up
1031  0154  36 01       	ld	(hl),0x01
1032  0156  21 FA 00    	ld	hl,0x00fa
1033  0159  CD 00 00    	call	_z80_delay_ms_fastcall
1034  015C  CD 00 00    	call	_in_wait_nokey
1035  015F              l_player_turn_00120:
1036  015F  21 0F 00    	ld	hl,+(_state + 0x000f)
1037  0162  22 00 00    	ld	(_p_state),hl
1038  0165  21 0F 00    	ld	hl,+(_state_a + 0x000f)
1039  0168  22 00 00    	ld	(_p_state_a),hl
1040  016B  3A 0F 00    	ld	a,(_lin + 0x000f)
1041  016E  32 00 00    	ld	(_s_lin0),a
1042  0171  3A 0F 00    	ld	a,(_col + 0x000f)
1043  0174  32 00 00    	ld	(_s_col0),a
1044  0177  3A 0F 00    	ld	a,(_tile + 0x000f)
1045  017A  32 00 00    	ld	(_s_tile0),a
1046  017D  21 00 00    	ld	hl,_s_class
1047  0180  36 00       	ld	(hl),0x00
1048  0182  21 00 00    	ld	hl,_k1
1049  0185  E5          	push	hl
1050  0186  2A 00 00    	ld	hl,(_joyfunc1)
1051  0189  CD 00 00    	call	___sdcc_call_hl
1052  018C  F1          	pop	af
1053  018D  4D          	ld	c, l
1054  018E  21 00 00    	ld	hl,_dirs
1055  0191  71          	ld	(hl), c
1056  0192  CD EF 03    	call	_player_handle_lock
1057  0195  CD 16 02    	call	_player_move
1058  0198  CD C9 05    	call	_player_collision
1059  019B  3A 00 00    	ld	a,(_player_killed)
1060  019E  B7          	or	a, a
1061  019F  28 10       	jr	Z,l_player_turn_00122
1062  01A1  3A 00 00    	ld	a,(_game_inmune)
1063  01A4  B7          	or	a, a
1064  01A5  28 0A       	jr	Z,l_player_turn_00122
1065  01A7  21 00 00    	ld	hl,_player_killed
1066  01AA  36 00       	ld	(hl),0x00
1067  01AC  2E 00       	ld	l,0x00
1068  01AE  CD 00 00    	call	_zx_border_fastcall
1069  01B1              l_player_turn_00122:
1070  01B1  21 00 00    	ld	hl,_player_killed
1071  01B4  7E          	ld	a, (hl)
1072  01B5  B7          	or	a, a
1073  01B6  28 05       	jr	Z,l_player_turn_00125
1074  01B8  36 00       	ld	(hl),0x00
1075  01BA  CD 5D 0B    	call	_player_lost_life
1076  01BD              l_player_turn_00125:
1077  01BD  2A 0F 00    	ld	hl,(_lin + 0x000f)
1078  01C0  26 00       	ld	h,0x00
1079  01C2  01 10 00    	ld	bc,0x0010
1080  01C5  09          	add	hl,bc
1081  01C6  3A 00 00    	ld	a,(_game_exit_lin)
1082  01C9  5F          	ld	e,a
1083  01CA  16 00       	ld	d,0x00
1084  01CC  7D          	ld	a,l
1085  01CD  93          	sub	a,e
1086  01CE  44          	ld	b,h
1087  01CF  6F          	ld	l, a
1088  01D0  78          	ld	a, b
1089  01D1  9A          	sbc	a, d
1090  01D2  67          	ld	h, a
1091  01D3  CD 00 00    	call	_abs_fastcall
1092  01D6  7D          	ld	a,l
1093  01D7  32 00 00    	ld	(_v0),a
1094  01DA  3A 00 00    	ld	a,(_obj_count)
1095  01DD  3C          	inc	a
1096  01DE  20 35       	jr	NZ,l_player_turn_00135
1097  01E0  21 0F 00    	ld	hl,+(_col + 0x000f)
1098  01E3  4E          	ld	c, (hl)
1099  01E4  3A 00 00    	ld	a,(_game_exit_col)
1100  01E7  91          	sub	a, c
1101  01E8  20 2B       	jr	NZ,l_player_turn_00135
1102  01EA  3A 00 00    	ld	a,(_v0)
1103  01ED  D6 08       	sub	a,0x08
1104  01EF  30 24       	jr	NC,l_player_turn_00135
1105  01F1  21 00 00    	ld	hl,_scr_curr
1106  01F4  34          	inc	(hl)
1107  01F5  21 00 00    	ld	hl,_game_round_up
1108  01F8  36 01       	ld	(hl),0x01
1109  01FA              l_player_turn_00126:
1110  01FA  ED 4B 00 00 	ld	bc,(_air_curr_byte)
1111  01FE  ED 5B 00 00 	ld	de,(_air_end_byte)
1112  0202  7B          	ld	a,e
1113  0203  91          	sub	a,c
1114  0204  7A          	ld	a,d
1115  0205  98          	sbc	a,b
1116  0206  D0          	ret	NC
1117  0207  CD 00 00    	call	_audio_tick
1118  020A  CD 00 00    	call	_game_anim_air
1119  020D  21 19 00    	ld	hl,0x0019
1120  0210  CD 91 07    	call	_player_score_add
1121  0213  18 E5       	jr	l_player_turn_00126
1122  0215              l_player_turn_00135:
1123  0215  C9          	ret
1124  0216              	SECTION rodata_compiler
1125  0000              ___str_0:
1126  0000  4D 49 4C 4C 45 4E 49 41 4C 20 4D 4F 44 45 
                        	DEFM "MILLENIAL MODE"
1127  000E  00          	DEFB 0x00
1128  000F              	SECTION rodata_compiler
1129  000F              ___str_1:
1130  000F  47 45 4E 58 20 4D 4F 44 45 
                        	DEFM "GENX MODE"
1131  0018  00          	DEFB 0x00
1132  0019              	SECTION code_compiler
1133  0216              ;	---------------------------------
1134  0216              ; Function player_move
1135  0216              ; ---------------------------------
1136  0216              _player_move:
1137  0216  2A 00 00    	ld	hl,(_p_state)
1138  0219  7E          	ld	a,(hl)
1139  021A  CB 47       	bit	0, a
1140  021C  20 04       	jr	NZ,l_player_move_00101
1141  021E  CB 4F       	bit	1, a
1142  0220  28 05       	jr	Z,l_player_move_00102
1143  0222              l_player_move_00101:
1144  0222  CD 30 02    	call	_player_move_jump
1145  0225  18 03       	jr	l_player_move_00103
1146  0227              l_player_move_00102:
1147  0227  CD B3 03    	call	_player_move_walk
1148  022A              l_player_move_00103:
1149  022A  CD 00 00    	call	_spr_paint_player
1150  022D  2E 00       	ld	l,0x00
1151  022F  C9          	ret
1152  0230              	SECTION code_compiler
1153  0230              ;	---------------------------------
1154  0230              ; Function player_move_jump
1155  0230              ; ---------------------------------
1156  0230              _player_move_jump:
1157  0230  CD 00 00    	call	___sdcc_enter_ix
1158  0233  F5          	push	af
1159  0234  3B          	dec	sp
1160  0235  21 00 00    	ld	hl,_player_jump_count
1161  0238  34          	inc	(hl)
1162  0239  2A 00 00    	ld	hl,(_player_vel_y)
1163  023C  ED 5B 00 00 	ld	de,(_game_gravity)
1164  0240  19          	add	hl,de
1165  0241  22 00 00    	ld	(_player_vel_y),hl
1166  0244  3A 00 00    	ld	a,(_player_jump_count)
1167  0247  D6 11       	sub	a,0x11
1168  0249  20 10       	jr	NZ,l_player_move_jump_00102
1169  024B  ED 4B 00 00 	ld	bc,(_p_state)
1170  024F  0A          	ld	a,(bc)
1171  0250  E6 F7       	and	a,0xf7
1172  0252  02          	ld	(bc),a
1173  0253  ED 4B 00 00 	ld	bc,(_p_state)
1174  0257  0A          	ld	a,(bc)
1175  0258  E6 FB       	and	a,0xfb
1176  025A  02          	ld	(bc), a
1177  025B              l_player_move_jump_00102:
1178  025B  ED 4B 00 00 	ld	bc,(_p_state)
1179  025F  0A          	ld	a,(bc)
1180  0260  CB 67       	bit	4, a
1181  0262  28 13       	jr	Z,l_player_move_jump_00104
1182  0264  E6 FB       	and	a,0xfb
1183  0266  02          	ld	(bc), a
1184  0267  ED 4B 00 00 	ld	bc,(_p_state)
1185  026B  0A          	ld	a,(bc)
1186  026C  E6 F7       	and	a,0xf7
1187  026E  02          	ld	(bc),a
1188  026F  ED 4B 00 00 	ld	bc,(_p_state)
1189  0273  0A          	ld	a,(bc)
1190  0274  E6 EF       	and	a,0xef
1191  0276  02          	ld	(bc), a
1192  0277              l_player_move_jump_00104:
1193  0277  21 64 00    	ld	hl,0x0064
1194  027A  E5          	push	hl
1195  027B  2A 00 00    	ld	hl,(_player_vel_y)
1196  027E  E5          	push	hl
1197  027F  CD 00 00    	call	__divsint_callee
1198  0282  EB          	ex	de,hl
1199  0283  CB 43       	bit	0,e
1200  0285  21 00 00    	ld	hl,_s_lin1
1201  0288  73          	ld	(hl),e
1202  0289  28 04       	jr	Z,l_player_move_jump_00106
1203  028B  21 00 00    	ld	hl,_s_lin1
1204  028E  35          	dec	(hl)
1205  028F              l_player_move_jump_00106:
1206  028F  01 0F 00    	ld	bc,_lin+15
1207  0292  0A          	ld	a, (bc)
1208  0293  DD 77 FF    	ld	(ix-1),a
1209  0296  21 00 00    	ld	hl,_s_lin1
1210  0299  86          	add	a, (hl)
1211  029A  77          	ld	(hl), a
1212  029B  AF          	xor	a, a
1213  029C  BB          	cp	a, e
1214  029D  9A          	sbc	a, d
1215  029E  E2 A3 02    	jp	PO, l_player_move_jump_00182
1216  02A1  EE 80       	xor	a,0x80
1217  02A3              l_player_move_jump_00182:
1218  02A3  FA EF 02    	jp	M, l_player_move_jump_00121
1219  02A6  C5          	push	bc
1220  02A7  CD 00 00    	call	_spr_set_up
1221  02AA  C1          	pop	bc
1222  02AB  3E 80       	ld	a,0x80
1223  02AD  21 00 00    	ld	hl,_s_lin1
1224  02B0  96          	sub	a, (hl)
1225  02B1  30 02       	jr	NC,l_player_move_jump_00108
1226  02B3  36 00       	ld	(hl),0x00
1227  02B5              l_player_move_jump_00108:
1228  02B5  21 0F 00    	ld	hl,+(_col + 0x000f)
1229  02B8  56          	ld	d, (hl)
1230  02B9  C5          	push	bc
1231  02BA  D5          	push	de
1232  02BB  33          	inc	sp
1233  02BC  3A 00 00    	ld	a,(_s_lin1)
1234  02BF  F5          	push	af
1235  02C0  33          	inc	sp
1236  02C1  CD DF 08    	call	_player_check_ceil
1237  02C4  F1          	pop	af
1238  02C5  C1          	pop	bc
1239  02C6  7D          	ld	a, l
1240  02C7  B7          	or	a, a
1241  02C8  20 18       	jr	NZ,l_player_move_jump_00110
1242  02CA  21 00 00    	ld	hl,0x0000
1243  02CD  22 00 00    	ld	(_player_vel_y),hl
1244  02D0  ED 4B 00 00 	ld	bc,(_p_state)
1245  02D4  0A          	ld	a,(bc)
1246  02D5  E6 FB       	and	a,0xfb
1247  02D7  02          	ld	(bc),a
1248  02D8  ED 4B 00 00 	ld	bc,(_p_state)
1249  02DC  0A          	ld	a,(bc)
1250  02DD  E6 F7       	and	a,0xf7
1251  02DF  02          	ld	(bc), a
1252  02E0  18 04       	jr	l_player_move_jump_00111
1253  02E2              l_player_move_jump_00110:
1254  02E2  3A 00 00    	ld	a,(_s_lin1)
1255  02E5  02          	ld	(bc), a
1256  02E6              l_player_move_jump_00111:
1257  02E6  3A 00 00    	ld	a,(_s_lin1)
1258  02E9  32 00 00    	ld	(_player_jump_top),a
1259  02EC  C3 75 03    	jp	l_player_move_jump_00122
1260  02EF              l_player_move_jump_00121:
1261  02EF  21 00 00    	ld	hl,_player_jump_count
1262  02F2  7E          	ld	a, (hl)
1263  02F3  D6 0E       	sub	a,0x0e
1264  02F5  20 05       	jr	NZ,l_player_move_jump_00113
1265  02F7  C5          	push	bc
1266  02F8  CD 00 00    	call	_audio_fall
1267  02FB  C1          	pop	bc
1268  02FC              l_player_move_jump_00113:
1269  02FC  C5          	push	bc
1270  02FD  CD AA 0A    	call	_player_get_floor
1271  0300  C1          	pop	bc
1272  0301  7D          	ld	a,l
1273  0302  32 00 00    	ld	(_v0),a
1274  0305  21 00 00    	ld	hl,_s_lin1
1275  0308  7E          	ld	a, (hl)
1276  0309  D6 78       	sub	a,0x78
1277  030B  30 0E       	jr	NC,l_player_move_jump_00116
1278  030D  7E          	ld	a, (hl)
1279  030E  21 00 00    	ld	hl,_v0
1280  0311  96          	sub	a, (hl)
1281  0312  38 58       	jr	C,l_player_move_jump_00117
1282  0314  7E          	ld	a, (hl)
1283  0315  21 00 00    	ld	hl,_s_lin0
1284  0318  96          	sub	a, (hl)
1285  0319  38 51       	jr	C,l_player_move_jump_00117
1286  031B              l_player_move_jump_00116:
1287  031B  3A 00 00    	ld	a,(_s_lin1)
1288  031E  5F          	ld	e,a
1289  031F  16 00       	ld	d,0x00
1290  0321  3A 00 00    	ld	a,(_player_jump_top)
1291  0324  DD 77 FD    	ld	(ix-3),a
1292  0327  DD 36 FE 00 	ld	(ix-2),0x00
1293  032B  7B          	ld	a, e
1294  032C  DD 96 FD    	sub	a,(ix-3)
1295  032F  5F          	ld	e, a
1296  0330  7A          	ld	a, d
1297  0331  DD 9E FE    	sbc	a,(ix-2)
1298  0334  57          	ld	d, a
1299  0335  3E 30       	ld	a,0x30
1300  0337  BB          	cp	a, e
1301  0338  3E 00       	ld	a,0x00
1302  033A  9A          	sbc	a, d
1303  033B  E2 40 03    	jp	PO, l_player_move_jump_00185
1304  033E  EE 80       	xor	a,0x80
1305  0340              l_player_move_jump_00185:
1306  0340  F2 48 03    	jp	P, l_player_move_jump_00115
1307  0343  21 00 00    	ld	hl,_player_killed
1308  0346  36 01       	ld	(hl),0x01
1309  0348              l_player_move_jump_00115:
1310  0348  3A 00 00    	ld	a,(_v0)
1311  034B  02          	ld	(bc), a
1312  034C  21 00 00    	ld	hl,0x0000
1313  034F  22 00 00    	ld	(_player_vel_y),hl
1314  0352  ED 4B 00 00 	ld	bc,(_p_state)
1315  0356  0A          	ld	a,(bc)
1316  0357  E6 FD       	and	a,0xfd
1317  0359  02          	ld	(bc),a
1318  035A  ED 4B 00 00 	ld	bc,(_p_state)
1319  035E  0A          	ld	a,(bc)
1320  035F  E6 FE       	and	a,0xfe
1321  0361  02          	ld	(bc), a
1322  0362  CD 55 09    	call	_player_check_conveyor
1323  0365  CD 00 00    	call	_ay_fx_stop
1324  0368  2E 00       	ld	l,0x00
1325  036A  18 42       	jr	l_player_move_jump_00128
1326  036C              l_player_move_jump_00117:
1327  036C  C5          	push	bc
1328  036D  CD 00 00    	call	_spr_set_down
1329  0370  C1          	pop	bc
1330  0371  3A 00 00    	ld	a,(_s_lin1)
1331  0374  02          	ld	(bc), a
1332  0375              l_player_move_jump_00122:
1333  0375  2A 00 00    	ld	hl,(_p_state)
1334  0378  7E          	ld	a,(hl)
1335  0379  CB 5F       	bit	3, a
1336  037B  20 04       	jr	NZ,l_player_move_jump_00125
1337  037D  CB 57       	bit	2, a
1338  037F  28 2B       	jr	Z,l_player_move_jump_00126
1339  0381              l_player_move_jump_00125:
1340  0381  2A 00 00    	ld	hl,(_player_jump_count)
1341  0384  26 00       	ld	h,0x00
1342  0386  01 00 00    	ld	bc,_player_jump_hor
1343  0389  09          	add	hl,bc
1344  038A  7E          	ld	a,(hl)
1345  038B  B7          	or	a, a
1346  038C  28 1B       	jr	Z,l_player_move_jump_00124
1347  038E  3A 00 00    	ld	a,(_player_vel_y)
1348  0391  21 00 00    	ld	hl,_game_gravity
1349  0394  96          	sub	a, (hl)
1350  0395  21 00 00    	ld	hl,_player_vel_y
1351  0398  77          	ld	(hl), a
1352  0399  23          	inc	hl
1353  039A  7E          	ld	a, (hl)
1354  039B  21 01 00    	ld	hl,_game_gravity + 1
1355  039E  9E          	sbc	a, (hl)
1356  039F  32 01 00    	ld	(_player_vel_y + 1),a
1357  03A2  CD 00 00    	call	_spr_move_horizontal
1358  03A5  2E 00       	ld	l,0x00
1359  03A7  18 05       	jr	l_player_move_jump_00128
1360  03A9              l_player_move_jump_00124:
1361  03A9  CD 00 00    	call	_spr_move_horizontal
1362  03AC              l_player_move_jump_00126:
1363  03AC  2E 01       	ld	l,0x01
1364  03AE              l_player_move_jump_00128:
1365  03AE  DD F9       	ld	sp, ix
1366  03B0  DD E1       	pop	ix
1367  03B2  C9          	ret
1368  03B3              	SECTION code_compiler
1369  03B3              ;	---------------------------------
1370  03B3              ; Function player_move_walk
1371  03B3              ; ---------------------------------
1372  03B3              _player_move_walk:
1373  03B3  CD 25 07    	call	_player_check_input
1374  03B6  7D          	ld	a, l
1375  03B7  B7          	or	a, a
1376  03B8  28 25       	jr	Z,l_player_move_walk_00108
1377  03BA  21 00 00    	ld	hl,_dirs
1378  03BD  CB 7E       	bit	7, (hl)
1379  03BF  28 07       	jr	Z,l_player_move_walk_00102
1380  03C1  CD 08 05    	call	_player_new_jump
1381  03C4  2E 01       	ld	l,0x01
1382  03C6  18 26       	jr	l_player_move_walk_00110
1383  03C8              l_player_move_walk_00102:
1384  03C8  2A 00 00    	ld	hl,(_p_state_a)
1385  03CB  7E          	ld	a,(hl)
1386  03CC  0F          	rrca
1387  03CD  38 03       	jr	C,l_player_move_walk_00104
1388  03CF  CD D0 04    	call	_player_handle_conveyor
1389  03D2              l_player_move_walk_00104:
1390  03D2  CD 56 04    	call	_player_handle_walk
1391  03D5  CD 95 04    	call	_player_handle_fall
1392  03D8  CD 00 00    	call	_spr_move_horizontal
1393  03DB  2E 01       	ld	l,0x01
1394  03DD  18 0F       	jr	l_player_move_walk_00110
1395  03DF              l_player_move_walk_00108:
1396  03DF  CD D0 04    	call	_player_handle_conveyor
1397  03E2  7D          	ld	a, l
1398  03E3  B7          	or	a, a
1399  03E4  28 03       	jr	Z,l_player_move_walk_00106
1400  03E6  CD 00 00    	call	_spr_move_horizontal
1401  03E9              l_player_move_walk_00106:
1402  03E9  CD 95 04    	call	_player_handle_fall
1403  03EC  2E 00       	ld	l,0x00
1404  03EE              l_player_move_walk_00110:
1405  03EE  C9          	ret
1406  03EF              	SECTION code_compiler
1407  03EF              ;	---------------------------------
1408  03EF              ; Function player_handle_lock
1409  03EF              ; ---------------------------------
1410  03EF              _player_handle_lock:
1411  03EF  2A 00 00    	ld	hl,(_p_state)
1412  03F2  7E          	ld	a,(hl)
1413  03F3  CB 67       	bit	4, a
1414  03F5  20 4D       	jr	NZ,l_player_handle_lock_00112
1415  03F7  CB 47       	bit	0, a
1416  03F9  20 49       	jr	NZ,l_player_handle_lock_00112
1417  03FB  CB 4F       	bit	1, a
1418  03FD  20 45       	jr	NZ,l_player_handle_lock_00112
1419  03FF  21 00 00    	ld	hl,_dirs
1420  0402  CB 5E       	bit	3, (hl)
1421  0404  28 1C       	jr	Z,l_player_handle_lock_00105
1422  0406  ED 4B 00 00 	ld	bc,(_p_state_a)
1423  040A  0A          	ld	a,(bc)
1424  040B  5F          	ld	e,a
1425  040C  3A 00 00    	ld	a,(_dirs_last)
1426  040F  D6 02       	sub	a,0x02
1427  0411  28 0B       	jr	Z,l_player_handle_lock_00102
1428  0413  21 00 00    	ld	hl,_dirs_last
1429  0416  36 02       	ld	(hl),0x02
1430  0418  CB 83       	res	0, e
1431  041A  7B          	ld	a, e
1432  041B  02          	ld	(bc), a
1433  041C  18 04       	jr	l_player_handle_lock_00105
1434  041E              l_player_handle_lock_00102:
1435  041E  7B          	ld	a, e
1436  041F  F6 01       	or	a,0x01
1437  0421  02          	ld	(bc), a
1438  0422              l_player_handle_lock_00105:
1439  0422  21 00 00    	ld	hl,_dirs
1440  0425  CB 56       	bit	2, (hl)
1441  0427  28 1B       	jr	Z,l_player_handle_lock_00112
1442  0429  ED 4B 00 00 	ld	bc,(_p_state_a)
1443  042D  0A          	ld	a,(bc)
1444  042E  5F          	ld	e,a
1445  042F  3A 00 00    	ld	a,(_dirs_last)
1446  0432  3D          	dec	a
1447  0433  28 0B       	jr	Z,l_player_handle_lock_00107
1448  0435  21 00 00    	ld	hl,_dirs_last
1449  0438  36 01       	ld	(hl),0x01
1450  043A  CB 83       	res	0, e
1451  043C  7B          	ld	a, e
1452  043D  02          	ld	(bc), a
1453  043E  18 04       	jr	l_player_handle_lock_00112
1454  0440              l_player_handle_lock_00107:
1455  0440  7B          	ld	a, e
1456  0441  F6 01       	or	a,0x01
1457  0443  02          	ld	(bc), a
1458  0444              l_player_handle_lock_00112:
1459  0444  21 00 00    	ld	hl,_dirs
1460  0447  CB 5E       	bit	3,(hl)
1461  0449  C0          	ret	NZ
1462  044A  CB 56       	bit	2, (hl)
1463  044C  C0          	ret	NZ
1464  044D  ED 4B 00 00 	ld	bc,(_p_state_a)
1465  0451  0A          	ld	a,(bc)
1466  0452  E6 FE       	and	a,0xfe
1467  0454  02          	ld	(bc), a
1468  0455  C9          	ret
1469  0456              	SECTION code_compiler
1470  0456              ;	---------------------------------
1471  0456              ; Function player_handle_walk
1472  0456              ; ---------------------------------
1473  0456              _player_handle_walk:
1474  0456  2A 00 00    	ld	hl,(_p_state)
1475  0459  CB 66       	bit	4,(hl)
1476  045B  20 37       	jr	NZ,l_player_handle_walk_00111
1477  045D  21 00 00    	ld	hl,_dirs
1478  0460  CB 5E       	bit	3, (hl)
1479  0462  28 11       	jr	Z,l_player_handle_walk_00104
1480  0464  2A 00 00    	ld	hl,(_p_state_a)
1481  0467  CB 5E       	bit	3,(hl)
1482  0469  28 07       	jr	Z,l_player_handle_walk_00102
1483  046B  01 0F 00    	ld	bc,_colint+15
1484  046E  0A          	ld	a, (bc)
1485  046F  C6 FF       	add	a,0xff
1486  0471  02          	ld	(bc), a
1487  0472              l_player_handle_walk_00102:
1488  0472  CD 00 00    	call	_spr_set_right
1489  0475              l_player_handle_walk_00104:
1490  0475  21 00 00    	ld	hl,_dirs
1491  0478  CB 56       	bit	2, (hl)
1492  047A  28 10       	jr	Z,l_player_handle_walk_00108
1493  047C  2A 00 00    	ld	hl,(_p_state_a)
1494  047F  CB 66       	bit	4,(hl)
1495  0481  28 06       	jr	Z,l_player_handle_walk_00106
1496  0483  01 0F 00    	ld	bc,_colint+15
1497  0486  0A          	ld	a, (bc)
1498  0487  3C          	inc	a
1499  0488  02          	ld	(bc), a
1500  0489              l_player_handle_walk_00106:
1501  0489  CD 00 00    	call	_spr_set_left
1502  048C              l_player_handle_walk_00108:
1503  048C  21 08 04    	ld	hl,0x0408
1504  048F  E5          	push	hl
1505  0490  CD 77 07    	call	_player_tile
1506  0493  F1          	pop	af
1507  0494              l_player_handle_walk_00111:
1508  0494  C9          	ret
1509  0495              	SECTION code_compiler
1510  0495              ;	---------------------------------
1511  0495              ; Function player_handle_fall
1512  0495              ; ---------------------------------
1513  0495              _player_handle_fall:
1514  0495  AF          	xor	a, a
1515  0496  F5          	push	af
1516  0497  33          	inc	sp
1517  0498  CD A9 09    	call	_player_check_floor
1518  049B  33          	inc	sp
1519  049C  7D          	ld	a, l
1520  049D  B7          	or	a, a
1521  049E  C8          	ret	Z
1522  049F  3E 01       	ld	a,0x01
1523  04A1  F5          	push	af
1524  04A2  33          	inc	sp
1525  04A3  CD A9 09    	call	_player_check_floor
1526  04A6  33          	inc	sp
1527  04A7  7D          	ld	a, l
1528  04A8  B7          	or	a, a
1529  04A9  C8          	ret	Z
1530  04AA  3A 0F 00    	ld	a,(_lin + 0x000f)
1531  04AD  32 00 00    	ld	(_player_jump_top),a
1532  04B0  ED 4B 00 00 	ld	bc,(_p_state)
1533  04B4  0A          	ld	a,(bc)
1534  04B5  F6 02       	or	a,0x02
1535  04B7  02          	ld	(bc),a
1536  04B8  ED 4B 00 00 	ld	bc,(_p_state)
1537  04BC  0A          	ld	a,(bc)
1538  04BD  E6 F7       	and	a,0xf7
1539  04BF  02          	ld	(bc),a
1540  04C0  ED 4B 00 00 	ld	bc,(_p_state)
1541  04C4  0A          	ld	a,(bc)
1542  04C5  E6 FB       	and	a,0xfb
1543  04C7  02          	ld	(bc), a
1544  04C8  21 00 00    	ld	hl,_player_jump_count
1545  04CB  36 FF       	ld	(hl),0xff
1546  04CD  C3 00 00    	jp  _audio_fall
1547  04D0              	SECTION code_compiler
1548  04D0              ;	---------------------------------
1549  04D0              ; Function player_handle_conveyor
1550  04D0              ; ---------------------------------
1551  04D0              _player_handle_conveyor:
1552  04D0  CD 55 09    	call	_player_check_conveyor
1553  04D3  2A 00 00    	ld	hl,(_p_state)
1554  04D6  CB 66       	bit	4,(hl)
1555  04D8  28 2B       	jr	Z,l_player_handle_conveyor_00106
1556  04DA  3A 00 00    	ld	a,(_game_conveyor_dir)
1557  04DD  D6 02       	sub	a,0x02
1558  04DF  20 0F       	jr	NZ,l_player_handle_conveyor_00102
1559  04E1  CD 00 00    	call	_spr_set_right
1560  04E4  21 08 04    	ld	hl,0x0408
1561  04E7  E5          	push	hl
1562  04E8  CD 77 07    	call	_player_tile
1563  04EB  F1          	pop	af
1564  04EC  2E 01       	ld	l,0x01
1565  04EE  18 17       	jr	l_player_handle_conveyor_00107
1566  04F0              l_player_handle_conveyor_00102:
1567  04F0  3A 00 00    	ld	a,(_game_conveyor_dir)
1568  04F3  3D          	dec	a
1569  04F4  20 0F       	jr	NZ,l_player_handle_conveyor_00106
1570  04F6  CD 00 00    	call	_spr_set_left
1571  04F9  21 08 04    	ld	hl,0x0408
1572  04FC  E5          	push	hl
1573  04FD  CD 77 07    	call	_player_tile
1574  0500  F1          	pop	af
1575  0501  2E 01       	ld	l,0x01
1576  0503  18 02       	jr	l_player_handle_conveyor_00107
1577  0505              l_player_handle_conveyor_00106:
1578  0505  2E 00       	ld	l,0x00
1579  0507              l_player_handle_conveyor_00107:
1580  0507  C9          	ret
1581  0508              	SECTION code_compiler
1582  0508              ;	---------------------------------
1583  0508              ; Function player_new_jump
1584  0508              ; ---------------------------------
1585  0508              _player_new_jump:
1586  0508  21 0F 00    	ld	hl,+(_col + 0x000f)
1587  050B  56          	ld	d, (hl)
1588  050C  21 0F 00    	ld	hl,+(_lin + 0x000f)
1589  050F  46          	ld	b, (hl)
1590  0510  05          	dec	b
1591  0511  05          	dec	b
1592  0512  58          	ld	e,b
1593  0513  D5          	push	de
1594  0514  CD DF 08    	call	_player_check_ceil
1595  0517  F1          	pop	af
1596  0518  7D          	ld	a, l
1597  0519  B7          	or	a, a
1598  051A  CA C8 05    	jp	Z, l_player_new_jump_00120
1599  051D  3A 00 00    	ld	a,(_game_mode)
1600  0520  B7          	or	a, a
1601  0521  20 0E       	jr	NZ,l_player_new_jump_00102
1602  0523  21 64 00    	ld	hl,0x0064
1603  0526  22 00 00    	ld	(_game_gravity),hl
1604  0529  21 A8 FD    	ld	hl,0xfda8
1605  052C  22 00 00    	ld	(_player_vel_y0),hl
1606  052F  18 0C       	jr	l_player_new_jump_00103
1607  0531              l_player_new_jump_00102:
1608  0531  21 64 00    	ld	hl,0x0064
1609  0534  22 00 00    	ld	(_game_gravity),hl
1610  0537  21 A8 FD    	ld	hl,0xfda8
1611  053A  22 00 00    	ld	(_player_vel_y0),hl
1612  053D              l_player_new_jump_00103:
1613  053D  21 00 00    	ld	hl,_player_vel_inc
1614  0540  36 01       	ld	(hl),0x01
1615  0542  21 00 00    	ld	hl,_player_jump_count
1616  0545  36 FF       	ld	(hl),0xff
1617  0547  CD 00 00    	call	_audio_jump
1618  054A  CD 00 00    	call	_spr_set_up
1619  054D  2A 00 00    	ld	hl,(_player_vel_y0)
1620  0550  22 00 00    	ld	(_player_vel_y),hl
1621  0553  CD D0 04    	call	_player_handle_conveyor
1622  0556  7D          	ld	a, l
1623  0557  B7          	or	a, a
1624  0558  28 32       	jr	Z,l_player_new_jump_00116
1625  055A  2A 00 00    	ld	hl,(_p_state_a)
1626  055D  7E          	ld	a,(hl)
1627  055E  CB 47       	bit	0, a
1628  0560  28 20       	jr	Z,l_player_new_jump_00109
1629  0562  CB 4F       	bit	1, a
1630  0564  20 1C       	jr	NZ,l_player_new_jump_00109
1631  0566  21 00 00    	ld	hl,_dirs
1632  0569  CB 56       	bit	2, (hl)
1633  056B  28 03       	jr	Z,l_player_new_jump_00105
1634  056D  CD 00 00    	call	_spr_set_left
1635  0570              l_player_new_jump_00105:
1636  0570  21 00 00    	ld	hl,_dirs
1637  0573  CB 5E       	bit	3, (hl)
1638  0575  28 03       	jr	Z,l_player_new_jump_00107
1639  0577  CD 00 00    	call	_spr_set_right
1640  057A              l_player_new_jump_00107:
1641  057A  21 08 04    	ld	hl,0x0408
1642  057D  E5          	push	hl
1643  057E  CD 77 07    	call	_player_tile
1644  0581  F1          	pop	af
1645  0582              l_player_new_jump_00109:
1646  0582  ED 4B 00 00 	ld	bc,(_p_state_a)
1647  0586  0A          	ld	a,(bc)
1648  0587  F6 02       	or	a,0x02
1649  0589  02          	ld	(bc), a
1650  058A  18 2C       	jr	l_player_new_jump_00117
1651  058C              l_player_new_jump_00116:
1652  058C  ED 4B 00 00 	ld	bc,(_p_state)
1653  0590  0A          	ld	a,(bc)
1654  0591  E6 F7       	and	a,0xf7
1655  0593  02          	ld	(bc),a
1656  0594  ED 4B 00 00 	ld	bc,(_p_state)
1657  0598  0A          	ld	a,(bc)
1658  0599  E6 FB       	and	a,0xfb
1659  059B  02          	ld	(bc), a
1660  059C  21 00 00    	ld	hl,_dirs
1661  059F  CB 56       	bit	2, (hl)
1662  05A1  28 03       	jr	Z,l_player_new_jump_00112
1663  05A3  CD 00 00    	call	_spr_set_left
1664  05A6              l_player_new_jump_00112:
1665  05A6  21 00 00    	ld	hl,_dirs
1666  05A9  CB 5E       	bit	3, (hl)
1667  05AB  28 03       	jr	Z,l_player_new_jump_00114
1668  05AD  CD 00 00    	call	_spr_set_right
1669  05B0              l_player_new_jump_00114:
1670  05B0  21 08 04    	ld	hl,0x0408
1671  05B3  E5          	push	hl
1672  05B4  CD 77 07    	call	_player_tile
1673  05B7  F1          	pop	af
1674  05B8              l_player_new_jump_00117:
1675  05B8  ED 4B 00 00 	ld	bc,(_p_state)
1676  05BC  0A          	ld	a,(bc)
1677  05BD  E6 EF       	and	a,0xef
1678  05BF  02          	ld	(bc), a
1679  05C0  ED 4B 00 00 	ld	bc,(_p_state_a)
1680  05C4  0A          	ld	a,(bc)
1681  05C5  E6 FD       	and	a,0xfd
1682  05C7  02          	ld	(bc), a
1683  05C8              l_player_new_jump_00120:
1684  05C8  C9          	ret
1685  05C9              	SECTION code_compiler
1686  05C9              ;	---------------------------------
1687  05C9              ; Function player_collision
1688  05C9              ; ---------------------------------
1689  05C9              _player_collision:
1690  05C9  ED 4B 00 00 	ld	bc,(_p_state)
1691  05CD  0A          	ld	a,(bc)
1692  05CE  E6 DF       	and	a,0xdf
1693  05D0  02          	ld	(bc), a
1694  05D1  21 0F 00    	ld	hl,+(_col + 0x000f)
1695  05D4  56          	ld	d, (hl)
1696  05D5  21 0F 00    	ld	hl,+(_lin + 0x000f)
1697  05D8  5E          	ld	e, (hl)
1698  05D9  D5          	push	de
1699  05DA  CD 00 00    	call	_spr_calc_index
1700  05DD  F1          	pop	af
1701  05DE  22 00 00    	ld	(_index1),hl
1702  05E1  CD EC 06    	call	_player_pick
1703  05E4  21 0F 00    	ld	hl,+(_col + 0x000f)
1704  05E7  56          	ld	d, (hl)
1705  05E8  3A 0F 00    	ld	a,(_lin + 0x000f)
1706  05EB  C6 0E       	add	a,0x0e
1707  05ED  5F          	ld	e, a
1708  05EE  D5          	push	de
1709  05EF  CD 00 00    	call	_spr_calc_index
1710  05F2  F1          	pop	af
1711  05F3  22 00 00    	ld	(_index1),hl
1712  05F6  CD EC 06    	call	_player_pick
1713  05F9  21 0F 00    	ld	hl,+(_col + 0x000f)
1714  05FC  56          	ld	d, (hl)
1715  05FD  14          	inc	d
1716  05FE  21 0F 00    	ld	hl,+(_lin + 0x000f)
1717  0601  5E          	ld	e, (hl)
1718  0602  D5          	push	de
1719  0603  CD 00 00    	call	_spr_calc_index
1720  0606  F1          	pop	af
1721  0607  22 00 00    	ld	(_index1),hl
1722  060A  CD EC 06    	call	_player_pick
1723  060D  21 0F 00    	ld	hl,+(_col + 0x000f)
1724  0610  56          	ld	d, (hl)
1725  0611  14          	inc	d
1726  0612  3A 0F 00    	ld	a,(_lin + 0x000f)
1727  0615  C6 0E       	add	a,0x0e
1728  0617  5F          	ld	e, a
1729  0618  D5          	push	de
1730  0619  CD 00 00    	call	_spr_calc_index
1731  061C  F1          	pop	af
1732  061D  22 00 00    	ld	(_index1),hl
1733  0620  CD EC 06    	call	_player_pick
1734  0623  21 00 00    	ld	hl,_i
1735  0626  36 00       	ld	(hl),0x00
1736  0628              l_player_collision_00119:
1737  0628  2A 00 00    	ld	hl,(_i)
1738  062B  26 00       	ld	h,0x00
1739  062D  01 00 00    	ld	bc,_class
1740  0630  09          	add	hl,bc
1741  0631  7E          	ld	a,(hl)
1742  0632  B7          	or	a,a
1743  0633  CA E0 06    	jp	Z,l_player_collision_00120
1744  0636  2A 00 00    	ld	hl,(_i)
1745  0639  26 00       	ld	h,0x00
1746  063B  01 00 00    	ld	bc,_col
1747  063E  09          	add	hl,bc
1748  063F  4E          	ld	c, (hl)
1749  0640  06 00       	ld	b,0x00
1750  0642  ED 5B 0F 00 	ld	de,(_col + 0x000f)
1751  0646  50          	ld	d,b
1752  0647  79          	ld	a, c
1753  0648  93          	sub	a, e
1754  0649  6F          	ld	l, a
1755  064A  78          	ld	a, b
1756  064B  9A          	sbc	a, d
1757  064C  67          	ld	h, a
1758  064D  CD 00 00    	call	_abs_fastcall
1759  0650  7D          	ld	a,l
1760  0651  32 00 00    	ld	(_v0),a
1761  0654  D6 02       	sub	a,0x02
1762  0656  D2 E0 06    	jp	NC, l_player_collision_00120
1763  0659  2A 00 00    	ld	hl,(_i)
1764  065C  26 00       	ld	h,0x00
1765  065E  01 00 00    	ld	bc,_lin
1766  0661  09          	add	hl,bc
1767  0662  4E          	ld	c,(hl)
1768  0663  06 00       	ld	b,0x00
1769  0665  ED 5B 0F 00 	ld	de,(_lin + 0x000f)
1770  0669  50          	ld	d,b
1771  066A  79          	ld	a, c
1772  066B  93          	sub	a, e
1773  066C  6F          	ld	l, a
1774  066D  78          	ld	a, b
1775  066E  9A          	sbc	a, d
1776  066F  67          	ld	h, a
1777  0670  CD 00 00    	call	_abs_fastcall
1778  0673  7D          	ld	a,l
1779  0674  32 00 00    	ld	(_v0),a
1780  0677  2A 00 00    	ld	hl,(_i)
1781  067A  26 00       	ld	h,0x00
1782  067C  01 00 00    	ld	bc,_lin
1783  067F  09          	add	hl,bc
1784  0680  4E          	ld	c,(hl)
1785  0681  21 0F 00    	ld	hl,+(_lin + 0x000f)
1786  0684  46          	ld	b, (hl)
1787  0685  79          	ld	a, c
1788  0686  90          	sub	a, b
1789  0687  30 13       	jr	NC,l_player_collision_00108
1790  0689  21 00 00    	ld	hl,_v0
1791  068C  7E          	ld	a, (hl)
1792  068D  D6 10       	sub	a,0x10
1793  068F  30 04       	jr	NC,l_player_collision_00102
1794  0691  36 01       	ld	(hl),0x01
1795  0693  18 18       	jr	l_player_collision_00109
1796  0695              l_player_collision_00102:
1797  0695  21 00 00    	ld	hl,_v0
1798  0698  36 00       	ld	(hl),0x00
1799  069A  18 11       	jr	l_player_collision_00109
1800  069C              l_player_collision_00108:
1801  069C  21 00 00    	ld	hl,_v0
1802  069F  7E          	ld	a, (hl)
1803  06A0  D6 0E       	sub	a,0x0e
1804  06A2  30 04       	jr	NC,l_player_collision_00105
1805  06A4  36 01       	ld	(hl),0x01
1806  06A6  18 05       	jr	l_player_collision_00109
1807  06A8              l_player_collision_00105:
1808  06A8  21 00 00    	ld	hl,_v0
1809  06AB  36 00       	ld	(hl),0x00
1810  06AD              l_player_collision_00109:
1811  06AD  3A 00 00    	ld	a,(_v0)
1812  06B0  B7          	or	a, a
1813  06B1  28 2D       	jr	Z,l_player_collision_00120
1814  06B3  2A 00 00    	ld	hl,(_i)
1815  06B6  26 00       	ld	h,0x00
1816  06B8  01 00 00    	ld	bc,_colint
1817  06BB  09          	add	hl,bc
1818  06BC  4E          	ld	c,(hl)
1819  06BD  06 00       	ld	b,0x00
1820  06BF  ED 5B 0F 00 	ld	de,(_colint + 15)
1821  06C3  50          	ld	d,b
1822  06C4  79          	ld	a, c
1823  06C5  93          	sub	a, e
1824  06C6  6F          	ld	l, a
1825  06C7  78          	ld	a, b
1826  06C8  9A          	sbc	a, d
1827  06C9  67          	ld	h, a
1828  06CA  CD 00 00    	call	_abs_fastcall
1829  06CD  7D          	ld	a,l
1830  06CE  32 00 00    	ld	(_v0),a
1831  06D1  D6 02       	sub	a,0x02
1832  06D3  30 0B       	jr	NC,l_player_collision_00120
1833  06D5  21 FF FF    	ld	hl,0xffff
1834  06D8  22 00 00    	ld	(_player_kill_index),hl
1835  06DB  21 00 00    	ld	hl,_player_killed
1836  06DE  36 01       	ld	(hl),0x01
1837  06E0              l_player_collision_00120:
1838  06E0  21 00 00    	ld	hl,_i
1839  06E3  7E          	ld	a,(hl)
1840  06E4  3C          	inc	a
1841  06E5  77          	ld	(hl),a
1842  06E6  D6 0F       	sub	a,0x0f
1843  06E8  DA 28 06    	jp	C, l_player_collision_00119
1844  06EB  C9          	ret
1845  06EC              	SECTION code_compiler
1846  06EC              ;	---------------------------------
1847  06EC              ; Function player_pick
1848  06EC              ; ---------------------------------
1849  06EC              _player_pick:
1850  06EC  01 00 00    	ld	bc,_scr_map
1851  06EF  2A 00 00    	ld	hl,(_index1)
1852  06F2  09          	add	hl,bc
1853  06F3  7E          	ld	a,(hl)
1854  06F4  32 00 00    	ld	(_v0),a
1855  06F7  F5          	push	af
1856  06F8  33          	inc	sp
1857  06F9  CD F6 07    	call	_player_pick_deadly
1858  06FC  33          	inc	sp
1859  06FD  7D          	ld	a,l
1860  06FE  32 00 00    	ld	(_v0),a
1861  0701  F5          	push	af
1862  0702  33          	inc	sp
1863  0703  CD 2B 08    	call	_player_pick_exit
1864  0706  33          	inc	sp
1865  0707  7D          	ld	a,l
1866  0708  32 00 00    	ld	(_v0),a
1867  070B  2A 00 00    	ld	hl,(_index1)
1868  070E  E5          	push	hl
1869  070F  F5          	push	af
1870  0710  33          	inc	sp
1871  0711  CD B1 07    	call	_player_pick_item
1872  0714  F1          	pop	af
1873  0715  33          	inc	sp
1874  0716  7D          	ld	a,l
1875  0717  32 00 00    	ld	(_v0),a
1876  071A  F5          	push	af
1877  071B  33          	inc	sp
1878  071C  CD 47 08    	call	_player_pick_extra
1879  071F  33          	inc	sp
1880  0720  7D          	ld	a,l
1881  0721  32 00 00    	ld	(_v0),a
1882  0724  C9          	ret
1883  0725              	SECTION code_compiler
1884  0725              ;	---------------------------------
1885  0725              ; Function player_check_input
1886  0725              ; ---------------------------------
1887  0725              _player_check_input:
1888  0725  21 00 00    	ld	hl,_dirs
1889  0728  CB 56       	bit	2,(hl)
1890  072A  28 06       	jr	Z,l_player_check_input_00102
1891  072C  CB 5E       	bit	3,(hl)
1892  072E  28 02       	jr	Z,l_player_check_input_00102
1893  0730  36 00       	ld	(hl),0x00
1894  0732              l_player_check_input_00102:
1895  0732  21 00 00    	ld	hl,_dirs
1896  0735  CB 56       	bit	2,(hl)
1897  0737  20 08       	jr	NZ,l_player_check_input_00104
1898  0739  CB 5E       	bit	3,(hl)
1899  073B  20 04       	jr	NZ,l_player_check_input_00104
1900  073D  CB 7E       	bit	7, (hl)
1901  073F  28 04       	jr	Z,l_player_check_input_00105
1902  0741              l_player_check_input_00104:
1903  0741  2E 01       	ld	l,0x01
1904  0743  18 02       	jr	l_player_check_input_00108
1905  0745              l_player_check_input_00105:
1906  0745  2E 00       	ld	l,0x00
1907  0747              l_player_check_input_00108:
1908  0747  C9          	ret
1909  0748              	SECTION code_compiler
1910  0748              ;	---------------------------------
1911  0748              ; Function player_1up
1912  0748              ; ---------------------------------
1913  0748              _player_1up:
1914  0748  21 00 00    	ld	hl,_player_lives
1915  074B  7E          	ld	a, (hl)
1916  074C  D6 64       	sub	a,0x64
1917  074E  D0          	ret	NC
1918  074F  34          	inc	(hl)
1919  0750  CD 00 00    	call	_spr_flatten
1920  0753  21 19 00    	ld	hl,___str_2
1921  0756  E5          	push	hl
1922  0757  21 0C 0C    	ld	hl,0x0c0c
1923  075A  E5          	push	hl
1924  075B  CD 00 00    	call	_zx_print_str
1925  075E  AF          	xor	a, a
1926  075F  F5          	push	af
1927  0760  33          	inc	sp
1928  0761  21 19 00    	ld	hl,0x0019
1929  0764  E5          	push	hl
1930  0765  21 0C 11    	ld	hl,0x110c
1931  0768  E5          	push	hl
1932  0769  3E 0C       	ld	a,0x0c
1933  076B  F5          	push	af
1934  076C  33          	inc	sp
1935  076D  CD 00 00    	call	_game_colour_message
1936  0770  F1          	pop	af
1937  0771  F1          	pop	af
1938  0772  F1          	pop	af
1939  0773  CD 00 00    	call	_spr_unflattenP1
1940  0776  C9          	ret
1941  0777              	SECTION rodata_compiler
1942  0019              ___str_2:
1943  0019  31 20 55 50 21 
                        	DEFM "1 UP!"
1944  001E  00          	DEFB 0x00
1945  001F              	SECTION code_compiler
1946  0777              ;	---------------------------------
1947  0777              ; Function player_tile
1948  0777              ; ---------------------------------
1949  0777              _player_tile:
1950  0777  CD 00 00    	call	___sdcc_enter_ix
1951  077A  21 05 00    	ld	hl,0x0005
1952  077D  39          	add	hl, sp
1953  077E  EB          	ex	de,hl
1954  077F  21 04 00    	ld	hl,0x0004
1955  0782  39          	add	hl, sp
1956  0783  D5          	push	de
1957  0784  E5          	push	hl
1958  0785  CD 00 00    	call	_spr_get_tile_dir
1959  0788  F1          	pop	af
1960  0789  F1          	pop	af
1961  078A  7D          	ld	a,l
1962  078B  32 0F 00    	ld	((_tile + 0x000f)),a
1963  078E  DD E1       	pop	ix
1964  0790  C9          	ret
1965  0791              	SECTION code_compiler
1966  0791              ;	---------------------------------
1967  0791              ; Function player_score_add
1968  0791              ; ---------------------------------
1969  0791              _player_score_add:
1970  0791  ED 4B 00 00 	ld	bc,(_player_score)
1971  0795  09          	add	hl,bc
1972  0796  22 00 00    	ld	(_player_score),hl
1973  0799  3A 00 00    	ld	a,(_game_score_top)
1974  079C  21 00 00    	ld	hl,_player_score
1975  079F  96          	sub	a, (hl)
1976  07A0  3A 01 00    	ld	a,(_game_score_top + 1)
1977  07A3  23          	inc	hl
1978  07A4  9E          	sbc	a, (hl)
1979  07A5  D2 00 00    	jp	NC,_game_print_score
1980  07A8  2A 00 00    	ld	hl,(_player_score)
1981  07AB  22 00 00    	ld	(_game_score_top),hl
1982  07AE  C3 00 00    	jp  _game_print_score
1983  07B1              	SECTION code_compiler
1984  07B1              ;	---------------------------------
1985  07B1              ; Function player_pick_item
1986  07B1              ; ---------------------------------
1987  07B1              _player_pick_item:
1988  07B1  CD 00 00    	call	___sdcc_enter_ix
1989  07B4  DD 7E 04    	ld	a,(ix+4)
1990  07B7  D6 08       	sub	a,0x08
1991  07B9  20 35       	jr	NZ,l_player_pick_item_00104
1992  07BB  21 64 00    	ld	hl,0x0064
1993  07BE  CD 91 07    	call	_player_score_add
1994  07C1  3E 00       	ld	a, +((_scr_map) & 0xFF)
1995  07C3  DD 86 05    	add	a,(ix+5)
1996  07C6  4F          	ld	c, a
1997  07C7  3E 00       	ld	a, +((_scr_map) / 256)
1998  07C9  DD 8E 06    	adc	a,(ix+6)
1999  07CC  47          	ld	b, a
2000  07CD  AF          	xor	a, a
2001  07CE  02          	ld	(bc), a
2002  07CF  21 00 00    	ld	hl,_player_coins
2003  07D2  34          	inc	(hl)
2004  07D3  CD 00 00    	call	_audio_coin
2005  07D6  3A 00 00    	ld	a,(_obj_count)
2006  07D9  21 00 00    	ld	hl,_player_coins
2007  07DC  96          	sub	a, (hl)
2008  07DD  20 0D       	jr	NZ,l_player_pick_item_00102
2009  07DF  3E 80       	ld	a,0x80
2010  07E1  F5          	push	af
2011  07E2  33          	inc	sp
2012  07E3  CD 00 00    	call	_game_flash_exit
2013  07E6  33          	inc	sp
2014  07E7  21 00 00    	ld	hl,_obj_count
2015  07EA  36 FF       	ld	(hl),0xff
2016  07EC              l_player_pick_item_00102:
2017  07EC  2E 00       	ld	l,0x00
2018  07EE  18 03       	jr	l_player_pick_item_00105
2019  07F0              l_player_pick_item_00104:
2020  07F0  DD 6E 04    	ld	l,(ix+4)
2021  07F3              l_player_pick_item_00105:
2022  07F3  DD E1       	pop	ix
2023  07F5  C9          	ret
2024  07F6              	SECTION code_compiler
2025  07F6              ;	---------------------------------
2026  07F6              ; Function player_pick_deadly
2027  07F6              ; ---------------------------------
2028  07F6              _player_pick_deadly:
2029  07F6  CD 00 00    	call	___sdcc_enter_ix
2030  07F9  3E 00       	ld	a, +((_tile_class) & 0xFF)
2031  07FB  DD 86 04    	add	a,(ix+4)
2032  07FE  4F          	ld	c, a
2033  07FF  3E 00       	ld	a, +((_tile_class) / 256)
2034  0801  CE 00       	adc	a,0x00
2035  0803  47          	ld	b, a
2036  0804  0A          	ld	a, (bc)
2037  0805  DD 77 04    	ld	(ix+4),a
2038  0808  D6 05       	sub	a,0x05
2039  080A  20 19       	jr	NZ,l_player_pick_deadly_00102
2040  080C  21 00 00    	ld	hl,_player_killed
2041  080F  36 01       	ld	(hl),0x01
2042  0811  2A 00 00    	ld	hl,(_index1)
2043  0814  22 00 00    	ld	(_player_kill_index),hl
2044  0817  21 00 00    	ld	hl,_v0
2045  081A  36 00       	ld	(hl),0x00
2046  081C  21 00 00    	ld	hl,_v1
2047  081F  36 00       	ld	(hl),0x00
2048  0821  2E 00       	ld	l,0x00
2049  0823  18 03       	jr	l_player_pick_deadly_00103
2050  0825              l_player_pick_deadly_00102:
2051  0825  DD 6E 04    	ld	l,(ix+4)
2052  0828              l_player_pick_deadly_00103:
2053  0828  DD E1       	pop	ix
2054  082A  C9          	ret
2055  082B              	SECTION code_compiler
2056  082B              ;	---------------------------------
2057  082B              ; Function player_pick_exit
2058  082B              ; ---------------------------------
2059  082B              _player_pick_exit:
2060  082B  CD 00 00    	call	___sdcc_enter_ix
2061  082E  DD 7E 04    	ld	a,(ix+4)
2062  0831  D6 20       	sub	a,0x20
2063  0833  20 0C       	jr	NZ,l_player_pick_exit_00102
2064  0835  ED 4B 00 00 	ld	bc,(_p_state)
2065  0839  0A          	ld	a,(bc)
2066  083A  F6 20       	or	a,0x20
2067  083C  02          	ld	(bc), a
2068  083D  2E 00       	ld	l,0x00
2069  083F  18 03       	jr	l_player_pick_exit_00103
2070  0841              l_player_pick_exit_00102:
2071  0841  DD 6E 04    	ld	l,(ix+4)
2072  0844              l_player_pick_exit_00103:
2073  0844  DD E1       	pop	ix
2074  0846  C9          	ret
2075  0847              	SECTION code_compiler
2076  0847              ;	---------------------------------
2077  0847              ; Function player_pick_extra
2078  0847              ; ---------------------------------
2079  0847              _player_pick_extra:
2080  0847  CD 00 00    	call	___sdcc_enter_ix
2081  084A  DD 7E 04    	ld	a,(ix+4)
2082  084D  D6 06       	sub	a,0x06
2083  084F  C2 D9 08    	jp	NZ,l_player_pick_extra_00110
2084  0852  3A 00 00    	ld	a,(_scr_curr)
2085  0855  FE 07       	cp	a,0x07
2086  0857  28 04       	jr	Z,l_player_pick_extra_00106
2087  0859  D6 0B       	sub	a,0x0b
2088  085B  20 78       	jr	NZ,l_player_pick_extra_00107
2089  085D              l_player_pick_extra_00106:
2090  085D  01 00 00    	ld	bc,_scr_map
2091  0860  2A 00 00    	ld	hl,(_index1)
2092  0863  09          	add	hl,bc
2093  0864  36 08       	ld	(hl),0x08
2094  0866  CD 00 00    	call	_game_cell_paint_index
2095  0869  21 00 00    	ld	hl,_index1
2096  086C  7E          	ld	a, (hl)
2097  086D  D6 05       	sub	a,0x05
2098  086F  23          	inc	hl
2099  0870  B6          	or	a, (hl)
2100  0871  28 0A       	jr	Z,l_player_pick_extra_00101
2101  0873  21 00 00    	ld	hl,_index1
2102  0876  7E          	ld	a, (hl)
2103  0877  D6 06       	sub	a,0x06
2104  0879  23          	inc	hl
2105  087A  B6          	or	a, (hl)
2106  087B  20 21       	jr	NZ,l_player_pick_extra_00102
2107  087D              l_player_pick_extra_00101:
2108  087D  21 71 01    	ld	hl,0x0171
2109  0880  22 00 00    	ld	(_index1),hl
2110  0883  21 71 01    	ld	hl, +(_scr_map + 0x0171)
2111  0886  36 00       	ld	(hl),0x00
2112  0888  CD 00 00    	call	_game_cell_paint_index
2113  088B  21 91 01    	ld	hl,0x0191
2114  088E  22 00 00    	ld	(_index1),hl
2115  0891  21 91 01    	ld	hl, +(_scr_map + 0x0191)
2116  0894  36 00       	ld	(hl),0x00
2117  0896  CD 00 00    	call	_game_cell_paint_index
2118  0899  21 02 00    	ld	hl, +(_value_b + 0x0002)
2119  089C  36 12       	ld	(hl),0x12
2120  089E              l_player_pick_extra_00102:
2121  089E  21 00 00    	ld	hl,_index1
2122  08A1  7E          	ld	a, (hl)
2123  08A2  D6 12       	sub	a,0x12
2124  08A4  23          	inc	hl
2125  08A5  B6          	or	a, (hl)
2126  08A6  20 2D       	jr	NZ,l_player_pick_extra_00107
2127  08A8  01 00 00    	ld	bc,_tile+0
2128  08AB  0A          	ld	a, (bc)
2129  08AC  C6 02       	add	a,0x02
2130  08AE  02          	ld	(bc), a
2131  08AF  21 00 00    	ld	hl,_spr_kind
2132  08B2  36 07       	ld	(hl),0x07
2133  08B4  21 00 00    	ld	hl,_spr_speed
2134  08B7  36 04       	ld	(hl),0x04
2135  08B9  21 4F 00    	ld	hl,0x004f
2136  08BC  22 00 00    	ld	(_index1),hl
2137  08BF  21 4F 00    	ld	hl, +(_scr_map + 0x004f)
2138  08C2  36 00       	ld	(hl),0x00
2139  08C4  CD 00 00    	call	_game_cell_paint_index
2140  08C7  21 50 00    	ld	hl,0x0050
2141  08CA  22 00 00    	ld	(_index1),hl
2142  08CD  21 50 00    	ld	hl, +(_scr_map + 0x0050)
2143  08D0  36 00       	ld	(hl),0x00
2144  08D2  CD 00 00    	call	_game_cell_paint_index
2145  08D5              l_player_pick_extra_00107:
2146  08D5  2E 00       	ld	l,0x00
2147  08D7  18 03       	jr	l_player_pick_extra_00111
2148  08D9              l_player_pick_extra_00110:
2149  08D9  DD 6E 04    	ld	l,(ix+4)
2150  08DC              l_player_pick_extra_00111:
2151  08DC  DD E1       	pop	ix
2152  08DE  C9          	ret
2153  08DF              	SECTION code_compiler
2154  08DF              ;	---------------------------------
2155  08DF              ; Function player_check_ceil
2156  08DF              ; ---------------------------------
2157  08DF              _player_check_ceil:
2158  08DF  CD 00 00    	call	___sdcc_enter_ix
2159  08E2  DD 66 05    	ld	h,(ix+5)
2160  08E5  DD 6E 04    	ld	l,(ix+4)
2161  08E8  E5          	push	hl
2162  08E9  CD 00 00    	call	_spr_calc_index
2163  08EC  F1          	pop	af
2164  08ED  22 00 00    	ld	(_index1),hl
2165  08F0  01 00 00    	ld	bc,_scr_map
2166  08F3  09          	add	hl,bc
2167  08F4  7E          	ld	a,(hl)
2168  08F5  32 00 00    	ld	(_v0),a
2169  08F8  DD 46 05    	ld	b,(ix+5)
2170  08FB  04          	inc	b
2171  08FC  DD 4E 04    	ld	c,(ix+4)
2172  08FF  C5          	push	bc
2173  0900  CD 00 00    	call	_spr_calc_index
2174  0903  F1          	pop	af
2175  0904  22 00 00    	ld	(_index1),hl
2176  0907  01 00 00    	ld	bc,_scr_map
2177  090A  09          	add	hl,bc
2178  090B  7E          	ld	a,(hl)
2179  090C  32 00 00    	ld	(_v1),a
2180  090F  3E 1F       	ld	a,0x1f
2181  0911  21 00 00    	ld	hl,_v0
2182  0914  96          	sub	a, (hl)
2183  0915  30 02       	jr	NC,l_player_check_ceil_00102
2184  0917  36 00       	ld	(hl),0x00
2185  0919              l_player_check_ceil_00102:
2186  0919  3E 1F       	ld	a,0x1f
2187  091B  21 00 00    	ld	hl,_v1
2188  091E  96          	sub	a, (hl)
2189  091F  30 02       	jr	NC,l_player_check_ceil_00104
2190  0921  36 00       	ld	(hl),0x00
2191  0923              l_player_check_ceil_00104:
2192  0923  01 00 00    	ld	bc,_tile_class+0
2193  0926  79          	ld	a, c
2194  0927  21 00 00    	ld	hl,_v0
2195  092A  86          	add	a, (hl)
2196  092B  5F          	ld	e, a
2197  092C  78          	ld	a, b
2198  092D  CE 00       	adc	a,0x00
2199  092F  57          	ld	d, a
2200  0930  1A          	ld	a, (de)
2201  0931  77          	ld	(hl), a
2202  0932  79          	ld	a, c
2203  0933  21 00 00    	ld	hl,_v1
2204  0936  86          	add	a, (hl)
2205  0937  4F          	ld	c, a
2206  0938  78          	ld	a, b
2207  0939  CE 00       	adc	a,0x00
2208  093B  47          	ld	b, a
2209  093C  0A          	ld	a, (bc)
2210  093D  77          	ld	(hl), a
2211  093E  3A 00 00    	ld	a,(_v0)
2212  0941  D6 03       	sub	a,0x03
2213  0943  28 0B       	jr	Z,l_player_check_ceil_00106
2214  0945  3A 00 00    	ld	a,(_v1)
2215  0948  D6 03       	sub	a,0x03
2216  094A  28 04       	jr	Z,l_player_check_ceil_00106
2217  094C  2E 01       	ld	l,0x01
2218  094E  18 02       	jr	l_player_check_ceil_00108
2219  0950              l_player_check_ceil_00106:
2220  0950  2E 00       	ld	l,0x00
2221  0952              l_player_check_ceil_00108:
2222  0952  DD E1       	pop	ix
2223  0954  C9          	ret
2224  0955              	SECTION code_compiler
2225  0955              ;	---------------------------------
2226  0955              ; Function player_check_conveyor
2227  0955              ; ---------------------------------
2228  0955              _player_check_conveyor:
2229  0955  21 0F 00    	ld	hl,+(_col + 0x000f)
2230  0958  56          	ld	d, (hl)
2231  0959  3A 0F 00    	ld	a,(_lin + 0x000f)
2232  095C  C6 10       	add	a,0x10
2233  095E  5F          	ld	e, a
2234  095F  D5          	push	de
2235  0960  CD 00 00    	call	_spr_calc_index
2236  0963  F1          	pop	af
2237  0964  22 00 00    	ld	(_index1),hl
2238  0967  01 00 00    	ld	bc,_tile_class+0
2239  096A  11 00 00    	ld	de,_scr_map
2240  096D  2A 00 00    	ld	hl,(_index1)
2241  0970  19          	add	hl,de
2242  0971  6E          	ld	l,(hl)
2243  0972  26 00       	ld	h,0x00
2244  0974  09          	add	hl, bc
2245  0975  7E          	ld	a, (hl)
2246  0976  32 00 00    	ld	(_v0),a
2247  0979  ED 5B 00 00 	ld	de,(_index1)
2248  097D  13          	inc	de
2249  097E  21 00 00    	ld	hl,_scr_map
2250  0981  19          	add	hl, de
2251  0982  6E          	ld	l, (hl)
2252  0983  26 00       	ld	h,0x00
2253  0985  09          	add	hl, bc
2254  0986  7E          	ld	a, (hl)
2255  0987  32 00 00    	ld	(_v1),a
2256  098A  ED 4B 00 00 	ld	bc,(_p_state)
2257  098E  0A          	ld	a,(bc)
2258  098F  5F          	ld	e,a
2259  0990  3A 00 00    	ld	a,(_v0)
2260  0993  D6 04       	sub	a,0x04
2261  0995  28 07       	jr	Z,l_player_check_conveyor_00101
2262  0997  3A 00 00    	ld	a,(_v1)
2263  099A  D6 04       	sub	a,0x04
2264  099C  20 06       	jr	NZ,l_player_check_conveyor_00102
2265  099E              l_player_check_conveyor_00101:
2266  099E  7B          	ld	a, e
2267  099F  F6 10       	or	a,0x10
2268  09A1  02          	ld	(bc), a
2269  09A2  18 04       	jr	l_player_check_conveyor_00105
2270  09A4              l_player_check_conveyor_00102:
2271  09A4  CB A3       	res	4, e
2272  09A6  7B          	ld	a, e
2273  09A7  02          	ld	(bc), a
2274  09A8              l_player_check_conveyor_00105:
2275  09A8  C9          	ret
2276  09A9              	SECTION code_compiler
2277  09A9              ;	---------------------------------
2278  09A9              ; Function player_check_floor
2279  09A9              ; ---------------------------------
2280  09A9              _player_check_floor:
2281  09A9  CD 00 00    	call	___sdcc_enter_ix
2282  09AC  F5          	push	af
2283  09AD  3B          	dec	sp
2284  09AE  3A 0F 00    	ld	a,(_col + 0x000f)
2285  09B1  DD 86 04    	add	a,(ix+4)
2286  09B4  57          	ld	d, a
2287  09B5  3A 0F 00    	ld	a,(_lin + 0x000f)
2288  09B8  C6 10       	add	a,0x10
2289  09BA  5F          	ld	e, a
2290  09BB  D5          	push	de
2291  09BC  CD 00 00    	call	_spr_calc_index
2292  09BF  F1          	pop	af
2293  09C0  22 00 00    	ld	(_index1),hl
2294  09C3  3E 1F       	ld	a,0x1f
2295  09C5  21 00 00    	ld	hl,_v0
2296  09C8  96          	sub	a, (hl)
2297  09C9  30 02       	jr	NC,l_player_check_floor_00102
2298  09CB  36 00       	ld	(hl),0x00
2299  09CD              l_player_check_floor_00102:
2300  09CD  01 00 00    	ld	bc,_scr_map+0
2301  09D0  2A 00 00    	ld	hl,(_index1)
2302  09D3  09          	add	hl,bc
2303  09D4  7E          	ld	a,(hl)
2304  09D5  EB          	ex	de,hl
2305  09D6  DD 77 FF    	ld	(ix-1),a
2306  09D9  C6 00       	add	a,+((_tile_class) & 0xFF)
2307  09DB  6F          	ld	l, a
2308  09DC  3E 00       	ld	a, +((_tile_class) / 256)
2309  09DE  CE 00       	adc	a,0x00
2310  09E0  67          	ld	h, a
2311  09E1  7E          	ld	a, (hl)
2312  09E2  32 00 00    	ld	(_v0),a
2313  09E5  B7          	or	a, a
2314  09E6  28 0B       	jr	Z,l_player_check_floor_00103
2315  09E8  D6 08       	sub	a,0x08
2316  09EA  28 07       	jr	Z,l_player_check_floor_00103
2317  09EC  3A 00 00    	ld	a,(_v0)
2318  09EF  D6 05       	sub	a,0x05
2319  09F1  20 05       	jr	NZ,l_player_check_floor_00104
2320  09F3              l_player_check_floor_00103:
2321  09F3  2E 01       	ld	l,0x01
2322  09F5  C3 A5 0A    	jp	l_player_check_floor_00122
2323  09F8              l_player_check_floor_00104:
2324  09F8  3A 00 00    	ld	a,(_v0)
2325  09FB  D6 02       	sub	a,0x02
2326  09FD  C2 A3 0A    	jp	NZ,l_player_check_floor_00121
2327  0A00  2A 00 00    	ld	hl,(_p_state)
2328  0A03  DD 75 FD    	ld	(ix-3),l
2329  0A06  DD 74 FE    	ld	(ix-2),h
2330  0A09  E1          	pop	hl
2331  0A0A  7E          	ld	a,(hl)
2332  0A0B  E5          	push	hl
2333  0A0C  DD 77 FD    	ld	(ix-3),a
2334  0A0F  CB 57       	bit	2,a
2335  0A11  28 11       	jr	Z,l_player_check_floor_00108
2336  0A13  DD 7E 04    	ld	a,(ix+4)
2337  0A16  3D          	dec	a
2338  0A17  20 0B       	jr	NZ,l_player_check_floor_00108
2339  0A19  3A 0F 00    	ld	a,(_colint + 0x000f)
2340  0A1C  B7          	or	a, a
2341  0A1D  20 05       	jr	NZ,l_player_check_floor_00108
2342  0A1F  2E 01       	ld	l,0x01
2343  0A21  C3 A5 0A    	jp	l_player_check_floor_00122
2344  0A24              l_player_check_floor_00108:
2345  0A24  DD CB FD 4E 	bit	1,(ix-3)
2346  0A28  28 11       	jr	Z,l_player_check_floor_00112
2347  0A2A  DD 7E 04    	ld	a,(ix+4)
2348  0A2D  B7          	or	a, a
2349  0A2E  20 0B       	jr	NZ,l_player_check_floor_00112
2350  0A30  3A 0F 00    	ld	a,(_colint + 0x000f)
2351  0A33  D6 03       	sub	a,0x03
2352  0A35  20 04       	jr	NZ,l_player_check_floor_00112
2353  0A37  2E 01       	ld	l,0x01
2354  0A39  18 6A       	jr	l_player_check_floor_00122
2355  0A3B              l_player_check_floor_00112:
2356  0A3B  3A 0F 00    	ld	a,(_col + 0x000f)
2357  0A3E  DD 77 FD    	ld	(ix-3),a
2358  0A41  DD 86 04    	add	a,(ix+4)
2359  0A44  32 00 00    	ld	(_s_col1),a
2360  0A47  DD 7E FF    	ld	a,(ix-1)
2361  0A4A  D6 02       	sub	a,0x02
2362  0A4C  20 05       	jr	NZ,l_player_check_floor_00118
2363  0A4E  3E 09       	ld	a,0x09
2364  0A50  12          	ld	(de), a
2365  0A51  18 1F       	jr	l_player_check_floor_00119
2366  0A53              l_player_check_floor_00118:
2367  0A53  DD 7E FF    	ld	a,(ix-1)
2368  0A56  3C          	inc	a
2369  0A57  12          	ld	(de), a
2370  0A58  79          	ld	a, c
2371  0A59  21 00 00    	ld	hl,_index1
2372  0A5C  86          	add	a, (hl)
2373  0A5D  DD 77 FD    	ld	(ix-3),a
2374  0A60  78          	ld	a, b
2375  0A61  23          	inc	hl
2376  0A62  8E          	adc	a, (hl)
2377  0A63  DD 77 FE    	ld	(ix-2),a
2378  0A66  E1          	pop	hl
2379  0A67  5E          	ld	e,(hl)
2380  0A68  E5          	push	hl
2381  0A69  3E 0B       	ld	a,0x0b
2382  0A6B  93          	sub	a, e
2383  0A6C  30 04       	jr	NC,l_player_check_floor_00119
2384  0A6E  E1          	pop	hl
2385  0A6F  E5          	push	hl
2386  0A70  36 00       	ld	(hl),0x00
2387  0A72              l_player_check_floor_00119:
2388  0A72  ED 5B 0F 00 	ld	de,(_lin + 0x000f)
2389  0A76  16 00       	ld	d,0x00
2390  0A78  21 10 00    	ld	hl,0x0010
2391  0A7B  19          	add	hl, de
2392  0A7C  7D          	ld	a,l
2393  0A7D  2E 03       	ld	l,0x03
2394  0A7F              l_player_check_floor_00185:
2395  0A7F  CB 2C       	sra	h
2396  0A81  1F          	rra
2397  0A82  2D          	dec	l
2398  0A83  20 FA       	jr	NZ,l_player_check_floor_00185
2399  0A85  3C          	inc	a
2400  0A86  07          	rlca
2401  0A87  07          	rlca
2402  0A88  07          	rlca
2403  0A89  E6 F8       	and	a,0xf8
2404  0A8B  32 00 00    	ld	(_s_row1),a
2405  0A8E  2A 00 00    	ld	hl,(_index1)
2406  0A91  09          	add	hl,bc
2407  0A92  46          	ld	b, (hl)
2408  0A93  3A 00 00    	ld	a,(_s_col1)
2409  0A96  F5          	push	af
2410  0A97  33          	inc	sp
2411  0A98  3A 00 00    	ld	a,(_s_row1)
2412  0A9B  48          	ld	c,b
2413  0A9C  47          	ld	b,a
2414  0A9D  C5          	push	bc
2415  0A9E  CD 00 00    	call	_spr_draw8
2416  0AA1  F1          	pop	af
2417  0AA2  33          	inc	sp
2418  0AA3              l_player_check_floor_00121:
2419  0AA3  2E 00       	ld	l,0x00
2420  0AA5              l_player_check_floor_00122:
2421  0AA5  DD F9       	ld	sp, ix
2422  0AA7  DD E1       	pop	ix
2423  0AA9  C9          	ret
2424  0AAA              	SECTION code_compiler
2425  0AAA              ;	---------------------------------
2426  0AAA              ; Function player_get_floor
2427  0AAA              ; ---------------------------------
2428  0AAA              _player_get_floor:
2429  0AAA  21 0F 00    	ld	hl,+(_col + 0x000f)
2430  0AAD  56          	ld	d, (hl)
2431  0AAE  3A 0F 00    	ld	a,(_lin + 0x000f)
2432  0AB1  C6 10       	add	a,0x10
2433  0AB3  5F          	ld	e, a
2434  0AB4  D5          	push	de
2435  0AB5  CD 00 00    	call	_spr_calc_index
2436  0AB8  F1          	pop	af
2437  0AB9  22 00 00    	ld	(_index1),hl
2438  0ABC  21 00 00    	ld	hl,_i
2439  0ABF  36 00       	ld	(hl),0x00
2440  0AC1  01 00 00    	ld	bc,_tile_class+0
2441  0AC4              l_player_get_floor_00113:
2442  0AC4  3A 00 00    	ld	a,(_i)
2443  0AC7  D6 10       	sub	a,0x10
2444  0AC9  D2 5A 0B    	jp	NC, l_player_get_floor_00115
2445  0ACC  11 00 00    	ld	de,_scr_map
2446  0ACF  2A 00 00    	ld	hl,(_index1)
2447  0AD2  19          	add	hl,de
2448  0AD3  7E          	ld	a,(hl)
2449  0AD4  32 00 00    	ld	(_v0),a
2450  0AD7  ED 5B 00 00 	ld	de,(_index1)
2451  0ADB  13          	inc	de
2452  0ADC  21 00 00    	ld	hl,_scr_map
2453  0ADF  19          	add	hl, de
2454  0AE0  7E          	ld	a, (hl)
2455  0AE1  32 00 00    	ld	(_v1),a
2456  0AE4  3E 1F       	ld	a,0x1f
2457  0AE6  21 00 00    	ld	hl,_v0
2458  0AE9  96          	sub	a, (hl)
2459  0AEA  30 02       	jr	NC,l_player_get_floor_00102
2460  0AEC  36 00       	ld	(hl),0x00
2461  0AEE              l_player_get_floor_00102:
2462  0AEE  3E 1F       	ld	a,0x1f
2463  0AF0  21 00 00    	ld	hl,_v1
2464  0AF3  96          	sub	a, (hl)
2465  0AF4  30 02       	jr	NC,l_player_get_floor_00104
2466  0AF6  36 00       	ld	(hl),0x00
2467  0AF8              l_player_get_floor_00104:
2468  0AF8  79          	ld	a, c
2469  0AF9  21 00 00    	ld	hl,_v0
2470  0AFC  86          	add	a, (hl)
2471  0AFD  5F          	ld	e, a
2472  0AFE  78          	ld	a, b
2473  0AFF  CE 00       	adc	a,0x00
2474  0B01  57          	ld	d, a
2475  0B02  1A          	ld	a, (de)
2476  0B03  77          	ld	(hl), a
2477  0B04  79          	ld	a, c
2478  0B05  21 00 00    	ld	hl,_v1
2479  0B08  86          	add	a, (hl)
2480  0B09  5F          	ld	e, a
2481  0B0A  78          	ld	a, b
2482  0B0B  CE 00       	adc	a,0x00
2483  0B0D  57          	ld	d, a
2484  0B0E  1A          	ld	a, (de)
2485  0B0F  77          	ld	(hl), a
2486  0B10  3A 00 00    	ld	a,(_v0)
2487  0B13  B7          	or	a, a
2488  0B14  28 0B       	jr	Z,l_player_get_floor_00112
2489  0B16  D6 08       	sub	a,0x08
2490  0B18  28 07       	jr	Z,l_player_get_floor_00112
2491  0B1A  3A 00 00    	ld	a,(_v0)
2492  0B1D  D6 05       	sub	a,0x05
2493  0B1F  20 22       	jr	NZ,l_player_get_floor_00106
2494  0B21              l_player_get_floor_00112:
2495  0B21  3A 00 00    	ld	a,(_v1)
2496  0B24  B7          	or	a, a
2497  0B25  28 0B       	jr	Z,l_player_get_floor_00105
2498  0B27  D6 08       	sub	a,0x08
2499  0B29  28 07       	jr	Z,l_player_get_floor_00105
2500  0B2B  3A 00 00    	ld	a,(_v1)
2501  0B2E  D6 05       	sub	a,0x05
2502  0B30  20 11       	jr	NZ,l_player_get_floor_00106
2503  0B32              l_player_get_floor_00105:
2504  0B32  2A 00 00    	ld	hl,(_index1)
2505  0B35  11 20 00    	ld	de,0x0020
2506  0B38  19          	add	hl,de
2507  0B39  22 00 00    	ld	(_index1),hl
2508  0B3C  21 00 00    	ld	hl,_i
2509  0B3F  34          	inc	(hl)
2510  0B40  C3 C4 0A    	jp	l_player_get_floor_00113
2511  0B43              l_player_get_floor_00106:
2512  0B43  2A 00 00    	ld	hl,(_index1)
2513  0B46  4D          	ld	c,l
2514  0B47  5C          	ld	e,h
2515  0B48  06 05       	ld	b,0x05
2516  0B4A  79          	ld	a,c
2517  0B4B              l_player_get_floor_00156:
2518  0B4B  CB 3B       	srl	e
2519  0B4D  1F          	rra
2520  0B4E  10 FB       	djnz	l_player_get_floor_00156
2521  0B50  07          	rlca
2522  0B51  07          	rlca
2523  0B52  07          	rlca
2524  0B53  E6 F8       	and	a,0xf8
2525  0B55  C6 F0       	add	a,0xf0
2526  0B57  6F          	ld	l, a
2527  0B58  18 02       	jr	l_player_get_floor_00116
2528  0B5A              l_player_get_floor_00115:
2529  0B5A  2E 68       	ld	l,0x68
2530  0B5C              l_player_get_floor_00116:
2531  0B5C  C9          	ret
2532  0B5D              	SECTION code_compiler
2533  0B5D              ;	---------------------------------
2534  0B5D              ; Function player_lost_life
2535  0B5D              ; ---------------------------------
2536  0B5D              _player_lost_life:
2537  0B5D  CD 00 00    	call	___sdcc_enter_ix
2538  0B60  F5          	push	af
2539  0B61  CD 00 00    	call	_ay_reset
2540  0B64  CD 00 00    	call	_audio_dead
2541  0B67  4F          	ld	c, a
2542  0B68              l_player_lost_life_00104:
2543  0B68  79          	ld	a, c
2544  0B69  D6 20       	sub	a,0x20
2545  0B6B  30 79       	jr	NC,l_player_lost_life_00106
2546  0B6D  21 00 00    	ld	hl,_player_kill_index
2547  0B70  7E          	ld	a, (hl)
2548  0B71  3C          	inc	a
2549  0B72  20 05       	jr	NZ,l_player_lost_life_00135
2550  0B74  23          	inc	hl
2551  0B75  7E          	ld	a, (hl)
2552  0B76  3C          	inc	a
2553  0B77  28 3D       	jr	Z,l_player_lost_life_00102
2554  0B79              l_player_lost_life_00135:
2555  0B79  2A 00 00    	ld	hl,(_player_kill_index)
2556  0B7C  22 00 00    	ld	(_index1),hl
2557  0B7F  21 0F 00    	ld	hl,+(_col + 0x000f)
2558  0B82  56          	ld	d, (hl)
2559  0B83  3A 0F 00    	ld	a,(_lin + 0x000f)
2560  0B86  C6 10       	add	a,0x10
2561  0B88  5F          	ld	e, a
2562  0B89  3A 0F 00    	ld	a,(_tile + 0x000f)
2563  0B8C  DD 77 FF    	ld	(ix-1),a
2564  0B8F  2A 0F 00    	ld	hl,(_colint + 0x000f)
2565  0B92  DD 7E FF    	ld	a,(ix-1)
2566  0B95  85          	add	a, l
2567  0B96  47          	ld	b, a
2568  0B97  C5          	push	bc
2569  0B98  D5          	push	de
2570  0B99  0E 05       	ld	c,0x05
2571  0B9B  C5          	push	bc
2572  0B9C  CD 00 00    	call	_NIRVANAP_spriteT_callee
2573  0B9F  C1          	pop	bc
2574  0BA0  76          	halt
2575  0BA1  C5          	push	bc
2576  0BA2  21 00 00    	ld	hl,0x0000
2577  0BA5  E5          	push	hl
2578  0BA6  2E 05       	ld	l,0x05
2579  0BA8  E5          	push	hl
2580  0BA9  CD 00 00    	call	_NIRVANAP_spriteT_callee
2581  0BAC  C1          	pop	bc
2582  0BAD  76          	halt
2583  0BAE  C5          	push	bc
2584  0BAF  CD 00 00    	call	_game_cell_paint_index
2585  0BB2  C1          	pop	bc
2586  0BB3  76          	halt
2587  0BB4  18 2C       	jr	l_player_lost_life_00103
2588  0BB6              l_player_lost_life_00102:
2589  0BB6  21 0F 00    	ld	hl,+(_col + 0x000f)
2590  0BB9  46          	ld	b, (hl)
2591  0BBA  3A 0F 00    	ld	a,(_lin + 0x000f)
2592  0BBD  C6 10       	add	a,0x10
2593  0BBF  57          	ld	d, a
2594  0BC0  21 0F 00    	ld	hl,+(_tile + 0x000f)
2595  0BC3  5E          	ld	e, (hl)
2596  0BC4  2A 0F 00    	ld	hl,(_colint + 0x000f)
2597  0BC7  7B          	ld	a, e
2598  0BC8  85          	add	a, l
2599  0BC9  C5          	push	bc
2600  0BCA  4A          	ld	c, d
2601  0BCB  C5          	push	bc
2602  0BCC  57          	ld	d,a
2603  0BCD  1E 05       	ld	e,0x05
2604  0BCF  D5          	push	de
2605  0BD0  CD 00 00    	call	_NIRVANAP_spriteT_callee
2606  0BD3  C1          	pop	bc
2607  0BD4  76          	halt
2608  0BD5  C5          	push	bc
2609  0BD6  21 00 00    	ld	hl,0x0000
2610  0BD9  E5          	push	hl
2611  0BDA  2E 05       	ld	l,0x05
2612  0BDC  E5          	push	hl
2613  0BDD  CD 00 00    	call	_NIRVANAP_spriteT_callee
2614  0BE0  C1          	pop	bc
2615  0BE1  76          	halt
2616  0BE2              l_player_lost_life_00103:
2617  0BE2  0C          	inc	c
2618  0BE3  C3 68 0B    	jp	l_player_lost_life_00104
2619  0BE6              l_player_lost_life_00106:
2620  0BE6  3A 0F 00    	ld	a,(_lin + 0x000f)
2621  0BE9  32 00 00    	ld	(_s_lin0),a
2622  0BEC  3A 0F 00    	ld	a,(_col + 0x000f)
2623  0BEF  32 00 00    	ld	(_s_col0),a
2624  0BF2  3A 00 00    	ld	a,(_game_inf_lives)
2625  0BF5  B7          	or	a, a
2626  0BF6  20 04       	jr	NZ,l_player_lost_life_00108
2627  0BF8  21 00 00    	ld	hl,_player_lives
2628  0BFB  35          	dec	(hl)
2629  0BFC              l_player_lost_life_00108:
2630  0BFC  3A 00 00    	ld	a,(_player_lives)
2631  0BFF  B7          	or	a, a
2632  0C00  28 05       	jr	Z,l_player_lost_life_00110
2633  0C02  CD 00 00    	call	_game_round_init
2634  0C05  18 0A       	jr	l_player_lost_life_00112
2635  0C07              l_player_lost_life_00110:
2636  0C07  21 00 00    	ld	hl,_player_lives
2637  0C0A  36 00       	ld	(hl),0x00
2638  0C0C  21 00 00    	ld	hl,_game_over
2639  0C0F  36 01       	ld	(hl),0x01
2640  0C11              l_player_lost_life_00112:
2641  0C11  F1          	pop	af
2642  0C12  DD E1       	pop	ix
2643  0C14  C9          	ret
2644  0C15              	SECTION IGNORE
2645  0000              
