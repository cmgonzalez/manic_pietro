1     0000              MODULE game_player_c
2     0000              LINE 0, "game_player.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_get_floor
204   0000              	GLOBAL _player_collision
205   0000              	GLOBAL _player_check_conveyor_int
206   0000              	GLOBAL _player_check_conveyor
207   0000              	GLOBAL _player_handle_fall
208   0000              	GLOBAL _player_handle_walk
209   0000              	GLOBAL _player_handle_lock
210   0000              	GLOBAL _player_check_exit
211   0000              	GLOBAL _player_debug_keys
212   0000              	GLOBAL _player_init
213   0000              	GLOBAL _player_turn
214   0000              	GLOBAL _player_move
215   0000              	GLOBAL _player_move_jump
216   0000              	GLOBAL _player_move_walk
217   0000              	GLOBAL _player_handle_conveyor
218   0000              	GLOBAL _player_new_jump
219   0000              	GLOBAL _player_pick
220   0000              	GLOBAL _player_check_input
221   0000              	GLOBAL _player_tile
222   0000              	GLOBAL _player_score_add
223   0000              	GLOBAL _player_pick_item
224   0000              	GLOBAL _player_pick_deadly
225   0000              	GLOBAL _player_pick_extra
226   0000              	GLOBAL _player_check_ceil
227   0000              	GLOBAL _player_crumble
228   0000              	GLOBAL _player_check_floor
229   0000              	GLOBAL _player_lost_life
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printQ_callee
370   0000              	GLOBAL _NIRVANAP_printQ
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _zx_print_str
382   0000              	GLOBAL _zx_print_int
383   0000              	GLOBAL _zx_print_chr
384   0000              	GLOBAL _zx_isr
385   0000              	GLOBAL _z80_otdr_callee
386   0000              	GLOBAL _z80_otdr
387   0000              	GLOBAL _z80_otir_callee
388   0000              	GLOBAL _z80_otir
389   0000              	GLOBAL _z80_outp_callee
390   0000              	GLOBAL _z80_outp
391   0000              	GLOBAL _z80_indr_callee
392   0000              	GLOBAL _z80_indr
393   0000              	GLOBAL _z80_inir_callee
394   0000              	GLOBAL _z80_inir
395   0000              	GLOBAL _z80_inp_fastcall
396   0000              	GLOBAL _z80_inp
397   0000              	GLOBAL _z80_set_int_state_fastcall
398   0000              	GLOBAL _z80_set_int_state
399   0000              	GLOBAL _z80_get_int_state
400   0000              	GLOBAL _z80_delay_tstate_fastcall
401   0000              	GLOBAL _z80_delay_tstate
402   0000              	GLOBAL _z80_delay_ms_fastcall
403   0000              	GLOBAL _z80_delay_ms
404   0000              	GLOBAL _im2_remove_generic_callback_callee
405   0000              	GLOBAL _im2_remove_generic_callback
406   0000              	GLOBAL _im2_prepend_generic_callback_callee
407   0000              	GLOBAL _im2_prepend_generic_callback
408   0000              	GLOBAL _im2_append_generic_callback_callee
409   0000              	GLOBAL _im2_append_generic_callback
410   0000              	GLOBAL _im2_create_generic_isr_8080_callee
411   0000              	GLOBAL _im2_create_generic_isr_8080
412   0000              	GLOBAL _im2_create_generic_isr_callee
413   0000              	GLOBAL _im2_create_generic_isr
414   0000              	GLOBAL _im2_install_isr_callee
415   0000              	GLOBAL _im2_install_isr
416   0000              	GLOBAL _im2_init_fastcall
417   0000              	GLOBAL _im2_init
418   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
419   0000              	GLOBAL _intrinsic_swap_word_32
420   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
421   0000              	GLOBAL _intrinsic_swap_endian_32
422   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
423   0000              	GLOBAL _intrinsic_swap_endian_16
424   0000              	GLOBAL _intrinsic_return_de
425   0000              	GLOBAL _intrinsic_return_bc
426   0000              	GLOBAL _intrinsic_exx
427   0000              	GLOBAL _intrinsic_ex_de_hl
428   0000              	GLOBAL _intrinsic_nop
429   0000              	GLOBAL _intrinsic_im_2
430   0000              	GLOBAL _intrinsic_im_1
431   0000              	GLOBAL _intrinsic_im_0
432   0000              	GLOBAL _intrinsic_retn
433   0000              	GLOBAL _intrinsic_reti
434   0000              	GLOBAL _intrinsic_halt
435   0000              	GLOBAL _intrinsic_ei
436   0000              	GLOBAL _intrinsic_di
437   0000              	GLOBAL _intrinsic_stub
438   0000              	GLOBAL _intrinsic_ini
439   0000              	GLOBAL _intrinsic_outi
440   0000              	GLOBAL _intrinsic_ldi
441   0000              	GLOBAL _zx_pattern_fill_callee
442   0000              	GLOBAL _zx_pattern_fill
443   0000              	GLOBAL _zx_saddrpup_fastcall
444   0000              	GLOBAL _zx_saddrpup
445   0000              	GLOBAL _zx_saddrpright_callee
446   0000              	GLOBAL _zx_saddrpright
447   0000              	GLOBAL _zx_saddrpleft_callee
448   0000              	GLOBAL _zx_saddrpleft
449   0000              	GLOBAL _zx_saddrpdown_fastcall
450   0000              	GLOBAL _zx_saddrpdown
451   0000              	GLOBAL _zx_saddrcup_fastcall
452   0000              	GLOBAL _zx_saddrcup
453   0000              	GLOBAL _zx_saddrcright_fastcall
454   0000              	GLOBAL _zx_saddrcright
455   0000              	GLOBAL _zx_saddrcleft_fastcall
456   0000              	GLOBAL _zx_saddrcleft
457   0000              	GLOBAL _zx_saddrcdown_fastcall
458   0000              	GLOBAL _zx_saddrcdown
459   0000              	GLOBAL _zx_saddr2py_fastcall
460   0000              	GLOBAL _zx_saddr2py
461   0000              	GLOBAL _zx_saddr2px_fastcall
462   0000              	GLOBAL _zx_saddr2px
463   0000              	GLOBAL _zx_saddr2cy_fastcall
464   0000              	GLOBAL _zx_saddr2cy
465   0000              	GLOBAL _zx_saddr2cx_fastcall
466   0000              	GLOBAL _zx_saddr2cx
467   0000              	GLOBAL _zx_saddr2aaddr_fastcall
468   0000              	GLOBAL _zx_saddr2aaddr
469   0000              	GLOBAL _zx_py2saddr_fastcall
470   0000              	GLOBAL _zx_py2saddr
471   0000              	GLOBAL _zx_py2aaddr_fastcall
472   0000              	GLOBAL _zx_py2aaddr
473   0000              	GLOBAL _zx_pxy2saddr_callee
474   0000              	GLOBAL _zx_pxy2saddr
475   0000              	GLOBAL _zx_pxy2aaddr_callee
476   0000              	GLOBAL _zx_pxy2aaddr
477   0000              	GLOBAL _zx_px2bitmask_fastcall
478   0000              	GLOBAL _zx_px2bitmask
479   0000              	GLOBAL _zx_cy2saddr_fastcall
480   0000              	GLOBAL _zx_cy2saddr
481   0000              	GLOBAL _zx_cy2aaddr_fastcall
482   0000              	GLOBAL _zx_cy2aaddr
483   0000              	GLOBAL _zx_cxy2saddr_callee
484   0000              	GLOBAL _zx_cxy2saddr
485   0000              	GLOBAL _zx_cxy2aaddr_callee
486   0000              	GLOBAL _zx_cxy2aaddr
487   0000              	GLOBAL _zx_bitmask2px_fastcall
488   0000              	GLOBAL _zx_bitmask2px
489   0000              	GLOBAL _zx_aaddrcup_fastcall
490   0000              	GLOBAL _zx_aaddrcup
491   0000              	GLOBAL _zx_aaddrcright_fastcall
492   0000              	GLOBAL _zx_aaddrcright
493   0000              	GLOBAL _zx_aaddrcleft_fastcall
494   0000              	GLOBAL _zx_aaddrcleft
495   0000              	GLOBAL _zx_aaddrcdown_fastcall
496   0000              	GLOBAL _zx_aaddrcdown
497   0000              	GLOBAL _zx_aaddr2saddr_fastcall
498   0000              	GLOBAL _zx_aaddr2saddr
499   0000              	GLOBAL _zx_aaddr2py_fastcall
500   0000              	GLOBAL _zx_aaddr2py
501   0000              	GLOBAL _zx_aaddr2px_fastcall
502   0000              	GLOBAL _zx_aaddr2px
503   0000              	GLOBAL _zx_aaddr2cy_fastcall
504   0000              	GLOBAL _zx_aaddr2cy
505   0000              	GLOBAL _zx_aaddr2cx_fastcall
506   0000              	GLOBAL _zx_aaddr2cx
507   0000              	GLOBAL _zx_visit_wc_pix_callee
508   0000              	GLOBAL _zx_visit_wc_pix
509   0000              	GLOBAL _zx_visit_wc_attr_callee
510   0000              	GLOBAL _zx_visit_wc_attr
511   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
512   0000              	GLOBAL _zx_scroll_wc_up_pix
513   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
514   0000              	GLOBAL _zx_scroll_wc_up_attr
515   0000              	GLOBAL _zx_scroll_wc_up_callee
516   0000              	GLOBAL _zx_scroll_wc_up
517   0000              	GLOBAL _zx_scroll_up_pix_callee
518   0000              	GLOBAL _zx_scroll_up_pix
519   0000              	GLOBAL _zx_scroll_up_attr_callee
520   0000              	GLOBAL _zx_scroll_up_attr
521   0000              	GLOBAL _zx_scroll_up_callee
522   0000              	GLOBAL _zx_scroll_up
523   0000              	GLOBAL _zx_cls_wc_pix_callee
524   0000              	GLOBAL _zx_cls_wc_pix
525   0000              	GLOBAL _zx_cls_wc_attr_callee
526   0000              	GLOBAL _zx_cls_wc_attr
527   0000              	GLOBAL _zx_cls_wc_callee
528   0000              	GLOBAL _zx_cls_wc
529   0000              	GLOBAL _zx_cls_pix_fastcall
530   0000              	GLOBAL _zx_cls_pix
531   0000              	GLOBAL _zx_cls_attr_fastcall
532   0000              	GLOBAL _zx_cls_attr
533   0000              	GLOBAL _zx_cls_fastcall
534   0000              	GLOBAL _zx_cls
535   0000              	GLOBAL _zx_border_fastcall
536   0000              	GLOBAL _zx_border
537   0000              	GLOBAL _zx_tape_verify_block_callee
538   0000              	GLOBAL _zx_tape_verify_block
539   0000              	GLOBAL _zx_tape_save_block_callee
540   0000              	GLOBAL _zx_tape_save_block
541   0000              	GLOBAL _zx_tape_load_block_callee
542   0000              	GLOBAL _zx_tape_load_block
543   0000              	GLOBAL _spr_horizontal_check
544   0000              	GLOBAL _spr_draw8
545   0000              	GLOBAL _spr_clear_scr
546   0000              	GLOBAL _spr_back_repaint
547   0000              	GLOBAL _spr_get_tile_dir
548   0000              	GLOBAL _spr_get_tile
549   0000              	GLOBAL _spr_paint_player
550   0000              	GLOBAL _spr_clear_fast_hor
551   0000              	GLOBAL _spr_clear_fast_vert
552   0000              	GLOBAL _spr_clear_fast
553   0000              	GLOBAL _spr_paint
554   0000              	GLOBAL _spr_move_left
555   0000              	GLOBAL _spr_move_right
556   0000              	GLOBAL _spr_move_left_f
557   0000              	GLOBAL _spr_move_right_f
558   0000              	GLOBAL _spr_move_horizontal
559   0000              	GLOBAL _spr_move_down_f
560   0000              	GLOBAL _spr_move_up_f
561   0000              	GLOBAL _spr_set_right
562   0000              	GLOBAL _spr_set_left
563   0000              	GLOBAL _spr_set_down
564   0000              	GLOBAL _spr_set_up
565   0000              	GLOBAL _spr_calc_index
566   0000              	GLOBAL _spr_chktime
567   0000              	GLOBAL _player_use_floor
568   0000              	GLOBAL _game_end_pietro
569   0000              	GLOBAL _game_end_willy
570   0000              	GLOBAL _game_text
571   0000              	GLOBAL _game_logo1
572   0000              	GLOBAL _game_anim_conveyor
573   0000              	GLOBAL _zx_print_char
574   0000              	GLOBAL _reverse
575   0000              	GLOBAL _page
576   0000              	GLOBAL _game_crumble
577   0000              	GLOBAL _game_solar_ray0
578   0000              	GLOBAL _game_solar_ray1
579   0000              	GLOBAL _game_solar_ray
580   0000              	GLOBAL _game_anim_air
581   0000              	GLOBAL _game_shoe
582   0000              	GLOBAL _game_intro
583   0000              	GLOBAL _game_copy_sprite
584   0000              	GLOBAL _game_copy_sprite_color_reset
585   0000              	GLOBAL _game_copy_sprite_std
586   0000              	GLOBAL _game_flash_exit
587   0000              	GLOBAL _game_page_map
588   0000              	GLOBAL _game_attribs
589   0000              	GLOBAL _game_check_time
590   0000              	GLOBAL _game_key_paint
591   0000              	GLOBAL _game_colour_message
592   0000              	GLOBAL _game_paint_attrib
593   0000              	GLOBAL _game_print_score
594   0000              	GLOBAL _game_cell_paint_index
595   0000              	GLOBAL _game_cell_paint
596   0000              	GLOBAL _game_check_cell
597   0000              	GLOBAL _game_check_map
598   0000              	GLOBAL _game_loop
599   0000              	GLOBAL _game_round_init
600   0000              	GLOBAL _game_start_timer
601   0000              	GLOBAL _game_update_stats
602   0000              	GLOBAL _game_print_footer
603   0000              	GLOBAL _game_fill_row
604   0000              	GLOBAL _game_cls
605   0000              	GLOBAL _game_fps
606   0000              	GLOBAL _game_draw_map
607   0000              	GLOBAL _enemy_init
608   0000              	GLOBAL _enemy_move
609   0000              	GLOBAL _enemy_turn
610   0000              	GLOBAL _enemy_static
611   0000              	GLOBAL _enemy_horizontal
612   0000              	GLOBAL _enemy_vertical
613   0000              	GLOBAL _ay_reset
614   0000              	GLOBAL _ay_song_stop
615   0000              	GLOBAL _ay_song_play
616   0000              	GLOBAL _ay_fx_stop
617   0000              	GLOBAL _ay_fx_play
618   0000              	GLOBAL _ay_is_playing
619   0000              	GLOBAL _audio_game_over
620   0000              	GLOBAL _audio_round_init
621   0000              	GLOBAL _audio_levelup
622   0000              	GLOBAL _audio_menu
623   0000              	GLOBAL _audio_game_end
624   0000              	GLOBAL _audio_game_start
625   0000              	GLOBAL _audio_level_complete
626   0000              	GLOBAL _audio_level_start
627   0000              	GLOBAL _audio_puerta
628   0000              	GLOBAL _audio_crumble
629   0000              	GLOBAL _audio_tick
630   0000              	GLOBAL _audio_door_open
631   0000              	GLOBAL _audio_coin_noentiendo
632   0000              	GLOBAL _audio_coin
633   0000              	GLOBAL _audio_fall
634   0000              	GLOBAL _audio_jump
635   0000              	GLOBAL _audio_dead
636   0000              	GLOBAL _audio_time
637   0000              	GLOBAL _audio_ingame
638   0000              	GLOBAL _in_mouse_kempston_wheel_delta
639   0000              	GLOBAL _in_mouse_kempston_wheel
640   0000              	GLOBAL _in_mouse_kempston_callee
641   0000              	GLOBAL _in_mouse_kempston
642   0000              	GLOBAL _in_mouse_kempston_setpos_callee
643   0000              	GLOBAL _in_mouse_kempston_setpos
644   0000              	GLOBAL _in_mouse_kempston_reset
645   0000              	GLOBAL _in_mouse_kempston_init
646   0000              	GLOBAL _in_mouse_amx_wheel_delta
647   0000              	GLOBAL _in_mouse_amx_wheel
648   0000              	GLOBAL _in_mouse_amx_callee
649   0000              	GLOBAL _in_mouse_amx
650   0000              	GLOBAL _in_mouse_amx_setpos_callee
651   0000              	GLOBAL _in_mouse_amx_setpos
652   0000              	GLOBAL _in_mouse_amx_reset
653   0000              	GLOBAL _in_mouse_amx_init_callee
654   0000              	GLOBAL _in_mouse_amx_init
655   0000              	GLOBAL _in_stick_sinclair2
656   0000              	GLOBAL _in_stick_sinclair1
657   0000              	GLOBAL _in_stick_kempston
658   0000              	GLOBAL _in_stick_fuller
659   0000              	GLOBAL _in_stick_cursor
660   0000              	GLOBAL _in_stick_keyboard_fastcall
661   0000              	GLOBAL _in_stick_keyboard
662   0000              	GLOBAL _in_wait_nokey
663   0000              	GLOBAL _in_wait_key
664   0000              	GLOBAL _in_test_key
665   0000              	GLOBAL _in_pause_fastcall
666   0000              	GLOBAL _in_pause
667   0000              	GLOBAL _in_key_scancode_fastcall
668   0000              	GLOBAL _in_key_scancode
669   0000              	GLOBAL _in_key_pressed_fastcall
670   0000              	GLOBAL _in_key_pressed
671   0000              	GLOBAL _in_inkey
672   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
673   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
674   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
675   0000              	GLOBAL _NIRVANAP_HOLE
676   0000              	GLOBAL _NIRVANAP_ISR_HOOK
677   0000              	GLOBAL _game_tune
678   0000              	GLOBAL _code1
679   0000              	GLOBAL _code0
680   0000              	GLOBAL _deltas
681   0000              	GLOBAL _attribs
682   0000              	GLOBAL _air_curr_byte
683   0000              	GLOBAL _spr_clr
684   0000              	GLOBAL _spr_init_bright
685   0000              	GLOBAL _spr_init_cout3
686   0000              	GLOBAL _spr_init_cin3
687   0000              	GLOBAL _spr_init_cout2
688   0000              	GLOBAL _spr_init_cin2
689   0000              	GLOBAL _spr_init_cout1
690   0000              	GLOBAL _spr_init_cin1
691   0000              	GLOBAL _spr_init_cout0
692   0000              	GLOBAL _spr_init_cin0
693   0000              	GLOBAL _map_clear
694   0000              	GLOBAL _map_paper
695   0000              	GLOBAL _map_border
696   0000              	GLOBAL _gbyte
697   0000              	GLOBAL _scr_curr
698   0000              	GLOBAL _color
699   0000              	GLOBAL _scr_map
700   0000              	GLOBAL _spr_kind
701   0000              	GLOBAL _spr_altset
702   0000              	GLOBAL _spr_frames
703   0000              	GLOBAL _spr_speed_a
704   0000              	GLOBAL _spr_speed_b
705   0000              	GLOBAL _spr_speed
706   0000              	GLOBAL _spr_tile
707   0000              	GLOBAL _screen_ink
708   0000              	GLOBAL _screen_paper
709   0000              	GLOBAL _game_start_scr
710   0000              	GLOBAL _player_next_extra
711   0000              	GLOBAL _game_score_top
712   0000              	GLOBAL _player_coins
713   0000              	GLOBAL _player_lives
714   0000              	GLOBAL _game_crumb_end
715   0000              	GLOBAL _game_crumb_start
716   0000              	GLOBAL _game_over
717   0000              	GLOBAL _game_tile_cnt
718   0000              	GLOBAL _game_sound
719   0000              	GLOBAL _game_inf_lives
720   0000              	GLOBAL _game_inmune
721   0000              	GLOBAL _spr_count
722   0000              	GLOBAL _key_ink
723   0000              	GLOBAL _key_last
724   0000              	GLOBAL _lapse_crumb
725   0000              	GLOBAL _time_key
726   0000              	GLOBAL _time_conv
727   0000              	GLOBAL _time_air
728   0000              	GLOBAL _frame_time
729   0000              	GLOBAL _curr_time
730   0000              	GLOBAL _key_attrib
731   0000              	GLOBAL _g_ray1
732   0000              	GLOBAL _attrib_osd
733   0000              	GLOBAL _attrib_hl
734   0000              	GLOBAL _attrib
735   0000              	GLOBAL _zx_val_asm
736   0000              	GLOBAL _index1
737   0000              	GLOBAL _index0
738   0000              	GLOBAL _loop_count
739   0000              	GLOBAL _s_row1
740   0000              	GLOBAL _s_col1
741   0000              	GLOBAL _s_col0
742   0000              	GLOBAL _s_lin1
743   0000              	GLOBAL _s_lin0
744   0000              	GLOBAL _nirv_sprite_index
745   0000              	GLOBAL _player_kill_index
746   0000              	GLOBAL _player_jump_top
747   0000              	GLOBAL _game_debug
748   0000              	GLOBAL _sprite
749   0000              	GLOBAL _fps
750   0000              	GLOBAL _game_effect
751   0000              	GLOBAL _game_menu
752   0000              	GLOBAL _game_atrac
753   0000              	GLOBAL _game_mode
754   0000              	GLOBAL _game_tileset
755   0000              	GLOBAL _menu_curr_sel
756   0000              	GLOBAL _game_round_up
757   0000              	GLOBAL _game_lives
758   0000              	GLOBAL _game_code
759   0000              	GLOBAL _game_exit_lin
760   0000              	GLOBAL _game_exit_col
761   0000              	GLOBAL _game_conveyor_col1
762   0000              	GLOBAL _game_conveyor_col0
763   0000              	GLOBAL _game_conveyor_lin
764   0000              	GLOBAL _game_conveyor_dir
765   0000              	GLOBAL _game_song_play
766   0000              	GLOBAL _game_gravity
767   0000              	GLOBAL _player_lin_scr
768   0000              	GLOBAL _player_col_scr
769   0000              	GLOBAL _player_fall_start
770   0000              	GLOBAL _player_jump_lin
771   0000              	GLOBAL _player_jump_count
772   0000              	GLOBAL _player_jump_hack
773   0000              	GLOBAL _player_vel_inc
774   0000              	GLOBAL _player_vel_y0
775   0000              	GLOBAL _player_vel_y
776   0000              	GLOBAL _player_score
777   0000              	GLOBAL _tbuffer
778   0000              	GLOBAL _obj_count
779   0000              	GLOBAL _obj_col
780   0000              	GLOBAL _obj_lin
781   0000              	GLOBAL _last_time_b
782   0000              	GLOBAL _last_time_a
783   0000              	GLOBAL _last_time
784   0000              	GLOBAL _colint
785   0000              	GLOBAL _col
786   0000              	GLOBAL _lin
787   0000              	GLOBAL _tile
788   0000              	GLOBAL _value_c
789   0000              	GLOBAL _value_b
790   0000              	GLOBAL _value_a
791   0000              	GLOBAL _state_a
792   0000              	GLOBAL _state
793   0000              	GLOBAL _class
794   0000              	GLOBAL _dirs_last
795   0000              	GLOBAL _dirs
796   0000              	GLOBAL _k2
797   0000              	GLOBAL _k1
798   0000              	GLOBAL _joyfunc2
799   0000              	GLOBAL _joyfunc1
800   0000              	GLOBAL _btiles
801   0000              	GLOBAL _v3
802   0000              	GLOBAL _v2
803   0000              	GLOBAL _v1
804   0000              	GLOBAL _v0
805   0000              	GLOBAL _i
806   0000              	GLOBAL _spec128
807   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
808   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
809   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
810   0000              	GLOBAL _hitiles2
811   0000              	GLOBAL _hitiles1
812   0000              	GLOBAL _ay_song_coin_noentiendo
813   0000              	GLOBAL _ay_song_game_over
814   0000              	GLOBAL _ay_song_time_atack
815   0000              	GLOBAL _ay_fx_pause
816   0000              	GLOBAL _ay_fx_crumble
817   0000              	GLOBAL _ay_fx_door_open
818   0000              	GLOBAL _ay_fx_tick
819   0000              	GLOBAL _ay_fx_game_start
820   0000              	GLOBAL _ay_fx_fall
821   0000              	GLOBAL _ay_fx_jump
822   0000              	GLOBAL _ay_fx_dead
823   0000              	GLOBAL _ay_fx_coin
824   0000              	GLOBAL _ay_song_round_init
825   0000              	GLOBAL _ay_song_menu
826   0000              	GLOBAL _ay_song_ingame1
827   0000              	GLOBAL _ay_song_ingame0
828   0000              	GLOBAL _hisprites2
829   0000              	GLOBAL _hisprites1
830   0000              	GLOBAL _logo2
831   0000              	GLOBAL _logo1
832   0000              	GLOBAL _cartoon2
833   0000              	GLOBAL _cartoon1
834   0000              	GLOBAL _cartoon0
835   0000              	GLOBAL _img1
836   0000              	GLOBAL _air_end_byte
837   0000              	GLOBAL _air_start_byte
838   0000              	GLOBAL _tile_class
839   0000              	GLOBAL _texts
840   0000              	GLOBAL _map_names0
841   0000              	GLOBAL _game_borders0
842   0000              	GLOBAL _spr_init2
843   0000              	GLOBAL _spr_init1
844   0000              	GLOBAL _tile_class2
845   0000              	GLOBAL _tile_class1
846   0000              	GLOBAL _paper0
847   0000              	GLOBAL _lenght0
848   0000              	GLOBAL _world0
849   0000              	GLOBAL _spr_init
850   0000              	GLOBAL _game_encode
851   0000              	GLOBAL _player_jump_hor
852   0000              ;--------------------------------------------------------
853   0000              ; special function registers
854   0000              ;--------------------------------------------------------
855   0000              defc _IO_FE	=	0x00fe
856   0000              defc _IO_1FFD	=	0x1ffd
857   0000              defc _IO_7FFD	=	0x7ffd
858   0000              ;--------------------------------------------------------
859   0000              ; ram data
860   0000              ;--------------------------------------------------------
861   0000              	SECTION bss_compiler
862   0000              ;--------------------------------------------------------
863   0000              ; ram data
864   0000              ;--------------------------------------------------------
865   0000              
866   0000              IF 0
867   0000              
868   0000              ; .area _INITIALIZED removed by z88dk
869   0000              
870   0000              
871   0000              ENDIF
872   0000              
873   0000              ;--------------------------------------------------------
874   0000              ; absolute external ram data
875   0000              ;--------------------------------------------------------
876   0000              	SECTION IGNORE
877   0000              ;--------------------------------------------------------
878   0000              ; global & static initialisations
879   0000              ;--------------------------------------------------------
880   0000              	SECTION code_crt_init
881   0000              ;--------------------------------------------------------
882   0000              ; Home
883   0000              ;--------------------------------------------------------
884   0000              	SECTION IGNORE
885   0000              ;--------------------------------------------------------
886   0000              ; code
887   0000              ;--------------------------------------------------------
888   0000              	SECTION code_compiler
889   0000              ;	---------------------------------
890   0000              ; Function player_init
891   0000              ; ---------------------------------
892   0000              _player_init:
893   0000  CD 00 00    	call	___sdcc_enter_ix
894   0003  F5          	push	af
895   0004  21 08 00    	ld	hl, +(_class + 0x0008)
896   0007  36 FF       	ld	(hl),0xff
897   0009  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
898   000C  36 04       	ld	(hl),0x04
899   000E  21 08 00    	ld	hl, +(_spr_frames + 0x0008)
900   0011  36 04       	ld	(hl),0x04
901   0013  21 08 00    	ld	hl, +(_lin + 0x0008)
902   0016  DD 7E 04    	ld	a,(ix+4)
903   0019  77          	ld	(hl), a
904   001A  21 08 00    	ld	hl, +(_col + 0x0008)
905   001D  DD 7E 05    	ld	a,(ix+5)
906   0020  77          	ld	(hl), a
907   0021  DD 7E 04    	ld	a,(ix+4)
908   0024  32 00 00    	ld	(_player_jump_top),a
909   0027  01 08 00    	ld	bc,_state+8
910   002A  AF          	xor	a, a
911   002B  02          	ld	(bc), a
912   002C  11 08 00    	ld	de,_state_a+8
913   002F  AF          	xor	a, a
914   0030  12          	ld	(de), a
915   0031  2A 00 00    	ld	hl,(_curr_time)
916   0034  C5          	push	bc
917   0035  D5          	push	de
918   0036  DD 74 FF    	ld	(ix-1),h
919   0039  DD 75 FE    	ld	(ix-2),l
920   003C  D1          	pop	de
921   003D  C1          	pop	bc
922   003E  21 10 00    	ld	hl, +(_last_time + 0x0010)
923   0041  DD 7E FE    	ld	a,(ix-2)
924   0044  77          	ld	(hl), a
925   0045  23          	inc	hl
926   0046  DD 7E FF    	ld	a,(ix-1)
927   0049  77          	ld	(hl), a
928   004A  21 00 00    	ld	hl,0x0000
929   004D  22 00 00    	ld	(_player_vel_y),hl
930   0050  21 08 00    	ld	hl, +(_spr_frames + 0x0008)
931   0053  36 04       	ld	(hl),0x04
932   0055  3A 08 00    	ld	a,(_value_a + 0x0008)
933   0058  DD 77 FE    	ld	(ix-2),a
934   005B  B7          	or	a, a
935   005C  28 1C       	jr	Z,l_player_init_00102
936   005E  21 08 00    	ld	hl, +(_colint + 0x0008)
937   0061  36 03       	ld	(hl),0x03
938   0063  0A          	ld	a, (bc)
939   0064  F6 08       	or	a,0x08
940   0066  02          	ld	(bc), a
941   0067  1A          	ld	a, (de)
942   0068  F6 08       	or	a,0x08
943   006A  12          	ld	(de), a
944   006B  01 08 00    	ld	bc,_tile+8
945   006E  DD 7E 06    	ld	a,(ix+6)
946   0071  C6 04       	add	a,0x04
947   0073  02          	ld	(bc), a
948   0074  3A 08 00    	ld	a,(_value_b + 0x0008)
949   0077  77          	ld	(hl), a
950   0078  18 15       	jr	l_player_init_00104
951   007A              l_player_init_00102:
952   007A  0A          	ld	a, (bc)
953   007B  F6 04       	or	a,0x04
954   007D  02          	ld	(bc), a
955   007E  1A          	ld	a, (de)
956   007F  F6 10       	or	a,0x10
957   0081  12          	ld	(de), a
958   0082  21 08 00    	ld	hl, +(_tile + 0x0008)
959   0085  DD 7E 06    	ld	a,(ix+6)
960   0088  77          	ld	(hl), a
961   0089  3A 08 00    	ld	a,(_value_b + 0x0008)
962   008C  32 08 00    	ld	(_colint+8),a
963   008F              l_player_init_00104:
964   008F  F1          	pop	af
965   0090  DD E1       	pop	ix
966   0092  C9          	ret
967   0093              	SECTION code_compiler
968   0093              ;	---------------------------------
969   0093              ; Function player_turn
970   0093              ; ---------------------------------
971   0093              _player_turn:
972   0093  21 00 00    	ld	hl,_sprite
973   0096  36 08       	ld	(hl),0x08
974   0098  CD 00 00    	call	_spr_chktime
975   009B  7D          	ld	a, l
976   009C  B7          	or	a, a
977   009D  CA 1F 01    	jp	Z, l_player_turn_00117
978   00A0  3A 08 00    	ld	a,(_lin + 0x0008)
979   00A3  32 00 00    	ld	(_s_lin0),a
980   00A6  3A 08 00    	ld	a,(_col + 0x0008)
981   00A9  32 00 00    	ld	(_s_col0),a
982   00AC  21 00 00    	ld	hl,_k1
983   00AF  E5          	push	hl
984   00B0  2A 00 00    	ld	hl,(_joyfunc1)
985   00B3  CD 00 00    	call	___sdcc_call_hl
986   00B6  F1          	pop	af
987   00B7  7D          	ld	a,l
988   00B8  32 00 00    	ld	(_dirs),a
989   00BB  CD 22 02    	call	_player_move
990   00BE  CD 61 04    	call	_player_handle_lock
991   00C1  CD C3 06    	call	_player_collision
992   00C4  CD 90 01    	call	_player_check_exit
993   00C7  3A 08 00    	ld	a,(_state + 0x0008)
994   00CA  CB 6F       	bit	5, a
995   00CC  28 11       	jr	Z,l_player_turn_00102
996   00CE  3A 00 00    	ld	a,(_game_inmune)
997   00D1  B7          	or	a, a
998   00D2  20 0B       	jr	NZ,l_player_turn_00102
999   00D4  CD 2E 0E    	call	_player_lost_life
1000  00D7  3A 08 00    	ld	a,(_state + 0x0008)
1001  00DA  E6 DF       	and	a,0xdf
1002  00DC  32 08 00    	ld	((_state + 0x0008)),a
1003  00DF              l_player_turn_00102:
1004  00DF  3A 00 00    	ld	a,(_scr_curr)
1005  00E2  D6 14       	sub	a,0x14
1006  00E4  38 07       	jr	C,l_player_turn_00106
1007  00E6  2A 10 00    	ld	hl,(_last_time_b + 0x0010)
1008  00E9  7C          	ld	a, h
1009  00EA  B5          	or	a,l
1010  00EB  20 05       	jr	NZ,l_player_turn_00107
1011  00ED              l_player_turn_00106:
1012  00ED  CD 00 00    	call	_game_crumble
1013  00F0  18 14       	jr	l_player_turn_00108
1014  00F2              l_player_turn_00107:
1015  00F2  21 06 00    	ld	hl,0x0006
1016  00F5  E5          	push	hl
1017  00F6  21 10 00    	ld	hl, +(_last_time_b + 0x0010)
1018  00F9  E5          	push	hl
1019  00FA  CD 00 00    	call	_game_check_time
1020  00FD  F1          	pop	af
1021  00FE  F1          	pop	af
1022  00FF  7D          	ld	a, l
1023  0100  B7          	or	a, a
1024  0101  28 03       	jr	Z,l_player_turn_00108
1025  0103  CD 00 00    	call	_game_crumble
1026  0106              l_player_turn_00108:
1027  0106  3A 08 00    	ld	a,(_state + 0x0008)
1028  0109  CB 47       	bit	0, a
1029  010B  20 0A       	jr	NZ,l_player_turn_00111
1030  010D  CB 4F       	bit	1, a
1031  010F  20 06       	jr	NZ,l_player_turn_00111
1032  0111  3A 00 00    	ld	a,(_dirs)
1033  0114  32 00 00    	ld	(_dirs_last),a
1034  0117              l_player_turn_00111:
1035  0117  3A 00 00    	ld	a,(_game_debug)
1036  011A  B7          	or	a, a
1037  011B  C8          	ret	Z
1038  011C  CD 20 01    	call	_player_debug_keys
1039  011F              l_player_turn_00117:
1040  011F  C9          	ret
1041  0120              	SECTION code_compiler
1042  0120              ;	---------------------------------
1043  0120              ; Function player_debug_keys
1044  0120              ; ---------------------------------
1045  0120              _player_debug_keys:
1046  0120  CD 00 00    	call	_in_inkey
1047  0123  7D          	ld	a,l
1048  0124  32 00 00    	ld	(_v0),a
1049  0127  D6 31       	sub	a,0x31
1050  0129  28 0D       	jr	Z,l_player_debug_keys_00101
1051  012B  3A 00 00    	ld	a,(_v0)
1052  012E  FE 32       	cp	a,0x32
1053  0130  28 1F       	jr	Z,l_player_debug_keys_00104
1054  0132  D6 33       	sub	a,0x33
1055  0134  28 35       	jr	Z,l_player_debug_keys_00107
1056  0136  18 57       	jr	l_player_debug_keys_00112
1057  0138              l_player_debug_keys_00101:
1058  0138  21 00 00    	ld	hl,_scr_curr
1059  013B  35          	dec	(hl)
1060  013C  21 00 00    	ld	hl,_game_round_up
1061  013F  36 01       	ld	(hl),0x01
1062  0141  3A 00 00    	ld	a,(_scr_curr)
1063  0144  3C          	inc	a
1064  0145  20 05       	jr	NZ,l_player_debug_keys_00103
1065  0147  21 00 00    	ld	hl,_scr_curr
1066  014A  36 27       	ld	(hl),0x27
1067  014C              l_player_debug_keys_00103:
1068  014C  CD 00 00    	call	_in_wait_nokey
1069  014F  18 3E       	jr	l_player_debug_keys_00112
1070  0151              l_player_debug_keys_00104:
1071  0151  21 00 00    	ld	hl,_scr_curr
1072  0154  34          	inc	(hl)
1073  0155  21 00 00    	ld	hl,_game_round_up
1074  0158  36 01       	ld	(hl),0x01
1075  015A  3A 00 00    	ld	a,(_scr_curr)
1076  015D  D6 28       	sub	a,0x28
1077  015F  20 05       	jr	NZ,l_player_debug_keys_00106
1078  0161  21 00 00    	ld	hl,_scr_curr
1079  0164  36 00       	ld	(hl),0x00
1080  0166              l_player_debug_keys_00106:
1081  0166  CD 00 00    	call	_in_wait_nokey
1082  0169  18 24       	jr	l_player_debug_keys_00112
1083  016B              l_player_debug_keys_00107:
1084  016B  21 00 00    	ld	hl,_game_inmune
1085  016E  7E          	ld	a, (hl)
1086  016F  D6 01       	sub	a,0x01
1087  0171  3E 00       	ld	a,0x00
1088  0173  17          	rla
1089  0174  77          	ld	(hl), a
1090  0175  01 08 00    	ld	bc,_state+8
1091  0178  0A          	ld	a, (bc)
1092  0179  E6 DF       	and	a,0xdf
1093  017B  02          	ld	(bc), a
1094  017C  7E          	ld	a, (hl)
1095  017D  B7          	or	a, a
1096  017E  28 07       	jr	Z,l_player_debug_keys_00109
1097  0180  2E 04       	ld	l,0x04
1098  0182  CD 00 00    	call	_zx_border_fastcall
1099  0185  18 05       	jr	l_player_debug_keys_00110
1100  0187              l_player_debug_keys_00109:
1101  0187  2E 02       	ld	l,0x02
1102  0189  CD 00 00    	call	_zx_border_fastcall
1103  018C              l_player_debug_keys_00110:
1104  018C  CD 00 00    	call	_in_wait_nokey
1105  018F              l_player_debug_keys_00112:
1106  018F  C9          	ret
1107  0190              	SECTION code_compiler
1108  0190              ;	---------------------------------
1109  0190              ; Function player_check_exit
1110  0190              ; ---------------------------------
1111  0190              _player_check_exit:
1112  0190  3A 00 00    	ld	a,(_obj_count)
1113  0193  3C          	inc	a
1114  0194  C2 21 02    	jp	NZ,l_player_check_exit_00114
1115  0197  21 08 00    	ld	hl,+(_col + 0x0008)
1116  019A  5E          	ld	e, (hl)
1117  019B  3A 00 00    	ld	a,(_game_exit_col)
1118  019E  BB          	cp	a,e
1119  019F  28 0E       	jr	Z,l_player_check_exit_00110
1120  01A1  4F          	ld	c,a
1121  01A2  06 00       	ld	b,0x00
1122  01A4  03          	inc	bc
1123  01A5  16 00       	ld	d,0x00
1124  01A7  79          	ld	a, c
1125  01A8  93          	sub	a, e
1126  01A9  20 76       	jr	NZ,l_player_check_exit_00114
1127  01AB  78          	ld	a, b
1128  01AC  92          	sub	a, d
1129  01AD  20 72       	jr	NZ,l_player_check_exit_00114
1130  01AF              l_player_check_exit_00110:
1131  01AF  2A 08 00    	ld	hl,(_lin + 0x0008)
1132  01B2  26 00       	ld	h,0x00
1133  01B4  01 10 00    	ld	bc,0x0010
1134  01B7  09          	add	hl,bc
1135  01B8  3A 00 00    	ld	a,(_game_exit_lin)
1136  01BB  5F          	ld	e,a
1137  01BC  16 00       	ld	d,0x00
1138  01BE  7D          	ld	a,l
1139  01BF  93          	sub	a,e
1140  01C0  44          	ld	b,h
1141  01C1  6F          	ld	l, a
1142  01C2  78          	ld	a, b
1143  01C3  9A          	sbc	a, d
1144  01C4  67          	ld	h, a
1145  01C5  CD 00 00    	call	_abs_fastcall
1146  01C8  7D          	ld	a,l
1147  01C9  32 00 00    	ld	(_v0),a
1148  01CC  D6 08       	sub	a,0x08
1149  01CE  30 51       	jr	NC,l_player_check_exit_00114
1150  01D0  21 00 00    	ld	hl,_game_round_up
1151  01D3  36 01       	ld	(hl),0x01
1152  01D5  01 08 00    	ld	bc,_state+8
1153  01D8  0A          	ld	a, (bc)
1154  01D9  E6 DF       	and	a,0xdf
1155  01DB  02          	ld	(bc), a
1156  01DC  CD 00 00    	call	_ay_song_stop
1157  01DF              l_player_check_exit_00101:
1158  01DF  ED 4B 00 00 	ld	bc,(_air_curr_byte)
1159  01E3  ED 5B 00 00 	ld	de,(_air_end_byte)
1160  01E7  7B          	ld	a,e
1161  01E8  91          	sub	a,c
1162  01E9  7A          	ld	a,d
1163  01EA  98          	sbc	a,b
1164  01EB  30 14       	jr	NC,l_player_check_exit_00103
1165  01ED  CD 00 00    	call	_audio_tick
1166  01F0  CD 00 00    	call	_game_anim_air
1167  01F3  21 08 00    	ld	hl,0x0008
1168  01F6  CD C7 08    	call	_player_score_add
1169  01F9  21 05 00    	ld	hl,0x0005
1170  01FC  CD 00 00    	call	_z80_delay_ms_fastcall
1171  01FF  18 DE       	jr	l_player_check_exit_00101
1172  0201              l_player_check_exit_00103:
1173  0201  21 00 00    	ld	hl,_scr_curr
1174  0204  7E          	ld	a,(hl)
1175  0205  3C          	inc	a
1176  0206  77          	ld	(hl),a
1177  0207  D6 14       	sub	a,0x14
1178  0209  20 08       	jr	NZ,l_player_check_exit_00105
1179  020B  CD 00 00    	call	_game_end_willy
1180  020E  21 00 00    	ld	hl,_scr_curr
1181  0211  36 00       	ld	(hl),0x00
1182  0213              l_player_check_exit_00105:
1183  0213  3A 00 00    	ld	a,(_scr_curr)
1184  0216  D6 28       	sub	a,0x28
1185  0218  C0          	ret	NZ
1186  0219  CD 00 00    	call	_game_end_pietro
1187  021C  21 00 00    	ld	hl,_scr_curr
1188  021F  36 14       	ld	(hl),0x14
1189  0221              l_player_check_exit_00114:
1190  0221  C9          	ret
1191  0222              	SECTION code_compiler
1192  0222              ;	---------------------------------
1193  0222              ; Function player_move
1194  0222              ; ---------------------------------
1195  0222              _player_move:
1196  0222  3A 08 00    	ld	a,(_state + 0x0008)
1197  0225  CB 47       	bit	0, a
1198  0227  20 04       	jr	NZ,l_player_move_00101
1199  0229  CB 4F       	bit	1, a
1200  022B  28 05       	jr	Z,l_player_move_00102
1201  022D              l_player_move_00101:
1202  022D  CD 3B 02    	call	_player_move_jump
1203  0230  18 03       	jr	l_player_move_00103
1204  0232              l_player_move_00102:
1205  0232  CD E7 03    	call	_player_move_walk
1206  0235              l_player_move_00103:
1207  0235  CD 00 00    	call	_spr_paint_player
1208  0238  2E 00       	ld	l,0x00
1209  023A  C9          	ret
1210  023B              	SECTION code_compiler
1211  023B              ;	---------------------------------
1212  023B              ; Function player_move_jump
1213  023B              ; ---------------------------------
1214  023B              _player_move_jump:
1215  023B  CD 00 00    	call	___sdcc_enter_ix
1216  023E  F5          	push	af
1217  023F  3B          	dec	sp
1218  0240  21 00 00    	ld	hl,_player_jump_count
1219  0243  34          	inc	(hl)
1220  0244  3E 11       	ld	a,0x11
1221  0246  96          	sub	a, (hl)
1222  0247  30 07       	jr	NC,l_player_move_jump_00102
1223  0249  01 08 00    	ld	bc,_state+8
1224  024C  0A          	ld	a, (bc)
1225  024D  E6 F3       	and	a,+(0xfb&0xf7)
1226  024F  02          	ld	(bc),a
1227  0250              l_player_move_jump_00102:
1228  0250  3A 08 00    	ld	a,(_state_a + 0x0008)
1229  0253  CB 57       	bit	2, a
1230  0255  28 19       	jr	Z,l_player_move_jump_00108
1231  0257  3E 02       	ld	a,0x02
1232  0259  21 00 00    	ld	hl,_player_jump_count
1233  025C  96          	sub	a, (hl)
1234  025D  30 0C       	jr	NC,l_player_move_jump_00104
1235  025F  7E          	ld	a, (hl)
1236  0260  D6 09       	sub	a,0x09
1237  0262  30 07       	jr	NC,l_player_move_jump_00104
1238  0264  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1239  0267  36 07       	ld	(hl),0x07
1240  0269  18 05       	jr	l_player_move_jump_00108
1241  026B              l_player_move_jump_00104:
1242  026B  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1243  026E  36 04       	ld	(hl),0x04
1244  0270              l_player_move_jump_00108:
1245  0270  2A 00 00    	ld	hl,(_player_vel_y)
1246  0273  ED 5B 00 00 	ld	de,(_game_gravity)
1247  0277  19          	add	hl,de
1248  0278  22 00 00    	ld	(_player_vel_y),hl
1249  027B  3A 08 00    	ld	a,(_state + 0x0008)
1250  027E  E6 EF       	and	a,0xef
1251  0280  32 08 00    	ld	((_state + 0x0008)),a
1252  0283  21 64 00    	ld	hl,0x0064
1253  0286  E5          	push	hl
1254  0287  2A 00 00    	ld	hl,(_player_vel_y)
1255  028A  E5          	push	hl
1256  028B  CD 00 00    	call	__divsint_callee
1257  028E  4D          	ld	c, l
1258  028F  44          	ld	b, h
1259  0290  CB 41       	bit	0,c
1260  0292  21 00 00    	ld	hl,_s_lin1
1261  0295  71          	ld	(hl),c
1262  0296  28 04       	jr	Z,l_player_move_jump_00110
1263  0298  21 00 00    	ld	hl,_s_lin1
1264  029B  35          	dec	(hl)
1265  029C              l_player_move_jump_00110:
1266  029C  3A 08 00    	ld	a,(_lin + 0x0008)
1267  029F  21 00 00    	ld	hl,_s_lin1
1268  02A2  86          	add	a, (hl)
1269  02A3  77          	ld	(hl), a
1270  02A4  AF          	xor	a, a
1271  02A5  B9          	cp	a, c
1272  02A6  98          	sbc	a, b
1273  02A7  E2 AC 02    	jp	PO, l_player_move_jump_00204
1274  02AA  EE 80       	xor	a,0x80
1275  02AC              l_player_move_jump_00204:
1276  02AC  FA F0 02    	jp	M, l_player_move_jump_00129
1277  02AF  CD 00 00    	call	_spr_set_up
1278  02B2  21 08 00    	ld	hl,+(_col + 0x0008)
1279  02B5  46          	ld	b, (hl)
1280  02B6  3A 00 00    	ld	a,(_s_lin1)
1281  02B9  4F          	ld	c,a
1282  02BA  C5          	push	bc
1283  02BB  CD C1 0B    	call	_player_check_ceil
1284  02BE  F1          	pop	af
1285  02BF  DD 75 FF    	ld	(ix-1),l
1286  02C2  7D          	ld	a, l
1287  02C3  B7          	or	a, a
1288  02C4  20 1B       	jr	NZ,l_player_move_jump_00112
1289  02C6  21 00 00    	ld	hl,0x0000
1290  02C9  22 00 00    	ld	(_player_vel_y),hl
1291  02CC  3A 08 00    	ld	a,(_state + 0x0008)
1292  02CF  DD 77 FF    	ld	(ix-1),a
1293  02D2  4F          	ld	c, a
1294  02D3  CB 91       	res	2, c
1295  02D5  21 08 00    	ld	hl, +(_state + 0x0008)
1296  02D8  71          	ld	(hl), c
1297  02D9  CB 99       	res	3, c
1298  02DB  71          	ld	(hl), c
1299  02DC  CB 81       	res	0, c
1300  02DE  71          	ld	(hl), c
1301  02DF  18 06       	jr	l_player_move_jump_00113
1302  02E1              l_player_move_jump_00112:
1303  02E1  3A 00 00    	ld	a,(_s_lin1)
1304  02E4  32 08 00    	ld	((_lin + 0x0008)),a
1305  02E7              l_player_move_jump_00113:
1306  02E7  3A 00 00    	ld	a,(_s_lin1)
1307  02EA  32 00 00    	ld	(_player_jump_top),a
1308  02ED  C3 9E 03    	jp	l_player_move_jump_00130
1309  02F0              l_player_move_jump_00129:
1310  02F0  3E 70       	ld	a,0x70
1311  02F2  21 00 00    	ld	hl,_s_lin1
1312  02F5  96          	sub	a, (hl)
1313  02F6  30 18       	jr	NC,l_player_move_jump_00118
1314  02F8  3E C8       	ld	a,0xc8
1315  02FA  96          	sub	a, (hl)
1316  02FB  30 07       	jr	NC,l_player_move_jump_00115
1317  02FD  21 00 00    	ld	hl,_v0
1318  0300  36 00       	ld	(hl),0x00
1319  0302  18 19       	jr	l_player_move_jump_00119
1320  0304              l_player_move_jump_00115:
1321  0304  21 00 00    	ld	hl,_v0
1322  0307  36 70       	ld	(hl),0x70
1323  0309  21 00 00    	ld	hl,_s_lin1
1324  030C  36 70       	ld	(hl),0x70
1325  030E  18 0D       	jr	l_player_move_jump_00119
1326  0310              l_player_move_jump_00118:
1327  0310  CD 38 0D    	call	_player_get_floor
1328  0313  DD 74 FE    	ld	(ix-2),h
1329  0316  DD 75 FD    	ld	(ix-3),l
1330  0319  7D          	ld	a, l
1331  031A  32 00 00    	ld	(_v0),a
1332  031D              l_player_move_jump_00119:
1333  031D  3A 00 00    	ld	a,(_s_lin1)
1334  0320  21 00 00    	ld	hl,_v0
1335  0323  96          	sub	a, (hl)
1336  0324  38 6F       	jr	C,l_player_move_jump_00126
1337  0326  7E          	ld	a, (hl)
1338  0327  21 00 00    	ld	hl,_s_lin0
1339  032A  96          	sub	a, (hl)
1340  032B  38 68       	jr	C,l_player_move_jump_00126
1341  032D  3A 00 00    	ld	a,(_v0)
1342  0330  4F          	ld	c,a
1343  0331  06 00       	ld	b,0x00
1344  0333  3A 00 00    	ld	a,(_player_jump_top)
1345  0336  5F          	ld	e,a
1346  0337  16 00       	ld	d,0x00
1347  0339  79          	ld	a, c
1348  033A  93          	sub	a, e
1349  033B  4F          	ld	c, a
1350  033C  78          	ld	a, b
1351  033D  9A          	sbc	a, d
1352  033E  47          	ld	b, a
1353  033F  79          	ld	a, c
1354  0340  D6 28       	sub	a,0x28
1355  0342  78          	ld	a, b
1356  0343  17          	rla
1357  0344  3F          	ccf
1358  0345  1F          	rra
1359  0346  DE 80       	sbc	a,0x80
1360  0348  38 08       	jr	C,l_player_move_jump_00121
1361  034A  3A 08 00    	ld	a,(_state + 0x0008)
1362  034D  F6 20       	or	a,0x20
1363  034F  32 08 00    	ld	((_state + 0x0008)),a
1364  0352              l_player_move_jump_00121:
1365  0352  3A 00 00    	ld	a,(_v0)
1366  0355  32 08 00    	ld	((_lin + 0x0008)),a
1367  0358  21 00 00    	ld	hl,0x0000
1368  035B  22 00 00    	ld	(_player_vel_y),hl
1369  035E  3A 08 00    	ld	a,(_state + 0x0008)
1370  0361  E6 FC       	and	a,+(0xfd&0xfe)
1371  0363  32 08 00    	ld	((_state + 0x0008)),a
1372  0366  3A 00 00    	ld	a,(_player_jump_lin)
1373  0369  21 00 00    	ld	hl,_v0
1374  036C  96          	sub	a, (hl)
1375  036D  20 0C       	jr	NZ,l_player_move_jump_00123
1376  036F  3A 08 00    	ld	a,(_state_a + 0x0008)
1377  0372  CB 57       	bit	2, a
1378  0374  28 05       	jr	Z,l_player_move_jump_00123
1379  0376  E6 FE       	and	a,0xfe
1380  0378  32 08 00    	ld	((_state_a + 0x0008)),a
1381  037B              l_player_move_jump_00123:
1382  037B  3A 08 00    	ld	a,(_state_a + 0x0008)
1383  037E  E6 7B       	and	a,+(0x7f&0xfb)
1384  0380  32 08 00    	ld	((_state_a + 0x0008)),a
1385  0383  CD 85 05    	call	_player_handle_conveyor
1386  0386  CD 00 00    	call	_ay_fx_stop
1387  0389  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1388  038C  36 04       	ld	(hl),0x04
1389  038E  CD 29 05    	call	_player_check_conveyor
1390  0391  2E 00       	ld	l,0x00
1391  0393  18 4D       	jr	l_player_move_jump_00136
1392  0395              l_player_move_jump_00126:
1393  0395  CD 00 00    	call	_spr_set_down
1394  0398  3A 00 00    	ld	a,(_s_lin1)
1395  039B  32 08 00    	ld	((_lin + 0x0008)),a
1396  039E              l_player_move_jump_00130:
1397  039E  3A 08 00    	ld	a,(_state + 0x0008)
1398  03A1  CB 5F       	bit	3, a
1399  03A3  20 04       	jr	NZ,l_player_move_jump_00133
1400  03A5  CB 57       	bit	2, a
1401  03A7  28 37       	jr	Z,l_player_move_jump_00134
1402  03A9              l_player_move_jump_00133:
1403  03A9  3E 00       	ld	a, +((_player_jump_hor) & 0xFF)
1404  03AB  21 00 00    	ld	hl,_player_jump_count
1405  03AE  86          	add	a, (hl)
1406  03AF  DD 77 FD    	ld	(ix-3),a
1407  03B2  3E 00       	ld	a, +((_player_jump_hor) / 256)
1408  03B4  CE 00       	adc	a,0x00
1409  03B6  DD 77 FE    	ld	(ix-2),a
1410  03B9  E1          	pop	hl
1411  03BA  7E          	ld	a,(hl)
1412  03BB  E5          	push	hl
1413  03BC  DD 77 FD    	ld	(ix-3),a
1414  03BF  B7          	or	a, a
1415  03C0  28 1B       	jr	Z,l_player_move_jump_00132
1416  03C2  3A 00 00    	ld	a,(_player_vel_y)
1417  03C5  21 00 00    	ld	hl,_game_gravity
1418  03C8  96          	sub	a, (hl)
1419  03C9  21 00 00    	ld	hl,_player_vel_y
1420  03CC  77          	ld	(hl), a
1421  03CD  23          	inc	hl
1422  03CE  7E          	ld	a, (hl)
1423  03CF  21 01 00    	ld	hl,_game_gravity + 1
1424  03D2  9E          	sbc	a, (hl)
1425  03D3  32 01 00    	ld	(_player_vel_y + 1),a
1426  03D6  CD 00 00    	call	_spr_move_horizontal
1427  03D9  2E 00       	ld	l,0x00
1428  03DB  18 05       	jr	l_player_move_jump_00136
1429  03DD              l_player_move_jump_00132:
1430  03DD  CD 00 00    	call	_spr_move_horizontal
1431  03E0              l_player_move_jump_00134:
1432  03E0  2E 01       	ld	l,0x01
1433  03E2              l_player_move_jump_00136:
1434  03E2  DD F9       	ld	sp, ix
1435  03E4  DD E1       	pop	ix
1436  03E6  C9          	ret
1437  03E7              	SECTION code_compiler
1438  03E7              ;	---------------------------------
1439  03E7              ; Function player_move_walk
1440  03E7              ; ---------------------------------
1441  03E7              _player_move_walk:
1442  03E7  CD 8A 08    	call	_player_check_input
1443  03EA  7D          	ld	a, l
1444  03EB  B7          	or	a, a
1445  03EC  28 5C       	jr	Z,l_player_move_walk_00117
1446  03EE  21 00 00    	ld	hl,_dirs
1447  03F1  CB 7E       	bit	7, (hl)
1448  03F3  28 0E       	jr	Z,l_player_move_walk_00104
1449  03F5  CD BD 05    	call	_player_new_jump
1450  03F8  7D          	ld	a, l
1451  03F9  B7          	or	a, a
1452  03FA  28 03       	jr	Z,l_player_move_walk_00102
1453  03FC  CD 00 00    	call	_spr_move_horizontal
1454  03FF              l_player_move_walk_00102:
1455  03FF  2E 01       	ld	l,0x01
1456  0401  18 5D       	jr	l_player_move_walk_00119
1457  0403              l_player_move_walk_00104:
1458  0403  11 08 00    	ld	de,_state_a+8
1459  0406  1A          	ld	a, (de)
1460  0407  E6 FD       	and	a,0xfd
1461  0409  12          	ld	(de), a
1462  040A  01 08 00    	ld	bc,_state+8
1463  040D  0A          	ld	a, (bc)
1464  040E  CB 67       	bit	4, a
1465  0410  20 07       	jr	NZ,l_player_move_walk_00106
1466  0412  C5          	push	bc
1467  0413  D5          	push	de
1468  0414  CD B9 04    	call	_player_handle_walk
1469  0417  D1          	pop	de
1470  0418  C1          	pop	bc
1471  0419              l_player_move_walk_00106:
1472  0419  1A          	ld	a, (de)
1473  041A  0F          	rrca
1474  041B  38 05       	jr	C,l_player_move_walk_00112
1475  041D  CD 85 05    	call	_player_handle_conveyor
1476  0420  18 1E       	jr	l_player_move_walk_00113
1477  0422              l_player_move_walk_00112:
1478  0422  21 00 00    	ld	hl,_dirs
1479  0425  CB 5E       	bit	3, (hl)
1480  0427  28 04       	jr	Z,l_player_move_walk_00108
1481  0429  0A          	ld	a, (bc)
1482  042A  F6 04       	or	a,0x04
1483  042C  02          	ld	(bc), a
1484  042D              l_player_move_walk_00108:
1485  042D  21 00 00    	ld	hl,_dirs
1486  0430  CB 56       	bit	2, (hl)
1487  0432  28 04       	jr	Z,l_player_move_walk_00110
1488  0434  0A          	ld	a, (bc)
1489  0435  F6 08       	or	a,0x08
1490  0437  02          	ld	(bc), a
1491  0438              l_player_move_walk_00110:
1492  0438  21 08 04    	ld	hl,0x0408
1493  043B  E5          	push	hl
1494  043C  CD AD 08    	call	_player_tile
1495  043F  F1          	pop	af
1496  0440              l_player_move_walk_00113:
1497  0440  CD F1 04    	call	_player_handle_fall
1498  0443  CD 00 00    	call	_spr_move_horizontal
1499  0446  2E 01       	ld	l,0x01
1500  0448  18 16       	jr	l_player_move_walk_00119
1501  044A              l_player_move_walk_00117:
1502  044A  01 08 00    	ld	bc,_state_a+8
1503  044D  0A          	ld	a, (bc)
1504  044E  E6 FD       	and	a,0xfd
1505  0450  02          	ld	(bc), a
1506  0451  CD 85 05    	call	_player_handle_conveyor
1507  0454  7D          	ld	a, l
1508  0455  B7          	or	a, a
1509  0456  28 03       	jr	Z,l_player_move_walk_00115
1510  0458  CD 00 00    	call	_spr_move_horizontal
1511  045B              l_player_move_walk_00115:
1512  045B  CD F1 04    	call	_player_handle_fall
1513  045E  2E 00       	ld	l,0x00
1514  0460              l_player_move_walk_00119:
1515  0460  C9          	ret
1516  0461              	SECTION code_compiler
1517  0461              ;	---------------------------------
1518  0461              ; Function player_handle_lock
1519  0461              ; ---------------------------------
1520  0461              _player_handle_lock:
1521  0461  3A 08 00    	ld	a,(_state + 0x0008)
1522  0464  CB 67       	bit	4, a
1523  0466  20 49       	jr	NZ,l_player_handle_lock_00116
1524  0468  3A 00 00    	ld	a,(_dirs)
1525  046B  B7          	or	a, a
1526  046C  20 09       	jr	NZ,l_player_handle_lock_00113
1527  046E  01 08 00    	ld	bc,_state_a+8
1528  0471  0A          	ld	a, (bc)
1529  0472  E6 FE       	and	a,0xfe
1530  0474  02          	ld	(bc), a
1531  0475  18 41       	jr	l_player_handle_lock_00118
1532  0477              l_player_handle_lock_00113:
1533  0477  21 00 00    	ld	hl,_dirs
1534  047A  CB 56       	bit	2,(hl)
1535  047C  20 04       	jr	NZ,l_player_handle_lock_00108
1536  047E  CB 5E       	bit	3, (hl)
1537  0480  28 0F       	jr	Z,l_player_handle_lock_00109
1538  0482              l_player_handle_lock_00108:
1539  0482  01 08 00    	ld	bc,_state_a+8
1540  0485  0A          	ld	a, (bc)
1541  0486  F6 01       	or	a,0x01
1542  0488  02          	ld	(bc), a
1543  0489  3A 00 00    	ld	a,(_dirs)
1544  048C  32 00 00    	ld	(_dirs_last),a
1545  048F  18 27       	jr	l_player_handle_lock_00118
1546  0491              l_player_handle_lock_00109:
1547  0491  21 00 00    	ld	hl,_dirs
1548  0494  CB 7E       	bit	7, (hl)
1549  0496  28 10       	jr	Z,l_player_handle_lock_00105
1550  0498  21 00 00    	ld	hl,_dirs_last
1551  049B  CB 7E       	bit	7, (hl)
1552  049D  28 09       	jr	Z,l_player_handle_lock_00105
1553  049F  01 08 00    	ld	bc,_state_a+8
1554  04A2  0A          	ld	a, (bc)
1555  04A3  F6 01       	or	a,0x01
1556  04A5  02          	ld	(bc), a
1557  04A6  18 10       	jr	l_player_handle_lock_00118
1558  04A8              l_player_handle_lock_00105:
1559  04A8  01 08 00    	ld	bc,_state_a+8
1560  04AB  0A          	ld	a, (bc)
1561  04AC  E6 FE       	and	a,0xfe
1562  04AE  02          	ld	(bc), a
1563  04AF  18 07       	jr	l_player_handle_lock_00118
1564  04B1              l_player_handle_lock_00116:
1565  04B1  01 08 00    	ld	bc,_state_a+8
1566  04B4  0A          	ld	a, (bc)
1567  04B5  E6 FE       	and	a,0xfe
1568  04B7  02          	ld	(bc), a
1569  04B8              l_player_handle_lock_00118:
1570  04B8  C9          	ret
1571  04B9              	SECTION code_compiler
1572  04B9              ;	---------------------------------
1573  04B9              ; Function player_handle_walk
1574  04B9              ; ---------------------------------
1575  04B9              _player_handle_walk:
1576  04B9  21 00 00    	ld	hl,_dirs
1577  04BC  CB 5E       	bit	3, (hl)
1578  04BE  28 11       	jr	Z,l_player_handle_walk_00104
1579  04C0  3A 08 00    	ld	a,(_state_a + 0x0008)
1580  04C3  CB 5F       	bit	3, a
1581  04C5  28 07       	jr	Z,l_player_handle_walk_00102
1582  04C7  01 08 00    	ld	bc,_colint+8
1583  04CA  0A          	ld	a, (bc)
1584  04CB  C6 FF       	add	a,0xff
1585  04CD  02          	ld	(bc), a
1586  04CE              l_player_handle_walk_00102:
1587  04CE  CD 00 00    	call	_spr_set_right
1588  04D1              l_player_handle_walk_00104:
1589  04D1  21 00 00    	ld	hl,_dirs
1590  04D4  CB 56       	bit	2, (hl)
1591  04D6  28 10       	jr	Z,l_player_handle_walk_00108
1592  04D8  3A 08 00    	ld	a,(_state_a + 0x0008)
1593  04DB  CB 67       	bit	4, a
1594  04DD  28 06       	jr	Z,l_player_handle_walk_00106
1595  04DF  01 08 00    	ld	bc,_colint+8
1596  04E2  0A          	ld	a, (bc)
1597  04E3  3C          	inc	a
1598  04E4  02          	ld	(bc), a
1599  04E5              l_player_handle_walk_00106:
1600  04E5  CD 00 00    	call	_spr_set_left
1601  04E8              l_player_handle_walk_00108:
1602  04E8  21 08 04    	ld	hl,0x0408
1603  04EB  E5          	push	hl
1604  04EC  CD AD 08    	call	_player_tile
1605  04EF  F1          	pop	af
1606  04F0  C9          	ret
1607  04F1              	SECTION code_compiler
1608  04F1              ;	---------------------------------
1609  04F1              ; Function player_handle_fall
1610  04F1              ; ---------------------------------
1611  04F1              _player_handle_fall:
1612  04F1  AF          	xor	a, a
1613  04F2  F5          	push	af
1614  04F3  33          	inc	sp
1615  04F4  CD C4 0C    	call	_player_check_floor
1616  04F7  33          	inc	sp
1617  04F8  7D          	ld	a, l
1618  04F9  B7          	or	a, a
1619  04FA  C8          	ret	Z
1620  04FB  3E 01       	ld	a,0x01
1621  04FD  F5          	push	af
1622  04FE  33          	inc	sp
1623  04FF  CD C4 0C    	call	_player_check_floor
1624  0502  33          	inc	sp
1625  0503  7D          	ld	a, l
1626  0504  B7          	or	a, a
1627  0505  C8          	ret	Z
1628  0506  3A 08 00    	ld	a,(_lin + 0x0008)
1629  0509  32 00 00    	ld	(_player_jump_top),a
1630  050C  01 08 00    	ld	bc,_state+8
1631  050F  0A          	ld	a, (bc)
1632  0510  F6 02       	or	a,0x02
1633  0512  E6 F3       	and	a,+(0xf7&0xfb)
1634  0514  02          	ld	(bc),a
1635  0515  01 08 00    	ld	bc,_state_a+8
1636  0518  0A          	ld	a, (bc)
1637  0519  E6 FC       	and	a,+(0xfe&0xfd)
1638  051B  02          	ld	(bc),a
1639  051C  21 00 00    	ld	hl,_player_jump_count
1640  051F  36 FF       	ld	(hl),0xff
1641  0521  21 00 00    	ld	hl,_player_fall_start
1642  0524  36 01       	ld	(hl),0x01
1643  0526  C3 00 00    	jp  _audio_fall
1644  0529              	SECTION code_compiler
1645  0529              ;	---------------------------------
1646  0529              ; Function player_check_conveyor
1647  0529              ; ---------------------------------
1648  0529              _player_check_conveyor:
1649  0529  3A 08 00    	ld	a,(_state_a + 0x0008)
1650  052C  0F          	rrca
1651  052D  D8          	ret	C
1652  052E  C3 31 05    	jp  _player_check_conveyor_int
1653  0531              	SECTION code_compiler
1654  0531              ;	---------------------------------
1655  0531              ; Function player_check_conveyor_int
1656  0531              ; ---------------------------------
1657  0531              _player_check_conveyor_int:
1658  0531  21 08 00    	ld	hl,+(_col + 0x0008)
1659  0534  56          	ld	d, (hl)
1660  0535  3A 08 00    	ld	a,(_lin + 0x0008)
1661  0538  C6 10       	add	a,0x10
1662  053A  5F          	ld	e, a
1663  053B  D5          	push	de
1664  053C  CD 00 00    	call	_spr_calc_index
1665  053F  F1          	pop	af
1666  0540  22 00 00    	ld	(_index1),hl
1667  0543  01 00 00    	ld	bc,_tile_class+0
1668  0546  11 00 00    	ld	de,_scr_map
1669  0549  2A 00 00    	ld	hl,(_index1)
1670  054C  19          	add	hl,de
1671  054D  6E          	ld	l,(hl)
1672  054E  26 00       	ld	h,0x00
1673  0550  09          	add	hl, bc
1674  0551  7E          	ld	a, (hl)
1675  0552  32 00 00    	ld	(_v0),a
1676  0555  ED 5B 00 00 	ld	de,(_index1)
1677  0559  13          	inc	de
1678  055A  21 00 00    	ld	hl,_scr_map
1679  055D  19          	add	hl, de
1680  055E  6E          	ld	l, (hl)
1681  055F  26 00       	ld	h,0x00
1682  0561  09          	add	hl, bc
1683  0562  7E          	ld	a, (hl)
1684  0563  32 00 00    	ld	(_v1),a
1685  0566  3A 00 00    	ld	a,(_v0)
1686  0569  D6 04       	sub	a,0x04
1687  056B  28 07       	jr	Z,l_player_check_conveyor_int_00101
1688  056D  3A 00 00    	ld	a,(_v1)
1689  0570  D6 04       	sub	a,0x04
1690  0572  20 09       	jr	NZ,l_player_check_conveyor_int_00102
1691  0574              l_player_check_conveyor_int_00101:
1692  0574  01 08 00    	ld	bc,_state+8
1693  0577  0A          	ld	a, (bc)
1694  0578  F6 10       	or	a,0x10
1695  057A  02          	ld	(bc), a
1696  057B  18 07       	jr	l_player_check_conveyor_int_00105
1697  057D              l_player_check_conveyor_int_00102:
1698  057D  01 08 00    	ld	bc,_state+8
1699  0580  0A          	ld	a, (bc)
1700  0581  E6 EF       	and	a,0xef
1701  0583  02          	ld	(bc), a
1702  0584              l_player_check_conveyor_int_00105:
1703  0584  C9          	ret
1704  0585              	SECTION code_compiler
1705  0585              ;	---------------------------------
1706  0585              ; Function player_handle_conveyor
1707  0585              ; ---------------------------------
1708  0585              _player_handle_conveyor:
1709  0585  CD 29 05    	call	_player_check_conveyor
1710  0588  3A 08 00    	ld	a,(_state + 0x0008)
1711  058B  CB 67       	bit	4, a
1712  058D  28 2B       	jr	Z,l_player_handle_conveyor_00106
1713  058F  3A 00 00    	ld	a,(_game_conveyor_dir)
1714  0592  D6 02       	sub	a,0x02
1715  0594  20 0F       	jr	NZ,l_player_handle_conveyor_00102
1716  0596  CD 00 00    	call	_spr_set_right
1717  0599  21 08 04    	ld	hl,0x0408
1718  059C  E5          	push	hl
1719  059D  CD AD 08    	call	_player_tile
1720  05A0  F1          	pop	af
1721  05A1  2E 01       	ld	l,0x01
1722  05A3  18 17       	jr	l_player_handle_conveyor_00107
1723  05A5              l_player_handle_conveyor_00102:
1724  05A5  3A 00 00    	ld	a,(_game_conveyor_dir)
1725  05A8  3D          	dec	a
1726  05A9  20 0F       	jr	NZ,l_player_handle_conveyor_00106
1727  05AB  CD 00 00    	call	_spr_set_left
1728  05AE  21 08 04    	ld	hl,0x0408
1729  05B1  E5          	push	hl
1730  05B2  CD AD 08    	call	_player_tile
1731  05B5  F1          	pop	af
1732  05B6  2E 01       	ld	l,0x01
1733  05B8  18 02       	jr	l_player_handle_conveyor_00107
1734  05BA              l_player_handle_conveyor_00106:
1735  05BA  2E 00       	ld	l,0x00
1736  05BC              l_player_handle_conveyor_00107:
1737  05BC  C9          	ret
1738  05BD              	SECTION code_compiler
1739  05BD              ;	---------------------------------
1740  05BD              ; Function player_new_jump
1741  05BD              ; ---------------------------------
1742  05BD              _player_new_jump:
1743  05BD  21 08 00    	ld	hl,+(_col + 0x0008)
1744  05C0  56          	ld	d, (hl)
1745  05C1  21 08 00    	ld	hl,+(_lin + 0x0008)
1746  05C4  46          	ld	b, (hl)
1747  05C5  05          	dec	b
1748  05C6  05          	dec	b
1749  05C7  58          	ld	e,b
1750  05C8  D5          	push	de
1751  05C9  CD C1 0B    	call	_player_check_ceil
1752  05CC  F1          	pop	af
1753  05CD  7D          	ld	a, l
1754  05CE  B7          	or	a, a
1755  05CF  CA BA 06    	jp	Z, l_player_new_jump_00128
1756  05D2  21 08 00    	ld	hl,+(_state_a + 0x0008)
1757  05D5  4E          	ld	c, (hl)
1758  05D6  CB 49       	bit	1, c
1759  05D8  20 08       	jr	NZ,l_player_new_jump_00102
1760  05DA  3A 00 00    	ld	a,(_dirs)
1761  05DD  32 00 00    	ld	(_dirs_last),a
1762  05E0  18 0B       	jr	l_player_new_jump_00103
1763  05E2              l_player_new_jump_00102:
1764  05E2  21 00 00    	ld	hl,_dirs_last
1765  05E5  36 00       	ld	(hl),0x00
1766  05E7  CB 81       	res	0, c
1767  05E9  21 08 00    	ld	hl, +(_state_a + 0x0008)
1768  05EC  71          	ld	(hl), c
1769  05ED              l_player_new_jump_00103:
1770  05ED  3A 08 00    	ld	a,(_state_a + 0x0008)
1771  05F0  E6 FB       	and	a,0xfb
1772  05F2  F6 80       	or	a,0x80
1773  05F4  32 08 00    	ld	((_state_a + 0x0008)),a
1774  05F7  21 64 00    	ld	hl,0x0064
1775  05FA  22 00 00    	ld	(_game_gravity),hl
1776  05FD  21 A8 FD    	ld	hl,0xfda8
1777  0600  22 00 00    	ld	(_player_vel_y0),hl
1778  0603  21 00 00    	ld	hl,_player_vel_inc
1779  0606  36 01       	ld	(hl),0x01
1780  0608  21 00 00    	ld	hl,_player_jump_count
1781  060B  36 FF       	ld	(hl),0xff
1782  060D  3A 00 00    	ld	a,(_s_lin0)
1783  0610  32 00 00    	ld	(_player_jump_lin),a
1784  0613  CD 00 00    	call	_audio_jump
1785  0616  CD 00 00    	call	_spr_set_up
1786  0619  2A 00 00    	ld	hl,(_player_vel_y0)
1787  061C  22 00 00    	ld	(_player_vel_y),hl
1788  061F  3A 08 00    	ld	a,(_state_a + 0x0008)
1789  0622  E6 FB       	and	a,0xfb
1790  0624  32 08 00    	ld	((_state_a + 0x0008)),a
1791  0627  CD 29 05    	call	_player_check_conveyor
1792  062A  2A 08 00    	ld	hl,(_state + 0x0008)
1793  062D  5D          	ld	e, l
1794  062E  CB 9B       	res	3, e
1795  0630  4B          	ld	c, e
1796  0631  CB 91       	res	2, c
1797  0633  CB 65       	bit	4, l
1798  0635  28 43       	jr	Z,l_player_new_jump_00122
1799  0637  3A 08 00    	ld	a,(_state_a + 0x0008)
1800  063A  CB 47       	bit	0, a
1801  063C  28 2F       	jr	Z,l_player_new_jump_00115
1802  063E  21 00 00    	ld	hl,_dirs
1803  0641  CB 56       	bit	2,(hl)
1804  0643  20 12       	jr	NZ,l_player_new_jump_00108
1805  0645  CB 5E       	bit	3, (hl)
1806  0647  20 0E       	jr	NZ,l_player_new_jump_00108
1807  0649  CB 4F       	bit	1, a
1808  064B  20 07       	jr	NZ,l_player_new_jump_00105
1809  064D  21 08 00    	ld	hl, +(_state + 0x0008)
1810  0650  73          	ld	(hl), e
1811  0651  71          	ld	(hl), c
1812  0652  18 03       	jr	l_player_new_jump_00108
1813  0654              l_player_new_jump_00105:
1814  0654  CD 85 05    	call	_player_handle_conveyor
1815  0657              l_player_new_jump_00108:
1816  0657  21 00 00    	ld	hl,_dirs
1817  065A  CB 56       	bit	2, (hl)
1818  065C  28 03       	jr	Z,l_player_new_jump_00111
1819  065E  CD 00 00    	call	_spr_set_left
1820  0661              l_player_new_jump_00111:
1821  0661  21 00 00    	ld	hl,_dirs
1822  0664  CB 5E       	bit	3, (hl)
1823  0666  28 08       	jr	Z,l_player_new_jump_00116
1824  0668  CD 00 00    	call	_spr_set_right
1825  066B  18 03       	jr	l_player_new_jump_00116
1826  066D              l_player_new_jump_00115:
1827  066D  CD 85 05    	call	_player_handle_conveyor
1828  0670              l_player_new_jump_00116:
1829  0670  3A 08 00    	ld	a,(_state_a + 0x0008)
1830  0673  F6 02       	or	a,0x02
1831  0675  32 08 00    	ld	((_state_a + 0x0008)),a
1832  0678  18 21       	jr	l_player_new_jump_00123
1833  067A              l_player_new_jump_00122:
1834  067A  21 08 00    	ld	hl, +(_state + 0x0008)
1835  067D  73          	ld	(hl), e
1836  067E  71          	ld	(hl), c
1837  067F  3A 08 00    	ld	a,(_state_a + 0x0008)
1838  0682  E6 FD       	and	a,0xfd
1839  0684  32 08 00    	ld	((_state_a + 0x0008)),a
1840  0687  21 00 00    	ld	hl,_dirs
1841  068A  CB 56       	bit	2, (hl)
1842  068C  28 03       	jr	Z,l_player_new_jump_00118
1843  068E  CD 00 00    	call	_spr_set_left
1844  0691              l_player_new_jump_00118:
1845  0691  21 00 00    	ld	hl,_dirs
1846  0694  CB 5E       	bit	3, (hl)
1847  0696  28 03       	jr	Z,l_player_new_jump_00123
1848  0698  CD 00 00    	call	_spr_set_right
1849  069B              l_player_new_jump_00123:
1850  069B  3A 08 00    	ld	a,(_state + 0x0008)
1851  069E  CB 5F       	bit	3, a
1852  06A0  20 0C       	jr	NZ,l_player_new_jump_00125
1853  06A2  CB 57       	bit	2, a
1854  06A4  20 08       	jr	NZ,l_player_new_jump_00125
1855  06A6  3A 08 00    	ld	a,(_state_a + 0x0008)
1856  06A9  F6 04       	or	a,0x04
1857  06AB  32 08 00    	ld	((_state_a + 0x0008)),a
1858  06AE              l_player_new_jump_00125:
1859  06AE  21 08 04    	ld	hl,0x0408
1860  06B1  E5          	push	hl
1861  06B2  CD AD 08    	call	_player_tile
1862  06B5  F1          	pop	af
1863  06B6  2E 01       	ld	l,0x01
1864  06B8  18 08       	jr	l_player_new_jump_00130
1865  06BA              l_player_new_jump_00128:
1866  06BA  CD 00 00    	call	_spr_move_horizontal
1867  06BD  CD F1 04    	call	_player_handle_fall
1868  06C0  2E 00       	ld	l,0x00
1869  06C2              l_player_new_jump_00130:
1870  06C2  C9          	ret
1871  06C3              	SECTION code_compiler
1872  06C3              ;	---------------------------------
1873  06C3              ; Function player_collision
1874  06C3              ; ---------------------------------
1875  06C3              _player_collision:
1876  06C3  21 08 00    	ld	hl,+(_col + 0x0008)
1877  06C6  56          	ld	d, (hl)
1878  06C7  21 08 00    	ld	hl,+(_lin + 0x0008)
1879  06CA  5E          	ld	e, (hl)
1880  06CB  D5          	push	de
1881  06CC  CD 00 00    	call	_spr_calc_index
1882  06CF  F1          	pop	af
1883  06D0  22 00 00    	ld	(_index1),hl
1884  06D3  CD 5B 08    	call	_player_pick
1885  06D6  21 08 00    	ld	hl,+(_col + 0x0008)
1886  06D9  56          	ld	d, (hl)
1887  06DA  3A 08 00    	ld	a,(_lin + 0x0008)
1888  06DD  C6 0E       	add	a,0x0e
1889  06DF  5F          	ld	e, a
1890  06E0  D5          	push	de
1891  06E1  CD 00 00    	call	_spr_calc_index
1892  06E4  F1          	pop	af
1893  06E5  22 00 00    	ld	(_index1),hl
1894  06E8  CD 5B 08    	call	_player_pick
1895  06EB  21 08 00    	ld	hl,+(_col + 0x0008)
1896  06EE  56          	ld	d, (hl)
1897  06EF  14          	inc	d
1898  06F0  21 08 00    	ld	hl,+(_lin + 0x0008)
1899  06F3  5E          	ld	e, (hl)
1900  06F4  D5          	push	de
1901  06F5  CD 00 00    	call	_spr_calc_index
1902  06F8  F1          	pop	af
1903  06F9  22 00 00    	ld	(_index1),hl
1904  06FC  CD 5B 08    	call	_player_pick
1905  06FF  21 08 00    	ld	hl,+(_col + 0x0008)
1906  0702  56          	ld	d, (hl)
1907  0703  14          	inc	d
1908  0704  3A 08 00    	ld	a,(_lin + 0x0008)
1909  0707  C6 0E       	add	a,0x0e
1910  0709  5F          	ld	e, a
1911  070A  D5          	push	de
1912  070B  CD 00 00    	call	_spr_calc_index
1913  070E  F1          	pop	af
1914  070F  22 00 00    	ld	(_index1),hl
1915  0712  CD 5B 08    	call	_player_pick
1916  0715  21 00 00    	ld	hl,_i
1917  0718  36 00       	ld	(hl),0x00
1918  071A              l_player_collision_00139:
1919  071A  2A 00 00    	ld	hl,(_i)
1920  071D  26 00       	ld	h,0x00
1921  071F  01 00 00    	ld	bc,_class
1922  0722  09          	add	hl,bc
1923  0723  7E          	ld	a,(hl)
1924  0724  B7          	or	a,a
1925  0725  CA 4F 08    	jp	Z,l_player_collision_00140
1926  0728  2A 00 00    	ld	hl,(_i)
1927  072B  26 00       	ld	h,0x00
1928  072D  01 00 00    	ld	bc,_col
1929  0730  09          	add	hl,bc
1930  0731  4E          	ld	c, (hl)
1931  0732  06 00       	ld	b,0x00
1932  0734  ED 5B 08 00 	ld	de,(_col + 0x0008)
1933  0738  50          	ld	d,b
1934  0739  79          	ld	a, c
1935  073A  93          	sub	a, e
1936  073B  6F          	ld	l, a
1937  073C  78          	ld	a, b
1938  073D  9A          	sbc	a, d
1939  073E  67          	ld	h, a
1940  073F  CD 00 00    	call	_abs_fastcall
1941  0742  7D          	ld	a,l
1942  0743  32 00 00    	ld	(_v0),a
1943  0746  3D          	dec	a
1944  0747  20 75       	jr	NZ,l_player_collision_00120
1945  0749  2A 00 00    	ld	hl,(_i)
1946  074C  26 00       	ld	h,0x00
1947  074E  01 00 00    	ld	bc,_spr_kind
1948  0751  09          	add	hl,bc
1949  0752  7E          	ld	a,(hl)
1950  0753  FE 01       	cp	a,0x01
1951  0755  28 04       	jr	Z,l_player_collision_00101
1952  0757  D6 08       	sub	a,0x08
1953  0759  20 0F       	jr	NZ,l_player_collision_00102
1954  075B              l_player_collision_00101:
1955  075B  2A 00 00    	ld	hl,(_i)
1956  075E  26 00       	ld	h,0x00
1957  0760  01 00 00    	ld	bc,_colint
1958  0763  09          	add	hl,bc
1959  0764  7E          	ld	a,(hl)
1960  0765  32 00 00    	ld	(_v1),a
1961  0768  18 05       	jr	l_player_collision_00103
1962  076A              l_player_collision_00102:
1963  076A  21 00 00    	ld	hl,_v1
1964  076D  36 01       	ld	(hl),0x01
1965  076F              l_player_collision_00103:
1966  076F  21 08 00    	ld	hl,+(_colint + 0x0008)
1967  0772  4E          	ld	c, (hl)
1968  0773  3A 00 00    	ld	a,(_i)
1969  0776  C6 00       	add	a,+((_col) & 0xFF)
1970  0778  5F          	ld	e,a
1971  0779  3E 00       	ld	a,+((_col) / 256)
1972  077B  CE 00       	adc	a,0x00
1973  077D  57          	ld	d,a
1974  077E  79          	ld	a, c
1975  077F  B7          	or	a, a
1976  0780  20 1C       	jr	NZ,l_player_collision_00111
1977  0782  21 08 00    	ld	hl,+(_col + 0x0008)
1978  0785  46          	ld	b, (hl)
1979  0786  1A          	ld	a, (de)
1980  0787  6F          	ld	l, a
1981  0788  78          	ld	a, b
1982  0789  95          	sub	a, l
1983  078A  30 07       	jr	NC,l_player_collision_00108
1984  078C  21 00 00    	ld	hl,_v0
1985  078F  36 FF       	ld	(hl),0xff
1986  0791  18 0B       	jr	l_player_collision_00111
1987  0793              l_player_collision_00108:
1988  0793  3A 00 00    	ld	a,(_v1)
1989  0796  B7          	or	a, a
1990  0797  20 05       	jr	NZ,l_player_collision_00111
1991  0799  21 00 00    	ld	hl,_v0
1992  079C  36 FF       	ld	(hl),0xff
1993  079E              l_player_collision_00111:
1994  079E  79          	ld	a, c
1995  079F  D6 03       	sub	a,0x03
1996  07A1  20 1B       	jr	NZ,l_player_collision_00120
1997  07A3  21 08 00    	ld	hl,+(_col + 0x0008)
1998  07A6  4E          	ld	c, (hl)
1999  07A7  1A          	ld	a, (de)
2000  07A8  91          	sub	a, c
2001  07A9  30 07       	jr	NC,l_player_collision_00115
2002  07AB  21 00 00    	ld	hl,_v0
2003  07AE  36 FF       	ld	(hl),0xff
2004  07B0  18 0C       	jr	l_player_collision_00120
2005  07B2              l_player_collision_00115:
2006  07B2  3A 00 00    	ld	a,(_v1)
2007  07B5  D6 03       	sub	a,0x03
2008  07B7  20 05       	jr	NZ,l_player_collision_00120
2009  07B9  21 00 00    	ld	hl,_v0
2010  07BC  36 FF       	ld	(hl),0xff
2011  07BE              l_player_collision_00120:
2012  07BE  3A 00 00    	ld	a,(_v0)
2013  07C1  D6 02       	sub	a,0x02
2014  07C3  D2 4F 08    	jp	NC, l_player_collision_00140
2015  07C6  2A 00 00    	ld	hl,(_i)
2016  07C9  26 00       	ld	h,0x00
2017  07CB  01 00 00    	ld	bc,_lin
2018  07CE  09          	add	hl,bc
2019  07CF  4E          	ld	c,(hl)
2020  07D0  06 00       	ld	b,0x00
2021  07D2  ED 5B 08 00 	ld	de,(_lin + 0x0008)
2022  07D6  50          	ld	d,b
2023  07D7  79          	ld	a, c
2024  07D8  93          	sub	a, e
2025  07D9  6F          	ld	l, a
2026  07DA  78          	ld	a, b
2027  07DB  9A          	sbc	a, d
2028  07DC  67          	ld	h, a
2029  07DD  CD 00 00    	call	_abs_fastcall
2030  07E0  7D          	ld	a,l
2031  07E1  32 00 00    	ld	(_v0),a
2032  07E4  2A 00 00    	ld	hl,(_i)
2033  07E7  26 00       	ld	h,0x00
2034  07E9  01 00 00    	ld	bc,_lin
2035  07EC  09          	add	hl,bc
2036  07ED  4E          	ld	c,(hl)
2037  07EE  21 08 00    	ld	hl,+(_lin + 0x0008)
2038  07F1  46          	ld	b, (hl)
2039  07F2  79          	ld	a, c
2040  07F3  90          	sub	a, b
2041  07F4  30 13       	jr	NC,l_player_collision_00128
2042  07F6  21 00 00    	ld	hl,_v0
2043  07F9  7E          	ld	a, (hl)
2044  07FA  D6 10       	sub	a,0x10
2045  07FC  30 04       	jr	NC,l_player_collision_00122
2046  07FE  36 01       	ld	(hl),0x01
2047  0800  18 18       	jr	l_player_collision_00129
2048  0802              l_player_collision_00122:
2049  0802  21 00 00    	ld	hl,_v0
2050  0805  36 00       	ld	(hl),0x00
2051  0807  18 11       	jr	l_player_collision_00129
2052  0809              l_player_collision_00128:
2053  0809  21 00 00    	ld	hl,_v0
2054  080C  7E          	ld	a, (hl)
2055  080D  D6 0E       	sub	a,0x0e
2056  080F  30 04       	jr	NC,l_player_collision_00125
2057  0811  36 01       	ld	(hl),0x01
2058  0813  18 05       	jr	l_player_collision_00129
2059  0815              l_player_collision_00125:
2060  0815  21 00 00    	ld	hl,_v0
2061  0818  36 00       	ld	(hl),0x00
2062  081A              l_player_collision_00129:
2063  081A  3A 00 00    	ld	a,(_v0)
2064  081D  B7          	or	a, a
2065  081E  28 2F       	jr	Z,l_player_collision_00140
2066  0820  2A 00 00    	ld	hl,(_i)
2067  0823  26 00       	ld	h,0x00
2068  0825  01 00 00    	ld	bc,_colint
2069  0828  09          	add	hl,bc
2070  0829  4E          	ld	c,(hl)
2071  082A  06 00       	ld	b,0x00
2072  082C  ED 5B 08 00 	ld	de,(_colint + 0x0008)
2073  0830  50          	ld	d,b
2074  0831  79          	ld	a, c
2075  0832  93          	sub	a, e
2076  0833  6F          	ld	l, a
2077  0834  78          	ld	a, b
2078  0835  9A          	sbc	a, d
2079  0836  67          	ld	h, a
2080  0837  CD 00 00    	call	_abs_fastcall
2081  083A  7D          	ld	a,l
2082  083B  32 00 00    	ld	(_v0),a
2083  083E  D6 02       	sub	a,0x02
2084  0840  30 0D       	jr	NC,l_player_collision_00140
2085  0842  21 FF FF    	ld	hl,0xffff
2086  0845  22 00 00    	ld	(_player_kill_index),hl
2087  0848  01 08 00    	ld	bc,_state+8
2088  084B  0A          	ld	a,(bc)
2089  084C  F6 20       	or	a,0x20
2090  084E  02          	ld	(bc), a
2091  084F              l_player_collision_00140:
2092  084F  21 00 00    	ld	hl,_i
2093  0852  7E          	ld	a,(hl)
2094  0853  3C          	inc	a
2095  0854  77          	ld	(hl),a
2096  0855  D6 08       	sub	a,0x08
2097  0857  DA 1A 07    	jp	C, l_player_collision_00139
2098  085A  C9          	ret
2099  085B              	SECTION code_compiler
2100  085B              ;	---------------------------------
2101  085B              ; Function player_pick
2102  085B              ; ---------------------------------
2103  085B              _player_pick:
2104  085B  01 00 00    	ld	bc,_scr_map
2105  085E  2A 00 00    	ld	hl,(_index1)
2106  0861  09          	add	hl,bc
2107  0862  7E          	ld	a,(hl)
2108  0863  32 00 00    	ld	(_v0),a
2109  0866  F5          	push	af
2110  0867  33          	inc	sp
2111  0868  CD 75 0A    	call	_player_pick_deadly
2112  086B  33          	inc	sp
2113  086C  7D          	ld	a,l
2114  086D  32 00 00    	ld	(_v0),a
2115  0870  2A 00 00    	ld	hl,(_index1)
2116  0873  E5          	push	hl
2117  0874  F5          	push	af
2118  0875  33          	inc	sp
2119  0876  CD 2D 0A    	call	_player_pick_item
2120  0879  F1          	pop	af
2121  087A  33          	inc	sp
2122  087B  7D          	ld	a,l
2123  087C  32 00 00    	ld	(_v0),a
2124  087F  F5          	push	af
2125  0880  33          	inc	sp
2126  0881  CD AC 0A    	call	_player_pick_extra
2127  0884  33          	inc	sp
2128  0885  7D          	ld	a,l
2129  0886  32 00 00    	ld	(_v0),a
2130  0889  C9          	ret
2131  088A              	SECTION code_compiler
2132  088A              ;	---------------------------------
2133  088A              ; Function player_check_input
2134  088A              ; ---------------------------------
2135  088A              _player_check_input:
2136  088A  21 00 00    	ld	hl,_dirs
2137  088D  CB 56       	bit	2,(hl)
2138  088F  28 06       	jr	Z,l_player_check_input_00102
2139  0891  CB 5E       	bit	3,(hl)
2140  0893  28 02       	jr	Z,l_player_check_input_00102
2141  0895  36 00       	ld	(hl),0x00
2142  0897              l_player_check_input_00102:
2143  0897  21 00 00    	ld	hl,_dirs
2144  089A  CB 56       	bit	2,(hl)
2145  089C  20 08       	jr	NZ,l_player_check_input_00104
2146  089E  CB 5E       	bit	3,(hl)
2147  08A0  20 04       	jr	NZ,l_player_check_input_00104
2148  08A2  CB 7E       	bit	7, (hl)
2149  08A4  28 04       	jr	Z,l_player_check_input_00105
2150  08A6              l_player_check_input_00104:
2151  08A6  2E 01       	ld	l,0x01
2152  08A8  18 02       	jr	l_player_check_input_00108
2153  08AA              l_player_check_input_00105:
2154  08AA  2E 00       	ld	l,0x00
2155  08AC              l_player_check_input_00108:
2156  08AC  C9          	ret
2157  08AD              	SECTION code_compiler
2158  08AD              ;	---------------------------------
2159  08AD              ; Function player_tile
2160  08AD              ; ---------------------------------
2161  08AD              _player_tile:
2162  08AD  CD 00 00    	call	___sdcc_enter_ix
2163  08B0  21 05 00    	ld	hl,0x0005
2164  08B3  39          	add	hl, sp
2165  08B4  EB          	ex	de,hl
2166  08B5  21 04 00    	ld	hl,0x0004
2167  08B8  39          	add	hl, sp
2168  08B9  D5          	push	de
2169  08BA  E5          	push	hl
2170  08BB  CD 00 00    	call	_spr_get_tile_dir
2171  08BE  F1          	pop	af
2172  08BF  F1          	pop	af
2173  08C0  7D          	ld	a,l
2174  08C1  32 08 00    	ld	((_tile + 0x0008)),a
2175  08C4  DD E1       	pop	ix
2176  08C6  C9          	ret
2177  08C7              	SECTION code_compiler
2178  08C7              ;	---------------------------------
2179  08C7              ; Function player_score_add
2180  08C7              ; ---------------------------------
2181  08C7              _player_score_add:
2182  08C7  CD 00 00    	call	___sdcc_enter_ix
2183  08CA  F5          	push	af
2184  08CB  F5          	push	af
2185  08CC  F5          	push	af
2186  08CD  F5          	push	af
2187  08CE  DD 75 F8    	ld	(ix-8),l
2188  08D1  DD 74 F9    	ld	(ix-7),h
2189  08D4  3E 00       	ld	a,0x00
2190  08D6  DD 77 FA    	ld	(ix-6),a
2191  08D9  DD 77 FB    	ld	(ix-5),a
2192  08DC  DD 77 FC    	ld	(ix-4),a
2193  08DF  DD 77 FD    	ld	(ix-3),a
2194  08E2  DD 36 FE 00 	ld	(ix-2),0x00
2195  08E6  DD 36 FF 00 	ld	(ix-1),0x00
2196  08EA  2A 00 00    	ld	hl,(_player_score)
2197  08ED  DD 5E F8    	ld	e,(ix-8)
2198  08F0  DD 56 F9    	ld	d,(ix-7)
2199  08F3  19          	add	hl,de
2200  08F4  22 00 00    	ld	(_player_score),hl
2201  08F7  21 02 00    	ld	hl,_player_score + 2
2202  08FA  7E          	ld	a, (hl)
2203  08FB  DD 8E FA    	adc	a,(ix-6)
2204  08FE  77          	ld	(hl), a
2205  08FF  23          	inc	hl
2206  0900  7E          	ld	a, (hl)
2207  0901  DD 8E FB    	adc	a,(ix-5)
2208  0904  77          	ld	(hl), a
2209  0905  23          	inc	hl
2210  0906  7E          	ld	a, (hl)
2211  0907  DD 8E FC    	adc	a,(ix-4)
2212  090A  77          	ld	(hl), a
2213  090B  23          	inc	hl
2214  090C  7E          	ld	a, (hl)
2215  090D  DD 8E FD    	adc	a,(ix-3)
2216  0910  77          	ld	(hl), a
2217  0911  23          	inc	hl
2218  0912  7E          	ld	a, (hl)
2219  0913  DD 8E FE    	adc	a,(ix-2)
2220  0916  77          	ld	(hl), a
2221  0917  23          	inc	hl
2222  0918  7E          	ld	a, (hl)
2223  0919  DD 8E FF    	adc	a,(ix-1)
2224  091C  77          	ld	(hl), a
2225  091D  2A 00 00    	ld	hl,(_game_score_top)
2226  0920  ED 5B 00 00 	ld	de,(_player_score)
2227  0924  AF          	xor	a,a
2228  0925  ED 52       	sbc	hl,de
2229  0927  2A 02 00    	ld	hl,(_game_score_top + 2)
2230  092A  ED 5B 02 00 	ld	de,(_player_score + 2)
2231  092E  ED 52       	sbc	hl,de
2232  0930  3A 04 00    	ld	a,(_game_score_top + 4)
2233  0933  21 04 00    	ld	hl,_player_score + 4
2234  0936  9E          	sbc	a, (hl)
2235  0937  3A 05 00    	ld	a,(_game_score_top + 5)
2236  093A  21 05 00    	ld	hl,_player_score + 5
2237  093D  9E          	sbc	a, (hl)
2238  093E  3A 06 00    	ld	a,(_game_score_top + 6)
2239  0941  21 06 00    	ld	hl,_player_score + 6
2240  0944  9E          	sbc	a, (hl)
2241  0945  3A 07 00    	ld	a,(_game_score_top + 7)
2242  0948  21 07 00    	ld	hl,_player_score + 7
2243  094B  9E          	sbc	a, (hl)
2244  094C  30 24       	jr	NC,l_player_score_add_00102
2245  094E  2A 00 00    	ld	hl,(_player_score)
2246  0951  22 00 00    	ld	(_game_score_top),hl
2247  0954  2A 02 00    	ld	hl,(_player_score + 2)
2248  0957  22 02 00    	ld	(_game_score_top + 2),hl
2249  095A  3A 04 00    	ld	a,(_player_score + 4)
2250  095D  32 04 00    	ld	(_game_score_top + 4),a
2251  0960  3A 05 00    	ld	a,(_player_score + 5)
2252  0963  32 05 00    	ld	(_game_score_top + 5),a
2253  0966  3A 06 00    	ld	a,(_player_score + 6)
2254  0969  32 06 00    	ld	(_game_score_top + 6),a
2255  096C  3A 07 00    	ld	a,(_player_score + 7)
2256  096F  32 07 00    	ld	(_game_score_top + 7),a
2257  0972              l_player_score_add_00102:
2258  0972  2A 00 00    	ld	hl,(_player_next_extra)
2259  0975  ED 5B 00 00 	ld	de,(_player_score)
2260  0979  AF          	xor	a,a
2261  097A  ED 52       	sbc	hl,de
2262  097C  2A 02 00    	ld	hl,(_player_next_extra + 2)
2263  097F  ED 5B 02 00 	ld	de,(_player_score + 2)
2264  0983  ED 52       	sbc	hl,de
2265  0985  3A 04 00    	ld	a,(_player_next_extra + 4)
2266  0988  21 04 00    	ld	hl,_player_score + 4
2267  098B  9E          	sbc	a, (hl)
2268  098C  3A 05 00    	ld	a,(_player_next_extra + 5)
2269  098F  21 05 00    	ld	hl,_player_score + 5
2270  0992  9E          	sbc	a, (hl)
2271  0993  3A 06 00    	ld	a,(_player_next_extra + 6)
2272  0996  21 06 00    	ld	hl,_player_score + 6
2273  0999  9E          	sbc	a, (hl)
2274  099A  3A 07 00    	ld	a,(_player_next_extra + 7)
2275  099D  21 07 00    	ld	hl,_player_score + 7
2276  09A0  9E          	sbc	a, (hl)
2277  09A1  30 33       	jr	NC,l_player_score_add_00106
2278  09A3  21 00 00    	ld	hl,_player_lives
2279  09A6  7E          	ld	a, (hl)
2280  09A7  D6 FF       	sub	a,0xff
2281  09A9  30 01       	jr	NC,l_player_score_add_00104
2282  09AB  34          	inc	(hl)
2283  09AC              l_player_score_add_00104:
2284  09AC  2A 00 00    	ld	hl,(_player_next_extra)
2285  09AF  11 10 27    	ld	de,0x2710
2286  09B2  19          	add	hl,de
2287  09B3  22 00 00    	ld	(_player_next_extra),hl
2288  09B6  21 02 00    	ld	hl,_player_next_extra + 2
2289  09B9  7E          	ld	a, (hl)
2290  09BA  CE 00       	adc	a,0x00
2291  09BC  77          	ld	(hl), a
2292  09BD  23          	inc	hl
2293  09BE  7E          	ld	a, (hl)
2294  09BF  CE 00       	adc	a,0x00
2295  09C1  77          	ld	(hl), a
2296  09C2  23          	inc	hl
2297  09C3  7E          	ld	a, (hl)
2298  09C4  CE 00       	adc	a,0x00
2299  09C6  77          	ld	(hl), a
2300  09C7  23          	inc	hl
2301  09C8  7E          	ld	a, (hl)
2302  09C9  CE 00       	adc	a,0x00
2303  09CB  77          	ld	(hl), a
2304  09CC  23          	inc	hl
2305  09CD  7E          	ld	a, (hl)
2306  09CE  CE 00       	adc	a,0x00
2307  09D0  77          	ld	(hl), a
2308  09D1  23          	inc	hl
2309  09D2  7E          	ld	a, (hl)
2310  09D3  CE 00       	adc	a,0x00
2311  09D5  77          	ld	(hl), a
2312  09D6              l_player_score_add_00106:
2313  09D6  3E 40       	ld	a,0x40
2314  09D8  21 00 00    	ld	hl,_player_score
2315  09DB  BE          	cp	a, (hl)
2316  09DC  3E 42       	ld	a,0x42
2317  09DE  23          	inc	hl
2318  09DF  9E          	sbc	a, (hl)
2319  09E0  3E 0F       	ld	a,0x0f
2320  09E2  23          	inc	hl
2321  09E3  9E          	sbc	a, (hl)
2322  09E4  3E 00       	ld	a,0x00
2323  09E6  23          	inc	hl
2324  09E7  9E          	sbc	a, (hl)
2325  09E8  3E 00       	ld	a,0x00
2326  09EA  23          	inc	hl
2327  09EB  9E          	sbc	a, (hl)
2328  09EC  3E 00       	ld	a,0x00
2329  09EE  23          	inc	hl
2330  09EF  9E          	sbc	a, (hl)
2331  09F0  3E 00       	ld	a,0x00
2332  09F2  23          	inc	hl
2333  09F3  9E          	sbc	a, (hl)
2334  09F4  3E 00       	ld	a,0x00
2335  09F6  23          	inc	hl
2336  09F7  9E          	sbc	a, (hl)
2337  09F8  30 2B       	jr	NC,l_player_score_add_00108
2338  09FA  21 00 00    	ld	hl,0x0000
2339  09FD  7D          	ld	a,l
2340  09FE  22 00 00    	ld	(_player_score),hl
2341  0A01  22 02 00    	ld	(_player_score + 2),hl
2342  0A04  21 04 00    	ld	hl,_player_score + 4
2343  0A07  77          	ld	(hl), a
2344  0A08  23          	inc	hl
2345  0A09  77          	ld	(hl), a
2346  0A0A  23          	inc	hl
2347  0A0B  77          	ld	(hl), a
2348  0A0C  23          	inc	hl
2349  0A0D  77          	ld	(hl), a
2350  0A0E  21 10 27    	ld	hl,0x2710
2351  0A11  22 00 00    	ld	(_player_next_extra),hl
2352  0A14  AF          	xor	a,a
2353  0A15  6F          	ld	l,a
2354  0A16  67          	ld	h,a
2355  0A17  22 02 00    	ld	(_player_next_extra + 2),hl
2356  0A1A  21 04 00    	ld	hl,_player_next_extra + 4
2357  0A1D  77          	ld	(hl), a
2358  0A1E  23          	inc	hl
2359  0A1F  77          	ld	(hl), a
2360  0A20  23          	inc	hl
2361  0A21  AF          	xor	a, a
2362  0A22  77          	ld	(hl), a
2363  0A23  23          	inc	hl
2364  0A24  77          	ld	(hl), a
2365  0A25              l_player_score_add_00108:
2366  0A25  CD 00 00    	call	_game_print_score
2367  0A28  DD F9       	ld	sp, ix
2368  0A2A  DD E1       	pop	ix
2369  0A2C  C9          	ret
2370  0A2D              	SECTION code_compiler
2371  0A2D              ;	---------------------------------
2372  0A2D              ; Function player_pick_item
2373  0A2D              ; ---------------------------------
2374  0A2D              _player_pick_item:
2375  0A2D  CD 00 00    	call	___sdcc_enter_ix
2376  0A30  DD 7E 04    	ld	a,(ix+4)
2377  0A33  D6 08       	sub	a,0x08
2378  0A35  20 38       	jr	NZ,l_player_pick_item_00104
2379  0A37  21 64 00    	ld	hl,0x0064
2380  0A3A  CD C7 08    	call	_player_score_add
2381  0A3D  3E 00       	ld	a, +((_scr_map) & 0xFF)
2382  0A3F  DD 86 05    	add	a,(ix+5)
2383  0A42  4F          	ld	c, a
2384  0A43  3E 00       	ld	a, +((_scr_map) / 256)
2385  0A45  DD 8E 06    	adc	a,(ix+6)
2386  0A48  47          	ld	b, a
2387  0A49  AF          	xor	a, a
2388  0A4A  02          	ld	(bc), a
2389  0A4B  21 00 00    	ld	hl,_player_coins
2390  0A4E  34          	inc	(hl)
2391  0A4F  CD 00 00    	call	_audio_coin
2392  0A52  3A 00 00    	ld	a,(_obj_count)
2393  0A55  21 00 00    	ld	hl,_player_coins
2394  0A58  96          	sub	a, (hl)
2395  0A59  20 10       	jr	NZ,l_player_pick_item_00102
2396  0A5B  CD 00 00    	call	_audio_door_open
2397  0A5E  3E 80       	ld	a,0x80
2398  0A60  F5          	push	af
2399  0A61  33          	inc	sp
2400  0A62  CD 00 00    	call	_game_flash_exit
2401  0A65  33          	inc	sp
2402  0A66  21 00 00    	ld	hl,_obj_count
2403  0A69  36 FF       	ld	(hl),0xff
2404  0A6B              l_player_pick_item_00102:
2405  0A6B  2E 00       	ld	l,0x00
2406  0A6D  18 03       	jr	l_player_pick_item_00105
2407  0A6F              l_player_pick_item_00104:
2408  0A6F  DD 6E 04    	ld	l,(ix+4)
2409  0A72              l_player_pick_item_00105:
2410  0A72  DD E1       	pop	ix
2411  0A74  C9          	ret
2412  0A75              	SECTION code_compiler
2413  0A75              ;	---------------------------------
2414  0A75              ; Function player_pick_deadly
2415  0A75              ; ---------------------------------
2416  0A75              _player_pick_deadly:
2417  0A75  CD 00 00    	call	___sdcc_enter_ix
2418  0A78  3E 00       	ld	a, +((_tile_class) & 0xFF)
2419  0A7A  DD 86 04    	add	a,(ix+4)
2420  0A7D  4F          	ld	c, a
2421  0A7E  3E 00       	ld	a, +((_tile_class) / 256)
2422  0A80  CE 00       	adc	a,0x00
2423  0A82  47          	ld	b, a
2424  0A83  0A          	ld	a, (bc)
2425  0A84  DD 77 04    	ld	(ix+4),a
2426  0A87  D6 05       	sub	a,0x05
2427  0A89  20 1B       	jr	NZ,l_player_pick_deadly_00102
2428  0A8B  01 08 00    	ld	bc,_state+8
2429  0A8E  0A          	ld	a, (bc)
2430  0A8F  F6 20       	or	a,0x20
2431  0A91  02          	ld	(bc), a
2432  0A92  2A 00 00    	ld	hl,(_index1)
2433  0A95  22 00 00    	ld	(_player_kill_index),hl
2434  0A98  21 00 00    	ld	hl,_v0
2435  0A9B  36 00       	ld	(hl),0x00
2436  0A9D  21 00 00    	ld	hl,_v1
2437  0AA0  36 00       	ld	(hl),0x00
2438  0AA2  2E 00       	ld	l,0x00
2439  0AA4  18 03       	jr	l_player_pick_deadly_00103
2440  0AA6              l_player_pick_deadly_00102:
2441  0AA6  DD 6E 04    	ld	l,(ix+4)
2442  0AA9              l_player_pick_deadly_00103:
2443  0AA9  DD E1       	pop	ix
2444  0AAB  C9          	ret
2445  0AAC              	SECTION code_compiler
2446  0AAC              ;	---------------------------------
2447  0AAC              ; Function player_pick_extra
2448  0AAC              ; ---------------------------------
2449  0AAC              _player_pick_extra:
2450  0AAC  CD 00 00    	call	___sdcc_enter_ix
2451  0AAF  DD 7E 04    	ld	a,(ix+4)
2452  0AB2  D6 06       	sub	a,0x06
2453  0AB4  C2 BB 0B    	jp	NZ,l_player_pick_extra_00118
2454  0AB7  3A 00 00    	ld	a,(_scr_curr)
2455  0ABA  D6 27       	sub	a,0x27
2456  0ABC  20 76       	jr	NZ,l_player_pick_extra_00108
2457  0ABE  01 00 00    	ld	bc,_scr_map
2458  0AC1  2A 00 00    	ld	hl,(_index1)
2459  0AC4  09          	add	hl,bc
2460  0AC5  AF          	xor	a,a
2461  0AC6  77          	ld	(hl),a
2462  0AC7  CD 00 00    	call	_game_cell_paint_index
2463  0ACA  21 00 00    	ld	hl,_v0
2464  0ACD  36 00       	ld	(hl),0x00
2465  0ACF  21 69 01    	ld	hl,0x0169
2466  0AD2  22 00 00    	ld	(_index1),hl
2467  0AD5              l_player_pick_extra_00101:
2468  0AD5  3A 00 00    	ld	a,(_v0)
2469  0AD8  D6 0E       	sub	a,0x0e
2470  0ADA  30 20       	jr	NC,l_player_pick_extra_00103
2471  0ADC  01 00 00    	ld	bc,_scr_map
2472  0ADF  2A 00 00    	ld	hl,(_index1)
2473  0AE2  09          	add	hl,bc
2474  0AE3  AF          	xor	a,a
2475  0AE4  77          	ld	(hl),a
2476  0AE5  CD 00 00    	call	_game_cell_paint_index
2477  0AE8  21 19 00    	ld	hl,0x0019
2478  0AEB  CD 00 00    	call	_z80_delay_ms_fastcall
2479  0AEE  21 00 00    	ld	hl,_index1
2480  0AF1  34          	inc	(hl)
2481  0AF2  20 02       	jr	NZ,l_player_pick_extra_00161
2482  0AF4  23          	inc	hl
2483  0AF5  34          	inc	(hl)
2484  0AF6              l_player_pick_extra_00161:
2485  0AF6  21 00 00    	ld	hl,_v0
2486  0AF9  34          	inc	(hl)
2487  0AFA  18 D9       	jr	l_player_pick_extra_00101
2488  0AFC              l_player_pick_extra_00103:
2489  0AFC  21 01 00    	ld	hl, +(_spr_kind + 0x0001)
2490  0AFF  36 07       	ld	(hl),0x07
2491  0B01  21 01 00    	ld	hl, +(_spr_speed + 0x0001)
2492  0B04  36 04       	ld	(hl),0x04
2493  0B06  21 00 00    	ld	hl,_v0
2494  0B09  36 00       	ld	(hl),0x00
2495  0B0B  21 D9 00    	ld	hl,0x00d9
2496  0B0E  22 00 00    	ld	(_index1),hl
2497  0B11              l_player_pick_extra_00104:
2498  0B11  3A 00 00    	ld	a,(_v0)
2499  0B14  D6 04       	sub	a,0x04
2500  0B16  30 1C       	jr	NC,l_player_pick_extra_00108
2501  0B18  01 00 00    	ld	bc,_scr_map
2502  0B1B  2A 00 00    	ld	hl,(_index1)
2503  0B1E  09          	add	hl,bc
2504  0B1F  AF          	xor	a,a
2505  0B20  77          	ld	(hl),a
2506  0B21  CD 00 00    	call	_game_cell_paint_index
2507  0B24  2A 00 00    	ld	hl,(_index1)
2508  0B27  11 20 00    	ld	de,0x0020
2509  0B2A  19          	add	hl,de
2510  0B2B  22 00 00    	ld	(_index1),hl
2511  0B2E  21 00 00    	ld	hl,_v0
2512  0B31  34          	inc	(hl)
2513  0B32  18 DD       	jr	l_player_pick_extra_00104
2514  0B34              l_player_pick_extra_00108:
2515  0B34  3A 00 00    	ld	a,(_scr_curr)
2516  0B37  FE 07       	cp	a,0x07
2517  0B39  28 04       	jr	Z,l_player_pick_extra_00114
2518  0B3B  D6 0B       	sub	a,0x0b
2519  0B3D  20 78       	jr	NZ,l_player_pick_extra_00115
2520  0B3F              l_player_pick_extra_00114:
2521  0B3F  01 00 00    	ld	bc,_scr_map
2522  0B42  2A 00 00    	ld	hl,(_index1)
2523  0B45  09          	add	hl,bc
2524  0B46  36 08       	ld	(hl),0x08
2525  0B48  CD 00 00    	call	_game_cell_paint_index
2526  0B4B  21 00 00    	ld	hl,_index1
2527  0B4E  7E          	ld	a, (hl)
2528  0B4F  D6 05       	sub	a,0x05
2529  0B51  23          	inc	hl
2530  0B52  B6          	or	a, (hl)
2531  0B53  28 0A       	jr	Z,l_player_pick_extra_00109
2532  0B55  21 00 00    	ld	hl,_index1
2533  0B58  7E          	ld	a, (hl)
2534  0B59  D6 06       	sub	a,0x06
2535  0B5B  23          	inc	hl
2536  0B5C  B6          	or	a, (hl)
2537  0B5D  20 21       	jr	NZ,l_player_pick_extra_00110
2538  0B5F              l_player_pick_extra_00109:
2539  0B5F  21 71 01    	ld	hl,0x0171
2540  0B62  22 00 00    	ld	(_index1),hl
2541  0B65  21 71 01    	ld	hl, +(_scr_map + 0x0171)
2542  0B68  36 00       	ld	(hl),0x00
2543  0B6A  CD 00 00    	call	_game_cell_paint_index
2544  0B6D  21 91 01    	ld	hl,0x0191
2545  0B70  22 00 00    	ld	(_index1),hl
2546  0B73  21 91 01    	ld	hl, +(_scr_map + 0x0191)
2547  0B76  36 00       	ld	(hl),0x00
2548  0B78  CD 00 00    	call	_game_cell_paint_index
2549  0B7B  21 02 00    	ld	hl, +(_value_b + 0x0002)
2550  0B7E  36 12       	ld	(hl),0x12
2551  0B80              l_player_pick_extra_00110:
2552  0B80  21 00 00    	ld	hl,_index1
2553  0B83  7E          	ld	a, (hl)
2554  0B84  D6 12       	sub	a,0x12
2555  0B86  23          	inc	hl
2556  0B87  B6          	or	a, (hl)
2557  0B88  20 2D       	jr	NZ,l_player_pick_extra_00115
2558  0B8A  01 00 00    	ld	bc,_tile+0
2559  0B8D  0A          	ld	a, (bc)
2560  0B8E  C6 02       	add	a,0x02
2561  0B90  02          	ld	(bc), a
2562  0B91  21 00 00    	ld	hl,_spr_kind
2563  0B94  36 07       	ld	(hl),0x07
2564  0B96  21 00 00    	ld	hl,_spr_speed
2565  0B99  36 04       	ld	(hl),0x04
2566  0B9B  21 4F 00    	ld	hl,0x004f
2567  0B9E  22 00 00    	ld	(_index1),hl
2568  0BA1  21 4F 00    	ld	hl, +(_scr_map + 0x004f)
2569  0BA4  36 00       	ld	(hl),0x00
2570  0BA6  CD 00 00    	call	_game_cell_paint_index
2571  0BA9  21 50 00    	ld	hl,0x0050
2572  0BAC  22 00 00    	ld	(_index1),hl
2573  0BAF  21 50 00    	ld	hl, +(_scr_map + 0x0050)
2574  0BB2  36 00       	ld	(hl),0x00
2575  0BB4  CD 00 00    	call	_game_cell_paint_index
2576  0BB7              l_player_pick_extra_00115:
2577  0BB7  2E 00       	ld	l,0x00
2578  0BB9  18 03       	jr	l_player_pick_extra_00119
2579  0BBB              l_player_pick_extra_00118:
2580  0BBB  DD 6E 04    	ld	l,(ix+4)
2581  0BBE              l_player_pick_extra_00119:
2582  0BBE  DD E1       	pop	ix
2583  0BC0  C9          	ret
2584  0BC1              	SECTION code_compiler
2585  0BC1              ;	---------------------------------
2586  0BC1              ; Function player_check_ceil
2587  0BC1              ; ---------------------------------
2588  0BC1              _player_check_ceil:
2589  0BC1  CD 00 00    	call	___sdcc_enter_ix
2590  0BC4  DD 66 05    	ld	h,(ix+5)
2591  0BC7  DD 6E 04    	ld	l,(ix+4)
2592  0BCA  E5          	push	hl
2593  0BCB  CD 00 00    	call	_spr_calc_index
2594  0BCE  F1          	pop	af
2595  0BCF  22 00 00    	ld	(_index1),hl
2596  0BD2  01 00 00    	ld	bc,_scr_map
2597  0BD5  09          	add	hl,bc
2598  0BD6  7E          	ld	a,(hl)
2599  0BD7  32 00 00    	ld	(_v0),a
2600  0BDA  DD 46 05    	ld	b,(ix+5)
2601  0BDD  04          	inc	b
2602  0BDE  DD 4E 04    	ld	c,(ix+4)
2603  0BE1  C5          	push	bc
2604  0BE2  CD 00 00    	call	_spr_calc_index
2605  0BE5  F1          	pop	af
2606  0BE6  22 00 00    	ld	(_index1),hl
2607  0BE9  01 00 00    	ld	bc,_scr_map
2608  0BEC  09          	add	hl,bc
2609  0BED  7E          	ld	a,(hl)
2610  0BEE  32 00 00    	ld	(_v1),a
2611  0BF1  3E 1F       	ld	a,0x1f
2612  0BF3  21 00 00    	ld	hl,_v0
2613  0BF6  96          	sub	a, (hl)
2614  0BF7  30 02       	jr	NC,l_player_check_ceil_00102
2615  0BF9  36 00       	ld	(hl),0x00
2616  0BFB              l_player_check_ceil_00102:
2617  0BFB  3E 1F       	ld	a,0x1f
2618  0BFD  21 00 00    	ld	hl,_v1
2619  0C00  96          	sub	a, (hl)
2620  0C01  30 02       	jr	NC,l_player_check_ceil_00104
2621  0C03  36 00       	ld	(hl),0x00
2622  0C05              l_player_check_ceil_00104:
2623  0C05  01 00 00    	ld	bc,_tile_class+0
2624  0C08  79          	ld	a, c
2625  0C09  21 00 00    	ld	hl,_v0
2626  0C0C  86          	add	a, (hl)
2627  0C0D  5F          	ld	e, a
2628  0C0E  78          	ld	a, b
2629  0C0F  CE 00       	adc	a,0x00
2630  0C11  57          	ld	d, a
2631  0C12  1A          	ld	a, (de)
2632  0C13  77          	ld	(hl), a
2633  0C14  79          	ld	a, c
2634  0C15  21 00 00    	ld	hl,_v1
2635  0C18  86          	add	a, (hl)
2636  0C19  4F          	ld	c, a
2637  0C1A  78          	ld	a, b
2638  0C1B  CE 00       	adc	a,0x00
2639  0C1D  47          	ld	b, a
2640  0C1E  0A          	ld	a, (bc)
2641  0C1F  77          	ld	(hl), a
2642  0C20  3A 00 00    	ld	a,(_v0)
2643  0C23  D6 03       	sub	a,0x03
2644  0C25  28 0B       	jr	Z,l_player_check_ceil_00106
2645  0C27  3A 00 00    	ld	a,(_v1)
2646  0C2A  D6 03       	sub	a,0x03
2647  0C2C  28 04       	jr	Z,l_player_check_ceil_00106
2648  0C2E  2E 01       	ld	l,0x01
2649  0C30  18 02       	jr	l_player_check_ceil_00108
2650  0C32              l_player_check_ceil_00106:
2651  0C32  2E 00       	ld	l,0x00
2652  0C34              l_player_check_ceil_00108:
2653  0C34  DD E1       	pop	ix
2654  0C36  C9          	ret
2655  0C37              	SECTION code_compiler
2656  0C37              ;	---------------------------------
2657  0C37              ; Function player_crumble
2658  0C37              ; ---------------------------------
2659  0C37              _player_crumble:
2660  0C37  21 01 00    	ld	hl,_index1 + 1
2661  0C3A  7E          	ld	a, (hl)
2662  0C3B  D6 02       	sub	a,0x02
2663  0C3D  D2 C3 0C    	jp	NC, l_player_crumble_00111
2664  0C40  3E 00       	ld	a, +((_scr_map) & 0xFF)
2665  0C42  2B          	dec	hl
2666  0C43  86          	add	a, (hl)
2667  0C44  4F          	ld	c, a
2668  0C45  3E 00       	ld	a, +((_scr_map) / 256)
2669  0C47  23          	inc	hl
2670  0C48  8E          	adc	a, (hl)
2671  0C49  47          	ld	b, a
2672  0C4A  0A          	ld	a, (bc)
2673  0C4B  5F          	ld	e, a
2674  0C4C  16 00       	ld	d,0x00
2675  0C4E  21 00 00    	ld	hl,_tile_class
2676  0C51  19          	add	hl, de
2677  0C52  7E          	ld	a, (hl)
2678  0C53  32 00 00    	ld	(_v0),a
2679  0C56  D6 02       	sub	a,0x02
2680  0C58  20 63       	jr	NZ,l_player_crumble_00107
2681  0C5A  7B          	ld	a, e
2682  0C5B  D6 02       	sub	a,0x02
2683  0C5D  20 10       	jr	NZ,l_player_crumble_00104
2684  0C5F  CD 00 00    	call	_audio_crumble
2685  0C62  01 00 00    	ld	bc,_scr_map
2686  0C65  2A 00 00    	ld	hl,(_index1)
2687  0C68  09          	add	hl,bc
2688  0C69  3A 00 00    	ld	a,(_game_crumb_start)
2689  0C6C  77          	ld	(hl),a
2690  0C6D  18 13       	jr	l_player_crumble_00105
2691  0C6F              l_player_crumble_00104:
2692  0C6F  1C          	inc	e
2693  0C70  7B          	ld	a, e
2694  0C71  02          	ld	(bc), a
2695  0C72  01 00 00    	ld	bc,_scr_map
2696  0C75  2A 00 00    	ld	hl,(_index1)
2697  0C78  09          	add	hl,bc
2698  0C79  5E          	ld	e,(hl)
2699  0C7A  3A 00 00    	ld	a,(_game_crumb_end)
2700  0C7D  93          	sub	a,e
2701  0C7E  30 02       	jr	NC,l_player_crumble_00105
2702  0C80  AF          	xor	a,a
2703  0C81  77          	ld	(hl),a
2704  0C82              l_player_crumble_00105:
2705  0C82  2A 08 00    	ld	hl,(_lin + 0x0008)
2706  0C85  26 00       	ld	h,0x00
2707  0C87  01 10 00    	ld	bc,0x0010
2708  0C8A  09          	add	hl,bc
2709  0C8B  06 03       	ld	b,0x03
2710  0C8D              l_player_crumble_00133:
2711  0C8D  CB 2C       	sra	h
2712  0C8F  CB 1D       	rr	l
2713  0C91  10 FA       	djnz	l_player_crumble_00133
2714  0C93  2C          	inc	l
2715  0C94  7D          	ld	a, l
2716  0C95  07          	rlca
2717  0C96  07          	rlca
2718  0C97  07          	rlca
2719  0C98  E6 F8       	and	a,0xf8
2720  0C9A  32 00 00    	ld	(_s_row1),a
2721  0C9D  01 00 00    	ld	bc,_scr_map
2722  0CA0  2A 00 00    	ld	hl,(_index1)
2723  0CA3  09          	add	hl,bc
2724  0CA4  46          	ld	b, (hl)
2725  0CA5  3A 00 00    	ld	a,(_s_col1)
2726  0CA8  F5          	push	af
2727  0CA9  33          	inc	sp
2728  0CAA  3A 00 00    	ld	a,(_s_row1)
2729  0CAD  48          	ld	c,b
2730  0CAE  47          	ld	b,a
2731  0CAF  C5          	push	bc
2732  0CB0  CD 00 00    	call	_spr_draw8
2733  0CB3  F1          	pop	af
2734  0CB4  33          	inc	sp
2735  0CB5  2A 00 00    	ld	hl,(_curr_time)
2736  0CB8  22 10 00    	ld	(_last_time_b + 0x0010),hl
2737  0CBB  18 06       	jr	l_player_crumble_00111
2738  0CBD              l_player_crumble_00107:
2739  0CBD  21 00 00    	ld	hl,0x0000
2740  0CC0  22 10 00    	ld	(_last_time_b + 0x0010),hl
2741  0CC3              l_player_crumble_00111:
2742  0CC3  C9          	ret
2743  0CC4              	SECTION code_compiler
2744  0CC4              ;	---------------------------------
2745  0CC4              ; Function player_check_floor
2746  0CC4              ; ---------------------------------
2747  0CC4              _player_check_floor:
2748  0CC4  CD 00 00    	call	___sdcc_enter_ix
2749  0CC7  3A 08 00    	ld	a,(_col + 0x0008)
2750  0CCA  DD 86 04    	add	a,(ix+4)
2751  0CCD  57          	ld	d, a
2752  0CCE  3A 08 00    	ld	a,(_lin + 0x0008)
2753  0CD1  C6 10       	add	a,0x10
2754  0CD3  5F          	ld	e, a
2755  0CD4  D5          	push	de
2756  0CD5  CD 00 00    	call	_spr_calc_index
2757  0CD8  F1          	pop	af
2758  0CD9  22 00 00    	ld	(_index1),hl
2759  0CDC  21 01 00    	ld	hl,_index1 + 1
2760  0CDF  7E          	ld	a, (hl)
2761  0CE0  D6 02       	sub	a,0x02
2762  0CE2  30 25       	jr	NC,l_player_check_floor_00107
2763  0CE4  3E 00       	ld	a, +((_scr_map) & 0xFF)
2764  0CE6  2B          	dec	hl
2765  0CE7  86          	add	a, (hl)
2766  0CE8  4F          	ld	c, a
2767  0CE9  3E 00       	ld	a, +((_scr_map) / 256)
2768  0CEB  23          	inc	hl
2769  0CEC  8E          	adc	a, (hl)
2770  0CED  47          	ld	b, a
2771  0CEE  0A          	ld	a, (bc)
2772  0CEF  21 00 00    	ld	hl,_v0
2773  0CF2  77          	ld	(hl), a
2774  0CF3  3E 1F       	ld	a,0x1f
2775  0CF5  96          	sub	a, (hl)
2776  0CF6  30 02       	jr	NC,l_player_check_floor_00102
2777  0CF8  36 00       	ld	(hl),0x00
2778  0CFA              l_player_check_floor_00102:
2779  0CFA  2A 00 00    	ld	hl,(_v0)
2780  0CFD  26 00       	ld	h,0x00
2781  0CFF  01 00 00    	ld	bc,_tile_class
2782  0D02  09          	add	hl,bc
2783  0D03  7E          	ld	a,(hl)
2784  0D04  32 00 00    	ld	(_v0),a
2785  0D07  18 15       	jr	l_player_check_floor_00108
2786  0D09              l_player_check_floor_00107:
2787  0D09  21 08 00    	ld	hl,+(_lin + 0x0008)
2788  0D0C  4E          	ld	c, (hl)
2789  0D0D  3E C8       	ld	a,0xc8
2790  0D0F  91          	sub	a, c
2791  0D10  30 07       	jr	NC,l_player_check_floor_00104
2792  0D12  21 00 00    	ld	hl,_v0
2793  0D15  36 00       	ld	(hl),0x00
2794  0D17  18 05       	jr	l_player_check_floor_00108
2795  0D19              l_player_check_floor_00104:
2796  0D19  21 00 00    	ld	hl,_v0
2797  0D1C  36 03       	ld	(hl),0x03
2798  0D1E              l_player_check_floor_00108:
2799  0D1E  3A 00 00    	ld	a,(_v0)
2800  0D21  B7          	or	a, a
2801  0D22  28 0B       	jr	Z,l_player_check_floor_00109
2802  0D24  D6 08       	sub	a,0x08
2803  0D26  28 07       	jr	Z,l_player_check_floor_00109
2804  0D28  3A 00 00    	ld	a,(_v0)
2805  0D2B  D6 05       	sub	a,0x05
2806  0D2D  20 04       	jr	NZ,l_player_check_floor_00110
2807  0D2F              l_player_check_floor_00109:
2808  0D2F  2E 01       	ld	l,0x01
2809  0D31  18 02       	jr	l_player_check_floor_00113
2810  0D33              l_player_check_floor_00110:
2811  0D33  2E 00       	ld	l,0x00
2812  0D35              l_player_check_floor_00113:
2813  0D35  DD E1       	pop	ix
2814  0D37  C9          	ret
2815  0D38              	SECTION code_compiler
2816  0D38              ;	---------------------------------
2817  0D38              ; Function player_get_floor
2818  0D38              ; ---------------------------------
2819  0D38              _player_get_floor:
2820  0D38  21 08 00    	ld	hl,+(_lin + 0x0008)
2821  0D3B  4E          	ld	c, (hl)
2822  0D3C  59          	ld	e, c
2823  0D3D  16 00       	ld	d,0x00
2824  0D3F  21 10 00    	ld	hl,0x0010
2825  0D42  19          	add	hl, de
2826  0D43  3E 80       	ld	a,0x80
2827  0D45  BD          	cp	a, l
2828  0D46  3E 00       	ld	a,0x00
2829  0D48  9C          	sbc	a, h
2830  0D49  E2 4E 0D    	jp	PO, l_player_get_floor_00181
2831  0D4C  EE 80       	xor	a,0x80
2832  0D4E              l_player_get_floor_00181:
2833  0D4E  F2 58 0D    	jp	P, l_player_get_floor_00102
2834  0D51  21 00 00    	ld	hl,_v0
2835  0D54  36 80       	ld	(hl),0x80
2836  0D56  18 06       	jr	l_player_get_floor_00103
2837  0D58              l_player_get_floor_00102:
2838  0D58  79          	ld	a, c
2839  0D59  C6 18       	add	a,0x18
2840  0D5B  32 00 00    	ld	(_v0),a
2841  0D5E              l_player_get_floor_00103:
2842  0D5E  21 08 00    	ld	hl,+(_col + 0x0008)
2843  0D61  46          	ld	b, (hl)
2844  0D62  3A 00 00    	ld	a,(_v0)
2845  0D65  4F          	ld	c,a
2846  0D66  C5          	push	bc
2847  0D67  CD 00 00    	call	_spr_calc_index
2848  0D6A  F1          	pop	af
2849  0D6B  22 00 00    	ld	(_index1),hl
2850  0D6E  21 00 00    	ld	hl,_i
2851  0D71  36 00       	ld	(hl),0x00
2852  0D73              l_player_get_floor_00112:
2853  0D73  3A 00 00    	ld	a,(_i)
2854  0D76  D6 10       	sub	a,0x10
2855  0D78  D2 2B 0E    	jp	NC, l_player_get_floor_00114
2856  0D7B  01 00 00    	ld	bc,_scr_map
2857  0D7E  2A 00 00    	ld	hl,(_index1)
2858  0D81  09          	add	hl,bc
2859  0D82  7E          	ld	a,(hl)
2860  0D83  32 00 00    	ld	(_v0),a
2861  0D86  ED 4B 00 00 	ld	bc,(_index1)
2862  0D8A  03          	inc	bc
2863  0D8B  21 00 00    	ld	hl,_scr_map
2864  0D8E  09          	add	hl, bc
2865  0D8F  7E          	ld	a, (hl)
2866  0D90  32 00 00    	ld	(_v1),a
2867  0D93  3E 1F       	ld	a,0x1f
2868  0D95  21 00 00    	ld	hl,_v0
2869  0D98  96          	sub	a, (hl)
2870  0D99  30 02       	jr	NC,l_player_get_floor_00105
2871  0D9B  36 00       	ld	(hl),0x00
2872  0D9D              l_player_get_floor_00105:
2873  0D9D  3E 1F       	ld	a,0x1f
2874  0D9F  21 00 00    	ld	hl,_v1
2875  0DA2  96          	sub	a, (hl)
2876  0DA3  30 02       	jr	NC,l_player_get_floor_00107
2877  0DA5  36 00       	ld	(hl),0x00
2878  0DA7              l_player_get_floor_00107:
2879  0DA7  2A 00 00    	ld	hl,(_v0)
2880  0DAA  26 00       	ld	h,0x00
2881  0DAC  01 00 00    	ld	bc,_tile_class
2882  0DAF  09          	add	hl,bc
2883  0DB0  7E          	ld	a,(hl)
2884  0DB1  32 00 00    	ld	(_v0),a
2885  0DB4  2A 00 00    	ld	hl,(_v1)
2886  0DB7  26 00       	ld	h,0x00
2887  0DB9  01 00 00    	ld	bc,_tile_class
2888  0DBC  09          	add	hl,bc
2889  0DBD  7E          	ld	a,(hl)
2890  0DBE  32 00 00    	ld	(_v1),a
2891  0DC1  3A 00 00    	ld	a,(_v0)
2892  0DC4  B7          	or	a,a
2893  0DC5  28 0F       	jr	Z,l_player_get_floor_00118
2894  0DC7  D6 08       	sub	a,0x08
2895  0DC9  28 0B       	jr	Z,l_player_get_floor_00118
2896  0DCB  3A 00 00    	ld	a,(_v0)
2897  0DCE  D6 05       	sub	a,0x05
2898  0DD0  28 04       	jr	Z,l_player_get_floor_00118
2899  0DD2  0E 00       	ld	c,0x00
2900  0DD4  18 02       	jr	l_player_get_floor_00119
2901  0DD6              l_player_get_floor_00118:
2902  0DD6  0E 01       	ld	c,0x01
2903  0DD8              l_player_get_floor_00119:
2904  0DD8  21 00 00    	ld	hl,_v0
2905  0DDB  71          	ld	(hl), c
2906  0DDC  3A 00 00    	ld	a,(_v1)
2907  0DDF  B7          	or	a, a
2908  0DE0  28 0F       	jr	Z,l_player_get_floor_00124
2909  0DE2  D6 08       	sub	a,0x08
2910  0DE4  28 0B       	jr	Z,l_player_get_floor_00124
2911  0DE6  3A 00 00    	ld	a,(_v1)
2912  0DE9  D6 05       	sub	a,0x05
2913  0DEB  28 04       	jr	Z,l_player_get_floor_00124
2914  0DED  0E 00       	ld	c,0x00
2915  0DEF  18 02       	jr	l_player_get_floor_00125
2916  0DF1              l_player_get_floor_00124:
2917  0DF1  0E 01       	ld	c,0x01
2918  0DF3              l_player_get_floor_00125:
2919  0DF3  21 00 00    	ld	hl,_v1
2920  0DF6  71          	ld	(hl), c
2921  0DF7  3A 00 00    	ld	a,(_v0)
2922  0DFA  B7          	or	a, a
2923  0DFB  28 17       	jr	Z,l_player_get_floor_00109
2924  0DFD  3A 00 00    	ld	a,(_v1)
2925  0E00  B7          	or	a, a
2926  0E01  28 11       	jr	Z,l_player_get_floor_00109
2927  0E03  2A 00 00    	ld	hl,(_index1)
2928  0E06  11 20 00    	ld	de,0x0020
2929  0E09  19          	add	hl,de
2930  0E0A  22 00 00    	ld	(_index1),hl
2931  0E0D  21 00 00    	ld	hl,_i
2932  0E10  34          	inc	(hl)
2933  0E11  C3 73 0D    	jp	l_player_get_floor_00112
2934  0E14              l_player_get_floor_00109:
2935  0E14  2A 00 00    	ld	hl,(_index1)
2936  0E17  4D          	ld	c,l
2937  0E18  5C          	ld	e,h
2938  0E19  06 05       	ld	b,0x05
2939  0E1B  79          	ld	a,c
2940  0E1C              l_player_get_floor_00186:
2941  0E1C  CB 3B       	srl	e
2942  0E1E  1F          	rra
2943  0E1F  10 FB       	djnz	l_player_get_floor_00186
2944  0E21  07          	rlca
2945  0E22  07          	rlca
2946  0E23  07          	rlca
2947  0E24  E6 F8       	and	a,0xf8
2948  0E26  C6 F0       	add	a,0xf0
2949  0E28  6F          	ld	l, a
2950  0E29  18 02       	jr	l_player_get_floor_00115
2951  0E2B              l_player_get_floor_00114:
2952  0E2B  2E 70       	ld	l,0x70
2953  0E2D              l_player_get_floor_00115:
2954  0E2D  C9          	ret
2955  0E2E              	SECTION code_compiler
2956  0E2E              ;	---------------------------------
2957  0E2E              ; Function player_lost_life
2958  0E2E              ; ---------------------------------
2959  0E2E              _player_lost_life:
2960  0E2E  CD 00 00    	call	___sdcc_enter_ix
2961  0E31  F5          	push	af
2962  0E32  CD 00 00    	call	_ay_reset
2963  0E35  CD 00 00    	call	_audio_dead
2964  0E38  4F          	ld	c, a
2965  0E39              l_player_lost_life_00104:
2966  0E39  79          	ld	a, c
2967  0E3A  D6 20       	sub	a,0x20
2968  0E3C  30 79       	jr	NC,l_player_lost_life_00106
2969  0E3E  21 00 00    	ld	hl,_player_kill_index
2970  0E41  7E          	ld	a, (hl)
2971  0E42  3C          	inc	a
2972  0E43  20 05       	jr	NZ,l_player_lost_life_00135
2973  0E45  23          	inc	hl
2974  0E46  7E          	ld	a, (hl)
2975  0E47  3C          	inc	a
2976  0E48  28 3D       	jr	Z,l_player_lost_life_00102
2977  0E4A              l_player_lost_life_00135:
2978  0E4A  2A 00 00    	ld	hl,(_player_kill_index)
2979  0E4D  22 00 00    	ld	(_index1),hl
2980  0E50  21 08 00    	ld	hl,+(_col + 0x0008)
2981  0E53  56          	ld	d, (hl)
2982  0E54  3A 08 00    	ld	a,(_lin + 0x0008)
2983  0E57  C6 10       	add	a,0x10
2984  0E59  5F          	ld	e, a
2985  0E5A  3A 08 00    	ld	a,(_tile + 0x0008)
2986  0E5D  DD 77 FF    	ld	(ix-1),a
2987  0E60  2A 08 00    	ld	hl,(_colint + 0x0008)
2988  0E63  DD 7E FF    	ld	a,(ix-1)
2989  0E66  85          	add	a, l
2990  0E67  47          	ld	b, a
2991  0E68  C5          	push	bc
2992  0E69  D5          	push	de
2993  0E6A  0E 05       	ld	c,0x05
2994  0E6C  C5          	push	bc
2995  0E6D  CD 00 00    	call	_NIRVANAP_spriteT_callee
2996  0E70  C1          	pop	bc
2997  0E71  76          	halt
2998  0E72  C5          	push	bc
2999  0E73  21 00 00    	ld	hl,0x0000
3000  0E76  E5          	push	hl
3001  0E77  2E 05       	ld	l,0x05
3002  0E79  E5          	push	hl
3003  0E7A  CD 00 00    	call	_NIRVANAP_spriteT_callee
3004  0E7D  C1          	pop	bc
3005  0E7E  76          	halt
3006  0E7F  C5          	push	bc
3007  0E80  CD 00 00    	call	_game_cell_paint_index
3008  0E83  C1          	pop	bc
3009  0E84  76          	halt
3010  0E85  18 2C       	jr	l_player_lost_life_00103
3011  0E87              l_player_lost_life_00102:
3012  0E87  21 08 00    	ld	hl,+(_col + 0x0008)
3013  0E8A  46          	ld	b, (hl)
3014  0E8B  3A 08 00    	ld	a,(_lin + 0x0008)
3015  0E8E  C6 10       	add	a,0x10
3016  0E90  57          	ld	d, a
3017  0E91  21 08 00    	ld	hl,+(_tile + 0x0008)
3018  0E94  5E          	ld	e, (hl)
3019  0E95  2A 08 00    	ld	hl,(_colint + 0x0008)
3020  0E98  7B          	ld	a, e
3021  0E99  85          	add	a, l
3022  0E9A  C5          	push	bc
3023  0E9B  4A          	ld	c, d
3024  0E9C  C5          	push	bc
3025  0E9D  57          	ld	d,a
3026  0E9E  1E 05       	ld	e,0x05
3027  0EA0  D5          	push	de
3028  0EA1  CD 00 00    	call	_NIRVANAP_spriteT_callee
3029  0EA4  C1          	pop	bc
3030  0EA5  76          	halt
3031  0EA6  C5          	push	bc
3032  0EA7  21 00 00    	ld	hl,0x0000
3033  0EAA  E5          	push	hl
3034  0EAB  2E 05       	ld	l,0x05
3035  0EAD  E5          	push	hl
3036  0EAE  CD 00 00    	call	_NIRVANAP_spriteT_callee
3037  0EB1  C1          	pop	bc
3038  0EB2  76          	halt
3039  0EB3              l_player_lost_life_00103:
3040  0EB3  0C          	inc	c
3041  0EB4  C3 39 0E    	jp	l_player_lost_life_00104
3042  0EB7              l_player_lost_life_00106:
3043  0EB7  3A 08 00    	ld	a,(_lin + 0x0008)
3044  0EBA  32 00 00    	ld	(_s_lin0),a
3045  0EBD  3A 08 00    	ld	a,(_col + 0x0008)
3046  0EC0  32 00 00    	ld	(_s_col0),a
3047  0EC3  3A 00 00    	ld	a,(_game_inf_lives)
3048  0EC6  B7          	or	a, a
3049  0EC7  20 04       	jr	NZ,l_player_lost_life_00108
3050  0EC9  21 00 00    	ld	hl,_player_lives
3051  0ECC  35          	dec	(hl)
3052  0ECD              l_player_lost_life_00108:
3053  0ECD  3A 00 00    	ld	a,(_player_lives)
3054  0ED0  B7          	or	a, a
3055  0ED1  28 05       	jr	Z,l_player_lost_life_00110
3056  0ED3  CD 00 00    	call	_game_round_init
3057  0ED6  18 0A       	jr	l_player_lost_life_00112
3058  0ED8              l_player_lost_life_00110:
3059  0ED8  21 00 00    	ld	hl,_player_lives
3060  0EDB  36 00       	ld	(hl),0x00
3061  0EDD  21 00 00    	ld	hl,_game_over
3062  0EE0  36 01       	ld	(hl),0x01
3063  0EE2              l_player_lost_life_00112:
3064  0EE2  F1          	pop	af
3065  0EE3  DD E1       	pop	ix
3066  0EE5  C9          	ret
3067  0EE6              	SECTION IGNORE
3068  0000              
