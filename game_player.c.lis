1     0000              MODULE game_player_c
2     0000              LINE 0, "game_player.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_1up
204   0000              	GLOBAL _player_get_floor
205   0000              	GLOBAL _player_collision
206   0000              	GLOBAL _player_init
207   0000              	GLOBAL _player_turn
208   0000              	GLOBAL _player_move
209   0000              	GLOBAL _player_move_jump
210   0000              	GLOBAL _player_move_walk
211   0000              	GLOBAL _player_check_input
212   0000              	GLOBAL _player_tile
213   0000              	GLOBAL _player_score_add
214   0000              	GLOBAL _player_pick_item
215   0000              	GLOBAL _player_pick_deadly
216   0000              	GLOBAL _player_check_ceil
217   0000              	GLOBAL _player_check_floor_walk
218   0000              	GLOBAL _player_lost_life
219   0000              ;--------------------------------------------------------
220   0000              ; Externals used
221   0000              ;--------------------------------------------------------
222   0000              	GLOBAL _ulltoa_callee
223   0000              	GLOBAL _ulltoa
224   0000              	GLOBAL _strtoull_callee
225   0000              	GLOBAL _strtoull
226   0000              	GLOBAL _strtoll_callee
227   0000              	GLOBAL _strtoll
228   0000              	GLOBAL _lltoa_callee
229   0000              	GLOBAL _lltoa
230   0000              	GLOBAL _llabs_callee
231   0000              	GLOBAL _llabs
232   0000              	GLOBAL __lldivu__callee
233   0000              	GLOBAL __lldivu_
234   0000              	GLOBAL __lldiv__callee
235   0000              	GLOBAL __lldiv_
236   0000              	GLOBAL _atoll_callee
237   0000              	GLOBAL _atoll
238   0000              	GLOBAL _realloc_unlocked_callee
239   0000              	GLOBAL _realloc_unlocked
240   0000              	GLOBAL _malloc_unlocked_fastcall
241   0000              	GLOBAL _malloc_unlocked
242   0000              	GLOBAL _free_unlocked_fastcall
243   0000              	GLOBAL _free_unlocked
244   0000              	GLOBAL _calloc_unlocked_callee
245   0000              	GLOBAL _calloc_unlocked
246   0000              	GLOBAL _aligned_alloc_unlocked_callee
247   0000              	GLOBAL _aligned_alloc_unlocked
248   0000              	GLOBAL _realloc_callee
249   0000              	GLOBAL _realloc
250   0000              	GLOBAL _malloc_fastcall
251   0000              	GLOBAL _malloc
252   0000              	GLOBAL _free_fastcall
253   0000              	GLOBAL _free
254   0000              	GLOBAL _calloc_callee
255   0000              	GLOBAL _calloc
256   0000              	GLOBAL _aligned_alloc_callee
257   0000              	GLOBAL _aligned_alloc
258   0000              	GLOBAL _utoa_callee
259   0000              	GLOBAL _utoa
260   0000              	GLOBAL _ultoa_callee
261   0000              	GLOBAL _ultoa
262   0000              	GLOBAL _system_fastcall
263   0000              	GLOBAL _system
264   0000              	GLOBAL _strtoul_callee
265   0000              	GLOBAL _strtoul
266   0000              	GLOBAL _strtol_callee
267   0000              	GLOBAL _strtol
268   0000              	GLOBAL _strtof_callee
269   0000              	GLOBAL _strtof
270   0000              	GLOBAL _strtod_callee
271   0000              	GLOBAL _strtod
272   0000              	GLOBAL _srand_fastcall
273   0000              	GLOBAL _srand
274   0000              	GLOBAL _rand
275   0000              	GLOBAL _quick_exit_fastcall
276   0000              	GLOBAL _quick_exit
277   0000              	GLOBAL _qsort_callee
278   0000              	GLOBAL _qsort
279   0000              	GLOBAL _ltoa_callee
280   0000              	GLOBAL _ltoa
281   0000              	GLOBAL _labs_fastcall
282   0000              	GLOBAL _labs
283   0000              	GLOBAL _itoa_callee
284   0000              	GLOBAL _itoa
285   0000              	GLOBAL _ftoh_callee
286   0000              	GLOBAL _ftoh
287   0000              	GLOBAL _ftog_callee
288   0000              	GLOBAL _ftog
289   0000              	GLOBAL _ftoe_callee
290   0000              	GLOBAL _ftoe
291   0000              	GLOBAL _ftoa_callee
292   0000              	GLOBAL _ftoa
293   0000              	GLOBAL _exit_fastcall
294   0000              	GLOBAL _exit
295   0000              	GLOBAL _dtoh_callee
296   0000              	GLOBAL _dtoh
297   0000              	GLOBAL _dtog_callee
298   0000              	GLOBAL _dtog
299   0000              	GLOBAL _dtoe_callee
300   0000              	GLOBAL _dtoe
301   0000              	GLOBAL _dtoa_callee
302   0000              	GLOBAL _dtoa
303   0000              	GLOBAL _bsearch_callee
304   0000              	GLOBAL _bsearch
305   0000              	GLOBAL _atol_fastcall
306   0000              	GLOBAL _atol
307   0000              	GLOBAL _atoi_fastcall
308   0000              	GLOBAL _atoi
309   0000              	GLOBAL _atof_fastcall
310   0000              	GLOBAL _atof
311   0000              	GLOBAL _atexit_fastcall
312   0000              	GLOBAL _atexit
313   0000              	GLOBAL _at_quick_exit_fastcall
314   0000              	GLOBAL _at_quick_exit
315   0000              	GLOBAL _abs_fastcall
316   0000              	GLOBAL _abs
317   0000              	GLOBAL _abort
318   0000              	GLOBAL __strtou__callee
319   0000              	GLOBAL __strtou_
320   0000              	GLOBAL __strtoi__callee
321   0000              	GLOBAL __strtoi_
322   0000              	GLOBAL __random_uniform_xor_8__fastcall
323   0000              	GLOBAL __random_uniform_xor_8_
324   0000              	GLOBAL __random_uniform_xor_32__fastcall
325   0000              	GLOBAL __random_uniform_xor_32_
326   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
327   0000              	GLOBAL __random_uniform_cmwc_8_
328   0000              	GLOBAL __shellsort__callee
329   0000              	GLOBAL __shellsort_
330   0000              	GLOBAL __quicksort__callee
331   0000              	GLOBAL __quicksort_
332   0000              	GLOBAL __insertion_sort__callee
333   0000              	GLOBAL __insertion_sort_
334   0000              	GLOBAL __ldivu__callee
335   0000              	GLOBAL __ldivu_
336   0000              	GLOBAL __ldiv__callee
337   0000              	GLOBAL __ldiv_
338   0000              	GLOBAL __divu__callee
339   0000              	GLOBAL __divu_
340   0000              	GLOBAL __div__callee
341   0000              	GLOBAL __div_
342   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
343   0000              	GLOBAL _NIRVANAP_drawTW_raw
344   0000              	GLOBAL _NIRVANAP_drawTW_callee
345   0000              	GLOBAL _NIRVANAP_drawTW
346   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
347   0000              	GLOBAL _NIRVANAP_drawW_raw
348   0000              	GLOBAL _NIRVANAP_drawW_callee
349   0000              	GLOBAL _NIRVANAP_drawW
350   0000              	GLOBAL _NIRVANAP_spriteT_callee
351   0000              	GLOBAL _NIRVANAP_spriteT
352   0000              	GLOBAL _NIRVANAP_fillC_callee
353   0000              	GLOBAL _NIRVANAP_fillC
354   0000              	GLOBAL _NIRVANAP_readC_callee
355   0000              	GLOBAL _NIRVANAP_readC
356   0000              	GLOBAL _NIRVANAP_paintC_callee
357   0000              	GLOBAL _NIRVANAP_paintC
358   0000              	GLOBAL _NIRVANAP_printC_callee
359   0000              	GLOBAL _NIRVANAP_printC
360   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
361   0000              	GLOBAL _NIRVANAP_fillT_raw
362   0000              	GLOBAL _NIRVANAP_fillT_callee
363   0000              	GLOBAL _NIRVANAP_fillT
364   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
365   0000              	GLOBAL _NIRVANAP_drawT_raw
366   0000              	GLOBAL _NIRVANAP_drawT_callee
367   0000              	GLOBAL _NIRVANAP_drawT
368   0000              	GLOBAL _NIRVANAP_stop
369   0000              	GLOBAL _NIRVANAP_start
370   0000              	GLOBAL _zx_print_str
371   0000              	GLOBAL _zx_print_int
372   0000              	GLOBAL _zx_print_chr
373   0000              	GLOBAL _zx_print_bonus_time
374   0000              	GLOBAL _zx_isr
375   0000              	GLOBAL _z80_otdr_callee
376   0000              	GLOBAL _z80_otdr
377   0000              	GLOBAL _z80_otir_callee
378   0000              	GLOBAL _z80_otir
379   0000              	GLOBAL _z80_outp_callee
380   0000              	GLOBAL _z80_outp
381   0000              	GLOBAL _z80_indr_callee
382   0000              	GLOBAL _z80_indr
383   0000              	GLOBAL _z80_inir_callee
384   0000              	GLOBAL _z80_inir
385   0000              	GLOBAL _z80_inp_fastcall
386   0000              	GLOBAL _z80_inp
387   0000              	GLOBAL _z80_set_int_state_fastcall
388   0000              	GLOBAL _z80_set_int_state
389   0000              	GLOBAL _z80_get_int_state
390   0000              	GLOBAL _z80_delay_tstate_fastcall
391   0000              	GLOBAL _z80_delay_tstate
392   0000              	GLOBAL _z80_delay_ms_fastcall
393   0000              	GLOBAL _z80_delay_ms
394   0000              	GLOBAL _im2_remove_generic_callback_callee
395   0000              	GLOBAL _im2_remove_generic_callback
396   0000              	GLOBAL _im2_prepend_generic_callback_callee
397   0000              	GLOBAL _im2_prepend_generic_callback
398   0000              	GLOBAL _im2_append_generic_callback_callee
399   0000              	GLOBAL _im2_append_generic_callback
400   0000              	GLOBAL _im2_create_generic_isr_8080_callee
401   0000              	GLOBAL _im2_create_generic_isr_8080
402   0000              	GLOBAL _im2_create_generic_isr_callee
403   0000              	GLOBAL _im2_create_generic_isr
404   0000              	GLOBAL _im2_install_isr_callee
405   0000              	GLOBAL _im2_install_isr
406   0000              	GLOBAL _im2_init_fastcall
407   0000              	GLOBAL _im2_init
408   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
409   0000              	GLOBAL _intrinsic_swap_word_32
410   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
411   0000              	GLOBAL _intrinsic_swap_endian_32
412   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
413   0000              	GLOBAL _intrinsic_swap_endian_16
414   0000              	GLOBAL _intrinsic_return_de
415   0000              	GLOBAL _intrinsic_return_bc
416   0000              	GLOBAL _intrinsic_exx
417   0000              	GLOBAL _intrinsic_ex_de_hl
418   0000              	GLOBAL _intrinsic_nop
419   0000              	GLOBAL _intrinsic_im_2
420   0000              	GLOBAL _intrinsic_im_1
421   0000              	GLOBAL _intrinsic_im_0
422   0000              	GLOBAL _intrinsic_retn
423   0000              	GLOBAL _intrinsic_reti
424   0000              	GLOBAL _intrinsic_halt
425   0000              	GLOBAL _intrinsic_ei
426   0000              	GLOBAL _intrinsic_di
427   0000              	GLOBAL _intrinsic_stub
428   0000              	GLOBAL _intrinsic_ini
429   0000              	GLOBAL _intrinsic_outi
430   0000              	GLOBAL _intrinsic_ldi
431   0000              	GLOBAL _zx_pattern_fill_callee
432   0000              	GLOBAL _zx_pattern_fill
433   0000              	GLOBAL _zx_saddrpup_fastcall
434   0000              	GLOBAL _zx_saddrpup
435   0000              	GLOBAL _zx_saddrpright_callee
436   0000              	GLOBAL _zx_saddrpright
437   0000              	GLOBAL _zx_saddrpleft_callee
438   0000              	GLOBAL _zx_saddrpleft
439   0000              	GLOBAL _zx_saddrpdown_fastcall
440   0000              	GLOBAL _zx_saddrpdown
441   0000              	GLOBAL _zx_saddrcup_fastcall
442   0000              	GLOBAL _zx_saddrcup
443   0000              	GLOBAL _zx_saddrcright_fastcall
444   0000              	GLOBAL _zx_saddrcright
445   0000              	GLOBAL _zx_saddrcleft_fastcall
446   0000              	GLOBAL _zx_saddrcleft
447   0000              	GLOBAL _zx_saddrcdown_fastcall
448   0000              	GLOBAL _zx_saddrcdown
449   0000              	GLOBAL _zx_saddr2py_fastcall
450   0000              	GLOBAL _zx_saddr2py
451   0000              	GLOBAL _zx_saddr2px_fastcall
452   0000              	GLOBAL _zx_saddr2px
453   0000              	GLOBAL _zx_saddr2cy_fastcall
454   0000              	GLOBAL _zx_saddr2cy
455   0000              	GLOBAL _zx_saddr2cx_fastcall
456   0000              	GLOBAL _zx_saddr2cx
457   0000              	GLOBAL _zx_saddr2aaddr_fastcall
458   0000              	GLOBAL _zx_saddr2aaddr
459   0000              	GLOBAL _zx_py2saddr_fastcall
460   0000              	GLOBAL _zx_py2saddr
461   0000              	GLOBAL _zx_py2aaddr_fastcall
462   0000              	GLOBAL _zx_py2aaddr
463   0000              	GLOBAL _zx_pxy2saddr_callee
464   0000              	GLOBAL _zx_pxy2saddr
465   0000              	GLOBAL _zx_pxy2aaddr_callee
466   0000              	GLOBAL _zx_pxy2aaddr
467   0000              	GLOBAL _zx_px2bitmask_fastcall
468   0000              	GLOBAL _zx_px2bitmask
469   0000              	GLOBAL _zx_cy2saddr_fastcall
470   0000              	GLOBAL _zx_cy2saddr
471   0000              	GLOBAL _zx_cy2aaddr_fastcall
472   0000              	GLOBAL _zx_cy2aaddr
473   0000              	GLOBAL _zx_cxy2saddr_callee
474   0000              	GLOBAL _zx_cxy2saddr
475   0000              	GLOBAL _zx_cxy2aaddr_callee
476   0000              	GLOBAL _zx_cxy2aaddr
477   0000              	GLOBAL _zx_bitmask2px_fastcall
478   0000              	GLOBAL _zx_bitmask2px
479   0000              	GLOBAL _zx_aaddrcup_fastcall
480   0000              	GLOBAL _zx_aaddrcup
481   0000              	GLOBAL _zx_aaddrcright_fastcall
482   0000              	GLOBAL _zx_aaddrcright
483   0000              	GLOBAL _zx_aaddrcleft_fastcall
484   0000              	GLOBAL _zx_aaddrcleft
485   0000              	GLOBAL _zx_aaddrcdown_fastcall
486   0000              	GLOBAL _zx_aaddrcdown
487   0000              	GLOBAL _zx_aaddr2saddr_fastcall
488   0000              	GLOBAL _zx_aaddr2saddr
489   0000              	GLOBAL _zx_aaddr2py_fastcall
490   0000              	GLOBAL _zx_aaddr2py
491   0000              	GLOBAL _zx_aaddr2px_fastcall
492   0000              	GLOBAL _zx_aaddr2px
493   0000              	GLOBAL _zx_aaddr2cy_fastcall
494   0000              	GLOBAL _zx_aaddr2cy
495   0000              	GLOBAL _zx_aaddr2cx_fastcall
496   0000              	GLOBAL _zx_aaddr2cx
497   0000              	GLOBAL _zx_visit_wc_pix_callee
498   0000              	GLOBAL _zx_visit_wc_pix
499   0000              	GLOBAL _zx_visit_wc_attr_callee
500   0000              	GLOBAL _zx_visit_wc_attr
501   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
502   0000              	GLOBAL _zx_scroll_wc_up_pix
503   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
504   0000              	GLOBAL _zx_scroll_wc_up_attr
505   0000              	GLOBAL _zx_scroll_wc_up_callee
506   0000              	GLOBAL _zx_scroll_wc_up
507   0000              	GLOBAL _zx_scroll_up_pix_callee
508   0000              	GLOBAL _zx_scroll_up_pix
509   0000              	GLOBAL _zx_scroll_up_attr_callee
510   0000              	GLOBAL _zx_scroll_up_attr
511   0000              	GLOBAL _zx_scroll_up_callee
512   0000              	GLOBAL _zx_scroll_up
513   0000              	GLOBAL _zx_cls_wc_pix_callee
514   0000              	GLOBAL _zx_cls_wc_pix
515   0000              	GLOBAL _zx_cls_wc_attr_callee
516   0000              	GLOBAL _zx_cls_wc_attr
517   0000              	GLOBAL _zx_cls_wc_callee
518   0000              	GLOBAL _zx_cls_wc
519   0000              	GLOBAL _zx_cls_pix_fastcall
520   0000              	GLOBAL _zx_cls_pix
521   0000              	GLOBAL _zx_cls_attr_fastcall
522   0000              	GLOBAL _zx_cls_attr
523   0000              	GLOBAL _zx_cls_fastcall
524   0000              	GLOBAL _zx_cls
525   0000              	GLOBAL _zx_border_fastcall
526   0000              	GLOBAL _zx_border
527   0000              	GLOBAL _zx_tape_verify_block_callee
528   0000              	GLOBAL _zx_tape_verify_block
529   0000              	GLOBAL _zx_tape_save_block_callee
530   0000              	GLOBAL _zx_tape_save_block
531   0000              	GLOBAL _zx_tape_load_block_callee
532   0000              	GLOBAL _zx_tape_load_block
533   0000              	GLOBAL _spr_destroy
534   0000              	GLOBAL _spr_unflattenP1
535   0000              	GLOBAL _spr_flatten
536   0000              	GLOBAL _spr_btile_paint_back
537   0000              	GLOBAL _spr_init_effects
538   0000              	GLOBAL _spr_turn_horizontal
539   0000              	GLOBAL _spr_play_anim
540   0000              	GLOBAL _spr_add_anim
541   0000              	GLOBAL _spr_clear_scr
542   0000              	GLOBAL _spr_back_repaint
543   0000              	GLOBAL _spr_get_tile_dir
544   0000              	GLOBAL _spr_get_tile
545   0000              	GLOBAL _spr_paint_player
546   0000              	GLOBAL _spr_paint
547   0000              	GLOBAL _spr_move_left
548   0000              	GLOBAL _spr_move_right
549   0000              	GLOBAL _spr_move_left_f
550   0000              	GLOBAL _spr_move_right_f
551   0000              	GLOBAL _spr_move_horizontal
552   0000              	GLOBAL _spr_move_down
553   0000              	GLOBAL _spr_move_up
554   0000              	GLOBAL _spr_set_right
555   0000              	GLOBAL _spr_set_left
556   0000              	GLOBAL _spr_set_down
557   0000              	GLOBAL _spr_set_up
558   0000              	GLOBAL _spr_calc_index
559   0000              	GLOBAL _spr_chktime
560   0000              	GLOBAL _player_use_floor
561   0000              	GLOBAL _game_page_map
562   0000              	GLOBAL _game_attribs
563   0000              	GLOBAL _game_print_header
564   0000              	GLOBAL _game_check_time
565   0000              	GLOBAL _game_rotate_attrib_osd
566   0000              	GLOBAL _game_rotate_attrib
567   0000              	GLOBAL _game_colour_message
568   0000              	GLOBAL _game_paint_attrib
569   0000              	GLOBAL _game_print_score
570   0000              	GLOBAL _game_cell_paint_index
571   0000              	GLOBAL _game_cell_paint
572   0000              	GLOBAL _game_check_cell
573   0000              	GLOBAL _game_check_map
574   0000              	GLOBAL _game_loop
575   0000              	GLOBAL _game_round_init
576   0000              	GLOBAL _game_start_timer
577   0000              	GLOBAL _game_update_stats
578   0000              	GLOBAL _game_print_footer
579   0000              	GLOBAL _game_fill_row
580   0000              	GLOBAL _game_cls
581   0000              	GLOBAL _game_fps
582   0000              	GLOBAL _game_draw_map
583   0000              	GLOBAL _enemy_avoid_dead
584   0000              	GLOBAL _enemy_avoid_fall
585   0000              	GLOBAL _enemy_kill
586   0000              	GLOBAL _enemy_init
587   0000              	GLOBAL _enemy_move
588   0000              	GLOBAL _enemy_turn
589   0000              	GLOBAL _enemy_static
590   0000              	GLOBAL _enemy_walk
591   0000              	GLOBAL _enemy_horizontal
592   0000              	GLOBAL _enemy_vertical
593   0000              	GLOBAL _ay_reset
594   0000              	GLOBAL _ay_song_stop
595   0000              	GLOBAL _ay_song_play
596   0000              	GLOBAL _ay_fx_stop
597   0000              	GLOBAL _ay_fx_play
598   0000              	GLOBAL _ay_is_playing
599   0000              	GLOBAL _audio_levelup
600   0000              	GLOBAL _audio_menu
601   0000              	GLOBAL _audio_game_end
602   0000              	GLOBAL _audio_level_complete
603   0000              	GLOBAL _audio_level_start
604   0000              	GLOBAL _audio_lotr_lose_a_life
605   0000              	GLOBAL _audio_puerta
606   0000              	GLOBAL _audio_sin_mana
607   0000              	GLOBAL _audio_magic1
608   0000              	GLOBAL _audio_coin
609   0000              	GLOBAL _audio_golpe
610   0000              	GLOBAL _audio_salto
611   0000              	GLOBAL _audio_efecto
612   0000              	GLOBAL _audio_disparo_fire
613   0000              	GLOBAL _audio_disparo_axe
614   0000              	GLOBAL _audio_disparo2
615   0000              	GLOBAL _audio_disparo1
616   0000              	GLOBAL _audio_explosion1
617   0000              	GLOBAL _audio_explosion
618   0000              	GLOBAL _audio_ingame
619   0000              	GLOBAL _game_sprite_draw8
620   0000              	GLOBAL _test_func
621   0000              	GLOBAL _test_proc
622   0000              	GLOBAL _in_mouse_kempston_wheel_delta
623   0000              	GLOBAL _in_mouse_kempston_wheel
624   0000              	GLOBAL _in_mouse_kempston_callee
625   0000              	GLOBAL _in_mouse_kempston
626   0000              	GLOBAL _in_mouse_kempston_setpos_callee
627   0000              	GLOBAL _in_mouse_kempston_setpos
628   0000              	GLOBAL _in_mouse_kempston_reset
629   0000              	GLOBAL _in_mouse_kempston_init
630   0000              	GLOBAL _in_mouse_amx_wheel_delta
631   0000              	GLOBAL _in_mouse_amx_wheel
632   0000              	GLOBAL _in_mouse_amx_callee
633   0000              	GLOBAL _in_mouse_amx
634   0000              	GLOBAL _in_mouse_amx_setpos_callee
635   0000              	GLOBAL _in_mouse_amx_setpos
636   0000              	GLOBAL _in_mouse_amx_reset
637   0000              	GLOBAL _in_mouse_amx_init_callee
638   0000              	GLOBAL _in_mouse_amx_init
639   0000              	GLOBAL _in_stick_sinclair2
640   0000              	GLOBAL _in_stick_sinclair1
641   0000              	GLOBAL _in_stick_kempston
642   0000              	GLOBAL _in_stick_fuller
643   0000              	GLOBAL _in_stick_cursor
644   0000              	GLOBAL _in_stick_keyboard_fastcall
645   0000              	GLOBAL _in_stick_keyboard
646   0000              	GLOBAL _in_wait_nokey
647   0000              	GLOBAL _in_wait_key
648   0000              	GLOBAL _in_test_key
649   0000              	GLOBAL _in_pause_fastcall
650   0000              	GLOBAL _in_pause
651   0000              	GLOBAL _in_key_scancode_fastcall
652   0000              	GLOBAL _in_key_scancode
653   0000              	GLOBAL _in_key_pressed_fastcall
654   0000              	GLOBAL _in_key_pressed
655   0000              	GLOBAL _in_inkey
656   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
657   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
658   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
659   0000              	GLOBAL _NIRVANAP_HOLE
660   0000              	GLOBAL _NIRVANAP_ISR_HOOK
661   0000              	GLOBAL _scan_map
662   0000              	GLOBAL _map_paper_last_a
663   0000              	GLOBAL _map_paper_last
664   0000              	GLOBAL _map_paper_clr
665   0000              	GLOBAL _map_paper
666   0000              	GLOBAL _anim_count
667   0000              	GLOBAL _anim_respanwn
668   0000              	GLOBAL _anim_loop
669   0000              	GLOBAL _anim_end
670   0000              	GLOBAL _anim_int
671   0000              	GLOBAL _anim_tile
672   0000              	GLOBAL _anim_col
673   0000              	GLOBAL _anim_lin
674   0000              	GLOBAL _map_heigth
675   0000              	GLOBAL _map_width
676   0000              	GLOBAL _scr_curr
677   0000              	GLOBAL _scr_map
678   0000              	GLOBAL _spr_kind
679   0000              	GLOBAL _spr_frames
680   0000              	GLOBAL _spr_speed
681   0000              	GLOBAL _spr_tile
682   0000              	GLOBAL _screen_ink
683   0000              	GLOBAL _screen_paper
684   0000              	GLOBAL _game_start_scr
685   0000              	GLOBAL _game_score_top
686   0000              	GLOBAL _player_coins
687   0000              	GLOBAL _player_lives
688   0000              	GLOBAL _game_over
689   0000              	GLOBAL _game_sound
690   0000              	GLOBAL _game_inf_lives
691   0000              	GLOBAL _game_inmune
692   0000              	GLOBAL _sprite_curr_index
693   0000              	GLOBAL _spr_count
694   0000              	GLOBAL _last_rotated
695   0000              	GLOBAL _anim_time
696   0000              	GLOBAL _frame_time
697   0000              	GLOBAL _curr_time
698   0000              	GLOBAL _game_conveyor_flag
699   0000              	GLOBAL _game_conveyor_tile
700   0000              	GLOBAL _p_state_a
701   0000              	GLOBAL _p_state
702   0000              	GLOBAL _attrib_key
703   0000              	GLOBAL _attrib_red
704   0000              	GLOBAL _game_attrib_osd
705   0000              	GLOBAL _attrib_osd
706   0000              	GLOBAL _attrib_hl
707   0000              	GLOBAL _attrib
708   0000              	GLOBAL _zx_val_asm
709   0000              	GLOBAL _enemies
710   0000              	GLOBAL _tmp_ui
711   0000              	GLOBAL _tmp_sc
712   0000              	GLOBAL _tmp_uc
713   0000              	GLOBAL _tmp1
714   0000              	GLOBAL _tmp0
715   0000              	GLOBAL _tmp
716   0000              	GLOBAL _index1
717   0000              	GLOBAL _index0
718   0000              	GLOBAL _index_tmp
719   0000              	GLOBAL _loop_count
720   0000              	GLOBAL _s_class
721   0000              	GLOBAL _s_row1
722   0000              	GLOBAL _s_col1
723   0000              	GLOBAL _s_col0
724   0000              	GLOBAL _s_lin1
725   0000              	GLOBAL _s_lin0
726   0000              	GLOBAL _s_tile1
727   0000              	GLOBAL _s_tile0
728   0000              	GLOBAL _player_kill_index
729   0000              	GLOBAL _player_killed
730   0000              	GLOBAL _player_jump_top
731   0000              	GLOBAL _game_fps_show
732   0000              	GLOBAL _game_debug
733   0000              	GLOBAL _sprite
734   0000              	GLOBAL _fps
735   0000              	GLOBAL _game_tileset
736   0000              	GLOBAL _menu_curr_sel
737   0000              	GLOBAL _game_round_up
738   0000              	GLOBAL _game_conveyor_col1
739   0000              	GLOBAL _game_conveyor_col0
740   0000              	GLOBAL _game_conveyor_lin
741   0000              	GLOBAL _game_conveyor_dir
742   0000              	GLOBAL _game_song_play_start
743   0000              	GLOBAL _game_song_play
744   0000              	GLOBAL _game_world
745   0000              	GLOBAL _game_gravity
746   0000              	GLOBAL _player_jumpcount
747   0000              	GLOBAL _player_hit
748   0000              	GLOBAL _player_hit_time
749   0000              	GLOBAL _player_lin_scr
750   0000              	GLOBAL _player_col_scr
751   0000              	GLOBAL _player_vel_inc
752   0000              	GLOBAL _player_vel_y0
753   0000              	GLOBAL _player_vel_y
754   0000              	GLOBAL _player_score
755   0000              	GLOBAL _last_time
756   0000              	GLOBAL _obj_count
757   0000              	GLOBAL _obj_col
758   0000              	GLOBAL _obj_lin
759   0000              	GLOBAL _spr_timer
760   0000              	GLOBAL _jump_lin
761   0000              	GLOBAL _colint
762   0000              	GLOBAL _col
763   0000              	GLOBAL _tbuffer
764   0000              	GLOBAL _lin
765   0000              	GLOBAL _tile
766   0000              	GLOBAL _value_b
767   0000              	GLOBAL _value_a
768   0000              	GLOBAL _state_a
769   0000              	GLOBAL _state
770   0000              	GLOBAL _class
771   0000              	GLOBAL _dirs
772   0000              	GLOBAL _k1
773   0000              	GLOBAL _joyfunc2
774   0000              	GLOBAL _joyfunc1
775   0000              	GLOBAL _btiles
776   0000              	GLOBAL _v3
777   0000              	GLOBAL _v2
778   0000              	GLOBAL _v1
779   0000              	GLOBAL _v0
780   0000              	GLOBAL _i
781   0000              	GLOBAL _spec128
782   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
783   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
784   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
785   0000              	GLOBAL _ay_fx_06_disparo_fire
786   0000              	GLOBAL _ay_fx_06_disparo_axe
787   0000              	GLOBAL _ay_fx_06_explosion1
788   0000              	GLOBAL _ay_fx_06_efecto
789   0000              	GLOBAL _ay_fx_06_disparo2
790   0000              	GLOBAL _ay_fx_06_disparo1
791   0000              	GLOBAL _ay_fx_06_levelup
792   0000              	GLOBAL _ay_fx_06_magic
793   0000              	GLOBAL _ay_fx_06_sin_mana
794   0000              	GLOBAL _ay_fx_06_salto
795   0000              	GLOBAL _ay_fx_06_puerta
796   0000              	GLOBAL _ay_fx_06_magic1
797   0000              	GLOBAL _ay_fx_06_golpe
798   0000              	GLOBAL _ay_fx_06_explosion
799   0000              	GLOBAL _ay_fx_06_dano_por_toque
800   0000              	GLOBAL _ay_fx_06_coin
801   0000              	GLOBAL _ay_song_06_lotr_level_start
802   0000              	GLOBAL _ay_song_06_lotr_level_complete
803   0000              	GLOBAL _ay_song_06_lotr_lose_a_life
804   0000              	GLOBAL _ay_song_04_ingame0
805   0000              	GLOBAL _ay_song_04_ingame
806   0000              	GLOBAL _hibtiles
807   0000              	GLOBAL _key_map
808   0000              	GLOBAL _start_scr0
809   0000              	GLOBAL _paper0
810   0000              	GLOBAL _lenght0
811   0000              	GLOBAL _world0
812   0000              	GLOBAL _spr_init
813   0000              ;--------------------------------------------------------
814   0000              ; special function registers
815   0000              ;--------------------------------------------------------
816   0000              defc _IO_FE	=	0x00fe
817   0000              defc _IO_1FFD	=	0x1ffd
818   0000              defc _IO_7FFD	=	0x7ffd
819   0000              ;--------------------------------------------------------
820   0000              ; ram data
821   0000              ;--------------------------------------------------------
822   0000              	SECTION bss_compiler
823   0000              ;--------------------------------------------------------
824   0000              ; ram data
825   0000              ;--------------------------------------------------------
826   0000              
827   0000              IF 0
828   0000              
829   0000              ; .area _INITIALIZED removed by z88dk
830   0000              
831   0000              
832   0000              ENDIF
833   0000              
834   0000              ;--------------------------------------------------------
835   0000              ; absolute external ram data
836   0000              ;--------------------------------------------------------
837   0000              	SECTION IGNORE
838   0000              ;--------------------------------------------------------
839   0000              ; global & static initialisations
840   0000              ;--------------------------------------------------------
841   0000              	SECTION code_crt_init
842   0000              ;--------------------------------------------------------
843   0000              ; Home
844   0000              ;--------------------------------------------------------
845   0000              	SECTION IGNORE
846   0000              ;--------------------------------------------------------
847   0000              ; code
848   0000              ;--------------------------------------------------------
849   0000              	SECTION code_compiler
850   0000              ;	---------------------------------
851   0000              ; Function player_init
852   0000              ; ---------------------------------
853   0000              _player_init:
854   0000  CD 00 00    	call	___sdcc_enter_ix
855   0003  21 07 00    	ld	hl, +(_class + 0x0007)
856   0006  36 FF       	ld	(hl),0xff
857   0008  21 07 00    	ld	hl, +(_spr_speed + 0x0007)
858   000B  36 04       	ld	(hl),0x04
859   000D  21 07 00    	ld	hl,_spr_frames+7
860   0010  36 04       	ld	(hl),0x04
861   0012  4D          	ld	c,l
862   0013  44          	ld	b,h
863   0014  21 07 00    	ld	hl, +(_lin + 0x0007)
864   0017  DD 7E 04    	ld	a,(ix+4)
865   001A  77          	ld	(hl), a
866   001B  21 07 00    	ld	hl, +(_col + 0x0007)
867   001E  DD 7E 05    	ld	a,(ix+5)
868   0021  77          	ld	(hl), a
869   0022  21 07 00    	ld	hl, +(_state + 0x0007)
870   0025  36 00       	ld	(hl),0x00
871   0027  21 07 00    	ld	hl, +(_state_a + 0x0007)
872   002A  36 00       	ld	(hl),0x00
873   002C  21 07 00    	ld	hl, +(_jump_lin + 0x0007)
874   002F  DD 7E 04    	ld	a,(ix+4)
875   0032  77          	ld	(hl), a
876   0033  ED 5B 00 00 	ld	de,(_curr_time)
877   0037  ED 53 0E 00 	ld	(_last_time + 0x000e),de
878   003B  21 00 00    	ld	hl,0x0000
879   003E  22 00 00    	ld	(_player_vel_y),hl
880   0041  11 07 00    	ld	de,_colint+7
881   0044  AF          	xor	a, a
882   0045  12          	ld	(de), a
883   0046  3E 04       	ld	a,0x04
884   0048  02          	ld	(bc), a
885   0049  DD 7E 05    	ld	a,(ix+5)
886   004C  D6 10       	sub	a,0x10
887   004E  30 19       	jr	NC,l_player_init_00102
888   0050  ED 4B 00 00 	ld	bc,(_p_state)
889   0054  0A          	ld	a,(bc)
890   0055  F6 04       	or	a,0x04
891   0057  02          	ld	(bc), a
892   0058  ED 4B 00 00 	ld	bc,(_p_state_a)
893   005C  0A          	ld	a,(bc)
894   005D  F6 10       	or	a,0x10
895   005F  02          	ld	(bc), a
896   0060  21 07 00    	ld	hl, +(_tile + 0x0007)
897   0063  DD 7E 06    	ld	a,(ix+6)
898   0066  77          	ld	(hl), a
899   0067  18 1D       	jr	l_player_init_00104
900   0069              l_player_init_00102:
901   0069  3E 03       	ld	a,0x03
902   006B  12          	ld	(de), a
903   006C  ED 5B 00 00 	ld	de,(_p_state)
904   0070  1A          	ld	a,(de)
905   0071  F6 08       	or	a,0x08
906   0073  12          	ld	(de), a
907   0074  ED 5B 00 00 	ld	de,(_p_state_a)
908   0078  1A          	ld	a,(de)
909   0079  F6 08       	or	a,0x08
910   007B  12          	ld	(de), a
911   007C  11 07 00    	ld	de,_tile+7
912   007F  0A          	ld	a, (bc)
913   0080  4F          	ld	c, a
914   0081  DD 7E 06    	ld	a,(ix+6)
915   0084  81          	add	a, c
916   0085  12          	ld	(de), a
917   0086              l_player_init_00104:
918   0086  DD E1       	pop	ix
919   0088  C9          	ret
920   0089              	SECTION code_compiler
921   0089              ;	---------------------------------
922   0089              ; Function player_turn
923   0089              ; ---------------------------------
924   0089              _player_turn:
925   0089  21 00 00    	ld	hl,_sprite
926   008C  CD 00 00    	call	_spr_chktime
927   008F  7D          	ld	a, l
928   0090  B7          	or	a, a
929   0091  CA 1B 01    	jp	Z, l_player_turn_00116
930   0094  CD 00 00    	call	_in_inkey
931   0097  7D          	ld	a,l
932   0098  D6 31       	sub	a,0x31
933   009A  4D          	ld	c,l
934   009B  20 14       	jr	NZ,l_player_turn_00104
935   009D  21 00 00    	ld	hl,_scr_curr
936   00A0  35          	dec	(hl)
937   00A1  21 00 00    	ld	hl,_game_round_up
938   00A4  36 01       	ld	(hl),0x01
939   00A6  3A 00 00    	ld	a,(_scr_curr)
940   00A9  3C          	inc	a
941   00AA  20 05       	jr	NZ,l_player_turn_00104
942   00AC  21 00 00    	ld	hl,_scr_curr
943   00AF  36 13       	ld	(hl),0x13
944   00B1              l_player_turn_00104:
945   00B1  79          	ld	a, c
946   00B2  D6 32       	sub	a,0x32
947   00B4  20 15       	jr	NZ,l_player_turn_00108
948   00B6  21 00 00    	ld	hl,_scr_curr
949   00B9  34          	inc	(hl)
950   00BA  21 00 00    	ld	hl,_game_round_up
951   00BD  36 01       	ld	(hl),0x01
952   00BF  3A 00 00    	ld	a,(_scr_curr)
953   00C2  D6 14       	sub	a,0x14
954   00C4  20 05       	jr	NZ,l_player_turn_00108
955   00C6  21 00 00    	ld	hl,_scr_curr
956   00C9  36 00       	ld	(hl),0x00
957   00CB              l_player_turn_00108:
958   00CB  2E 02       	ld	l,0x02
959   00CD  CD 00 00    	call	_zx_border_fastcall
960   00D0  21 00 00    	ld	hl,_k1
961   00D3  E5          	push	hl
962   00D4  2A 00 00    	ld	hl,(_joyfunc1)
963   00D7  CD 00 00    	call	___sdcc_call_hl
964   00DA  F1          	pop	af
965   00DB  7D          	ld	a,l
966   00DC  32 00 00    	ld	(_dirs),a
967   00DF  21 07 00    	ld	hl,+(_state + 0x0007)
968   00E2  22 00 00    	ld	(_p_state),hl
969   00E5  21 07 00    	ld	hl,+(_state_a + 0x0007)
970   00E8  22 00 00    	ld	(_p_state_a),hl
971   00EB  3A 07 00    	ld	a,(_lin + 0x0007)
972   00EE  32 00 00    	ld	(_s_lin0),a
973   00F1  3A 07 00    	ld	a,(_col + 0x0007)
974   00F4  32 00 00    	ld	(_s_col0),a
975   00F7  21 00 00    	ld	hl,_s_class
976   00FA  36 00       	ld	(hl),0x00
977   00FC  CD 1C 01    	call	_player_move
978   00FF  CD 68 03    	call	_player_collision
979   0102  21 00 00    	ld	hl,_player_killed
980   0105  7E          	ld	a, (hl)
981   0106  B7          	or	a, a
982   0107  28 12       	jr	Z,l_player_turn_00116
983   0109  36 00       	ld	(hl),0x00
984   010B  3A 00 00    	ld	a,(_game_inmune)
985   010E  B7          	or	a, a
986   010F  28 07       	jr	Z,l_player_turn_00110
987   0111  2E 02       	ld	l,0x02
988   0113  CD 00 00    	call	_zx_border_fastcall
989   0116  18 03       	jr	l_player_turn_00116
990   0118              l_player_turn_00110:
991   0118  CD B0 07    	call	_player_lost_life
992   011B              l_player_turn_00116:
993   011B  C9          	ret
994   011C              	SECTION code_compiler
995   011C              ;	---------------------------------
996   011C              ; Function player_move
997   011C              ; ---------------------------------
998   011C              _player_move:
999   011C  2A 00 00    	ld	hl,(_p_state)
1000  011F  7E          	ld	a,(hl)
1001  0120  CB 47       	bit	0, a
1002  0122  20 04       	jr	NZ,l_player_move_00104
1003  0124  CB 4F       	bit	1, a
1004  0126  28 08       	jr	Z,l_player_move_00105
1005  0128              l_player_move_00104:
1006  0128  CD 73 01    	call	_player_move_jump
1007  012B  CD 00 00    	call	_spr_move_horizontal
1008  012E  18 3D       	jr	l_player_move_00106
1009  0130              l_player_move_00105:
1010  0130  CD 45 02    	call	_player_move_walk
1011  0133  ED 4B 00 00 	ld	bc,(_p_state)
1012  0137  0A          	ld	a,(bc)
1013  0138  E6 EF       	and	a,0xef
1014  013A  02          	ld	(bc), a
1015  013B  AF          	xor	a, a
1016  013C  F5          	push	af
1017  013D  33          	inc	sp
1018  013E  CD B5 06    	call	_player_check_floor_walk
1019  0141  33          	inc	sp
1020  0142  7D          	ld	a, l
1021  0143  B7          	or	a, a
1022  0144  28 27       	jr	Z,l_player_move_00106
1023  0146  3E 01       	ld	a,0x01
1024  0148  F5          	push	af
1025  0149  33          	inc	sp
1026  014A  CD B5 06    	call	_player_check_floor_walk
1027  014D  33          	inc	sp
1028  014E  7D          	ld	a, l
1029  014F  B7          	or	a, a
1030  0150  28 1B       	jr	Z,l_player_move_00106
1031  0152  CD 00 00    	call	_spr_move_horizontal
1032  0155  ED 4B 00 00 	ld	bc,(_p_state)
1033  0159  0A          	ld	a,(bc)
1034  015A  F6 02       	or	a,0x02
1035  015C  02          	ld	(bc),a
1036  015D  ED 4B 00 00 	ld	bc,(_p_state)
1037  0161  0A          	ld	a,(bc)
1038  0162  E6 F7       	and	a,0xf7
1039  0164  02          	ld	(bc),a
1040  0165  ED 4B 00 00 	ld	bc,(_p_state)
1041  0169  0A          	ld	a,(bc)
1042  016A  E6 FB       	and	a,0xfb
1043  016C  02          	ld	(bc), a
1044  016D              l_player_move_00106:
1045  016D  CD 00 00    	call	_spr_paint_player
1046  0170  2E 00       	ld	l,0x00
1047  0172  C9          	ret
1048  0173              	SECTION code_compiler
1049  0173              ;	---------------------------------
1050  0173              ; Function player_move_jump
1051  0173              ; ---------------------------------
1052  0173              _player_move_jump:
1053  0173  CD 00 00    	call	___sdcc_enter_ix
1054  0176  3B          	dec	sp
1055  0177  2A 00 00    	ld	hl,(_player_vel_y)
1056  017A  ED 5B 00 00 	ld	de,(_game_gravity)
1057  017E  19          	add	hl,de
1058  017F  22 00 00    	ld	(_player_vel_y),hl
1059  0182  21 64 00    	ld	hl,0x0064
1060  0185  E5          	push	hl
1061  0186  2A 00 00    	ld	hl,(_player_vel_y)
1062  0189  E5          	push	hl
1063  018A  CD 00 00    	call	__divsint_callee
1064  018D  EB          	ex	de,hl
1065  018E  CB 43       	bit	0,e
1066  0190  21 00 00    	ld	hl,_s_lin1
1067  0193  73          	ld	(hl),e
1068  0194  28 04       	jr	Z,l_player_move_jump_00102
1069  0196  21 00 00    	ld	hl,_s_lin1
1070  0199  35          	dec	(hl)
1071  019A              l_player_move_jump_00102:
1072  019A  01 07 00    	ld	bc,_lin+7
1073  019D  0A          	ld	a, (bc)
1074  019E  DD 77 FF    	ld	(ix-1),a
1075  01A1  21 00 00    	ld	hl,_s_lin1
1076  01A4  86          	add	a, (hl)
1077  01A5  77          	ld	(hl), a
1078  01A6  AF          	xor	a, a
1079  01A7  BB          	cp	a, e
1080  01A8  9A          	sbc	a, d
1081  01A9  E2 AE 01    	jp	PO, l_player_move_jump_00142
1082  01AC  EE 80       	xor	a,0x80
1083  01AE              l_player_move_jump_00142:
1084  01AE  FA F9 01    	jp	M, l_player_move_jump_00113
1085  01B1  C5          	push	bc
1086  01B2  CD 00 00    	call	_spr_set_up
1087  01B5  C1          	pop	bc
1088  01B6  3E 80       	ld	a,0x80
1089  01B8  21 00 00    	ld	hl,_s_lin1
1090  01BB  96          	sub	a, (hl)
1091  01BC  30 02       	jr	NC,l_player_move_jump_00104
1092  01BE  36 00       	ld	(hl),0x00
1093  01C0              l_player_move_jump_00104:
1094  01C0  21 07 00    	ld	hl,+(_col + 0x0007)
1095  01C3  56          	ld	d, (hl)
1096  01C4  C5          	push	bc
1097  01C5  D5          	push	de
1098  01C6  33          	inc	sp
1099  01C7  3A 00 00    	ld	a,(_s_lin1)
1100  01CA  F5          	push	af
1101  01CB  33          	inc	sp
1102  01CC  CD 53 06    	call	_player_check_ceil
1103  01CF  F1          	pop	af
1104  01D0  C1          	pop	bc
1105  01D1  7D          	ld	a, l
1106  01D2  B7          	or	a, a
1107  01D3  20 18       	jr	NZ,l_player_move_jump_00106
1108  01D5  21 00 00    	ld	hl,0x0000
1109  01D8  22 00 00    	ld	(_player_vel_y),hl
1110  01DB  ED 4B 00 00 	ld	bc,(_p_state)
1111  01DF  0A          	ld	a,(bc)
1112  01E0  E6 FB       	and	a,0xfb
1113  01E2  02          	ld	(bc),a
1114  01E3  ED 4B 00 00 	ld	bc,(_p_state)
1115  01E7  0A          	ld	a,(bc)
1116  01E8  E6 F7       	and	a,0xf7
1117  01EA  02          	ld	(bc), a
1118  01EB  18 04       	jr	l_player_move_jump_00107
1119  01ED              l_player_move_jump_00106:
1120  01ED  3A 00 00    	ld	a,(_s_lin1)
1121  01F0  02          	ld	(bc), a
1122  01F1              l_player_move_jump_00107:
1123  01F1  3A 00 00    	ld	a,(_s_lin1)
1124  01F4  32 00 00    	ld	(_player_jump_top),a
1125  01F7  18 46       	jr	l_player_move_jump_00114
1126  01F9              l_player_move_jump_00113:
1127  01F9  C5          	push	bc
1128  01FA  CD D8 04    	call	_player_get_floor
1129  01FD  C1          	pop	bc
1130  01FE  7D          	ld	a,l
1131  01FF  32 00 00    	ld	(_v0),a
1132  0202  3E 68       	ld	a,0x68
1133  0204  21 00 00    	ld	hl,_s_lin1
1134  0207  96          	sub	a, (hl)
1135  0208  38 0E       	jr	C,l_player_move_jump_00108
1136  020A  7E          	ld	a, (hl)
1137  020B  21 00 00    	ld	hl,_v0
1138  020E  96          	sub	a, (hl)
1139  020F  38 25       	jr	C,l_player_move_jump_00109
1140  0211  7E          	ld	a, (hl)
1141  0212  21 00 00    	ld	hl,_s_lin0
1142  0215  96          	sub	a, (hl)
1143  0216  38 1E       	jr	C,l_player_move_jump_00109
1144  0218              l_player_move_jump_00108:
1145  0218  3A 00 00    	ld	a,(_v0)
1146  021B  02          	ld	(bc), a
1147  021C  21 00 00    	ld	hl,0x0000
1148  021F  22 00 00    	ld	(_player_vel_y),hl
1149  0222  ED 4B 00 00 	ld	bc,(_p_state)
1150  0226  0A          	ld	a,(bc)
1151  0227  E6 FD       	and	a,0xfd
1152  0229  02          	ld	(bc),a
1153  022A  ED 4B 00 00 	ld	bc,(_p_state)
1154  022E  0A          	ld	a,(bc)
1155  022F  E6 FE       	and	a,0xfe
1156  0231  02          	ld	(bc), a
1157  0232  2E 00       	ld	l,0x00
1158  0234  18 0B       	jr	l_player_move_jump_00115
1159  0236              l_player_move_jump_00109:
1160  0236  C5          	push	bc
1161  0237  CD 00 00    	call	_spr_set_down
1162  023A  C1          	pop	bc
1163  023B  3A 00 00    	ld	a,(_s_lin1)
1164  023E  02          	ld	(bc), a
1165  023F              l_player_move_jump_00114:
1166  023F  2E 01       	ld	l,0x01
1167  0241              l_player_move_jump_00115:
1168  0241  33          	inc	sp
1169  0242  DD E1       	pop	ix
1170  0244  C9          	ret
1171  0245              	SECTION code_compiler
1172  0245              ;	---------------------------------
1173  0245              ; Function player_move_walk
1174  0245              ; ---------------------------------
1175  0245              _player_move_walk:
1176  0245  CD 00 00    	call	___sdcc_enter_ix
1177  0248  F5          	push	af
1178  0249  CD 61 05    	call	_player_check_input
1179  024C  4D          	ld	c, l
1180  024D  2A 00 00    	ld	hl,(_p_state)
1181  0250  DD 75 FE    	ld	(ix-2),l
1182  0253  DD 74 FF    	ld	(ix-1),h
1183  0256  79          	ld	a,c
1184  0257  B7          	or	a,a
1185  0258  CA 25 03    	jp	Z,l_player_move_walk_00133
1186  025B  21 00 00    	ld	hl,_dirs
1187  025E  CB 7E       	bit	7, (hl)
1188  0260  CA DF 02    	jp	Z,l_player_move_walk_00115
1189  0263  21 07 00    	ld	hl,+(_col + 0x0007)
1190  0266  56          	ld	d, (hl)
1191  0267  21 07 00    	ld	hl,+(_lin + 0x0007)
1192  026A  46          	ld	b, (hl)
1193  026B  05          	dec	b
1194  026C  05          	dec	b
1195  026D  58          	ld	e,b
1196  026E  D5          	push	de
1197  026F  CD 53 06    	call	_player_check_ceil
1198  0272  F1          	pop	af
1199  0273  7D          	ld	a, l
1200  0274  B7          	or	a, a
1201  0275  28 63       	jr	Z,l_player_move_walk_00113
1202  0277  21 00 00    	ld	hl,_player_vel_inc
1203  027A  36 01       	ld	(hl),0x01
1204  027C  21 00 00    	ld	hl,_player_jumpcount
1205  027F  36 FF       	ld	(hl),0xff
1206  0281  CD 00 00    	call	_audio_salto
1207  0284  CD 00 00    	call	_spr_set_up
1208  0287  3A 07 00    	ld	a,(_lin + 0x0007)
1209  028A  32 07 00    	ld	(_jump_lin+7),a
1210  028D  2A 00 00    	ld	hl,(_player_vel_y0)
1211  0290  22 00 00    	ld	(_player_vel_y),hl
1212  0293  ED 4B 00 00 	ld	bc,(_p_state)
1213  0297  0A          	ld	a,(bc)
1214  0298  E6 F7       	and	a,0xf7
1215  029A  02          	ld	(bc),a
1216  029B  ED 4B 00 00 	ld	bc,(_p_state)
1217  029F  0A          	ld	a,(bc)
1218  02A0  E6 FB       	and	a,0xfb
1219  02A2  02          	ld	(bc),a
1220  02A3  2A 00 00    	ld	hl,(_p_state)
1221  02A6  CB 66       	bit	4,(hl)
1222  02A8  28 14       	jr	Z,l_player_move_walk_00110
1223  02AA  3A 00 00    	ld	a,(_game_conveyor_dir)
1224  02AD  3C          	inc	a
1225  02AE  20 03       	jr	NZ,l_player_move_walk_00102
1226  02B0  CD 00 00    	call	_spr_set_left
1227  02B3              l_player_move_walk_00102:
1228  02B3  3A 00 00    	ld	a,(_game_conveyor_dir)
1229  02B6  3D          	dec	a
1230  02B7  20 19       	jr	NZ,l_player_move_walk_00111
1231  02B9  CD 00 00    	call	_spr_set_right
1232  02BC  18 14       	jr	l_player_move_walk_00111
1233  02BE              l_player_move_walk_00110:
1234  02BE  21 00 00    	ld	hl,_dirs
1235  02C1  CB 56       	bit	2, (hl)
1236  02C3  28 03       	jr	Z,l_player_move_walk_00106
1237  02C5  CD 00 00    	call	_spr_set_left
1238  02C8              l_player_move_walk_00106:
1239  02C8  21 00 00    	ld	hl,_dirs
1240  02CB  CB 5E       	bit	3, (hl)
1241  02CD  28 03       	jr	Z,l_player_move_walk_00111
1242  02CF  CD 00 00    	call	_spr_set_right
1243  02D2              l_player_move_walk_00111:
1244  02D2  21 08 04    	ld	hl,0x0408
1245  02D5  E5          	push	hl
1246  02D6  CD B6 05    	call	_player_tile
1247  02D9  F1          	pop	af
1248  02DA              l_player_move_walk_00113:
1249  02DA  2E 01       	ld	l,0x01
1250  02DC  C3 64 03    	jp	l_player_move_walk_00135
1251  02DF              l_player_move_walk_00115:
1252  02DF  E1          	pop	hl
1253  02E0  E5          	push	hl
1254  02E1  CB 66       	bit	4,(hl)
1255  02E3  28 1A       	jr	Z,l_player_move_walk_00125
1256  02E5  3A 00 00    	ld	a,(_game_conveyor_dir)
1257  02E8  3D          	dec	a
1258  02E9  20 06       	jr	NZ,l_player_move_walk_00117
1259  02EB  CD 00 00    	call	_spr_set_right
1260  02EE  CD 00 00    	call	_spr_move_horizontal
1261  02F1              l_player_move_walk_00117:
1262  02F1  3A 00 00    	ld	a,(_game_conveyor_dir)
1263  02F4  3C          	inc	a
1264  02F5  20 22       	jr	NZ,l_player_move_walk_00126
1265  02F7  CD 00 00    	call	_spr_set_left
1266  02FA  CD 00 00    	call	_spr_move_horizontal
1267  02FD  18 1A       	jr	l_player_move_walk_00126
1268  02FF              l_player_move_walk_00125:
1269  02FF  21 00 00    	ld	hl,_dirs
1270  0302  CB 5E       	bit	3, (hl)
1271  0304  28 06       	jr	Z,l_player_move_walk_00121
1272  0306  CD 00 00    	call	_spr_set_right
1273  0309  CD 00 00    	call	_spr_move_horizontal
1274  030C              l_player_move_walk_00121:
1275  030C  21 00 00    	ld	hl,_dirs
1276  030F  CB 56       	bit	2, (hl)
1277  0311  28 06       	jr	Z,l_player_move_walk_00126
1278  0313  CD 00 00    	call	_spr_set_left
1279  0316  CD 00 00    	call	_spr_move_horizontal
1280  0319              l_player_move_walk_00126:
1281  0319  21 08 04    	ld	hl,0x0408
1282  031C  E5          	push	hl
1283  031D  CD B6 05    	call	_player_tile
1284  0320  F1          	pop	af
1285  0321  2E 01       	ld	l,0x01
1286  0323  18 3F       	jr	l_player_move_walk_00135
1287  0325              l_player_move_walk_00133:
1288  0325  E1          	pop	hl
1289  0326  4E          	ld	c,(hl)
1290  0327  E5          	push	hl
1291  0328  CB 99       	res	3, c
1292  032A  E1          	pop	hl
1293  032B  E5          	push	hl
1294  032C  71          	ld	(hl), c
1295  032D  ED 4B 00 00 	ld	bc,(_p_state)
1296  0331  0A          	ld	a,(bc)
1297  0332  E6 FB       	and	a,0xfb
1298  0334  02          	ld	(bc),a
1299  0335  ED 4B 00 00 	ld	bc,(_p_state)
1300  0339  0A          	ld	a,(bc)
1301  033A  CB 67       	bit	4,a
1302  033C  28 24       	jr	Z,l_player_move_walk_00134
1303  033E  5F          	ld	e,a
1304  033F  3A 00 00    	ld	a,(_game_conveyor_dir)
1305  0342  3C          	inc	a
1306  0343  20 0E       	jr	NZ,l_player_move_walk_00128
1307  0345  7B          	ld	a, e
1308  0346  F6 08       	or	a,0x08
1309  0348  02          	ld	(bc), a
1310  0349  21 08 04    	ld	hl,0x0408
1311  034C  E5          	push	hl
1312  034D  CD B6 05    	call	_player_tile
1313  0350  F1          	pop	af
1314  0351  18 0C       	jr	l_player_move_walk_00129
1315  0353              l_player_move_walk_00128:
1316  0353  7B          	ld	a, e
1317  0354  F6 04       	or	a,0x04
1318  0356  02          	ld	(bc), a
1319  0357  21 08 04    	ld	hl,0x0408
1320  035A  E5          	push	hl
1321  035B  CD B6 05    	call	_player_tile
1322  035E  F1          	pop	af
1323  035F              l_player_move_walk_00129:
1324  035F  CD 00 00    	call	_spr_move_horizontal
1325  0362              l_player_move_walk_00134:
1326  0362  2E 00       	ld	l,0x00
1327  0364              l_player_move_walk_00135:
1328  0364  F1          	pop	af
1329  0365  DD E1       	pop	ix
1330  0367  C9          	ret
1331  0368              	SECTION code_compiler
1332  0368              ;	---------------------------------
1333  0368              ; Function player_collision
1334  0368              ; ---------------------------------
1335  0368              _player_collision:
1336  0368  21 07 00    	ld	hl,+(_col + 0x0007)
1337  036B  56          	ld	d, (hl)
1338  036C  21 07 00    	ld	hl,+(_lin + 0x0007)
1339  036F  5E          	ld	e, (hl)
1340  0370  D5          	push	de
1341  0371  CD 00 00    	call	_spr_calc_index
1342  0374  F1          	pop	af
1343  0375  22 00 00    	ld	(_index1),hl
1344  0378  01 00 00    	ld	bc,_scr_map
1345  037B  09          	add	hl,bc
1346  037C  7E          	ld	a,(hl)
1347  037D  32 00 00    	ld	(_v0),a
1348  0380  F5          	push	af
1349  0381  33          	inc	sp
1350  0382  CD 1E 06    	call	_player_pick_deadly
1351  0385  33          	inc	sp
1352  0386  7D          	ld	a,l
1353  0387  32 00 00    	ld	(_v0),a
1354  038A  2A 00 00    	ld	hl,(_index1)
1355  038D  E5          	push	hl
1356  038E  F5          	push	af
1357  038F  33          	inc	sp
1358  0390  CD F0 05    	call	_player_pick_item
1359  0393  F1          	pop	af
1360  0394  33          	inc	sp
1361  0395  ED 4B 00 00 	ld	bc,(_p_state)
1362  0399  0A          	ld	a,(bc)
1363  039A  E6 EF       	and	a,0xef
1364  039C  02          	ld	(bc), a
1365  039D  2A 00 00    	ld	hl,(_index1)
1366  03A0  01 40 00    	ld	bc,0x0040
1367  03A3  09          	add	hl,bc
1368  03A4  01 00 00    	ld	bc,_scr_map
1369  03A7  09          	add	hl,bc
1370  03A8  7E          	ld	a, (hl)
1371  03A9  32 00 00    	ld	(_v0),a
1372  03AC  D6 04       	sub	a,0x04
1373  03AE  20 08       	jr	NZ,l_player_collision_00102
1374  03B0  ED 4B 00 00 	ld	bc,(_p_state)
1375  03B4  0A          	ld	a,(bc)
1376  03B5  F6 10       	or	a,0x10
1377  03B7  02          	ld	(bc), a
1378  03B8              l_player_collision_00102:
1379  03B8  2A 00 00    	ld	hl,(_index1)
1380  03BB  01 41 00    	ld	bc,0x0041
1381  03BE  09          	add	hl,bc
1382  03BF  01 00 00    	ld	bc,_scr_map
1383  03C2  09          	add	hl,bc
1384  03C3  7E          	ld	a, (hl)
1385  03C4  32 00 00    	ld	(_v0),a
1386  03C7  D6 04       	sub	a,0x04
1387  03C9  20 08       	jr	NZ,l_player_collision_00104
1388  03CB  ED 4B 00 00 	ld	bc,(_p_state)
1389  03CF  0A          	ld	a,(bc)
1390  03D0  F6 10       	or	a,0x10
1391  03D2  02          	ld	(bc), a
1392  03D3              l_player_collision_00104:
1393  03D3  21 07 00    	ld	hl,+(_col + 0x0007)
1394  03D6  56          	ld	d, (hl)
1395  03D7  3A 07 00    	ld	a,(_lin + 0x0007)
1396  03DA  C6 0E       	add	a,0x0e
1397  03DC  5F          	ld	e, a
1398  03DD  D5          	push	de
1399  03DE  CD 00 00    	call	_spr_calc_index
1400  03E1  F1          	pop	af
1401  03E2  22 00 00    	ld	(_index1),hl
1402  03E5  01 00 00    	ld	bc,_scr_map
1403  03E8  09          	add	hl,bc
1404  03E9  7E          	ld	a,(hl)
1405  03EA  32 00 00    	ld	(_v0),a
1406  03ED  F5          	push	af
1407  03EE  33          	inc	sp
1408  03EF  CD 1E 06    	call	_player_pick_deadly
1409  03F2  33          	inc	sp
1410  03F3  7D          	ld	a,l
1411  03F4  32 00 00    	ld	(_v0),a
1412  03F7  2A 00 00    	ld	hl,(_index1)
1413  03FA  E5          	push	hl
1414  03FB  F5          	push	af
1415  03FC  33          	inc	sp
1416  03FD  CD F0 05    	call	_player_pick_item
1417  0400  F1          	pop	af
1418  0401  33          	inc	sp
1419  0402  7D          	ld	a,l
1420  0403  32 00 00    	ld	(_v0),a
1421  0406  3A 07 00    	ld	a,(_col + 0x0007)
1422  0409  57          	ld	d, a
1423  040A  14          	inc	d
1424  040B  21 07 00    	ld	hl,+(_lin + 0x0007)
1425  040E  5E          	ld	e, (hl)
1426  040F  D5          	push	de
1427  0410  CD 00 00    	call	_spr_calc_index
1428  0413  F1          	pop	af
1429  0414  22 00 00    	ld	(_index1),hl
1430  0417  01 00 00    	ld	bc,_scr_map
1431  041A  09          	add	hl,bc
1432  041B  7E          	ld	a,(hl)
1433  041C  32 00 00    	ld	(_v0),a
1434  041F  F5          	push	af
1435  0420  33          	inc	sp
1436  0421  CD 1E 06    	call	_player_pick_deadly
1437  0424  33          	inc	sp
1438  0425  7D          	ld	a,l
1439  0426  32 00 00    	ld	(_v0),a
1440  0429  2A 00 00    	ld	hl,(_index1)
1441  042C  E5          	push	hl
1442  042D  F5          	push	af
1443  042E  33          	inc	sp
1444  042F  CD F0 05    	call	_player_pick_item
1445  0432  F1          	pop	af
1446  0433  33          	inc	sp
1447  0434  7D          	ld	a,l
1448  0435  32 00 00    	ld	(_v0),a
1449  0438  21 07 00    	ld	hl,+(_col + 0x0007)
1450  043B  56          	ld	d, (hl)
1451  043C  14          	inc	d
1452  043D  3A 07 00    	ld	a,(_lin + 0x0007)
1453  0440  C6 0E       	add	a,0x0e
1454  0442  5F          	ld	e, a
1455  0443  D5          	push	de
1456  0444  CD 00 00    	call	_spr_calc_index
1457  0447  F1          	pop	af
1458  0448  22 00 00    	ld	(_index1),hl
1459  044B  01 00 00    	ld	bc,_scr_map
1460  044E  09          	add	hl,bc
1461  044F  7E          	ld	a,(hl)
1462  0450  32 00 00    	ld	(_v0),a
1463  0453  F5          	push	af
1464  0454  33          	inc	sp
1465  0455  CD 1E 06    	call	_player_pick_deadly
1466  0458  33          	inc	sp
1467  0459  7D          	ld	a,l
1468  045A  32 00 00    	ld	(_v0),a
1469  045D  2A 00 00    	ld	hl,(_index1)
1470  0460  E5          	push	hl
1471  0461  F5          	push	af
1472  0462  33          	inc	sp
1473  0463  CD F0 05    	call	_player_pick_item
1474  0466  F1          	pop	af
1475  0467  33          	inc	sp
1476  0468  7D          	ld	a,l
1477  0469  32 00 00    	ld	(_v0),a
1478  046C  21 00 00    	ld	hl,_i
1479  046F  36 00       	ld	(hl),0x00
1480  0471              l_player_collision_00112:
1481  0471  2A 00 00    	ld	hl,(_i)
1482  0474  26 00       	ld	h,0x00
1483  0476  01 00 00    	ld	bc,_class
1484  0479  09          	add	hl,bc
1485  047A  7E          	ld	a,(hl)
1486  047B  B7          	or	a,a
1487  047C  28 4F       	jr	Z,l_player_collision_00113
1488  047E  2A 00 00    	ld	hl,(_i)
1489  0481  26 00       	ld	h,0x00
1490  0483  01 00 00    	ld	bc,_col
1491  0486  09          	add	hl,bc
1492  0487  4E          	ld	c, (hl)
1493  0488  06 00       	ld	b,0x00
1494  048A  ED 5B 07 00 	ld	de,(_col + 0x0007)
1495  048E  50          	ld	d,b
1496  048F  79          	ld	a, c
1497  0490  93          	sub	a, e
1498  0491  6F          	ld	l, a
1499  0492  78          	ld	a, b
1500  0493  9A          	sbc	a, d
1501  0494  67          	ld	h, a
1502  0495  CD 00 00    	call	_abs_fastcall
1503  0498  7D          	ld	a,l
1504  0499  32 00 00    	ld	(_v0),a
1505  049C  D6 02       	sub	a,0x02
1506  049E  30 2D       	jr	NC,l_player_collision_00113
1507  04A0  2A 00 00    	ld	hl,(_i)
1508  04A3  26 00       	ld	h,0x00
1509  04A5  01 00 00    	ld	bc,_lin
1510  04A8  09          	add	hl,bc
1511  04A9  4E          	ld	c,(hl)
1512  04AA  06 00       	ld	b,0x00
1513  04AC  ED 5B 07 00 	ld	de,(_lin + 0x0007)
1514  04B0  50          	ld	d,b
1515  04B1  79          	ld	a, c
1516  04B2  93          	sub	a, e
1517  04B3  6F          	ld	l, a
1518  04B4  78          	ld	a, b
1519  04B5  9A          	sbc	a, d
1520  04B6  67          	ld	h, a
1521  04B7  CD 00 00    	call	_abs_fastcall
1522  04BA  7D          	ld	a,l
1523  04BB  32 00 00    	ld	(_v1),a
1524  04BE  D6 10       	sub	a,0x10
1525  04C0  30 0B       	jr	NC,l_player_collision_00113
1526  04C2  21 FF FF    	ld	hl,0xffff
1527  04C5  22 00 00    	ld	(_player_kill_index),hl
1528  04C8  21 00 00    	ld	hl,_player_killed
1529  04CB  36 01       	ld	(hl),0x01
1530  04CD              l_player_collision_00113:
1531  04CD  21 00 00    	ld	hl,_i
1532  04D0  7E          	ld	a,(hl)
1533  04D1  3C          	inc	a
1534  04D2  77          	ld	(hl),a
1535  04D3  D6 07       	sub	a,0x07
1536  04D5  38 9A       	jr	C,l_player_collision_00112
1537  04D7  C9          	ret
1538  04D8              	SECTION code_compiler
1539  04D8              ;	---------------------------------
1540  04D8              ; Function player_get_floor
1541  04D8              ; ---------------------------------
1542  04D8              _player_get_floor:
1543  04D8  21 07 00    	ld	hl,+(_col + 0x0007)
1544  04DB  56          	ld	d, (hl)
1545  04DC  3A 07 00    	ld	a,(_lin + 0x0007)
1546  04DF  C6 10       	add	a,0x10
1547  04E1  5F          	ld	e, a
1548  04E2  D5          	push	de
1549  04E3  CD 00 00    	call	_spr_calc_index
1550  04E6  F1          	pop	af
1551  04E7  22 00 00    	ld	(_index1),hl
1552  04EA  21 00 00    	ld	hl,_i
1553  04ED  36 00       	ld	(hl),0x00
1554  04EF  01 00 00    	ld	bc,_scr_map+0
1555  04F2              l_player_get_floor_00111:
1556  04F2  3A 00 00    	ld	a,(_i)
1557  04F5  D6 10       	sub	a,0x10
1558  04F7  30 65       	jr	NC,l_player_get_floor_00113
1559  04F9  2A 00 00    	ld	hl,(_index1)
1560  04FC  09          	add	hl,bc
1561  04FD  7E          	ld	a,(hl)
1562  04FE  32 00 00    	ld	(_v0),a
1563  0501  ED 5B 00 00 	ld	de,(_index1)
1564  0505  13          	inc	de
1565  0506  69          	ld	l, c
1566  0507  60          	ld	h, b
1567  0508  19          	add	hl, de
1568  0509  7E          	ld	a, (hl)
1569  050A  32 00 00    	ld	(_v1),a
1570  050D  3A 00 00    	ld	a,(_v0)
1571  0510  B7          	or	a, a
1572  0511  28 0F       	jr	Z,l_player_get_floor_00110
1573  0513  D6 08       	sub	a,0x08
1574  0515  28 0B       	jr	Z,l_player_get_floor_00110
1575  0517  3A 00 00    	ld	a,(_v0)
1576  051A  FE 05       	cp	a,0x05
1577  051C  28 04       	jr	Z,l_player_get_floor_00110
1578  051E  D6 06       	sub	a,0x06
1579  0520  20 25       	jr	NZ,l_player_get_floor_00102
1580  0522              l_player_get_floor_00110:
1581  0522  3A 00 00    	ld	a,(_v1)
1582  0525  B7          	or	a, a
1583  0526  28 0F       	jr	Z,l_player_get_floor_00101
1584  0528  D6 08       	sub	a,0x08
1585  052A  28 0B       	jr	Z,l_player_get_floor_00101
1586  052C  3A 00 00    	ld	a,(_v1)
1587  052F  FE 05       	cp	a,0x05
1588  0531  28 04       	jr	Z,l_player_get_floor_00101
1589  0533  D6 06       	sub	a,0x06
1590  0535  20 10       	jr	NZ,l_player_get_floor_00102
1591  0537              l_player_get_floor_00101:
1592  0537  2A 00 00    	ld	hl,(_index1)
1593  053A  11 20 00    	ld	de,0x0020
1594  053D  19          	add	hl,de
1595  053E  22 00 00    	ld	(_index1),hl
1596  0541  21 00 00    	ld	hl,_i
1597  0544  34          	inc	(hl)
1598  0545  18 AB       	jr	l_player_get_floor_00111
1599  0547              l_player_get_floor_00102:
1600  0547  2A 00 00    	ld	hl,(_index1)
1601  054A  4D          	ld	c,l
1602  054B  5C          	ld	e,h
1603  054C  06 05       	ld	b,0x05
1604  054E  79          	ld	a,c
1605  054F              l_player_get_floor_00156:
1606  054F  CB 3B       	srl	e
1607  0551  1F          	rra
1608  0552  10 FB       	djnz	l_player_get_floor_00156
1609  0554  07          	rlca
1610  0555  07          	rlca
1611  0556  07          	rlca
1612  0557  E6 F8       	and	a,0xf8
1613  0559  C6 F0       	add	a,0xf0
1614  055B  6F          	ld	l, a
1615  055C  18 02       	jr	l_player_get_floor_00114
1616  055E              l_player_get_floor_00113:
1617  055E  2E 68       	ld	l,0x68
1618  0560              l_player_get_floor_00114:
1619  0560  C9          	ret
1620  0561              	SECTION code_compiler
1621  0561              ;	---------------------------------
1622  0561              ; Function player_check_input
1623  0561              ; ---------------------------------
1624  0561              _player_check_input:
1625  0561  21 00 00    	ld	hl,_dirs
1626  0564  CB 56       	bit	2,(hl)
1627  0566  28 06       	jr	Z,l_player_check_input_00102
1628  0568  CB 5E       	bit	3,(hl)
1629  056A  28 02       	jr	Z,l_player_check_input_00102
1630  056C  36 00       	ld	(hl),0x00
1631  056E              l_player_check_input_00102:
1632  056E  21 00 00    	ld	hl,_dirs
1633  0571  CB 56       	bit	2,(hl)
1634  0573  20 08       	jr	NZ,l_player_check_input_00104
1635  0575  CB 5E       	bit	3,(hl)
1636  0577  20 04       	jr	NZ,l_player_check_input_00104
1637  0579  CB 7E       	bit	7, (hl)
1638  057B  28 04       	jr	Z,l_player_check_input_00105
1639  057D              l_player_check_input_00104:
1640  057D  2E 01       	ld	l,0x01
1641  057F  18 02       	jr	l_player_check_input_00108
1642  0581              l_player_check_input_00105:
1643  0581  2E 00       	ld	l,0x00
1644  0583              l_player_check_input_00108:
1645  0583  C9          	ret
1646  0584              	SECTION code_compiler
1647  0584              ;	---------------------------------
1648  0584              ; Function player_1up
1649  0584              ; ---------------------------------
1650  0584              _player_1up:
1651  0584  21 00 00    	ld	hl,_player_lives
1652  0587  7E          	ld	a, (hl)
1653  0588  D6 64       	sub	a,0x64
1654  058A  D0          	ret	NC
1655  058B  34          	inc	(hl)
1656  058C  CD 00 00    	call	_spr_flatten
1657  058F  21 00 00    	ld	hl,___str_0
1658  0592  E5          	push	hl
1659  0593  21 0C 0C    	ld	hl,0x0c0c
1660  0596  E5          	push	hl
1661  0597  CD 00 00    	call	_zx_print_str
1662  059A  AF          	xor	a, a
1663  059B  F5          	push	af
1664  059C  33          	inc	sp
1665  059D  21 19 00    	ld	hl,0x0019
1666  05A0  E5          	push	hl
1667  05A1  21 0C 11    	ld	hl,0x110c
1668  05A4  E5          	push	hl
1669  05A5  3E 0C       	ld	a,0x0c
1670  05A7  F5          	push	af
1671  05A8  33          	inc	sp
1672  05A9  CD 00 00    	call	_game_colour_message
1673  05AC  F1          	pop	af
1674  05AD  F1          	pop	af
1675  05AE  F1          	pop	af
1676  05AF  CD 00 00    	call	_game_update_stats
1677  05B2  CD 00 00    	call	_spr_unflattenP1
1678  05B5  C9          	ret
1679  05B6              	SECTION rodata_compiler
1680  0000              ___str_0:
1681  0000  31 20 55 50 21 
                        	DEFM "1 UP!"
1682  0005  00          	DEFB 0x00
1683  0006              	SECTION code_compiler
1684  05B6              ;	---------------------------------
1685  05B6              ; Function player_tile
1686  05B6              ; ---------------------------------
1687  05B6              _player_tile:
1688  05B6  CD 00 00    	call	___sdcc_enter_ix
1689  05B9  21 05 00    	ld	hl,0x0005
1690  05BC  39          	add	hl, sp
1691  05BD  EB          	ex	de,hl
1692  05BE  21 04 00    	ld	hl,0x0004
1693  05C1  39          	add	hl, sp
1694  05C2  D5          	push	de
1695  05C3  E5          	push	hl
1696  05C4  CD 00 00    	call	_spr_get_tile_dir
1697  05C7  F1          	pop	af
1698  05C8  F1          	pop	af
1699  05C9  7D          	ld	a,l
1700  05CA  32 07 00    	ld	((_tile + 0x0007)),a
1701  05CD  DD E1       	pop	ix
1702  05CF  C9          	ret
1703  05D0              	SECTION code_compiler
1704  05D0              ;	---------------------------------
1705  05D0              ; Function player_score_add
1706  05D0              ; ---------------------------------
1707  05D0              _player_score_add:
1708  05D0  ED 4B 00 00 	ld	bc,(_player_score)
1709  05D4  09          	add	hl,bc
1710  05D5  22 00 00    	ld	(_player_score),hl
1711  05D8  3A 00 00    	ld	a,(_game_score_top)
1712  05DB  21 00 00    	ld	hl,_player_score
1713  05DE  96          	sub	a, (hl)
1714  05DF  3A 01 00    	ld	a,(_game_score_top + 1)
1715  05E2  23          	inc	hl
1716  05E3  9E          	sbc	a, (hl)
1717  05E4  D2 00 00    	jp	NC,_game_print_score
1718  05E7  2A 00 00    	ld	hl,(_player_score)
1719  05EA  22 00 00    	ld	(_game_score_top),hl
1720  05ED  C3 00 00    	jp  _game_print_score
1721  05F0              	SECTION code_compiler
1722  05F0              ;	---------------------------------
1723  05F0              ; Function player_pick_item
1724  05F0              ; ---------------------------------
1725  05F0              _player_pick_item:
1726  05F0  CD 00 00    	call	___sdcc_enter_ix
1727  05F3  DD 7E 04    	ld	a,(ix+4)
1728  05F6  D6 08       	sub	a,0x08
1729  05F8  20 1E       	jr	NZ,l_player_pick_item_00102
1730  05FA  3E 00       	ld	a, +((_scr_map) & 0xFF)
1731  05FC  DD 86 05    	add	a,(ix+5)
1732  05FF  4F          	ld	c, a
1733  0600  3E 00       	ld	a, +((_scr_map) / 256)
1734  0602  DD 8E 06    	adc	a,(ix+6)
1735  0605  47          	ld	b, a
1736  0606  AF          	xor	a, a
1737  0607  02          	ld	(bc), a
1738  0608  21 00 00    	ld	hl,_player_coins
1739  060B  34          	inc	(hl)
1740  060C  2E 06       	ld	l,0x06
1741  060E  CD 00 00    	call	_zx_border_fastcall
1742  0611  CD 00 00    	call	_audio_coin
1743  0614  2E 00       	ld	l,0x00
1744  0616  18 03       	jr	l_player_pick_item_00103
1745  0618              l_player_pick_item_00102:
1746  0618  DD 6E 04    	ld	l,(ix+4)
1747  061B              l_player_pick_item_00103:
1748  061B  DD E1       	pop	ix
1749  061D  C9          	ret
1750  061E              	SECTION code_compiler
1751  061E              ;	---------------------------------
1752  061E              ; Function player_pick_deadly
1753  061E              ; ---------------------------------
1754  061E              _player_pick_deadly:
1755  061E  CD 00 00    	call	___sdcc_enter_ix
1756  0621  DD 7E 04    	ld	a,(ix+4)
1757  0624  D6 05       	sub	a,0x05
1758  0626  28 07       	jr	Z,l_player_pick_deadly_00101
1759  0628  DD 7E 04    	ld	a,(ix+4)
1760  062B  D6 06       	sub	a,0x06
1761  062D  20 1E       	jr	NZ,l_player_pick_deadly_00102
1762  062F              l_player_pick_deadly_00101:
1763  062F  21 00 00    	ld	hl,_player_killed
1764  0632  36 01       	ld	(hl),0x01
1765  0634  2A 00 00    	ld	hl,(_index1)
1766  0637  22 00 00    	ld	(_player_kill_index),hl
1767  063A  2E 02       	ld	l,0x02
1768  063C  CD 00 00    	call	_zx_border_fastcall
1769  063F  21 00 00    	ld	hl,_v0
1770  0642  36 00       	ld	(hl),0x00
1771  0644  21 00 00    	ld	hl,_v1
1772  0647  36 00       	ld	(hl),0x00
1773  0649  2E 00       	ld	l,0x00
1774  064B  18 03       	jr	l_player_pick_deadly_00104
1775  064D              l_player_pick_deadly_00102:
1776  064D  DD 6E 04    	ld	l,(ix+4)
1777  0650              l_player_pick_deadly_00104:
1778  0650  DD E1       	pop	ix
1779  0652  C9          	ret
1780  0653              	SECTION code_compiler
1781  0653              ;	---------------------------------
1782  0653              ; Function player_check_ceil
1783  0653              ; ---------------------------------
1784  0653              _player_check_ceil:
1785  0653  CD 00 00    	call	___sdcc_enter_ix
1786  0656  3A 07 00    	ld	a,(_colint + 0x0007)
1787  0659  D6 03       	sub	a,0x03
1788  065B  30 18       	jr	NC,l_player_check_ceil_00102
1789  065D  DD 66 05    	ld	h,(ix+5)
1790  0660  DD 6E 04    	ld	l,(ix+4)
1791  0663  E5          	push	hl
1792  0664  CD 00 00    	call	_spr_calc_index
1793  0667  F1          	pop	af
1794  0668  22 00 00    	ld	(_index1),hl
1795  066B  01 00 00    	ld	bc,_scr_map
1796  066E  09          	add	hl,bc
1797  066F  7E          	ld	a,(hl)
1798  0670  32 00 00    	ld	(_v0),a
1799  0673  18 05       	jr	l_player_check_ceil_00103
1800  0675              l_player_check_ceil_00102:
1801  0675  21 00 00    	ld	hl,_v0
1802  0678  36 00       	ld	(hl),0x00
1803  067A              l_player_check_ceil_00103:
1804  067A  3A 07 00    	ld	a,(_colint + 0x0007)
1805  067D  B7          	or	a, a
1806  067E  28 19       	jr	Z,l_player_check_ceil_00105
1807  0680  DD 46 05    	ld	b,(ix+5)
1808  0683  04          	inc	b
1809  0684  DD 4E 04    	ld	c,(ix+4)
1810  0687  C5          	push	bc
1811  0688  CD 00 00    	call	_spr_calc_index
1812  068B  F1          	pop	af
1813  068C  22 00 00    	ld	(_index1),hl
1814  068F  01 00 00    	ld	bc,_scr_map
1815  0692  09          	add	hl,bc
1816  0693  7E          	ld	a,(hl)
1817  0694  32 00 00    	ld	(_v1),a
1818  0697  18 05       	jr	l_player_check_ceil_00106
1819  0699              l_player_check_ceil_00105:
1820  0699  21 00 00    	ld	hl,_v1
1821  069C  36 00       	ld	(hl),0x00
1822  069E              l_player_check_ceil_00106:
1823  069E  3A 00 00    	ld	a,(_v0)
1824  06A1  D6 03       	sub	a,0x03
1825  06A3  28 0B       	jr	Z,l_player_check_ceil_00108
1826  06A5  3A 00 00    	ld	a,(_v1)
1827  06A8  D6 03       	sub	a,0x03
1828  06AA  28 04       	jr	Z,l_player_check_ceil_00108
1829  06AC  2E 01       	ld	l,0x01
1830  06AE  18 02       	jr	l_player_check_ceil_00110
1831  06B0              l_player_check_ceil_00108:
1832  06B0  2E 00       	ld	l,0x00
1833  06B2              l_player_check_ceil_00110:
1834  06B2  DD E1       	pop	ix
1835  06B4  C9          	ret
1836  06B5              	SECTION code_compiler
1837  06B5              ;	---------------------------------
1838  06B5              ; Function player_check_floor_walk
1839  06B5              ; ---------------------------------
1840  06B5              _player_check_floor_walk:
1841  06B5  CD 00 00    	call	___sdcc_enter_ix
1842  06B8  F5          	push	af
1843  06B9  F5          	push	af
1844  06BA  3A 07 00    	ld	a,(_col + 0x0007)
1845  06BD  DD 86 04    	add	a,(ix+4)
1846  06C0  57          	ld	d, a
1847  06C1  3A 07 00    	ld	a,(_lin + 0x0007)
1848  06C4  C6 10       	add	a,0x10
1849  06C6  5F          	ld	e, a
1850  06C7  D5          	push	de
1851  06C8  CD 00 00    	call	_spr_calc_index
1852  06CB  F1          	pop	af
1853  06CC  22 00 00    	ld	(_index1),hl
1854  06CF  3E 00       	ld	a,+((_scr_map) & 0xFF)
1855  06D1  21 00 00    	ld	hl,_index1
1856  06D4  86          	add	a, (hl)
1857  06D5  DD 77 FE    	ld	(ix-2),a
1858  06D8  3E 00       	ld	a, +((_scr_map) / 256)
1859  06DA  23          	inc	hl
1860  06DB  8E          	adc	a, (hl)
1861  06DC  DD 6E FE    	ld	l,(ix-2)
1862  06DF  DD 77 FF    	ld	(ix-1),a
1863  06E2  67          	ld	h,a
1864  06E3  7E          	ld	a, (hl)
1865  06E4  DD 77 FD    	ld	(ix-3),a
1866  06E7  32 00 00    	ld	(_v0),a
1867  06EA  B7          	or	a,a
1868  06EB  28 0F       	jr	Z,l_player_check_floor_walk_00101
1869  06ED  D6 08       	sub	a,0x08
1870  06EF  28 0B       	jr	Z,l_player_check_floor_walk_00101
1871  06F1  3A 00 00    	ld	a,(_v0)
1872  06F4  FE 05       	cp	a,0x05
1873  06F6  28 04       	jr	Z,l_player_check_floor_walk_00101
1874  06F8  D6 06       	sub	a,0x06
1875  06FA  20 05       	jr	NZ,l_player_check_floor_walk_00102
1876  06FC              l_player_check_floor_walk_00101:
1877  06FC  2E 01       	ld	l,0x01
1878  06FE  C3 AB 07    	jp	l_player_check_floor_walk_00116
1879  0701              l_player_check_floor_walk_00102:
1880  0701  3A 00 00    	ld	a,(_v0)
1881  0704  D6 02       	sub	a,0x02
1882  0706  20 04       	jr	NZ,l_player_check_floor_walk_00150
1883  0708  3E 01       	ld	a,0x01
1884  070A  18 01       	jr	l_player_check_floor_walk_00151
1885  070C              l_player_check_floor_walk_00150:
1886  070C  AF          	xor	a,a
1887  070D              l_player_check_floor_walk_00151:
1888  070D  DD 77 FC    	ld	(ix-4),a
1889  0710  B7          	or	a, a
1890  0711  20 08       	jr	NZ,l_player_check_floor_walk_00111
1891  0713  3A 00 00    	ld	a,(_v0)
1892  0716  D6 09       	sub	a,0x09
1893  0718  DA 9A 07    	jp	C, l_player_check_floor_walk_00112
1894  071B              l_player_check_floor_walk_00111:
1895  071B  3A 07 00    	ld	a,(_col + 0x0007)
1896  071E  DD 86 04    	add	a,(ix+4)
1897  0721  32 00 00    	ld	(_s_col1),a
1898  0724  DD 7E FC    	ld	a,(ix-4)
1899  0727  B7          	or	a, a
1900  0728  28 0A       	jr	Z,l_player_check_floor_walk_00109
1901  072A  DD 6E FE    	ld	l,(ix-2)
1902  072D  DD 66 FF    	ld	h,(ix-1)
1903  0730  36 09       	ld	(hl),0x09
1904  0732  18 33       	jr	l_player_check_floor_walk_00110
1905  0734              l_player_check_floor_walk_00109:
1906  0734  DD 7E FD    	ld	a,(ix-3)
1907  0737  3C          	inc	a
1908  0738  DD 77 FC    	ld	(ix-4),a
1909  073B  DD 6E FE    	ld	l,(ix-2)
1910  073E  DD 66 FF    	ld	h,(ix-1)
1911  0741  DD 7E FC    	ld	a,(ix-4)
1912  0744  77          	ld	(hl), a
1913  0745  3E 00       	ld	a, +((_scr_map) & 0xFF)
1914  0747  21 00 00    	ld	hl,_index1
1915  074A  86          	add	a, (hl)
1916  074B  DD 77 FE    	ld	(ix-2),a
1917  074E  3E 00       	ld	a, +((_scr_map) / 256)
1918  0750  23          	inc	hl
1919  0751  8E          	adc	a, (hl)
1920  0752  DD 6E FE    	ld	l,(ix-2)
1921  0755  DD 77 FF    	ld	(ix-1),a
1922  0758  67          	ld	h,a
1923  0759  4E          	ld	c, (hl)
1924  075A  3E 0B       	ld	a,0x0b
1925  075C  91          	sub	a, c
1926  075D  30 08       	jr	NC,l_player_check_floor_walk_00110
1927  075F  DD 6E FE    	ld	l,(ix-2)
1928  0762  DD 66 FF    	ld	h,(ix-1)
1929  0765  36 00       	ld	(hl),0x00
1930  0767              l_player_check_floor_walk_00110:
1931  0767  2A 07 00    	ld	hl,(_lin + 0x0007)
1932  076A  26 00       	ld	h,0x00
1933  076C  01 10 00    	ld	bc,0x0010
1934  076F  09          	add	hl,bc
1935  0770  06 03       	ld	b,0x03
1936  0772              l_player_check_floor_walk_00152:
1937  0772  CB 2C       	sra	h
1938  0774  CB 1D       	rr	l
1939  0776  10 FA       	djnz	l_player_check_floor_walk_00152
1940  0778  2C          	inc	l
1941  0779  7D          	ld	a, l
1942  077A  07          	rlca
1943  077B  07          	rlca
1944  077C  07          	rlca
1945  077D  E6 F8       	and	a,0xf8
1946  077F  32 00 00    	ld	(_s_row1),a
1947  0782  01 00 00    	ld	bc,_scr_map
1948  0785  2A 00 00    	ld	hl,(_index1)
1949  0788  09          	add	hl,bc
1950  0789  46          	ld	b, (hl)
1951  078A  3A 00 00    	ld	a,(_s_col1)
1952  078D  F5          	push	af
1953  078E  33          	inc	sp
1954  078F  3A 00 00    	ld	a,(_s_row1)
1955  0792  48          	ld	c,b
1956  0793  47          	ld	b,a
1957  0794  C5          	push	bc
1958  0795  CD 00 00    	call	_game_sprite_draw8
1959  0798  F1          	pop	af
1960  0799  33          	inc	sp
1961  079A              l_player_check_floor_walk_00112:
1962  079A  3A 00 00    	ld	a,(_v0)
1963  079D  D6 04       	sub	a,0x04
1964  079F  20 08       	jr	NZ,l_player_check_floor_walk_00115
1965  07A1  ED 4B 00 00 	ld	bc,(_p_state)
1966  07A5  0A          	ld	a,(bc)
1967  07A6  F6 10       	or	a,0x10
1968  07A8  02          	ld	(bc), a
1969  07A9              l_player_check_floor_walk_00115:
1970  07A9  2E 00       	ld	l,0x00
1971  07AB              l_player_check_floor_walk_00116:
1972  07AB  DD F9       	ld	sp, ix
1973  07AD  DD E1       	pop	ix
1974  07AF  C9          	ret
1975  07B0              	SECTION code_compiler
1976  07B0              ;	---------------------------------
1977  07B0              ; Function player_lost_life
1978  07B0              ; ---------------------------------
1979  07B0              _player_lost_life:
1980  07B0  CD 00 00    	call	___sdcc_enter_ix
1981  07B3  F5          	push	af
1982  07B4  CD 00 00    	call	_ay_reset
1983  07B7  CD 00 00    	call	_audio_explosion
1984  07BA  CD 00 00    	call	_game_update_stats
1985  07BD  4F          	ld	c, a
1986  07BE              l_player_lost_life_00104:
1987  07BE  79          	ld	a, c
1988  07BF  D6 20       	sub	a,0x20
1989  07C1  30 7C       	jr	NC,l_player_lost_life_00106
1990  07C3  21 00 00    	ld	hl,_player_kill_index
1991  07C6  7E          	ld	a, (hl)
1992  07C7  3C          	inc	a
1993  07C8  20 05       	jr	NZ,l_player_lost_life_00147
1994  07CA  23          	inc	hl
1995  07CB  7E          	ld	a, (hl)
1996  07CC  3C          	inc	a
1997  07CD  28 3D       	jr	Z,l_player_lost_life_00102
1998  07CF              l_player_lost_life_00147:
1999  07CF  2A 00 00    	ld	hl,(_player_kill_index)
2000  07D2  22 00 00    	ld	(_index1),hl
2001  07D5  21 07 00    	ld	hl,+(_col + 0x0007)
2002  07D8  56          	ld	d, (hl)
2003  07D9  3A 07 00    	ld	a,(_lin + 0x0007)
2004  07DC  C6 10       	add	a,0x10
2005  07DE  5F          	ld	e, a
2006  07DF  3A 07 00    	ld	a,(_tile + 0x0007)
2007  07E2  DD 77 FF    	ld	(ix-1),a
2008  07E5  2A 07 00    	ld	hl,(_colint + 0x0007)
2009  07E8  DD 7E FF    	ld	a,(ix-1)
2010  07EB  85          	add	a, l
2011  07EC  47          	ld	b, a
2012  07ED  C5          	push	bc
2013  07EE  D5          	push	de
2014  07EF  0E 07       	ld	c,0x07
2015  07F1  C5          	push	bc
2016  07F2  CD 00 00    	call	_NIRVANAP_spriteT_callee
2017  07F5  C1          	pop	bc
2018  07F6  76          	halt
2019  07F7  C5          	push	bc
2020  07F8  21 00 00    	ld	hl,0x0000
2021  07FB  E5          	push	hl
2022  07FC  2E 07       	ld	l,0x07
2023  07FE  E5          	push	hl
2024  07FF  CD 00 00    	call	_NIRVANAP_spriteT_callee
2025  0802  C1          	pop	bc
2026  0803  76          	halt
2027  0804  C5          	push	bc
2028  0805  CD 00 00    	call	_game_cell_paint_index
2029  0808  C1          	pop	bc
2030  0809  76          	halt
2031  080A  18 2A       	jr	l_player_lost_life_00103
2032  080C              l_player_lost_life_00102:
2033  080C  21 07 00    	ld	hl,+(_col + 0x0007)
2034  080F  46          	ld	b, (hl)
2035  0810  3A 07 00    	ld	a,(_lin + 0x0007)
2036  0813  C6 10       	add	a,0x10
2037  0815  57          	ld	d, a
2038  0816  3A 07 00    	ld	a,(_tile + 0x0007)
2039  0819  2A 07 00    	ld	hl, (_colint + 0x0007)
2040  081C  85          	add	a, l
2041  081D  C5          	push	bc
2042  081E  4A          	ld	c, d
2043  081F  C5          	push	bc
2044  0820  57          	ld	d,a
2045  0821  1E 07       	ld	e,0x07
2046  0823  D5          	push	de
2047  0824  CD 00 00    	call	_NIRVANAP_spriteT_callee
2048  0827  C1          	pop	bc
2049  0828  76          	halt
2050  0829  C5          	push	bc
2051  082A  21 00 00    	ld	hl,0x0000
2052  082D  E5          	push	hl
2053  082E  2E 07       	ld	l,0x07
2054  0830  E5          	push	hl
2055  0831  CD 00 00    	call	_NIRVANAP_spriteT_callee
2056  0834  C1          	pop	bc
2057  0835  76          	halt
2058  0836              l_player_lost_life_00103:
2059  0836  C5          	push	bc
2060  0837  CD 00 00    	call	_game_rotate_attrib
2061  083A  C1          	pop	bc
2062  083B  0C          	inc	c
2063  083C  C3 BE 07    	jp	l_player_lost_life_00104
2064  083F              l_player_lost_life_00106:
2065  083F  3A 07 00    	ld	a,(_lin + 0x0007)
2066  0842  32 00 00    	ld	(_s_lin0),a
2067  0845  3A 07 00    	ld	a,(_col + 0x0007)
2068  0848  32 00 00    	ld	(_s_col0),a
2069  084B  CD 00 00    	call	_spr_init_effects
2070  084E  06 00       	ld	b,0x00
2071  0850              l_player_lost_life_00113:
2072  0850  C5          	push	bc
2073  0851  21 00 00    	ld	hl,0x0000
2074  0854  E5          	push	hl
2075  0855  AF          	xor	a, a
2076  0856  48          	ld	c,b
2077  0857  47          	ld	b,a
2078  0858  C5          	push	bc
2079  0859  CD 00 00    	call	_NIRVANAP_spriteT_callee
2080  085C  C1          	pop	bc
2081  085D  04          	inc	b
2082  085E  3E 07       	ld	a,0x07
2083  0860  90          	sub	a, b
2084  0861  30 ED       	jr	NC,l_player_lost_life_00113
2085  0863  3A 00 00    	ld	a,(_game_inf_lives)
2086  0866  B7          	or	a, a
2087  0867  20 04       	jr	NZ,l_player_lost_life_00109
2088  0869  21 00 00    	ld	hl,_player_lives
2089  086C  35          	dec	(hl)
2090  086D              l_player_lost_life_00109:
2091  086D  3A 00 00    	ld	a,(_player_lives)
2092  0870  B7          	or	a, a
2093  0871  28 05       	jr	Z,l_player_lost_life_00111
2094  0873  CD 00 00    	call	_game_round_init
2095  0876  18 0A       	jr	l_player_lost_life_00115
2096  0878              l_player_lost_life_00111:
2097  0878  21 00 00    	ld	hl,_player_lives
2098  087B  36 00       	ld	(hl),0x00
2099  087D  21 00 00    	ld	hl,_game_over
2100  0880  36 01       	ld	(hl),0x01
2101  0882              l_player_lost_life_00115:
2102  0882  F1          	pop	af
2103  0883  DD E1       	pop	ix
2104  0885  C9          	ret
2105  0886              	SECTION IGNORE
2106  0000              
