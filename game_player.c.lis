1     0000              MODULE game_player_c
2     0000              LINE 0, "game_player.c"
0     0000              
1     0000              ;--------------------------------------------------------
2     0000              ; File Created by SDCC : free open source ANSI-C Compiler
3     0000              ; Version 3.6.9 #9958 (Mac OS X i386)
4     0000              ;--------------------------------------------------------
5     0000              ; Processed by Z88DK
6     0000              ;--------------------------------------------------------
7     0000              
8     0000              	EXTERN __divschar
9     0000              	EXTERN __divschar_callee
10    0000              	EXTERN __divsint
11    0000              	EXTERN __divsint_callee
12    0000              	EXTERN __divslong
13    0000              	EXTERN __divslong_callee
14    0000              	EXTERN __divslonglong
15    0000              	EXTERN __divslonglong_callee
16    0000              	EXTERN __divsuchar
17    0000              	EXTERN __divsuchar_callee
18    0000              	EXTERN __divuchar
19    0000              	EXTERN __divuchar_callee
20    0000              	EXTERN __divuint
21    0000              	EXTERN __divuint_callee
22    0000              	EXTERN __divulong
23    0000              	EXTERN __divulong_callee
24    0000              	EXTERN __divulonglong
25    0000              	EXTERN __divulonglong_callee
26    0000              	EXTERN __divuschar
27    0000              	EXTERN __divuschar_callee
28    0000              	EXTERN __modschar
29    0000              	EXTERN __modschar_callee
30    0000              	EXTERN __modsint
31    0000              	EXTERN __modsint_callee
32    0000              	EXTERN __modslong
33    0000              	EXTERN __modslong_callee
34    0000              	EXTERN __modslonglong
35    0000              	EXTERN __modslonglong_callee
36    0000              	EXTERN __modsuchar
37    0000              	EXTERN __modsuchar_callee
38    0000              	EXTERN __moduchar
39    0000              	EXTERN __moduchar_callee
40    0000              	EXTERN __moduint
41    0000              	EXTERN __moduint_callee
42    0000              	EXTERN __modulong
43    0000              	EXTERN __modulong_callee
44    0000              	EXTERN __modulonglong
45    0000              	EXTERN __modulonglong_callee
46    0000              	EXTERN __moduschar
47    0000              	EXTERN __moduschar_callee
48    0000              	EXTERN __mulint
49    0000              	EXTERN __mulint_callee
50    0000              	EXTERN __mullong
51    0000              	EXTERN __mullong_callee
52    0000              	EXTERN __mullonglong
53    0000              	EXTERN __mullonglong_callee
54    0000              	EXTERN __mulschar
55    0000              	EXTERN __mulschar_callee
56    0000              	EXTERN __mulsuchar
57    0000              	EXTERN __mulsuchar_callee
58    0000              	EXTERN __muluschar
59    0000              	EXTERN __muluschar_callee
60    0000              	EXTERN __rlslonglong
61    0000              	EXTERN __rlslonglong_callee
62    0000              	EXTERN __rlulonglong
63    0000              	EXTERN __rlulonglong_callee
64    0000              	EXTERN __rrslonglong
65    0000              	EXTERN __rrslonglong_callee
66    0000              	EXTERN __rrulonglong
67    0000              	EXTERN __rrulonglong_callee
68    0000              	EXTERN ___sdcc_call_hl
69    0000              	EXTERN ___sdcc_call_iy
70    0000              	EXTERN ___sdcc_enter_ix
71    0000              	EXTERN _banked_call
72    0000              	EXTERN _banked_ret
73    0000              	EXTERN ___fs2schar
74    0000              	EXTERN ___fs2schar_callee
75    0000              	EXTERN ___fs2sint
76    0000              	EXTERN ___fs2sint_callee
77    0000              	EXTERN ___fs2slong
78    0000              	EXTERN ___fs2slong_callee
79    0000              	EXTERN ___fs2slonglong
80    0000              	EXTERN ___fs2slonglong_callee
81    0000              	EXTERN ___fs2uchar
82    0000              	EXTERN ___fs2uchar_callee
83    0000              	EXTERN ___fs2uint
84    0000              	EXTERN ___fs2uint_callee
85    0000              	EXTERN ___fs2ulong
86    0000              	EXTERN ___fs2ulong_callee
87    0000              	EXTERN ___fs2ulonglong
88    0000              	EXTERN ___fs2ulonglong_callee
89    0000              	EXTERN ___fsadd
90    0000              	EXTERN ___fsadd_callee
91    0000              	EXTERN ___fsdiv
92    0000              	EXTERN ___fsdiv_callee
93    0000              	EXTERN ___fseq
94    0000              	EXTERN ___fseq_callee
95    0000              	EXTERN ___fsgt
96    0000              	EXTERN ___fsgt_callee
97    0000              	EXTERN ___fslt
98    0000              	EXTERN ___fslt_callee
99    0000              	EXTERN ___fsmul
100   0000              	EXTERN ___fsmul_callee
101   0000              	EXTERN ___fsneq
102   0000              	EXTERN ___fsneq_callee
103   0000              	EXTERN ___fssub
104   0000              	EXTERN ___fssub_callee
105   0000              	EXTERN ___schar2fs
106   0000              	EXTERN ___schar2fs_callee
107   0000              	EXTERN ___sint2fs
108   0000              	EXTERN ___sint2fs_callee
109   0000              	EXTERN ___slong2fs
110   0000              	EXTERN ___slong2fs_callee
111   0000              	EXTERN ___slonglong2fs
112   0000              	EXTERN ___slonglong2fs_callee
113   0000              	EXTERN ___uchar2fs
114   0000              	EXTERN ___uchar2fs_callee
115   0000              	EXTERN ___uint2fs
116   0000              	EXTERN ___uint2fs_callee
117   0000              	EXTERN ___ulong2fs
118   0000              	EXTERN ___ulong2fs_callee
119   0000              	EXTERN ___ulonglong2fs
120   0000              	EXTERN ___ulonglong2fs_callee
121   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_deix
122   0000              	EXTERN ____sdcc_2_copy_src_mhl_dst_bcix
123   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_deix
124   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_bcix
125   0000              	EXTERN ____sdcc_4_copy_src_mhl_dst_mbc
126   0000              	EXTERN ____sdcc_4_ldi_nosave_bc
127   0000              	EXTERN ____sdcc_4_ldi_save_bc
128   0000              	EXTERN ____sdcc_4_push_hlix
129   0000              	EXTERN ____sdcc_4_push_mhl
130   0000              	EXTERN ____sdcc_lib_setmem_hl
131   0000              	EXTERN ____sdcc_ll_add_de_bc_hl
132   0000              	EXTERN ____sdcc_ll_add_de_bc_hlix
133   0000              	EXTERN ____sdcc_ll_add_de_hlix_bc
134   0000              	EXTERN ____sdcc_ll_add_de_hlix_bcix
135   0000              	EXTERN ____sdcc_ll_add_deix_bc_hl
136   0000              	EXTERN ____sdcc_ll_add_deix_hlix
137   0000              	EXTERN ____sdcc_ll_add_hlix_bc_deix
138   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bc
139   0000              	EXTERN ____sdcc_ll_add_hlix_deix_bcix
140   0000              	EXTERN ____sdcc_ll_asr_hlix_a
141   0000              	EXTERN ____sdcc_ll_asr_mbc_a
142   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlix
143   0000              	EXTERN ____sdcc_ll_copy_src_de_dst_hlsp
144   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hl
145   0000              	EXTERN ____sdcc_ll_copy_src_deix_dst_hlix
146   0000              	EXTERN ____sdcc_ll_copy_src_deixm_dst_hlsp
147   0000              	EXTERN ____sdcc_ll_copy_src_desp_dst_hlsp
148   0000              	EXTERN ____sdcc_ll_copy_src_hl_dst_de
149   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_de
150   0000              	EXTERN ____sdcc_ll_copy_src_hlsp_dst_deixm
151   0000              	EXTERN ____sdcc_ll_lsl_hlix_a
152   0000              	EXTERN ____sdcc_ll_lsl_mbc_a
153   0000              	EXTERN ____sdcc_ll_lsr_hlix_a
154   0000              	EXTERN ____sdcc_ll_lsr_mbc_a
155   0000              	EXTERN ____sdcc_ll_push_hlix
156   0000              	EXTERN ____sdcc_ll_push_mhl
157   0000              	EXTERN ____sdcc_ll_sub_de_bc_hl
158   0000              	EXTERN ____sdcc_ll_sub_de_bc_hlix
159   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bc
160   0000              	EXTERN ____sdcc_ll_sub_de_hlix_bcix
161   0000              	EXTERN ____sdcc_ll_sub_deix_bc_hl
162   0000              	EXTERN ____sdcc_ll_sub_deix_hlix
163   0000              	EXTERN ____sdcc_ll_sub_hlix_bc_deix
164   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bc
165   0000              	EXTERN ____sdcc_ll_sub_hlix_deix_bcix
166   0000              	EXTERN ____sdcc_load_debc_deix
167   0000              	EXTERN ____sdcc_load_dehl_deix
168   0000              	EXTERN ____sdcc_load_debc_mhl
169   0000              	EXTERN ____sdcc_load_hlde_mhl
170   0000              	EXTERN ____sdcc_store_dehl_bcix
171   0000              	EXTERN ____sdcc_store_debc_hlix
172   0000              	EXTERN ____sdcc_store_debc_mhl
173   0000              	EXTERN ____sdcc_cpu_pop_ei
174   0000              	EXTERN ____sdcc_cpu_pop_ei_jp
175   0000              	EXTERN ____sdcc_cpu_push_di
176   0000              	EXTERN ____sdcc_outi
177   0000              	EXTERN ____sdcc_outi_128
178   0000              	EXTERN ____sdcc_outi_256
179   0000              	EXTERN ____sdcc_ldi
180   0000              	EXTERN ____sdcc_ldi_128
181   0000              	EXTERN ____sdcc_ldi_256
182   0000              	EXTERN ____sdcc_4_copy_srcd_hlix_dst_deix
183   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_deix
184   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_deix
185   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_deix
186   0000              	EXTERN ____sdcc_4_or_src_dehl_dst_bcix
187   0000              	EXTERN ____sdcc_4_xor_src_dehl_dst_bcix
188   0000              	EXTERN ____sdcc_4_and_src_dehl_dst_bcix
189   0000              	EXTERN ____sdcc_4_xor_src_mbc_mhl_dst_debc
190   0000              	EXTERN ____sdcc_4_or_src_mbc_mhl_dst_debc
191   0000              	EXTERN ____sdcc_4_and_src_mbc_mhl_dst_debc
192   0000              	EXTERN ____sdcc_4_cpl_src_mhl_dst_debc
193   0000              	EXTERN ____sdcc_4_xor_src_debc_mhl_dst_debc
194   0000              	EXTERN ____sdcc_4_or_src_debc_mhl_dst_debc
195   0000              	EXTERN ____sdcc_4_and_src_debc_mhl_dst_debc
196   0000              	EXTERN ____sdcc_4_and_src_debc_hlix_dst_debc
197   0000              	EXTERN ____sdcc_4_or_src_debc_hlix_dst_debc
198   0000              	EXTERN ____sdcc_4_xor_src_debc_hlix_dst_debc
199   0000              
200   0000              ;--------------------------------------------------------
201   0000              ; Public variables in this module
202   0000              ;--------------------------------------------------------
203   0000              	GLOBAL _player_get_floor
204   0000              	GLOBAL _player_collision
205   0000              	GLOBAL _player_check_conveyor_int
206   0000              	GLOBAL _player_check_conveyor
207   0000              	GLOBAL _player_handle_fall
208   0000              	GLOBAL _player_handle_walk
209   0000              	GLOBAL _player_handle_lock
210   0000              	GLOBAL _player_check_exit
211   0000              	GLOBAL _player_debug_keys
212   0000              	GLOBAL _player_init
213   0000              	GLOBAL _player_turn
214   0000              	GLOBAL _player_move
215   0000              	GLOBAL _player_move_jump
216   0000              	GLOBAL _player_move_walk
217   0000              	GLOBAL _player_handle_conveyor
218   0000              	GLOBAL _player_new_jump
219   0000              	GLOBAL _player_pick
220   0000              	GLOBAL _player_check_input
221   0000              	GLOBAL _player_tile
222   0000              	GLOBAL _player_score_add
223   0000              	GLOBAL _player_pick_item
224   0000              	GLOBAL _player_pick_deadly
225   0000              	GLOBAL _player_pick_extra
226   0000              	GLOBAL _player_check_ceil
227   0000              	GLOBAL _player_crumble
228   0000              	GLOBAL _player_check_floor
229   0000              	GLOBAL _player_lost_life
230   0000              ;--------------------------------------------------------
231   0000              ; Externals used
232   0000              ;--------------------------------------------------------
233   0000              	GLOBAL _ulltoa_callee
234   0000              	GLOBAL _ulltoa
235   0000              	GLOBAL _strtoull_callee
236   0000              	GLOBAL _strtoull
237   0000              	GLOBAL _strtoll_callee
238   0000              	GLOBAL _strtoll
239   0000              	GLOBAL _lltoa_callee
240   0000              	GLOBAL _lltoa
241   0000              	GLOBAL _llabs_callee
242   0000              	GLOBAL _llabs
243   0000              	GLOBAL __lldivu__callee
244   0000              	GLOBAL __lldivu_
245   0000              	GLOBAL __lldiv__callee
246   0000              	GLOBAL __lldiv_
247   0000              	GLOBAL _atoll_callee
248   0000              	GLOBAL _atoll
249   0000              	GLOBAL _realloc_unlocked_callee
250   0000              	GLOBAL _realloc_unlocked
251   0000              	GLOBAL _malloc_unlocked_fastcall
252   0000              	GLOBAL _malloc_unlocked
253   0000              	GLOBAL _free_unlocked_fastcall
254   0000              	GLOBAL _free_unlocked
255   0000              	GLOBAL _calloc_unlocked_callee
256   0000              	GLOBAL _calloc_unlocked
257   0000              	GLOBAL _aligned_alloc_unlocked_callee
258   0000              	GLOBAL _aligned_alloc_unlocked
259   0000              	GLOBAL _realloc_callee
260   0000              	GLOBAL _realloc
261   0000              	GLOBAL _malloc_fastcall
262   0000              	GLOBAL _malloc
263   0000              	GLOBAL _free_fastcall
264   0000              	GLOBAL _free
265   0000              	GLOBAL _calloc_callee
266   0000              	GLOBAL _calloc
267   0000              	GLOBAL _aligned_alloc_callee
268   0000              	GLOBAL _aligned_alloc
269   0000              	GLOBAL _utoa_callee
270   0000              	GLOBAL _utoa
271   0000              	GLOBAL _ultoa_callee
272   0000              	GLOBAL _ultoa
273   0000              	GLOBAL _system_fastcall
274   0000              	GLOBAL _system
275   0000              	GLOBAL _strtoul_callee
276   0000              	GLOBAL _strtoul
277   0000              	GLOBAL _strtol_callee
278   0000              	GLOBAL _strtol
279   0000              	GLOBAL _strtof_callee
280   0000              	GLOBAL _strtof
281   0000              	GLOBAL _strtod_callee
282   0000              	GLOBAL _strtod
283   0000              	GLOBAL _srand_fastcall
284   0000              	GLOBAL _srand
285   0000              	GLOBAL _rand
286   0000              	GLOBAL _quick_exit_fastcall
287   0000              	GLOBAL _quick_exit
288   0000              	GLOBAL _qsort_callee
289   0000              	GLOBAL _qsort
290   0000              	GLOBAL _ltoa_callee
291   0000              	GLOBAL _ltoa
292   0000              	GLOBAL _labs_fastcall
293   0000              	GLOBAL _labs
294   0000              	GLOBAL _itoa_callee
295   0000              	GLOBAL _itoa
296   0000              	GLOBAL _ftoh_callee
297   0000              	GLOBAL _ftoh
298   0000              	GLOBAL _ftog_callee
299   0000              	GLOBAL _ftog
300   0000              	GLOBAL _ftoe_callee
301   0000              	GLOBAL _ftoe
302   0000              	GLOBAL _ftoa_callee
303   0000              	GLOBAL _ftoa
304   0000              	GLOBAL _exit_fastcall
305   0000              	GLOBAL _exit
306   0000              	GLOBAL _dtoh_callee
307   0000              	GLOBAL _dtoh
308   0000              	GLOBAL _dtog_callee
309   0000              	GLOBAL _dtog
310   0000              	GLOBAL _dtoe_callee
311   0000              	GLOBAL _dtoe
312   0000              	GLOBAL _dtoa_callee
313   0000              	GLOBAL _dtoa
314   0000              	GLOBAL _bsearch_callee
315   0000              	GLOBAL _bsearch
316   0000              	GLOBAL _atol_fastcall
317   0000              	GLOBAL _atol
318   0000              	GLOBAL _atoi_fastcall
319   0000              	GLOBAL _atoi
320   0000              	GLOBAL _atof_fastcall
321   0000              	GLOBAL _atof
322   0000              	GLOBAL _atexit_fastcall
323   0000              	GLOBAL _atexit
324   0000              	GLOBAL _at_quick_exit_fastcall
325   0000              	GLOBAL _at_quick_exit
326   0000              	GLOBAL _abs_fastcall
327   0000              	GLOBAL _abs
328   0000              	GLOBAL _abort
329   0000              	GLOBAL __strtou__callee
330   0000              	GLOBAL __strtou_
331   0000              	GLOBAL __strtoi__callee
332   0000              	GLOBAL __strtoi_
333   0000              	GLOBAL __random_uniform_xor_8__fastcall
334   0000              	GLOBAL __random_uniform_xor_8_
335   0000              	GLOBAL __random_uniform_xor_32__fastcall
336   0000              	GLOBAL __random_uniform_xor_32_
337   0000              	GLOBAL __random_uniform_cmwc_8__fastcall
338   0000              	GLOBAL __random_uniform_cmwc_8_
339   0000              	GLOBAL __shellsort__callee
340   0000              	GLOBAL __shellsort_
341   0000              	GLOBAL __quicksort__callee
342   0000              	GLOBAL __quicksort_
343   0000              	GLOBAL __insertion_sort__callee
344   0000              	GLOBAL __insertion_sort_
345   0000              	GLOBAL __ldivu__callee
346   0000              	GLOBAL __ldivu_
347   0000              	GLOBAL __ldiv__callee
348   0000              	GLOBAL __ldiv_
349   0000              	GLOBAL __divu__callee
350   0000              	GLOBAL __divu_
351   0000              	GLOBAL __div__callee
352   0000              	GLOBAL __div_
353   0000              	GLOBAL _NIRVANAP_drawTW_raw_callee
354   0000              	GLOBAL _NIRVANAP_drawTW_raw
355   0000              	GLOBAL _NIRVANAP_drawTW_callee
356   0000              	GLOBAL _NIRVANAP_drawTW
357   0000              	GLOBAL _NIRVANAP_drawW_raw_callee
358   0000              	GLOBAL _NIRVANAP_drawW_raw
359   0000              	GLOBAL _NIRVANAP_drawW_callee
360   0000              	GLOBAL _NIRVANAP_drawW
361   0000              	GLOBAL _NIRVANAP_spriteT_callee
362   0000              	GLOBAL _NIRVANAP_spriteT
363   0000              	GLOBAL _NIRVANAP_fillC_callee
364   0000              	GLOBAL _NIRVANAP_fillC
365   0000              	GLOBAL _NIRVANAP_readC_callee
366   0000              	GLOBAL _NIRVANAP_readC
367   0000              	GLOBAL _NIRVANAP_paintC_callee
368   0000              	GLOBAL _NIRVANAP_paintC
369   0000              	GLOBAL _NIRVANAP_printQ_callee
370   0000              	GLOBAL _NIRVANAP_printQ
371   0000              	GLOBAL _NIRVANAP_fillT_raw_callee
372   0000              	GLOBAL _NIRVANAP_fillT_raw
373   0000              	GLOBAL _NIRVANAP_fillT_callee
374   0000              	GLOBAL _NIRVANAP_fillT
375   0000              	GLOBAL _NIRVANAP_drawT_raw_callee
376   0000              	GLOBAL _NIRVANAP_drawT_raw
377   0000              	GLOBAL _NIRVANAP_drawT_callee
378   0000              	GLOBAL _NIRVANAP_drawT
379   0000              	GLOBAL _NIRVANAP_stop
380   0000              	GLOBAL _NIRVANAP_start
381   0000              	GLOBAL _zx_print_str
382   0000              	GLOBAL _zx_print_int
383   0000              	GLOBAL _zx_print_chr
384   0000              	GLOBAL _zx_isr
385   0000              	GLOBAL _z80_otdr_callee
386   0000              	GLOBAL _z80_otdr
387   0000              	GLOBAL _z80_otir_callee
388   0000              	GLOBAL _z80_otir
389   0000              	GLOBAL _z80_outp_callee
390   0000              	GLOBAL _z80_outp
391   0000              	GLOBAL _z80_indr_callee
392   0000              	GLOBAL _z80_indr
393   0000              	GLOBAL _z80_inir_callee
394   0000              	GLOBAL _z80_inir
395   0000              	GLOBAL _z80_inp_fastcall
396   0000              	GLOBAL _z80_inp
397   0000              	GLOBAL _z80_set_int_state_fastcall
398   0000              	GLOBAL _z80_set_int_state
399   0000              	GLOBAL _z80_get_int_state
400   0000              	GLOBAL _z80_delay_tstate_fastcall
401   0000              	GLOBAL _z80_delay_tstate
402   0000              	GLOBAL _z80_delay_ms_fastcall
403   0000              	GLOBAL _z80_delay_ms
404   0000              	GLOBAL _im2_remove_generic_callback_callee
405   0000              	GLOBAL _im2_remove_generic_callback
406   0000              	GLOBAL _im2_prepend_generic_callback_callee
407   0000              	GLOBAL _im2_prepend_generic_callback
408   0000              	GLOBAL _im2_append_generic_callback_callee
409   0000              	GLOBAL _im2_append_generic_callback
410   0000              	GLOBAL _im2_create_generic_isr_8080_callee
411   0000              	GLOBAL _im2_create_generic_isr_8080
412   0000              	GLOBAL _im2_create_generic_isr_callee
413   0000              	GLOBAL _im2_create_generic_isr
414   0000              	GLOBAL _im2_install_isr_callee
415   0000              	GLOBAL _im2_install_isr
416   0000              	GLOBAL _im2_init_fastcall
417   0000              	GLOBAL _im2_init
418   0000              	GLOBAL _intrinsic_swap_word_32_fastcall
419   0000              	GLOBAL _intrinsic_swap_word_32
420   0000              	GLOBAL _intrinsic_swap_endian_32_fastcall
421   0000              	GLOBAL _intrinsic_swap_endian_32
422   0000              	GLOBAL _intrinsic_swap_endian_16_fastcall
423   0000              	GLOBAL _intrinsic_swap_endian_16
424   0000              	GLOBAL _intrinsic_return_de
425   0000              	GLOBAL _intrinsic_return_bc
426   0000              	GLOBAL _intrinsic_exx
427   0000              	GLOBAL _intrinsic_ex_de_hl
428   0000              	GLOBAL _intrinsic_nop
429   0000              	GLOBAL _intrinsic_im_2
430   0000              	GLOBAL _intrinsic_im_1
431   0000              	GLOBAL _intrinsic_im_0
432   0000              	GLOBAL _intrinsic_retn
433   0000              	GLOBAL _intrinsic_reti
434   0000              	GLOBAL _intrinsic_halt
435   0000              	GLOBAL _intrinsic_ei
436   0000              	GLOBAL _intrinsic_di
437   0000              	GLOBAL _intrinsic_stub
438   0000              	GLOBAL _intrinsic_ini
439   0000              	GLOBAL _intrinsic_outi
440   0000              	GLOBAL _intrinsic_ldi
441   0000              	GLOBAL _zx_pattern_fill_callee
442   0000              	GLOBAL _zx_pattern_fill
443   0000              	GLOBAL _zx_saddrpup_fastcall
444   0000              	GLOBAL _zx_saddrpup
445   0000              	GLOBAL _zx_saddrpright_callee
446   0000              	GLOBAL _zx_saddrpright
447   0000              	GLOBAL _zx_saddrpleft_callee
448   0000              	GLOBAL _zx_saddrpleft
449   0000              	GLOBAL _zx_saddrpdown_fastcall
450   0000              	GLOBAL _zx_saddrpdown
451   0000              	GLOBAL _zx_saddrcup_fastcall
452   0000              	GLOBAL _zx_saddrcup
453   0000              	GLOBAL _zx_saddrcright_fastcall
454   0000              	GLOBAL _zx_saddrcright
455   0000              	GLOBAL _zx_saddrcleft_fastcall
456   0000              	GLOBAL _zx_saddrcleft
457   0000              	GLOBAL _zx_saddrcdown_fastcall
458   0000              	GLOBAL _zx_saddrcdown
459   0000              	GLOBAL _zx_saddr2py_fastcall
460   0000              	GLOBAL _zx_saddr2py
461   0000              	GLOBAL _zx_saddr2px_fastcall
462   0000              	GLOBAL _zx_saddr2px
463   0000              	GLOBAL _zx_saddr2cy_fastcall
464   0000              	GLOBAL _zx_saddr2cy
465   0000              	GLOBAL _zx_saddr2cx_fastcall
466   0000              	GLOBAL _zx_saddr2cx
467   0000              	GLOBAL _zx_saddr2aaddr_fastcall
468   0000              	GLOBAL _zx_saddr2aaddr
469   0000              	GLOBAL _zx_py2saddr_fastcall
470   0000              	GLOBAL _zx_py2saddr
471   0000              	GLOBAL _zx_py2aaddr_fastcall
472   0000              	GLOBAL _zx_py2aaddr
473   0000              	GLOBAL _zx_pxy2saddr_callee
474   0000              	GLOBAL _zx_pxy2saddr
475   0000              	GLOBAL _zx_pxy2aaddr_callee
476   0000              	GLOBAL _zx_pxy2aaddr
477   0000              	GLOBAL _zx_px2bitmask_fastcall
478   0000              	GLOBAL _zx_px2bitmask
479   0000              	GLOBAL _zx_cy2saddr_fastcall
480   0000              	GLOBAL _zx_cy2saddr
481   0000              	GLOBAL _zx_cy2aaddr_fastcall
482   0000              	GLOBAL _zx_cy2aaddr
483   0000              	GLOBAL _zx_cxy2saddr_callee
484   0000              	GLOBAL _zx_cxy2saddr
485   0000              	GLOBAL _zx_cxy2aaddr_callee
486   0000              	GLOBAL _zx_cxy2aaddr
487   0000              	GLOBAL _zx_bitmask2px_fastcall
488   0000              	GLOBAL _zx_bitmask2px
489   0000              	GLOBAL _zx_aaddrcup_fastcall
490   0000              	GLOBAL _zx_aaddrcup
491   0000              	GLOBAL _zx_aaddrcright_fastcall
492   0000              	GLOBAL _zx_aaddrcright
493   0000              	GLOBAL _zx_aaddrcleft_fastcall
494   0000              	GLOBAL _zx_aaddrcleft
495   0000              	GLOBAL _zx_aaddrcdown_fastcall
496   0000              	GLOBAL _zx_aaddrcdown
497   0000              	GLOBAL _zx_aaddr2saddr_fastcall
498   0000              	GLOBAL _zx_aaddr2saddr
499   0000              	GLOBAL _zx_aaddr2py_fastcall
500   0000              	GLOBAL _zx_aaddr2py
501   0000              	GLOBAL _zx_aaddr2px_fastcall
502   0000              	GLOBAL _zx_aaddr2px
503   0000              	GLOBAL _zx_aaddr2cy_fastcall
504   0000              	GLOBAL _zx_aaddr2cy
505   0000              	GLOBAL _zx_aaddr2cx_fastcall
506   0000              	GLOBAL _zx_aaddr2cx
507   0000              	GLOBAL _zx_visit_wc_pix_callee
508   0000              	GLOBAL _zx_visit_wc_pix
509   0000              	GLOBAL _zx_visit_wc_attr_callee
510   0000              	GLOBAL _zx_visit_wc_attr
511   0000              	GLOBAL _zx_scroll_wc_up_pix_callee
512   0000              	GLOBAL _zx_scroll_wc_up_pix
513   0000              	GLOBAL _zx_scroll_wc_up_attr_callee
514   0000              	GLOBAL _zx_scroll_wc_up_attr
515   0000              	GLOBAL _zx_scroll_wc_up_callee
516   0000              	GLOBAL _zx_scroll_wc_up
517   0000              	GLOBAL _zx_scroll_up_pix_callee
518   0000              	GLOBAL _zx_scroll_up_pix
519   0000              	GLOBAL _zx_scroll_up_attr_callee
520   0000              	GLOBAL _zx_scroll_up_attr
521   0000              	GLOBAL _zx_scroll_up_callee
522   0000              	GLOBAL _zx_scroll_up
523   0000              	GLOBAL _zx_cls_wc_pix_callee
524   0000              	GLOBAL _zx_cls_wc_pix
525   0000              	GLOBAL _zx_cls_wc_attr_callee
526   0000              	GLOBAL _zx_cls_wc_attr
527   0000              	GLOBAL _zx_cls_wc_callee
528   0000              	GLOBAL _zx_cls_wc
529   0000              	GLOBAL _zx_cls_pix_fastcall
530   0000              	GLOBAL _zx_cls_pix
531   0000              	GLOBAL _zx_cls_attr_fastcall
532   0000              	GLOBAL _zx_cls_attr
533   0000              	GLOBAL _zx_cls_fastcall
534   0000              	GLOBAL _zx_cls
535   0000              	GLOBAL _zx_border_fastcall
536   0000              	GLOBAL _zx_border
537   0000              	GLOBAL _zx_tape_verify_block_callee
538   0000              	GLOBAL _zx_tape_verify_block
539   0000              	GLOBAL _zx_tape_save_block_callee
540   0000              	GLOBAL _zx_tape_save_block
541   0000              	GLOBAL _zx_tape_load_block_callee
542   0000              	GLOBAL _zx_tape_load_block
543   0000              	GLOBAL _spr_horizontal_check
544   0000              	GLOBAL _spr_draw8
545   0000              	GLOBAL _spr_clear_scr
546   0000              	GLOBAL _spr_back_repaint
547   0000              	GLOBAL _spr_get_tile_dir
548   0000              	GLOBAL _spr_get_tile
549   0000              	GLOBAL _spr_paint_player
550   0000              	GLOBAL _spr_clear_fast_hor
551   0000              	GLOBAL _spr_clear_fast_vert
552   0000              	GLOBAL _spr_clear_fast
553   0000              	GLOBAL _spr_paint
554   0000              	GLOBAL _spr_move_left
555   0000              	GLOBAL _spr_move_right
556   0000              	GLOBAL _spr_move_left_f
557   0000              	GLOBAL _spr_move_right_f
558   0000              	GLOBAL _spr_move_horizontal
559   0000              	GLOBAL _spr_move_down_f
560   0000              	GLOBAL _spr_move_up_f
561   0000              	GLOBAL _spr_set_right
562   0000              	GLOBAL _spr_set_left
563   0000              	GLOBAL _spr_set_down
564   0000              	GLOBAL _spr_set_up
565   0000              	GLOBAL _spr_calc_index
566   0000              	GLOBAL _spr_chktime
567   0000              	GLOBAL _player_use_floor
568   0000              	GLOBAL _game_end_pietro
569   0000              	GLOBAL _game_end_willy
570   0000              	GLOBAL _game_text
571   0000              	GLOBAL _game_logo1
572   0000              	GLOBAL _game_anim_conveyor
573   0000              	GLOBAL _zx_print_char
574   0000              	GLOBAL _reverse
575   0000              	GLOBAL _page
576   0000              	GLOBAL _game_crumble
577   0000              	GLOBAL _game_solar_ray0
578   0000              	GLOBAL _game_solar_ray1
579   0000              	GLOBAL _game_solar_ray
580   0000              	GLOBAL _game_anim_air
581   0000              	GLOBAL _game_shoe
582   0000              	GLOBAL _game_intro
583   0000              	GLOBAL _game_copy_sprite
584   0000              	GLOBAL _game_copy_sprite_color_reset
585   0000              	GLOBAL _game_copy_sprite_std
586   0000              	GLOBAL _game_flash_exit
587   0000              	GLOBAL _game_page_map
588   0000              	GLOBAL _game_attribs
589   0000              	GLOBAL _game_check_time
590   0000              	GLOBAL _game_key_paint
591   0000              	GLOBAL _game_colour_message
592   0000              	GLOBAL _game_paint_attrib
593   0000              	GLOBAL _game_print_score
594   0000              	GLOBAL _game_cell_paint_index
595   0000              	GLOBAL _game_cell_paint
596   0000              	GLOBAL _game_check_cell
597   0000              	GLOBAL _game_check_map
598   0000              	GLOBAL _game_loop
599   0000              	GLOBAL _game_round_init
600   0000              	GLOBAL _game_start_timer
601   0000              	GLOBAL _game_update_stats
602   0000              	GLOBAL _game_print_footer
603   0000              	GLOBAL _game_fill_row
604   0000              	GLOBAL _game_cls
605   0000              	GLOBAL _game_fps
606   0000              	GLOBAL _game_draw_map
607   0000              	GLOBAL _enemy_init
608   0000              	GLOBAL _enemy_move
609   0000              	GLOBAL _enemy_turn
610   0000              	GLOBAL _enemy_static
611   0000              	GLOBAL _enemy_horizontal
612   0000              	GLOBAL _enemy_vertical
613   0000              	GLOBAL _ay_reset
614   0000              	GLOBAL _ay_song_stop
615   0000              	GLOBAL _ay_song_play
616   0000              	GLOBAL _ay_fx_stop
617   0000              	GLOBAL _ay_fx_play
618   0000              	GLOBAL _ay_is_playing
619   0000              	GLOBAL _audio_game_over
620   0000              	GLOBAL _audio_round_init
621   0000              	GLOBAL _audio_levelup
622   0000              	GLOBAL _audio_menu
623   0000              	GLOBAL _audio_game_end
624   0000              	GLOBAL _audio_game_start
625   0000              	GLOBAL _audio_level_complete
626   0000              	GLOBAL _audio_level_start
627   0000              	GLOBAL _audio_puerta
628   0000              	GLOBAL _audio_crumble
629   0000              	GLOBAL _audio_tick
630   0000              	GLOBAL _audio_door_open
631   0000              	GLOBAL _audio_coin_noentiendo
632   0000              	GLOBAL _audio_coin
633   0000              	GLOBAL _audio_fall
634   0000              	GLOBAL _audio_jump
635   0000              	GLOBAL _audio_dead
636   0000              	GLOBAL _audio_time
637   0000              	GLOBAL _audio_ingame
638   0000              	GLOBAL _in_mouse_kempston_wheel_delta
639   0000              	GLOBAL _in_mouse_kempston_wheel
640   0000              	GLOBAL _in_mouse_kempston_callee
641   0000              	GLOBAL _in_mouse_kempston
642   0000              	GLOBAL _in_mouse_kempston_setpos_callee
643   0000              	GLOBAL _in_mouse_kempston_setpos
644   0000              	GLOBAL _in_mouse_kempston_reset
645   0000              	GLOBAL _in_mouse_kempston_init
646   0000              	GLOBAL _in_mouse_amx_wheel_delta
647   0000              	GLOBAL _in_mouse_amx_wheel
648   0000              	GLOBAL _in_mouse_amx_callee
649   0000              	GLOBAL _in_mouse_amx
650   0000              	GLOBAL _in_mouse_amx_setpos_callee
651   0000              	GLOBAL _in_mouse_amx_setpos
652   0000              	GLOBAL _in_mouse_amx_reset
653   0000              	GLOBAL _in_mouse_amx_init_callee
654   0000              	GLOBAL _in_mouse_amx_init
655   0000              	GLOBAL _in_stick_sinclair2
656   0000              	GLOBAL _in_stick_sinclair1
657   0000              	GLOBAL _in_stick_kempston
658   0000              	GLOBAL _in_stick_fuller
659   0000              	GLOBAL _in_stick_cursor
660   0000              	GLOBAL _in_stick_keyboard_fastcall
661   0000              	GLOBAL _in_stick_keyboard
662   0000              	GLOBAL _in_wait_nokey
663   0000              	GLOBAL _in_wait_key
664   0000              	GLOBAL _in_test_key
665   0000              	GLOBAL _in_pause_fastcall
666   0000              	GLOBAL _in_pause
667   0000              	GLOBAL _in_key_scancode_fastcall
668   0000              	GLOBAL _in_key_scancode
669   0000              	GLOBAL _in_key_pressed_fastcall
670   0000              	GLOBAL _in_key_pressed
671   0000              	GLOBAL _in_inkey
672   0000              	GLOBAL _NIRVANAP_CHAR_TABLE
673   0000              	GLOBAL _NIRVANAP_WIDE_IMAGES
674   0000              	GLOBAL _NIRVANAP_TILE_IMAGES
675   0000              	GLOBAL _NIRVANAP_HOLE
676   0000              	GLOBAL _NIRVANAP_ISR_HOOK
677   0000              	GLOBAL _game_tune
678   0000              	GLOBAL _code1
679   0000              	GLOBAL _code0
680   0000              	GLOBAL _deltas
681   0000              	GLOBAL _attribs
682   0000              	GLOBAL _air_curr_byte
683   0000              	GLOBAL _spr_clr
684   0000              	GLOBAL _spr_init_bright
685   0000              	GLOBAL _spr_init_cout3
686   0000              	GLOBAL _spr_init_cin3
687   0000              	GLOBAL _spr_init_cout2
688   0000              	GLOBAL _spr_init_cin2
689   0000              	GLOBAL _spr_init_cout1
690   0000              	GLOBAL _spr_init_cin1
691   0000              	GLOBAL _spr_init_cout0
692   0000              	GLOBAL _spr_init_cin0
693   0000              	GLOBAL _map_clear
694   0000              	GLOBAL _map_paper
695   0000              	GLOBAL _map_border
696   0000              	GLOBAL _gbyte
697   0000              	GLOBAL _scr_curr
698   0000              	GLOBAL _color
699   0000              	GLOBAL _scr_map
700   0000              	GLOBAL _spr_kind
701   0000              	GLOBAL _spr_altset
702   0000              	GLOBAL _spr_frames
703   0000              	GLOBAL _spr_speed_a
704   0000              	GLOBAL _spr_speed_b
705   0000              	GLOBAL _spr_speed
706   0000              	GLOBAL _spr_tile
707   0000              	GLOBAL _screen_ink
708   0000              	GLOBAL _screen_paper
709   0000              	GLOBAL _game_start_scr
710   0000              	GLOBAL _player_next_extra
711   0000              	GLOBAL _game_score_top
712   0000              	GLOBAL _player_coins
713   0000              	GLOBAL _player_lives
714   0000              	GLOBAL _game_crumb_end
715   0000              	GLOBAL _game_crumb_start
716   0000              	GLOBAL _game_over
717   0000              	GLOBAL _game_tile_cnt
718   0000              	GLOBAL _game_sound
719   0000              	GLOBAL _game_inf_lives
720   0000              	GLOBAL _game_inmune
721   0000              	GLOBAL _spr_count
722   0000              	GLOBAL _key_ink
723   0000              	GLOBAL _key_last
724   0000              	GLOBAL _lapse_crumb
725   0000              	GLOBAL _time_key
726   0000              	GLOBAL _time_conv
727   0000              	GLOBAL _time_air
728   0000              	GLOBAL _frame_time
729   0000              	GLOBAL _curr_time
730   0000              	GLOBAL _key_attrib
731   0000              	GLOBAL _g_ray1
732   0000              	GLOBAL _attrib_osd
733   0000              	GLOBAL _attrib_hl
734   0000              	GLOBAL _attrib
735   0000              	GLOBAL _zx_val_asm
736   0000              	GLOBAL _index1
737   0000              	GLOBAL _index0
738   0000              	GLOBAL _loop_count
739   0000              	GLOBAL _s_row1
740   0000              	GLOBAL _s_col1
741   0000              	GLOBAL _s_col0
742   0000              	GLOBAL _s_lin1
743   0000              	GLOBAL _s_lin0
744   0000              	GLOBAL _nirv_sprite_index
745   0000              	GLOBAL _player_kill_index
746   0000              	GLOBAL _player_jump_top
747   0000              	GLOBAL _game_debug
748   0000              	GLOBAL _sprite
749   0000              	GLOBAL _fps
750   0000              	GLOBAL _game_effect
751   0000              	GLOBAL _game_menu
752   0000              	GLOBAL _game_atrac
753   0000              	GLOBAL _game_mode
754   0000              	GLOBAL _game_tileset
755   0000              	GLOBAL _menu_curr_sel
756   0000              	GLOBAL _game_round_up
757   0000              	GLOBAL _game_lives
758   0000              	GLOBAL _game_code
759   0000              	GLOBAL _game_exit_lin
760   0000              	GLOBAL _game_exit_col
761   0000              	GLOBAL _game_conveyor_col1
762   0000              	GLOBAL _game_conveyor_col0
763   0000              	GLOBAL _game_conveyor_lin
764   0000              	GLOBAL _game_conveyor_dir
765   0000              	GLOBAL _game_song_play
766   0000              	GLOBAL _game_gravity
767   0000              	GLOBAL _player_lin_scr
768   0000              	GLOBAL _player_col_scr
769   0000              	GLOBAL _player_fall_start
770   0000              	GLOBAL _player_jump_lin
771   0000              	GLOBAL _player_jump_count
772   0000              	GLOBAL _player_jump_hack
773   0000              	GLOBAL _player_vel_inc
774   0000              	GLOBAL _player_vel_y0
775   0000              	GLOBAL _player_vel_y
776   0000              	GLOBAL _player_score
777   0000              	GLOBAL _tbuffer
778   0000              	GLOBAL _obj_count
779   0000              	GLOBAL _obj_col
780   0000              	GLOBAL _obj_lin
781   0000              	GLOBAL _last_time_b
782   0000              	GLOBAL _last_time_a
783   0000              	GLOBAL _last_time
784   0000              	GLOBAL _colint
785   0000              	GLOBAL _col
786   0000              	GLOBAL _lin
787   0000              	GLOBAL _tile
788   0000              	GLOBAL _value_c
789   0000              	GLOBAL _value_b
790   0000              	GLOBAL _value_a
791   0000              	GLOBAL _state_a
792   0000              	GLOBAL _state
793   0000              	GLOBAL _class
794   0000              	GLOBAL _dirs_last
795   0000              	GLOBAL _dirs
796   0000              	GLOBAL _k2
797   0000              	GLOBAL _k1
798   0000              	GLOBAL _joyfunc2
799   0000              	GLOBAL _joyfunc1
800   0000              	GLOBAL _btiles
801   0000              	GLOBAL _v3
802   0000              	GLOBAL _v2
803   0000              	GLOBAL _v1
804   0000              	GLOBAL _v0
805   0000              	GLOBAL _i
806   0000              	GLOBAL _spec128
807   0000              	GLOBAL _GLOBAL_ZX_PORT_7FFD
808   0000              	GLOBAL _GLOBAL_ZX_PORT_1FFD
809   0000              	GLOBAL _GLOBAL_ZX_PORT_FE
810   0000              	GLOBAL _hitiles2
811   0000              	GLOBAL _hitiles1
812   0000              	GLOBAL _ay_song_coin_noentiendo
813   0000              	GLOBAL _ay_song_game_over
814   0000              	GLOBAL _ay_song_time_atack
815   0000              	GLOBAL _ay_fx_pause
816   0000              	GLOBAL _ay_fx_crumble
817   0000              	GLOBAL _ay_fx_door_open
818   0000              	GLOBAL _ay_fx_tick
819   0000              	GLOBAL _ay_fx_game_start
820   0000              	GLOBAL _ay_fx_fall
821   0000              	GLOBAL _ay_fx_jump
822   0000              	GLOBAL _ay_fx_dead
823   0000              	GLOBAL _ay_fx_coin
824   0000              	GLOBAL _ay_song_round_init
825   0000              	GLOBAL _ay_song_menu
826   0000              	GLOBAL _ay_song_ingame1
827   0000              	GLOBAL _ay_song_ingame0
828   0000              	GLOBAL _hisprites2
829   0000              	GLOBAL _hisprites1
830   0000              	GLOBAL _logo2
831   0000              	GLOBAL _logo1
832   0000              	GLOBAL _cartoon2
833   0000              	GLOBAL _cartoon1
834   0000              	GLOBAL _cartoon0
835   0000              	GLOBAL _img1
836   0000              	GLOBAL _air_end_byte
837   0000              	GLOBAL _air_start_byte
838   0000              	GLOBAL _tile_class
839   0000              	GLOBAL _texts
840   0000              	GLOBAL _map_names0
841   0000              	GLOBAL _game_borders0
842   0000              	GLOBAL _spr_init2
843   0000              	GLOBAL _spr_init1
844   0000              	GLOBAL _tile_class2
845   0000              	GLOBAL _tile_class1
846   0000              	GLOBAL _paper0
847   0000              	GLOBAL _lenght0
848   0000              	GLOBAL _world0
849   0000              	GLOBAL _spr_init
850   0000              	GLOBAL _game_encode
851   0000              	GLOBAL _player_jump_hor
852   0000              ;--------------------------------------------------------
853   0000              ; special function registers
854   0000              ;--------------------------------------------------------
855   0000              defc _IO_FE	=	0x00fe
856   0000              defc _IO_1FFD	=	0x1ffd
857   0000              defc _IO_7FFD	=	0x7ffd
858   0000              ;--------------------------------------------------------
859   0000              ; ram data
860   0000              ;--------------------------------------------------------
861   0000              	SECTION bss_compiler
862   0000              ;--------------------------------------------------------
863   0000              ; ram data
864   0000              ;--------------------------------------------------------
865   0000              
866   0000              IF 0
867   0000              
868   0000              ; .area _INITIALIZED removed by z88dk
869   0000              
870   0000              
871   0000              ENDIF
872   0000              
873   0000              ;--------------------------------------------------------
874   0000              ; absolute external ram data
875   0000              ;--------------------------------------------------------
876   0000              	SECTION IGNORE
877   0000              ;--------------------------------------------------------
878   0000              ; global & static initialisations
879   0000              ;--------------------------------------------------------
880   0000              	SECTION code_crt_init
881   0000              ;--------------------------------------------------------
882   0000              ; Home
883   0000              ;--------------------------------------------------------
884   0000              	SECTION IGNORE
885   0000              ;--------------------------------------------------------
886   0000              ; code
887   0000              ;--------------------------------------------------------
888   0000              	SECTION code_compiler
889   0000              ;	---------------------------------
890   0000              ; Function player_init
891   0000              ; ---------------------------------
892   0000              _player_init:
893   0000  CD 00 00    	call	___sdcc_enter_ix
894   0003  F5          	push	af
895   0004  21 08 00    	ld	hl, +(_class + 0x0008)
896   0007  36 FF       	ld	(hl),0xff
897   0009  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
898   000C  36 04       	ld	(hl),0x04
899   000E  21 08 00    	ld	hl, +(_spr_frames + 0x0008)
900   0011  36 04       	ld	(hl),0x04
901   0013  21 08 00    	ld	hl, +(_lin + 0x0008)
902   0016  DD 7E 04    	ld	a,(ix+4)
903   0019  77          	ld	(hl), a
904   001A  21 08 00    	ld	hl, +(_col + 0x0008)
905   001D  DD 7E 05    	ld	a,(ix+5)
906   0020  77          	ld	(hl), a
907   0021  DD 7E 04    	ld	a,(ix+4)
908   0024  32 00 00    	ld	(_player_jump_top),a
909   0027  01 08 00    	ld	bc,_state+8
910   002A  AF          	xor	a, a
911   002B  02          	ld	(bc), a
912   002C  11 08 00    	ld	de,_state_a+8
913   002F  AF          	xor	a, a
914   0030  12          	ld	(de), a
915   0031  2A 00 00    	ld	hl,(_curr_time)
916   0034  C5          	push	bc
917   0035  D5          	push	de
918   0036  DD 74 FF    	ld	(ix-1),h
919   0039  DD 75 FE    	ld	(ix-2),l
920   003C  D1          	pop	de
921   003D  C1          	pop	bc
922   003E  21 10 00    	ld	hl, +(_last_time + 0x0010)
923   0041  DD 7E FE    	ld	a,(ix-2)
924   0044  77          	ld	(hl), a
925   0045  23          	inc	hl
926   0046  DD 7E FF    	ld	a,(ix-1)
927   0049  77          	ld	(hl), a
928   004A  21 00 00    	ld	hl,0x0000
929   004D  22 00 00    	ld	(_player_vel_y),hl
930   0050  21 08 00    	ld	hl, +(_spr_frames + 0x0008)
931   0053  36 04       	ld	(hl),0x04
932   0055  3A 08 00    	ld	a,(_value_a + 0x0008)
933   0058  B7          	or	a, a
934   0059  28 1C       	jr	Z,l_player_init_00102
935   005B  21 08 00    	ld	hl, +(_colint + 0x0008)
936   005E  36 03       	ld	(hl),0x03
937   0060  0A          	ld	a, (bc)
938   0061  F6 08       	or	a,0x08
939   0063  02          	ld	(bc), a
940   0064  1A          	ld	a, (de)
941   0065  F6 08       	or	a,0x08
942   0067  12          	ld	(de), a
943   0068  01 08 00    	ld	bc,_tile+8
944   006B  DD 7E 06    	ld	a,(ix+6)
945   006E  C6 04       	add	a,0x04
946   0070  02          	ld	(bc), a
947   0071  3A 08 00    	ld	a,(_value_b + 0x0008)
948   0074  77          	ld	(hl), a
949   0075  18 15       	jr	l_player_init_00104
950   0077              l_player_init_00102:
951   0077  0A          	ld	a, (bc)
952   0078  F6 04       	or	a,0x04
953   007A  02          	ld	(bc), a
954   007B  1A          	ld	a, (de)
955   007C  F6 10       	or	a,0x10
956   007E  12          	ld	(de), a
957   007F  21 08 00    	ld	hl, +(_tile + 0x0008)
958   0082  DD 7E 06    	ld	a,(ix+6)
959   0085  77          	ld	(hl), a
960   0086  3A 08 00    	ld	a,(_value_b + 0x0008)
961   0089  32 08 00    	ld	(_colint+8),a
962   008C              l_player_init_00104:
963   008C  F1          	pop	af
964   008D  DD E1       	pop	ix
965   008F  C9          	ret
966   0090              	SECTION code_compiler
967   0090              ;	---------------------------------
968   0090              ; Function player_turn
969   0090              ; ---------------------------------
970   0090              _player_turn:
971   0090  21 00 00    	ld	hl,_sprite
972   0093  36 08       	ld	(hl),0x08
973   0095  CD 00 00    	call	_spr_chktime
974   0098  7D          	ld	a, l
975   0099  B7          	or	a, a
976   009A  CA 1C 01    	jp	Z, l_player_turn_00117
977   009D  3A 08 00    	ld	a,(_lin + 0x0008)
978   00A0  32 00 00    	ld	(_s_lin0),a
979   00A3  3A 08 00    	ld	a,(_col + 0x0008)
980   00A6  32 00 00    	ld	(_s_col0),a
981   00A9  21 00 00    	ld	hl,_k1
982   00AC  E5          	push	hl
983   00AD  2A 00 00    	ld	hl,(_joyfunc1)
984   00B0  CD 00 00    	call	___sdcc_call_hl
985   00B3  F1          	pop	af
986   00B4  7D          	ld	a,l
987   00B5  32 00 00    	ld	(_dirs),a
988   00B8  CD 1F 02    	call	_player_move
989   00BB  CD 4F 04    	call	_player_handle_lock
990   00BE  CD B6 06    	call	_player_collision
991   00C1  CD 8D 01    	call	_player_check_exit
992   00C4  3A 08 00    	ld	a,(_state + 0x0008)
993   00C7  CB 6F       	bit	5, a
994   00C9  28 11       	jr	Z,l_player_turn_00102
995   00CB  3A 00 00    	ld	a,(_game_inmune)
996   00CE  B7          	or	a, a
997   00CF  20 0B       	jr	NZ,l_player_turn_00102
998   00D1  CD 21 0E    	call	_player_lost_life
999   00D4  3A 08 00    	ld	a,(_state + 0x0008)
1000  00D7  E6 DF       	and	a,0xdf
1001  00D9  32 08 00    	ld	((_state + 0x0008)),a
1002  00DC              l_player_turn_00102:
1003  00DC  3A 00 00    	ld	a,(_scr_curr)
1004  00DF  D6 14       	sub	a,0x14
1005  00E1  38 07       	jr	C,l_player_turn_00106
1006  00E3  2A 10 00    	ld	hl,(_last_time_b + 0x0010)
1007  00E6  7C          	ld	a, h
1008  00E7  B5          	or	a,l
1009  00E8  20 05       	jr	NZ,l_player_turn_00107
1010  00EA              l_player_turn_00106:
1011  00EA  CD 00 00    	call	_game_crumble
1012  00ED  18 14       	jr	l_player_turn_00108
1013  00EF              l_player_turn_00107:
1014  00EF  21 06 00    	ld	hl,0x0006
1015  00F2  E5          	push	hl
1016  00F3  21 10 00    	ld	hl, +(_last_time_b + 0x0010)
1017  00F6  E5          	push	hl
1018  00F7  CD 00 00    	call	_game_check_time
1019  00FA  F1          	pop	af
1020  00FB  F1          	pop	af
1021  00FC  7D          	ld	a, l
1022  00FD  B7          	or	a, a
1023  00FE  28 03       	jr	Z,l_player_turn_00108
1024  0100  CD 00 00    	call	_game_crumble
1025  0103              l_player_turn_00108:
1026  0103  3A 08 00    	ld	a,(_state + 0x0008)
1027  0106  CB 47       	bit	0, a
1028  0108  20 0A       	jr	NZ,l_player_turn_00111
1029  010A  CB 4F       	bit	1, a
1030  010C  20 06       	jr	NZ,l_player_turn_00111
1031  010E  3A 00 00    	ld	a,(_dirs)
1032  0111  32 00 00    	ld	(_dirs_last),a
1033  0114              l_player_turn_00111:
1034  0114  3A 00 00    	ld	a,(_game_debug)
1035  0117  B7          	or	a, a
1036  0118  C8          	ret	Z
1037  0119  CD 1D 01    	call	_player_debug_keys
1038  011C              l_player_turn_00117:
1039  011C  C9          	ret
1040  011D              	SECTION code_compiler
1041  011D              ;	---------------------------------
1042  011D              ; Function player_debug_keys
1043  011D              ; ---------------------------------
1044  011D              _player_debug_keys:
1045  011D  CD 00 00    	call	_in_inkey
1046  0120  7D          	ld	a,l
1047  0121  32 00 00    	ld	(_v0),a
1048  0124  D6 31       	sub	a,0x31
1049  0126  28 0D       	jr	Z,l_player_debug_keys_00101
1050  0128  3A 00 00    	ld	a,(_v0)
1051  012B  FE 32       	cp	a,0x32
1052  012D  28 1F       	jr	Z,l_player_debug_keys_00104
1053  012F  D6 33       	sub	a,0x33
1054  0131  28 35       	jr	Z,l_player_debug_keys_00107
1055  0133  18 57       	jr	l_player_debug_keys_00112
1056  0135              l_player_debug_keys_00101:
1057  0135  21 00 00    	ld	hl,_scr_curr
1058  0138  35          	dec	(hl)
1059  0139  21 00 00    	ld	hl,_game_round_up
1060  013C  36 01       	ld	(hl),0x01
1061  013E  3A 00 00    	ld	a,(_scr_curr)
1062  0141  3C          	inc	a
1063  0142  20 05       	jr	NZ,l_player_debug_keys_00103
1064  0144  21 00 00    	ld	hl,_scr_curr
1065  0147  36 27       	ld	(hl),0x27
1066  0149              l_player_debug_keys_00103:
1067  0149  CD 00 00    	call	_in_wait_nokey
1068  014C  18 3E       	jr	l_player_debug_keys_00112
1069  014E              l_player_debug_keys_00104:
1070  014E  21 00 00    	ld	hl,_scr_curr
1071  0151  34          	inc	(hl)
1072  0152  21 00 00    	ld	hl,_game_round_up
1073  0155  36 01       	ld	(hl),0x01
1074  0157  3A 00 00    	ld	a,(_scr_curr)
1075  015A  D6 28       	sub	a,0x28
1076  015C  20 05       	jr	NZ,l_player_debug_keys_00106
1077  015E  21 00 00    	ld	hl,_scr_curr
1078  0161  36 00       	ld	(hl),0x00
1079  0163              l_player_debug_keys_00106:
1080  0163  CD 00 00    	call	_in_wait_nokey
1081  0166  18 24       	jr	l_player_debug_keys_00112
1082  0168              l_player_debug_keys_00107:
1083  0168  21 00 00    	ld	hl,_game_inmune
1084  016B  7E          	ld	a, (hl)
1085  016C  D6 01       	sub	a,0x01
1086  016E  3E 00       	ld	a,0x00
1087  0170  17          	rla
1088  0171  77          	ld	(hl), a
1089  0172  01 08 00    	ld	bc,_state+8
1090  0175  0A          	ld	a, (bc)
1091  0176  E6 DF       	and	a,0xdf
1092  0178  02          	ld	(bc), a
1093  0179  7E          	ld	a, (hl)
1094  017A  B7          	or	a, a
1095  017B  28 07       	jr	Z,l_player_debug_keys_00109
1096  017D  2E 04       	ld	l,0x04
1097  017F  CD 00 00    	call	_zx_border_fastcall
1098  0182  18 05       	jr	l_player_debug_keys_00110
1099  0184              l_player_debug_keys_00109:
1100  0184  2E 02       	ld	l,0x02
1101  0186  CD 00 00    	call	_zx_border_fastcall
1102  0189              l_player_debug_keys_00110:
1103  0189  CD 00 00    	call	_in_wait_nokey
1104  018C              l_player_debug_keys_00112:
1105  018C  C9          	ret
1106  018D              	SECTION code_compiler
1107  018D              ;	---------------------------------
1108  018D              ; Function player_check_exit
1109  018D              ; ---------------------------------
1110  018D              _player_check_exit:
1111  018D  3A 00 00    	ld	a,(_obj_count)
1112  0190  3C          	inc	a
1113  0191  C2 1E 02    	jp	NZ,l_player_check_exit_00114
1114  0194  21 08 00    	ld	hl,+(_col + 0x0008)
1115  0197  5E          	ld	e, (hl)
1116  0198  3A 00 00    	ld	a,(_game_exit_col)
1117  019B  BB          	cp	a,e
1118  019C  28 0E       	jr	Z,l_player_check_exit_00110
1119  019E  4F          	ld	c,a
1120  019F  06 00       	ld	b,0x00
1121  01A1  03          	inc	bc
1122  01A2  16 00       	ld	d,0x00
1123  01A4  79          	ld	a, c
1124  01A5  93          	sub	a, e
1125  01A6  20 76       	jr	NZ,l_player_check_exit_00114
1126  01A8  78          	ld	a, b
1127  01A9  92          	sub	a, d
1128  01AA  20 72       	jr	NZ,l_player_check_exit_00114
1129  01AC              l_player_check_exit_00110:
1130  01AC  2A 08 00    	ld	hl,(_lin + 0x0008)
1131  01AF  26 00       	ld	h,0x00
1132  01B1  01 10 00    	ld	bc,0x0010
1133  01B4  09          	add	hl,bc
1134  01B5  3A 00 00    	ld	a,(_game_exit_lin)
1135  01B8  5F          	ld	e,a
1136  01B9  16 00       	ld	d,0x00
1137  01BB  7D          	ld	a,l
1138  01BC  93          	sub	a,e
1139  01BD  44          	ld	b,h
1140  01BE  6F          	ld	l, a
1141  01BF  78          	ld	a, b
1142  01C0  9A          	sbc	a, d
1143  01C1  67          	ld	h, a
1144  01C2  CD 00 00    	call	_abs_fastcall
1145  01C5  7D          	ld	a,l
1146  01C6  32 00 00    	ld	(_v0),a
1147  01C9  D6 08       	sub	a,0x08
1148  01CB  30 51       	jr	NC,l_player_check_exit_00114
1149  01CD  21 00 00    	ld	hl,_game_round_up
1150  01D0  36 01       	ld	(hl),0x01
1151  01D2  01 08 00    	ld	bc,_state+8
1152  01D5  0A          	ld	a, (bc)
1153  01D6  E6 DF       	and	a,0xdf
1154  01D8  02          	ld	(bc), a
1155  01D9  CD 00 00    	call	_ay_song_stop
1156  01DC              l_player_check_exit_00101:
1157  01DC  ED 4B 00 00 	ld	bc,(_air_curr_byte)
1158  01E0  ED 5B 00 00 	ld	de,(_air_end_byte)
1159  01E4  7B          	ld	a,e
1160  01E5  91          	sub	a,c
1161  01E6  7A          	ld	a,d
1162  01E7  98          	sbc	a,b
1163  01E8  30 14       	jr	NC,l_player_check_exit_00103
1164  01EA  CD 00 00    	call	_audio_tick
1165  01ED  CD 00 00    	call	_game_anim_air
1166  01F0  21 08 00    	ld	hl,0x0008
1167  01F3  CD BA 08    	call	_player_score_add
1168  01F6  21 05 00    	ld	hl,0x0005
1169  01F9  CD 00 00    	call	_z80_delay_ms_fastcall
1170  01FC  18 DE       	jr	l_player_check_exit_00101
1171  01FE              l_player_check_exit_00103:
1172  01FE  21 00 00    	ld	hl,_scr_curr
1173  0201  7E          	ld	a,(hl)
1174  0202  3C          	inc	a
1175  0203  77          	ld	(hl),a
1176  0204  D6 14       	sub	a,0x14
1177  0206  20 08       	jr	NZ,l_player_check_exit_00105
1178  0208  CD 00 00    	call	_game_end_willy
1179  020B  21 00 00    	ld	hl,_scr_curr
1180  020E  36 00       	ld	(hl),0x00
1181  0210              l_player_check_exit_00105:
1182  0210  3A 00 00    	ld	a,(_scr_curr)
1183  0213  D6 28       	sub	a,0x28
1184  0215  C0          	ret	NZ
1185  0216  CD 00 00    	call	_game_end_pietro
1186  0219  21 00 00    	ld	hl,_scr_curr
1187  021C  36 14       	ld	(hl),0x14
1188  021E              l_player_check_exit_00114:
1189  021E  C9          	ret
1190  021F              	SECTION code_compiler
1191  021F              ;	---------------------------------
1192  021F              ; Function player_move
1193  021F              ; ---------------------------------
1194  021F              _player_move:
1195  021F  3A 08 00    	ld	a,(_state + 0x0008)
1196  0222  CB 47       	bit	0, a
1197  0224  20 04       	jr	NZ,l_player_move_00101
1198  0226  CB 4F       	bit	1, a
1199  0228  28 05       	jr	Z,l_player_move_00102
1200  022A              l_player_move_00101:
1201  022A  CD 38 02    	call	_player_move_jump
1202  022D  18 03       	jr	l_player_move_00103
1203  022F              l_player_move_00102:
1204  022F  CD D5 03    	call	_player_move_walk
1205  0232              l_player_move_00103:
1206  0232  CD 00 00    	call	_spr_paint_player
1207  0235  2E 00       	ld	l,0x00
1208  0237  C9          	ret
1209  0238              	SECTION code_compiler
1210  0238              ;	---------------------------------
1211  0238              ; Function player_move_jump
1212  0238              ; ---------------------------------
1213  0238              _player_move_jump:
1214  0238  CD 00 00    	call	___sdcc_enter_ix
1215  023B  F5          	push	af
1216  023C  3B          	dec	sp
1217  023D  21 00 00    	ld	hl,_player_jump_count
1218  0240  34          	inc	(hl)
1219  0241  3E 11       	ld	a,0x11
1220  0243  96          	sub	a, (hl)
1221  0244  30 07       	jr	NC,l_player_move_jump_00102
1222  0246  01 08 00    	ld	bc,_state+8
1223  0249  0A          	ld	a, (bc)
1224  024A  E6 F3       	and	a,+(0xfb&0xf7)
1225  024C  02          	ld	(bc),a
1226  024D              l_player_move_jump_00102:
1227  024D  3A 08 00    	ld	a,(_state_a + 0x0008)
1228  0250  CB 57       	bit	2, a
1229  0252  28 19       	jr	Z,l_player_move_jump_00108
1230  0254  3E 02       	ld	a,0x02
1231  0256  21 00 00    	ld	hl,_player_jump_count
1232  0259  96          	sub	a, (hl)
1233  025A  30 0C       	jr	NC,l_player_move_jump_00104
1234  025C  7E          	ld	a, (hl)
1235  025D  D6 09       	sub	a,0x09
1236  025F  30 07       	jr	NC,l_player_move_jump_00104
1237  0261  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1238  0264  36 07       	ld	(hl),0x07
1239  0266  18 05       	jr	l_player_move_jump_00108
1240  0268              l_player_move_jump_00104:
1241  0268  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1242  026B  36 04       	ld	(hl),0x04
1243  026D              l_player_move_jump_00108:
1244  026D  2A 00 00    	ld	hl,(_player_vel_y)
1245  0270  ED 5B 00 00 	ld	de,(_game_gravity)
1246  0274  19          	add	hl,de
1247  0275  22 00 00    	ld	(_player_vel_y),hl
1248  0278  11 08 00    	ld	de,_state+8
1249  027B  1A          	ld	a,(de)
1250  027C  E6 EF       	and	a,0xef
1251  027E  12          	ld	(de), a
1252  027F  D5          	push	de
1253  0280  21 64 00    	ld	hl,0x0064
1254  0283  E5          	push	hl
1255  0284  2A 00 00    	ld	hl,(_player_vel_y)
1256  0287  E5          	push	hl
1257  0288  CD 00 00    	call	__divsint_callee
1258  028B  D1          	pop	de
1259  028C  4D          	ld	c,l
1260  028D  44          	ld	b,h
1261  028E  CB 41       	bit	0,c
1262  0290  21 00 00    	ld	hl,_s_lin1
1263  0293  71          	ld	(hl),c
1264  0294  28 04       	jr	Z,l_player_move_jump_00110
1265  0296  21 00 00    	ld	hl,_s_lin1
1266  0299  35          	dec	(hl)
1267  029A              l_player_move_jump_00110:
1268  029A  3A 08 00    	ld	a,(_lin + 0x0008)
1269  029D  DD 77 FD    	ld	(ix-3),a
1270  02A0  21 00 00    	ld	hl,_s_lin1
1271  02A3  86          	add	a, (hl)
1272  02A4  77          	ld	(hl), a
1273  02A5  AF          	xor	a, a
1274  02A6  B9          	cp	a, c
1275  02A7  98          	sbc	a, b
1276  02A8  E2 AD 02    	jp	PO, l_player_move_jump_00210
1277  02AB  EE 80       	xor	a,0x80
1278  02AD              l_player_move_jump_00210:
1279  02AD  FA EE 02    	jp	M, l_player_move_jump_00131
1280  02B0  D5          	push	de
1281  02B1  CD 00 00    	call	_spr_set_up
1282  02B4  D1          	pop	de
1283  02B5  21 08 00    	ld	hl,+(_col + 0x0008)
1284  02B8  46          	ld	b, (hl)
1285  02B9  3A 00 00    	ld	a,(_s_lin1)
1286  02BC  D5          	push	de
1287  02BD  4F          	ld	c,a
1288  02BE  C5          	push	bc
1289  02BF  CD B4 0B    	call	_player_check_ceil
1290  02C2  F1          	pop	af
1291  02C3  D1          	pop	de
1292  02C4  7D          	ld	a, l
1293  02C5  B7          	or	a, a
1294  02C6  20 0C       	jr	NZ,l_player_move_jump_00112
1295  02C8  21 00 00    	ld	hl,0x0000
1296  02CB  22 00 00    	ld	(_player_vel_y),hl
1297  02CE  1A          	ld	a,(de)
1298  02CF  E6 F2       	and	a,+((0xfb&0xf7)&0xfe)
1299  02D1  12          	ld	(de),a
1300  02D2  18 06       	jr	l_player_move_jump_00113
1301  02D4              l_player_move_jump_00112:
1302  02D4  3A 00 00    	ld	a,(_s_lin1)
1303  02D7  32 08 00    	ld	((_lin + 0x0008)),a
1304  02DA              l_player_move_jump_00113:
1305  02DA  3A 00 00    	ld	a,(_s_lin1)
1306  02DD  32 00 00    	ld	(_player_jump_top),a
1307  02E0  3E 80       	ld	a,0x80
1308  02E2  21 00 00    	ld	hl,_player_jump_top
1309  02E5  96          	sub	a, (hl)
1310  02E6  D2 9A 03    	jp	NC, l_player_move_jump_00132
1311  02E9  36 00       	ld	(hl),0x00
1312  02EB  C3 9A 03    	jp	l_player_move_jump_00132
1313  02EE              l_player_move_jump_00131:
1314  02EE  3E 70       	ld	a,0x70
1315  02F0  21 00 00    	ld	hl,_s_lin1
1316  02F3  96          	sub	a, (hl)
1317  02F4  30 18       	jr	NC,l_player_move_jump_00120
1318  02F6  3E C8       	ld	a,0xc8
1319  02F8  96          	sub	a, (hl)
1320  02F9  30 07       	jr	NC,l_player_move_jump_00117
1321  02FB  21 00 00    	ld	hl,_v0
1322  02FE  36 00       	ld	(hl),0x00
1323  0300  18 15       	jr	l_player_move_jump_00121
1324  0302              l_player_move_jump_00117:
1325  0302  21 00 00    	ld	hl,_v0
1326  0305  36 70       	ld	(hl),0x70
1327  0307  21 00 00    	ld	hl,_s_lin1
1328  030A  36 70       	ld	(hl),0x70
1329  030C  18 09       	jr	l_player_move_jump_00121
1330  030E              l_player_move_jump_00120:
1331  030E  D5          	push	de
1332  030F  CD 2B 0D    	call	_player_get_floor
1333  0312  D1          	pop	de
1334  0313  7D          	ld	a,l
1335  0314  32 00 00    	ld	(_v0),a
1336  0317              l_player_move_jump_00121:
1337  0317  3A 00 00    	ld	a,(_s_lin1)
1338  031A  21 00 00    	ld	hl,_v0
1339  031D  96          	sub	a, (hl)
1340  031E  38 6F       	jr	C,l_player_move_jump_00128
1341  0320  7E          	ld	a, (hl)
1342  0321  21 00 00    	ld	hl,_s_lin0
1343  0324  96          	sub	a, (hl)
1344  0325  38 68       	jr	C,l_player_move_jump_00128
1345  0327  3A 00 00    	ld	a,(_v0)
1346  032A  4F          	ld	c,a
1347  032B  06 00       	ld	b,0x00
1348  032D  3A 00 00    	ld	a,(_player_jump_top)
1349  0330  DD 77 FE    	ld	(ix-2),a
1350  0333  DD 36 FF 00 	ld	(ix-1),0x00
1351  0337  79          	ld	a, c
1352  0338  DD 96 FE    	sub	a,(ix-2)
1353  033B  4F          	ld	c, a
1354  033C  78          	ld	a, b
1355  033D  DD 9E FF    	sbc	a,(ix-1)
1356  0340  47          	ld	b, a
1357  0341  79          	ld	a, c
1358  0342  D6 28       	sub	a,0x28
1359  0344  78          	ld	a, b
1360  0345  17          	rla
1361  0346  3F          	ccf
1362  0347  1F          	rra
1363  0348  DE 80       	sbc	a,0x80
1364  034A  38 04       	jr	C,l_player_move_jump_00123
1365  034C  1A          	ld	a, (de)
1366  034D  F6 20       	or	a,0x20
1367  034F  12          	ld	(de), a
1368  0350              l_player_move_jump_00123:
1369  0350  3A 00 00    	ld	a,(_v0)
1370  0353  32 08 00    	ld	((_lin + 0x0008)),a
1371  0356  21 00 00    	ld	hl,0x0000
1372  0359  22 00 00    	ld	(_player_vel_y),hl
1373  035C  1A          	ld	a, (de)
1374  035D  E6 FC       	and	a,+(0xfd&0xfe)
1375  035F  12          	ld	(de),a
1376  0360  3A 00 00    	ld	a,(_player_jump_lin)
1377  0363  21 00 00    	ld	hl,_v0
1378  0366  96          	sub	a, (hl)
1379  0367  20 0C       	jr	NZ,l_player_move_jump_00125
1380  0369  3A 08 00    	ld	a,(_state_a + 0x0008)
1381  036C  CB 57       	bit	2, a
1382  036E  28 05       	jr	Z,l_player_move_jump_00125
1383  0370  E6 FE       	and	a,0xfe
1384  0372  32 08 00    	ld	((_state_a + 0x0008)),a
1385  0375              l_player_move_jump_00125:
1386  0375  3A 08 00    	ld	a,(_state_a + 0x0008)
1387  0378  E6 7B       	and	a,+(0x7f&0xfb)
1388  037A  32 08 00    	ld	((_state_a + 0x0008)),a
1389  037D  CD 7D 05    	call	_player_handle_conveyor
1390  0380  CD 00 00    	call	_ay_fx_stop
1391  0383  21 08 00    	ld	hl, +(_spr_speed + 0x0008)
1392  0386  36 04       	ld	(hl),0x04
1393  0388  CD 21 05    	call	_player_check_conveyor
1394  038B  2E 00       	ld	l,0x00
1395  038D  18 41       	jr	l_player_move_jump_00138
1396  038F              l_player_move_jump_00128:
1397  038F  D5          	push	de
1398  0390  CD 00 00    	call	_spr_set_down
1399  0393  D1          	pop	de
1400  0394  3A 00 00    	ld	a,(_s_lin1)
1401  0397  32 08 00    	ld	((_lin + 0x0008)),a
1402  039A              l_player_move_jump_00132:
1403  039A  1A          	ld	a, (de)
1404  039B  CB 5F       	bit	3, a
1405  039D  20 04       	jr	NZ,l_player_move_jump_00135
1406  039F  CB 57       	bit	2, a
1407  03A1  28 2B       	jr	Z,l_player_move_jump_00136
1408  03A3              l_player_move_jump_00135:
1409  03A3  2A 00 00    	ld	hl,(_player_jump_count)
1410  03A6  26 00       	ld	h,0x00
1411  03A8  01 00 00    	ld	bc,_player_jump_hor
1412  03AB  09          	add	hl,bc
1413  03AC  7E          	ld	a,(hl)
1414  03AD  B7          	or	a, a
1415  03AE  28 1B       	jr	Z,l_player_move_jump_00134
1416  03B0  3A 00 00    	ld	a,(_player_vel_y)
1417  03B3  21 00 00    	ld	hl,_game_gravity
1418  03B6  96          	sub	a, (hl)
1419  03B7  21 00 00    	ld	hl,_player_vel_y
1420  03BA  77          	ld	(hl), a
1421  03BB  23          	inc	hl
1422  03BC  7E          	ld	a, (hl)
1423  03BD  21 01 00    	ld	hl,_game_gravity + 1
1424  03C0  9E          	sbc	a, (hl)
1425  03C1  32 01 00    	ld	(_player_vel_y + 1),a
1426  03C4  CD 00 00    	call	_spr_move_horizontal
1427  03C7  2E 00       	ld	l,0x00
1428  03C9  18 05       	jr	l_player_move_jump_00138
1429  03CB              l_player_move_jump_00134:
1430  03CB  CD 00 00    	call	_spr_move_horizontal
1431  03CE              l_player_move_jump_00136:
1432  03CE  2E 01       	ld	l,0x01
1433  03D0              l_player_move_jump_00138:
1434  03D0  DD F9       	ld	sp, ix
1435  03D2  DD E1       	pop	ix
1436  03D4  C9          	ret
1437  03D5              	SECTION code_compiler
1438  03D5              ;	---------------------------------
1439  03D5              ; Function player_move_walk
1440  03D5              ; ---------------------------------
1441  03D5              _player_move_walk:
1442  03D5  CD 7D 08    	call	_player_check_input
1443  03D8  7D          	ld	a, l
1444  03D9  B7          	or	a, a
1445  03DA  28 5C       	jr	Z,l_player_move_walk_00117
1446  03DC  21 00 00    	ld	hl,_dirs
1447  03DF  CB 7E       	bit	7, (hl)
1448  03E1  28 0E       	jr	Z,l_player_move_walk_00104
1449  03E3  CD B5 05    	call	_player_new_jump
1450  03E6  7D          	ld	a, l
1451  03E7  B7          	or	a, a
1452  03E8  28 03       	jr	Z,l_player_move_walk_00102
1453  03EA  CD 00 00    	call	_spr_move_horizontal
1454  03ED              l_player_move_walk_00102:
1455  03ED  2E 01       	ld	l,0x01
1456  03EF  18 5D       	jr	l_player_move_walk_00119
1457  03F1              l_player_move_walk_00104:
1458  03F1  11 08 00    	ld	de,_state_a+8
1459  03F4  1A          	ld	a, (de)
1460  03F5  E6 FD       	and	a,0xfd
1461  03F7  12          	ld	(de), a
1462  03F8  01 08 00    	ld	bc,_state+8
1463  03FB  0A          	ld	a, (bc)
1464  03FC  CB 67       	bit	4, a
1465  03FE  20 07       	jr	NZ,l_player_move_walk_00106
1466  0400  C5          	push	bc
1467  0401  D5          	push	de
1468  0402  CD B1 04    	call	_player_handle_walk
1469  0405  D1          	pop	de
1470  0406  C1          	pop	bc
1471  0407              l_player_move_walk_00106:
1472  0407  1A          	ld	a, (de)
1473  0408  0F          	rrca
1474  0409  38 05       	jr	C,l_player_move_walk_00112
1475  040B  CD 7D 05    	call	_player_handle_conveyor
1476  040E  18 1E       	jr	l_player_move_walk_00113
1477  0410              l_player_move_walk_00112:
1478  0410  21 00 00    	ld	hl,_dirs
1479  0413  CB 5E       	bit	3, (hl)
1480  0415  28 04       	jr	Z,l_player_move_walk_00108
1481  0417  0A          	ld	a, (bc)
1482  0418  F6 04       	or	a,0x04
1483  041A  02          	ld	(bc), a
1484  041B              l_player_move_walk_00108:
1485  041B  21 00 00    	ld	hl,_dirs
1486  041E  CB 56       	bit	2, (hl)
1487  0420  28 04       	jr	Z,l_player_move_walk_00110
1488  0422  0A          	ld	a, (bc)
1489  0423  F6 08       	or	a,0x08
1490  0425  02          	ld	(bc), a
1491  0426              l_player_move_walk_00110:
1492  0426  21 08 04    	ld	hl,0x0408
1493  0429  E5          	push	hl
1494  042A  CD A0 08    	call	_player_tile
1495  042D  F1          	pop	af
1496  042E              l_player_move_walk_00113:
1497  042E  CD E9 04    	call	_player_handle_fall
1498  0431  CD 00 00    	call	_spr_move_horizontal
1499  0434  2E 01       	ld	l,0x01
1500  0436  18 16       	jr	l_player_move_walk_00119
1501  0438              l_player_move_walk_00117:
1502  0438  01 08 00    	ld	bc,_state_a+8
1503  043B  0A          	ld	a, (bc)
1504  043C  E6 FD       	and	a,0xfd
1505  043E  02          	ld	(bc), a
1506  043F  CD 7D 05    	call	_player_handle_conveyor
1507  0442  7D          	ld	a, l
1508  0443  B7          	or	a, a
1509  0444  28 03       	jr	Z,l_player_move_walk_00115
1510  0446  CD 00 00    	call	_spr_move_horizontal
1511  0449              l_player_move_walk_00115:
1512  0449  CD E9 04    	call	_player_handle_fall
1513  044C  2E 00       	ld	l,0x00
1514  044E              l_player_move_walk_00119:
1515  044E  C9          	ret
1516  044F              	SECTION code_compiler
1517  044F              ;	---------------------------------
1518  044F              ; Function player_handle_lock
1519  044F              ; ---------------------------------
1520  044F              _player_handle_lock:
1521  044F  3A 08 00    	ld	a,(_state + 0x0008)
1522  0452  CB 67       	bit	4, a
1523  0454  20 53       	jr	NZ,l_player_handle_lock_00116
1524  0456  3A 00 00    	ld	a,(_dirs)
1525  0459  B7          	or	a, a
1526  045A  20 09       	jr	NZ,l_player_handle_lock_00113
1527  045C  01 08 00    	ld	bc,_state_a+8
1528  045F  0A          	ld	a, (bc)
1529  0460  E6 FE       	and	a,0xfe
1530  0462  02          	ld	(bc), a
1531  0463  18 4B       	jr	l_player_handle_lock_00118
1532  0465              l_player_handle_lock_00113:
1533  0465  21 00 00    	ld	hl,_dirs
1534  0468  CB 56       	bit	2,(hl)
1535  046A  20 04       	jr	NZ,l_player_handle_lock_00108
1536  046C  CB 5E       	bit	3, (hl)
1537  046E  28 19       	jr	Z,l_player_handle_lock_00109
1538  0470              l_player_handle_lock_00108:
1539  0470  21 00 00    	ld	hl,_v0
1540  0473  36 00       	ld	(hl),0x00
1541  0475  21 00 00    	ld	hl,_v1
1542  0478  36 00       	ld	(hl),0x00
1543  047A  01 08 00    	ld	bc,_state_a+8
1544  047D  0A          	ld	a, (bc)
1545  047E  F6 01       	or	a,0x01
1546  0480  02          	ld	(bc), a
1547  0481  3A 00 00    	ld	a,(_dirs)
1548  0484  32 00 00    	ld	(_dirs_last),a
1549  0487  18 27       	jr	l_player_handle_lock_00118
1550  0489              l_player_handle_lock_00109:
1551  0489  21 00 00    	ld	hl,_dirs
1552  048C  CB 7E       	bit	7, (hl)
1553  048E  28 10       	jr	Z,l_player_handle_lock_00105
1554  0490  21 00 00    	ld	hl,_dirs_last
1555  0493  CB 7E       	bit	7, (hl)
1556  0495  28 09       	jr	Z,l_player_handle_lock_00105
1557  0497  01 08 00    	ld	bc,_state_a+8
1558  049A  0A          	ld	a, (bc)
1559  049B  F6 01       	or	a,0x01
1560  049D  02          	ld	(bc), a
1561  049E  18 10       	jr	l_player_handle_lock_00118
1562  04A0              l_player_handle_lock_00105:
1563  04A0  01 08 00    	ld	bc,_state_a+8
1564  04A3  0A          	ld	a, (bc)
1565  04A4  E6 FE       	and	a,0xfe
1566  04A6  02          	ld	(bc), a
1567  04A7  18 07       	jr	l_player_handle_lock_00118
1568  04A9              l_player_handle_lock_00116:
1569  04A9  01 08 00    	ld	bc,_state_a+8
1570  04AC  0A          	ld	a, (bc)
1571  04AD  E6 FE       	and	a,0xfe
1572  04AF  02          	ld	(bc), a
1573  04B0              l_player_handle_lock_00118:
1574  04B0  C9          	ret
1575  04B1              	SECTION code_compiler
1576  04B1              ;	---------------------------------
1577  04B1              ; Function player_handle_walk
1578  04B1              ; ---------------------------------
1579  04B1              _player_handle_walk:
1580  04B1  21 00 00    	ld	hl,_dirs
1581  04B4  CB 5E       	bit	3, (hl)
1582  04B6  28 11       	jr	Z,l_player_handle_walk_00104
1583  04B8  3A 08 00    	ld	a,(_state_a + 0x0008)
1584  04BB  CB 5F       	bit	3, a
1585  04BD  28 07       	jr	Z,l_player_handle_walk_00102
1586  04BF  01 08 00    	ld	bc,_colint+8
1587  04C2  0A          	ld	a, (bc)
1588  04C3  C6 FF       	add	a,0xff
1589  04C5  02          	ld	(bc), a
1590  04C6              l_player_handle_walk_00102:
1591  04C6  CD 00 00    	call	_spr_set_right
1592  04C9              l_player_handle_walk_00104:
1593  04C9  21 00 00    	ld	hl,_dirs
1594  04CC  CB 56       	bit	2, (hl)
1595  04CE  28 10       	jr	Z,l_player_handle_walk_00108
1596  04D0  3A 08 00    	ld	a,(_state_a + 0x0008)
1597  04D3  CB 67       	bit	4, a
1598  04D5  28 06       	jr	Z,l_player_handle_walk_00106
1599  04D7  01 08 00    	ld	bc,_colint+8
1600  04DA  0A          	ld	a, (bc)
1601  04DB  3C          	inc	a
1602  04DC  02          	ld	(bc), a
1603  04DD              l_player_handle_walk_00106:
1604  04DD  CD 00 00    	call	_spr_set_left
1605  04E0              l_player_handle_walk_00108:
1606  04E0  21 08 04    	ld	hl,0x0408
1607  04E3  E5          	push	hl
1608  04E4  CD A0 08    	call	_player_tile
1609  04E7  F1          	pop	af
1610  04E8  C9          	ret
1611  04E9              	SECTION code_compiler
1612  04E9              ;	---------------------------------
1613  04E9              ; Function player_handle_fall
1614  04E9              ; ---------------------------------
1615  04E9              _player_handle_fall:
1616  04E9  AF          	xor	a, a
1617  04EA  F5          	push	af
1618  04EB  33          	inc	sp
1619  04EC  CD B7 0C    	call	_player_check_floor
1620  04EF  33          	inc	sp
1621  04F0  7D          	ld	a, l
1622  04F1  B7          	or	a, a
1623  04F2  C8          	ret	Z
1624  04F3  3E 01       	ld	a,0x01
1625  04F5  F5          	push	af
1626  04F6  33          	inc	sp
1627  04F7  CD B7 0C    	call	_player_check_floor
1628  04FA  33          	inc	sp
1629  04FB  7D          	ld	a, l
1630  04FC  B7          	or	a, a
1631  04FD  C8          	ret	Z
1632  04FE  3A 08 00    	ld	a,(_lin + 0x0008)
1633  0501  32 00 00    	ld	(_player_jump_top),a
1634  0504  01 08 00    	ld	bc,_state+8
1635  0507  0A          	ld	a, (bc)
1636  0508  F6 02       	or	a,0x02
1637  050A  E6 F3       	and	a,+(0xf7&0xfb)
1638  050C  02          	ld	(bc),a
1639  050D  01 08 00    	ld	bc,_state_a+8
1640  0510  0A          	ld	a, (bc)
1641  0511  E6 FC       	and	a,+(0xfe&0xfd)
1642  0513  02          	ld	(bc),a
1643  0514  21 00 00    	ld	hl,_player_jump_count
1644  0517  36 FF       	ld	(hl),0xff
1645  0519  21 00 00    	ld	hl,_player_fall_start
1646  051C  36 01       	ld	(hl),0x01
1647  051E  C3 00 00    	jp  _audio_fall
1648  0521              	SECTION code_compiler
1649  0521              ;	---------------------------------
1650  0521              ; Function player_check_conveyor
1651  0521              ; ---------------------------------
1652  0521              _player_check_conveyor:
1653  0521  3A 08 00    	ld	a,(_state_a + 0x0008)
1654  0524  0F          	rrca
1655  0525  D8          	ret	C
1656  0526  C3 29 05    	jp  _player_check_conveyor_int
1657  0529              	SECTION code_compiler
1658  0529              ;	---------------------------------
1659  0529              ; Function player_check_conveyor_int
1660  0529              ; ---------------------------------
1661  0529              _player_check_conveyor_int:
1662  0529  21 08 00    	ld	hl,+(_col + 0x0008)
1663  052C  56          	ld	d, (hl)
1664  052D  3A 08 00    	ld	a,(_lin + 0x0008)
1665  0530  C6 10       	add	a,0x10
1666  0532  5F          	ld	e, a
1667  0533  D5          	push	de
1668  0534  CD 00 00    	call	_spr_calc_index
1669  0537  F1          	pop	af
1670  0538  22 00 00    	ld	(_index1),hl
1671  053B  01 00 00    	ld	bc,_tile_class+0
1672  053E  11 00 00    	ld	de,_scr_map
1673  0541  2A 00 00    	ld	hl,(_index1)
1674  0544  19          	add	hl,de
1675  0545  6E          	ld	l,(hl)
1676  0546  26 00       	ld	h,0x00
1677  0548  09          	add	hl, bc
1678  0549  7E          	ld	a, (hl)
1679  054A  32 00 00    	ld	(_v0),a
1680  054D  ED 5B 00 00 	ld	de,(_index1)
1681  0551  13          	inc	de
1682  0552  21 00 00    	ld	hl,_scr_map
1683  0555  19          	add	hl, de
1684  0556  6E          	ld	l, (hl)
1685  0557  26 00       	ld	h,0x00
1686  0559  09          	add	hl, bc
1687  055A  7E          	ld	a, (hl)
1688  055B  32 00 00    	ld	(_v1),a
1689  055E  3A 00 00    	ld	a,(_v0)
1690  0561  D6 04       	sub	a,0x04
1691  0563  28 07       	jr	Z,l_player_check_conveyor_int_00101
1692  0565  3A 00 00    	ld	a,(_v1)
1693  0568  D6 04       	sub	a,0x04
1694  056A  20 09       	jr	NZ,l_player_check_conveyor_int_00102
1695  056C              l_player_check_conveyor_int_00101:
1696  056C  01 08 00    	ld	bc,_state+8
1697  056F  0A          	ld	a, (bc)
1698  0570  F6 10       	or	a,0x10
1699  0572  02          	ld	(bc), a
1700  0573  18 07       	jr	l_player_check_conveyor_int_00105
1701  0575              l_player_check_conveyor_int_00102:
1702  0575  01 08 00    	ld	bc,_state+8
1703  0578  0A          	ld	a, (bc)
1704  0579  E6 EF       	and	a,0xef
1705  057B  02          	ld	(bc), a
1706  057C              l_player_check_conveyor_int_00105:
1707  057C  C9          	ret
1708  057D              	SECTION code_compiler
1709  057D              ;	---------------------------------
1710  057D              ; Function player_handle_conveyor
1711  057D              ; ---------------------------------
1712  057D              _player_handle_conveyor:
1713  057D  CD 21 05    	call	_player_check_conveyor
1714  0580  3A 08 00    	ld	a,(_state + 0x0008)
1715  0583  CB 67       	bit	4, a
1716  0585  28 2B       	jr	Z,l_player_handle_conveyor_00106
1717  0587  3A 00 00    	ld	a,(_game_conveyor_dir)
1718  058A  D6 02       	sub	a,0x02
1719  058C  20 0F       	jr	NZ,l_player_handle_conveyor_00102
1720  058E  CD 00 00    	call	_spr_set_right
1721  0591  21 08 04    	ld	hl,0x0408
1722  0594  E5          	push	hl
1723  0595  CD A0 08    	call	_player_tile
1724  0598  F1          	pop	af
1725  0599  2E 01       	ld	l,0x01
1726  059B  18 17       	jr	l_player_handle_conveyor_00107
1727  059D              l_player_handle_conveyor_00102:
1728  059D  3A 00 00    	ld	a,(_game_conveyor_dir)
1729  05A0  3D          	dec	a
1730  05A1  20 0F       	jr	NZ,l_player_handle_conveyor_00106
1731  05A3  CD 00 00    	call	_spr_set_left
1732  05A6  21 08 04    	ld	hl,0x0408
1733  05A9  E5          	push	hl
1734  05AA  CD A0 08    	call	_player_tile
1735  05AD  F1          	pop	af
1736  05AE  2E 01       	ld	l,0x01
1737  05B0  18 02       	jr	l_player_handle_conveyor_00107
1738  05B2              l_player_handle_conveyor_00106:
1739  05B2  2E 00       	ld	l,0x00
1740  05B4              l_player_handle_conveyor_00107:
1741  05B4  C9          	ret
1742  05B5              	SECTION code_compiler
1743  05B5              ;	---------------------------------
1744  05B5              ; Function player_new_jump
1745  05B5              ; ---------------------------------
1746  05B5              _player_new_jump:
1747  05B5  21 08 00    	ld	hl,+(_col + 0x0008)
1748  05B8  56          	ld	d, (hl)
1749  05B9  21 08 00    	ld	hl,+(_lin + 0x0008)
1750  05BC  46          	ld	b, (hl)
1751  05BD  05          	dec	b
1752  05BE  05          	dec	b
1753  05BF  58          	ld	e,b
1754  05C0  D5          	push	de
1755  05C1  CD B4 0B    	call	_player_check_ceil
1756  05C4  F1          	pop	af
1757  05C5  7D          	ld	a, l
1758  05C6  B7          	or	a, a
1759  05C7  CA AD 06    	jp	Z, l_player_new_jump_00128
1760  05CA  01 08 00    	ld	bc,_state_a+8
1761  05CD  0A          	ld	a, (bc)
1762  05CE  CB 4F       	bit	1,a
1763  05D0  28 03       	jr	Z,l_player_new_jump_00185
1764  05D2  5F          	ld	e,a
1765  05D3  18 08       	jr	l_player_new_jump_00102
1766  05D5              l_player_new_jump_00185:
1767  05D5  3A 00 00    	ld	a,(_dirs)
1768  05D8  32 00 00    	ld	(_dirs_last),a
1769  05DB  18 09       	jr	l_player_new_jump_00103
1770  05DD              l_player_new_jump_00102:
1771  05DD  21 00 00    	ld	hl,_dirs_last
1772  05E0  36 00       	ld	(hl),0x00
1773  05E2  CB 83       	res	0, e
1774  05E4  7B          	ld	a, e
1775  05E5  02          	ld	(bc), a
1776  05E6              l_player_new_jump_00103:
1777  05E6  0A          	ld	a, (bc)
1778  05E7  E6 FB       	and	a,0xfb
1779  05E9  F6 80       	or	a,0x80
1780  05EB  02          	ld	(bc),a
1781  05EC  21 64 00    	ld	hl,0x0064
1782  05EF  22 00 00    	ld	(_game_gravity),hl
1783  05F2  21 A8 FD    	ld	hl,0xfda8
1784  05F5  22 00 00    	ld	(_player_vel_y0),hl
1785  05F8  21 00 00    	ld	hl,_player_vel_inc
1786  05FB  36 01       	ld	(hl),0x01
1787  05FD  21 00 00    	ld	hl,_player_jump_count
1788  0600  36 FF       	ld	(hl),0xff
1789  0602  3A 00 00    	ld	a,(_s_lin0)
1790  0605  32 00 00    	ld	(_player_jump_lin),a
1791  0608  C5          	push	bc
1792  0609  CD 00 00    	call	_audio_jump
1793  060C  CD 00 00    	call	_spr_set_up
1794  060F  C1          	pop	bc
1795  0610  2A 00 00    	ld	hl,(_player_vel_y0)
1796  0613  22 00 00    	ld	(_player_vel_y),hl
1797  0616  0A          	ld	a, (bc)
1798  0617  E6 FB       	and	a,0xfb
1799  0619  02          	ld	(bc), a
1800  061A  C5          	push	bc
1801  061B  CD 21 05    	call	_player_check_conveyor
1802  061E  C1          	pop	bc
1803  061F  2A 08 00    	ld	hl,(_state + 0x0008)
1804  0622  5D          	ld	e, l
1805  0623  CB 9B       	res	3, e
1806  0625  53          	ld	d, e
1807  0626  CB 92       	res	2, d
1808  0628  CB 65       	bit	4, l
1809  062A  28 45       	jr	Z,l_player_new_jump_00122
1810  062C  0A          	ld	a, (bc)
1811  062D  CB 47       	bit	0, a
1812  062F  28 35       	jr	Z,l_player_new_jump_00115
1813  0631  21 00 00    	ld	hl,_dirs
1814  0634  CB 56       	bit	2,(hl)
1815  0636  20 14       	jr	NZ,l_player_new_jump_00108
1816  0638  CB 5E       	bit	3, (hl)
1817  063A  20 10       	jr	NZ,l_player_new_jump_00108
1818  063C  CB 4F       	bit	1, a
1819  063E  20 07       	jr	NZ,l_player_new_jump_00105
1820  0640  21 08 00    	ld	hl, +(_state + 0x0008)
1821  0643  73          	ld	(hl), e
1822  0644  72          	ld	(hl), d
1823  0645  18 05       	jr	l_player_new_jump_00108
1824  0647              l_player_new_jump_00105:
1825  0647  C5          	push	bc
1826  0648  CD 7D 05    	call	_player_handle_conveyor
1827  064B  C1          	pop	bc
1828  064C              l_player_new_jump_00108:
1829  064C  21 00 00    	ld	hl,_dirs
1830  064F  CB 56       	bit	2, (hl)
1831  0651  28 05       	jr	Z,l_player_new_jump_00111
1832  0653  C5          	push	bc
1833  0654  CD 00 00    	call	_spr_set_left
1834  0657  C1          	pop	bc
1835  0658              l_player_new_jump_00111:
1836  0658  21 00 00    	ld	hl,_dirs
1837  065B  CB 5E       	bit	3, (hl)
1838  065D  28 0C       	jr	Z,l_player_new_jump_00116
1839  065F  C5          	push	bc
1840  0660  CD 00 00    	call	_spr_set_right
1841  0663  C1          	pop	bc
1842  0664  18 05       	jr	l_player_new_jump_00116
1843  0666              l_player_new_jump_00115:
1844  0666  C5          	push	bc
1845  0667  CD 7D 05    	call	_player_handle_conveyor
1846  066A  C1          	pop	bc
1847  066B              l_player_new_jump_00116:
1848  066B  0A          	ld	a, (bc)
1849  066C  F6 02       	or	a,0x02
1850  066E  02          	ld	(bc), a
1851  066F  18 21       	jr	l_player_new_jump_00123
1852  0671              l_player_new_jump_00122:
1853  0671  21 08 00    	ld	hl, +(_state + 0x0008)
1854  0674  73          	ld	(hl), e
1855  0675  72          	ld	(hl), d
1856  0676  0A          	ld	a, (bc)
1857  0677  E6 FD       	and	a,0xfd
1858  0679  02          	ld	(bc), a
1859  067A  21 00 00    	ld	hl,_dirs
1860  067D  CB 56       	bit	2, (hl)
1861  067F  28 05       	jr	Z,l_player_new_jump_00118
1862  0681  C5          	push	bc
1863  0682  CD 00 00    	call	_spr_set_left
1864  0685  C1          	pop	bc
1865  0686              l_player_new_jump_00118:
1866  0686  21 00 00    	ld	hl,_dirs
1867  0689  CB 5E       	bit	3, (hl)
1868  068B  28 05       	jr	Z,l_player_new_jump_00123
1869  068D  C5          	push	bc
1870  068E  CD 00 00    	call	_spr_set_right
1871  0691  C1          	pop	bc
1872  0692              l_player_new_jump_00123:
1873  0692  3A 08 00    	ld	a,(_state + 0x0008)
1874  0695  CB 5F       	bit	3, a
1875  0697  20 08       	jr	NZ,l_player_new_jump_00125
1876  0699  CB 57       	bit	2, a
1877  069B  20 04       	jr	NZ,l_player_new_jump_00125
1878  069D  0A          	ld	a, (bc)
1879  069E  F6 04       	or	a,0x04
1880  06A0  02          	ld	(bc), a
1881  06A1              l_player_new_jump_00125:
1882  06A1  21 08 04    	ld	hl,0x0408
1883  06A4  E5          	push	hl
1884  06A5  CD A0 08    	call	_player_tile
1885  06A8  F1          	pop	af
1886  06A9  2E 01       	ld	l,0x01
1887  06AB  18 08       	jr	l_player_new_jump_00130
1888  06AD              l_player_new_jump_00128:
1889  06AD  CD 00 00    	call	_spr_move_horizontal
1890  06B0  CD E9 04    	call	_player_handle_fall
1891  06B3  2E 00       	ld	l,0x00
1892  06B5              l_player_new_jump_00130:
1893  06B5  C9          	ret
1894  06B6              	SECTION code_compiler
1895  06B6              ;	---------------------------------
1896  06B6              ; Function player_collision
1897  06B6              ; ---------------------------------
1898  06B6              _player_collision:
1899  06B6  21 08 00    	ld	hl,+(_col + 0x0008)
1900  06B9  56          	ld	d, (hl)
1901  06BA  21 08 00    	ld	hl,+(_lin + 0x0008)
1902  06BD  5E          	ld	e, (hl)
1903  06BE  D5          	push	de
1904  06BF  CD 00 00    	call	_spr_calc_index
1905  06C2  F1          	pop	af
1906  06C3  22 00 00    	ld	(_index1),hl
1907  06C6  CD 4E 08    	call	_player_pick
1908  06C9  21 08 00    	ld	hl,+(_col + 0x0008)
1909  06CC  56          	ld	d, (hl)
1910  06CD  3A 08 00    	ld	a,(_lin + 0x0008)
1911  06D0  C6 0E       	add	a,0x0e
1912  06D2  5F          	ld	e, a
1913  06D3  D5          	push	de
1914  06D4  CD 00 00    	call	_spr_calc_index
1915  06D7  F1          	pop	af
1916  06D8  22 00 00    	ld	(_index1),hl
1917  06DB  CD 4E 08    	call	_player_pick
1918  06DE  21 08 00    	ld	hl,+(_col + 0x0008)
1919  06E1  56          	ld	d, (hl)
1920  06E2  14          	inc	d
1921  06E3  21 08 00    	ld	hl,+(_lin + 0x0008)
1922  06E6  5E          	ld	e, (hl)
1923  06E7  D5          	push	de
1924  06E8  CD 00 00    	call	_spr_calc_index
1925  06EB  F1          	pop	af
1926  06EC  22 00 00    	ld	(_index1),hl
1927  06EF  CD 4E 08    	call	_player_pick
1928  06F2  21 08 00    	ld	hl,+(_col + 0x0008)
1929  06F5  56          	ld	d, (hl)
1930  06F6  14          	inc	d
1931  06F7  3A 08 00    	ld	a,(_lin + 0x0008)
1932  06FA  C6 0E       	add	a,0x0e
1933  06FC  5F          	ld	e, a
1934  06FD  D5          	push	de
1935  06FE  CD 00 00    	call	_spr_calc_index
1936  0701  F1          	pop	af
1937  0702  22 00 00    	ld	(_index1),hl
1938  0705  CD 4E 08    	call	_player_pick
1939  0708  21 00 00    	ld	hl,_i
1940  070B  36 00       	ld	(hl),0x00
1941  070D              l_player_collision_00139:
1942  070D  2A 00 00    	ld	hl,(_i)
1943  0710  26 00       	ld	h,0x00
1944  0712  01 00 00    	ld	bc,_class
1945  0715  09          	add	hl,bc
1946  0716  7E          	ld	a,(hl)
1947  0717  B7          	or	a,a
1948  0718  CA 42 08    	jp	Z,l_player_collision_00140
1949  071B  2A 00 00    	ld	hl,(_i)
1950  071E  26 00       	ld	h,0x00
1951  0720  01 00 00    	ld	bc,_col
1952  0723  09          	add	hl,bc
1953  0724  4E          	ld	c, (hl)
1954  0725  06 00       	ld	b,0x00
1955  0727  ED 5B 08 00 	ld	de,(_col + 0x0008)
1956  072B  50          	ld	d,b
1957  072C  79          	ld	a, c
1958  072D  93          	sub	a, e
1959  072E  6F          	ld	l, a
1960  072F  78          	ld	a, b
1961  0730  9A          	sbc	a, d
1962  0731  67          	ld	h, a
1963  0732  CD 00 00    	call	_abs_fastcall
1964  0735  7D          	ld	a,l
1965  0736  32 00 00    	ld	(_v0),a
1966  0739  3D          	dec	a
1967  073A  20 75       	jr	NZ,l_player_collision_00120
1968  073C  2A 00 00    	ld	hl,(_i)
1969  073F  26 00       	ld	h,0x00
1970  0741  01 00 00    	ld	bc,_spr_kind
1971  0744  09          	add	hl,bc
1972  0745  7E          	ld	a,(hl)
1973  0746  FE 01       	cp	a,0x01
1974  0748  28 04       	jr	Z,l_player_collision_00101
1975  074A  D6 08       	sub	a,0x08
1976  074C  20 0F       	jr	NZ,l_player_collision_00102
1977  074E              l_player_collision_00101:
1978  074E  2A 00 00    	ld	hl,(_i)
1979  0751  26 00       	ld	h,0x00
1980  0753  01 00 00    	ld	bc,_colint
1981  0756  09          	add	hl,bc
1982  0757  7E          	ld	a,(hl)
1983  0758  32 00 00    	ld	(_v1),a
1984  075B  18 05       	jr	l_player_collision_00103
1985  075D              l_player_collision_00102:
1986  075D  21 00 00    	ld	hl,_v1
1987  0760  36 01       	ld	(hl),0x01
1988  0762              l_player_collision_00103:
1989  0762  21 08 00    	ld	hl,+(_colint + 0x0008)
1990  0765  4E          	ld	c, (hl)
1991  0766  3A 00 00    	ld	a,(_i)
1992  0769  C6 00       	add	a,+((_col) & 0xFF)
1993  076B  5F          	ld	e,a
1994  076C  3E 00       	ld	a,+((_col) / 256)
1995  076E  CE 00       	adc	a,0x00
1996  0770  57          	ld	d,a
1997  0771  79          	ld	a, c
1998  0772  B7          	or	a, a
1999  0773  20 1C       	jr	NZ,l_player_collision_00111
2000  0775  21 08 00    	ld	hl,+(_col + 0x0008)
2001  0778  46          	ld	b, (hl)
2002  0779  1A          	ld	a, (de)
2003  077A  6F          	ld	l, a
2004  077B  78          	ld	a, b
2005  077C  95          	sub	a, l
2006  077D  30 07       	jr	NC,l_player_collision_00108
2007  077F  21 00 00    	ld	hl,_v0
2008  0782  36 FF       	ld	(hl),0xff
2009  0784  18 0B       	jr	l_player_collision_00111
2010  0786              l_player_collision_00108:
2011  0786  3A 00 00    	ld	a,(_v1)
2012  0789  B7          	or	a, a
2013  078A  20 05       	jr	NZ,l_player_collision_00111
2014  078C  21 00 00    	ld	hl,_v0
2015  078F  36 FF       	ld	(hl),0xff
2016  0791              l_player_collision_00111:
2017  0791  79          	ld	a, c
2018  0792  D6 03       	sub	a,0x03
2019  0794  20 1B       	jr	NZ,l_player_collision_00120
2020  0796  21 08 00    	ld	hl,+(_col + 0x0008)
2021  0799  4E          	ld	c, (hl)
2022  079A  1A          	ld	a, (de)
2023  079B  91          	sub	a, c
2024  079C  30 07       	jr	NC,l_player_collision_00115
2025  079E  21 00 00    	ld	hl,_v0
2026  07A1  36 FF       	ld	(hl),0xff
2027  07A3  18 0C       	jr	l_player_collision_00120
2028  07A5              l_player_collision_00115:
2029  07A5  3A 00 00    	ld	a,(_v1)
2030  07A8  D6 03       	sub	a,0x03
2031  07AA  20 05       	jr	NZ,l_player_collision_00120
2032  07AC  21 00 00    	ld	hl,_v0
2033  07AF  36 FF       	ld	(hl),0xff
2034  07B1              l_player_collision_00120:
2035  07B1  3A 00 00    	ld	a,(_v0)
2036  07B4  D6 02       	sub	a,0x02
2037  07B6  D2 42 08    	jp	NC, l_player_collision_00140
2038  07B9  2A 00 00    	ld	hl,(_i)
2039  07BC  26 00       	ld	h,0x00
2040  07BE  01 00 00    	ld	bc,_lin
2041  07C1  09          	add	hl,bc
2042  07C2  4E          	ld	c,(hl)
2043  07C3  06 00       	ld	b,0x00
2044  07C5  ED 5B 08 00 	ld	de,(_lin + 0x0008)
2045  07C9  50          	ld	d,b
2046  07CA  79          	ld	a, c
2047  07CB  93          	sub	a, e
2048  07CC  6F          	ld	l, a
2049  07CD  78          	ld	a, b
2050  07CE  9A          	sbc	a, d
2051  07CF  67          	ld	h, a
2052  07D0  CD 00 00    	call	_abs_fastcall
2053  07D3  7D          	ld	a,l
2054  07D4  32 00 00    	ld	(_v0),a
2055  07D7  2A 00 00    	ld	hl,(_i)
2056  07DA  26 00       	ld	h,0x00
2057  07DC  01 00 00    	ld	bc,_lin
2058  07DF  09          	add	hl,bc
2059  07E0  4E          	ld	c,(hl)
2060  07E1  21 08 00    	ld	hl,+(_lin + 0x0008)
2061  07E4  46          	ld	b, (hl)
2062  07E5  79          	ld	a, c
2063  07E6  90          	sub	a, b
2064  07E7  30 13       	jr	NC,l_player_collision_00128
2065  07E9  21 00 00    	ld	hl,_v0
2066  07EC  7E          	ld	a, (hl)
2067  07ED  D6 10       	sub	a,0x10
2068  07EF  30 04       	jr	NC,l_player_collision_00122
2069  07F1  36 01       	ld	(hl),0x01
2070  07F3  18 18       	jr	l_player_collision_00129
2071  07F5              l_player_collision_00122:
2072  07F5  21 00 00    	ld	hl,_v0
2073  07F8  36 00       	ld	(hl),0x00
2074  07FA  18 11       	jr	l_player_collision_00129
2075  07FC              l_player_collision_00128:
2076  07FC  21 00 00    	ld	hl,_v0
2077  07FF  7E          	ld	a, (hl)
2078  0800  D6 0E       	sub	a,0x0e
2079  0802  30 04       	jr	NC,l_player_collision_00125
2080  0804  36 01       	ld	(hl),0x01
2081  0806  18 05       	jr	l_player_collision_00129
2082  0808              l_player_collision_00125:
2083  0808  21 00 00    	ld	hl,_v0
2084  080B  36 00       	ld	(hl),0x00
2085  080D              l_player_collision_00129:
2086  080D  3A 00 00    	ld	a,(_v0)
2087  0810  B7          	or	a, a
2088  0811  28 2F       	jr	Z,l_player_collision_00140
2089  0813  2A 00 00    	ld	hl,(_i)
2090  0816  26 00       	ld	h,0x00
2091  0818  01 00 00    	ld	bc,_colint
2092  081B  09          	add	hl,bc
2093  081C  4E          	ld	c,(hl)
2094  081D  06 00       	ld	b,0x00
2095  081F  ED 5B 08 00 	ld	de,(_colint + 0x0008)
2096  0823  50          	ld	d,b
2097  0824  79          	ld	a, c
2098  0825  93          	sub	a, e
2099  0826  6F          	ld	l, a
2100  0827  78          	ld	a, b
2101  0828  9A          	sbc	a, d
2102  0829  67          	ld	h, a
2103  082A  CD 00 00    	call	_abs_fastcall
2104  082D  7D          	ld	a,l
2105  082E  32 00 00    	ld	(_v0),a
2106  0831  D6 02       	sub	a,0x02
2107  0833  30 0D       	jr	NC,l_player_collision_00140
2108  0835  21 FF FF    	ld	hl,0xffff
2109  0838  22 00 00    	ld	(_player_kill_index),hl
2110  083B  01 08 00    	ld	bc,_state+8
2111  083E  0A          	ld	a,(bc)
2112  083F  F6 20       	or	a,0x20
2113  0841  02          	ld	(bc), a
2114  0842              l_player_collision_00140:
2115  0842  21 00 00    	ld	hl,_i
2116  0845  7E          	ld	a,(hl)
2117  0846  3C          	inc	a
2118  0847  77          	ld	(hl),a
2119  0848  D6 08       	sub	a,0x08
2120  084A  DA 0D 07    	jp	C, l_player_collision_00139
2121  084D  C9          	ret
2122  084E              	SECTION code_compiler
2123  084E              ;	---------------------------------
2124  084E              ; Function player_pick
2125  084E              ; ---------------------------------
2126  084E              _player_pick:
2127  084E  01 00 00    	ld	bc,_scr_map
2128  0851  2A 00 00    	ld	hl,(_index1)
2129  0854  09          	add	hl,bc
2130  0855  7E          	ld	a,(hl)
2131  0856  32 00 00    	ld	(_v0),a
2132  0859  F5          	push	af
2133  085A  33          	inc	sp
2134  085B  CD 68 0A    	call	_player_pick_deadly
2135  085E  33          	inc	sp
2136  085F  7D          	ld	a,l
2137  0860  32 00 00    	ld	(_v0),a
2138  0863  2A 00 00    	ld	hl,(_index1)
2139  0866  E5          	push	hl
2140  0867  F5          	push	af
2141  0868  33          	inc	sp
2142  0869  CD 20 0A    	call	_player_pick_item
2143  086C  F1          	pop	af
2144  086D  33          	inc	sp
2145  086E  7D          	ld	a,l
2146  086F  32 00 00    	ld	(_v0),a
2147  0872  F5          	push	af
2148  0873  33          	inc	sp
2149  0874  CD 9F 0A    	call	_player_pick_extra
2150  0877  33          	inc	sp
2151  0878  7D          	ld	a,l
2152  0879  32 00 00    	ld	(_v0),a
2153  087C  C9          	ret
2154  087D              	SECTION code_compiler
2155  087D              ;	---------------------------------
2156  087D              ; Function player_check_input
2157  087D              ; ---------------------------------
2158  087D              _player_check_input:
2159  087D  21 00 00    	ld	hl,_dirs
2160  0880  CB 56       	bit	2,(hl)
2161  0882  28 06       	jr	Z,l_player_check_input_00102
2162  0884  CB 5E       	bit	3,(hl)
2163  0886  28 02       	jr	Z,l_player_check_input_00102
2164  0888  36 00       	ld	(hl),0x00
2165  088A              l_player_check_input_00102:
2166  088A  21 00 00    	ld	hl,_dirs
2167  088D  CB 56       	bit	2,(hl)
2168  088F  20 08       	jr	NZ,l_player_check_input_00104
2169  0891  CB 5E       	bit	3,(hl)
2170  0893  20 04       	jr	NZ,l_player_check_input_00104
2171  0895  CB 7E       	bit	7, (hl)
2172  0897  28 04       	jr	Z,l_player_check_input_00105
2173  0899              l_player_check_input_00104:
2174  0899  2E 01       	ld	l,0x01
2175  089B  18 02       	jr	l_player_check_input_00108
2176  089D              l_player_check_input_00105:
2177  089D  2E 00       	ld	l,0x00
2178  089F              l_player_check_input_00108:
2179  089F  C9          	ret
2180  08A0              	SECTION code_compiler
2181  08A0              ;	---------------------------------
2182  08A0              ; Function player_tile
2183  08A0              ; ---------------------------------
2184  08A0              _player_tile:
2185  08A0  CD 00 00    	call	___sdcc_enter_ix
2186  08A3  21 05 00    	ld	hl,0x0005
2187  08A6  39          	add	hl, sp
2188  08A7  EB          	ex	de,hl
2189  08A8  21 04 00    	ld	hl,0x0004
2190  08AB  39          	add	hl, sp
2191  08AC  D5          	push	de
2192  08AD  E5          	push	hl
2193  08AE  CD 00 00    	call	_spr_get_tile_dir
2194  08B1  F1          	pop	af
2195  08B2  F1          	pop	af
2196  08B3  7D          	ld	a,l
2197  08B4  32 08 00    	ld	((_tile + 0x0008)),a
2198  08B7  DD E1       	pop	ix
2199  08B9  C9          	ret
2200  08BA              	SECTION code_compiler
2201  08BA              ;	---------------------------------
2202  08BA              ; Function player_score_add
2203  08BA              ; ---------------------------------
2204  08BA              _player_score_add:
2205  08BA  CD 00 00    	call	___sdcc_enter_ix
2206  08BD  F5          	push	af
2207  08BE  F5          	push	af
2208  08BF  F5          	push	af
2209  08C0  F5          	push	af
2210  08C1  DD 75 F8    	ld	(ix-8),l
2211  08C4  DD 74 F9    	ld	(ix-7),h
2212  08C7  3E 00       	ld	a,0x00
2213  08C9  DD 77 FA    	ld	(ix-6),a
2214  08CC  DD 77 FB    	ld	(ix-5),a
2215  08CF  DD 77 FC    	ld	(ix-4),a
2216  08D2  DD 77 FD    	ld	(ix-3),a
2217  08D5  DD 36 FE 00 	ld	(ix-2),0x00
2218  08D9  DD 36 FF 00 	ld	(ix-1),0x00
2219  08DD  2A 00 00    	ld	hl,(_player_score)
2220  08E0  DD 5E F8    	ld	e,(ix-8)
2221  08E3  DD 56 F9    	ld	d,(ix-7)
2222  08E6  19          	add	hl,de
2223  08E7  22 00 00    	ld	(_player_score),hl
2224  08EA  21 02 00    	ld	hl,_player_score + 2
2225  08ED  7E          	ld	a, (hl)
2226  08EE  DD 8E FA    	adc	a,(ix-6)
2227  08F1  77          	ld	(hl), a
2228  08F2  23          	inc	hl
2229  08F3  7E          	ld	a, (hl)
2230  08F4  DD 8E FB    	adc	a,(ix-5)
2231  08F7  77          	ld	(hl), a
2232  08F8  23          	inc	hl
2233  08F9  7E          	ld	a, (hl)
2234  08FA  DD 8E FC    	adc	a,(ix-4)
2235  08FD  77          	ld	(hl), a
2236  08FE  23          	inc	hl
2237  08FF  7E          	ld	a, (hl)
2238  0900  DD 8E FD    	adc	a,(ix-3)
2239  0903  77          	ld	(hl), a
2240  0904  23          	inc	hl
2241  0905  7E          	ld	a, (hl)
2242  0906  DD 8E FE    	adc	a,(ix-2)
2243  0909  77          	ld	(hl), a
2244  090A  23          	inc	hl
2245  090B  7E          	ld	a, (hl)
2246  090C  DD 8E FF    	adc	a,(ix-1)
2247  090F  77          	ld	(hl), a
2248  0910  2A 00 00    	ld	hl,(_game_score_top)
2249  0913  ED 5B 00 00 	ld	de,(_player_score)
2250  0917  AF          	xor	a,a
2251  0918  ED 52       	sbc	hl,de
2252  091A  2A 02 00    	ld	hl,(_game_score_top + 2)
2253  091D  ED 5B 02 00 	ld	de,(_player_score + 2)
2254  0921  ED 52       	sbc	hl,de
2255  0923  3A 04 00    	ld	a,(_game_score_top + 4)
2256  0926  21 04 00    	ld	hl,_player_score + 4
2257  0929  9E          	sbc	a, (hl)
2258  092A  3A 05 00    	ld	a,(_game_score_top + 5)
2259  092D  21 05 00    	ld	hl,_player_score + 5
2260  0930  9E          	sbc	a, (hl)
2261  0931  3A 06 00    	ld	a,(_game_score_top + 6)
2262  0934  21 06 00    	ld	hl,_player_score + 6
2263  0937  9E          	sbc	a, (hl)
2264  0938  3A 07 00    	ld	a,(_game_score_top + 7)
2265  093B  21 07 00    	ld	hl,_player_score + 7
2266  093E  9E          	sbc	a, (hl)
2267  093F  30 24       	jr	NC,l_player_score_add_00102
2268  0941  2A 00 00    	ld	hl,(_player_score)
2269  0944  22 00 00    	ld	(_game_score_top),hl
2270  0947  2A 02 00    	ld	hl,(_player_score + 2)
2271  094A  22 02 00    	ld	(_game_score_top + 2),hl
2272  094D  3A 04 00    	ld	a,(_player_score + 4)
2273  0950  32 04 00    	ld	(_game_score_top + 4),a
2274  0953  3A 05 00    	ld	a,(_player_score + 5)
2275  0956  32 05 00    	ld	(_game_score_top + 5),a
2276  0959  3A 06 00    	ld	a,(_player_score + 6)
2277  095C  32 06 00    	ld	(_game_score_top + 6),a
2278  095F  3A 07 00    	ld	a,(_player_score + 7)
2279  0962  32 07 00    	ld	(_game_score_top + 7),a
2280  0965              l_player_score_add_00102:
2281  0965  2A 00 00    	ld	hl,(_player_next_extra)
2282  0968  ED 5B 00 00 	ld	de,(_player_score)
2283  096C  AF          	xor	a,a
2284  096D  ED 52       	sbc	hl,de
2285  096F  2A 02 00    	ld	hl,(_player_next_extra + 2)
2286  0972  ED 5B 02 00 	ld	de,(_player_score + 2)
2287  0976  ED 52       	sbc	hl,de
2288  0978  3A 04 00    	ld	a,(_player_next_extra + 4)
2289  097B  21 04 00    	ld	hl,_player_score + 4
2290  097E  9E          	sbc	a, (hl)
2291  097F  3A 05 00    	ld	a,(_player_next_extra + 5)
2292  0982  21 05 00    	ld	hl,_player_score + 5
2293  0985  9E          	sbc	a, (hl)
2294  0986  3A 06 00    	ld	a,(_player_next_extra + 6)
2295  0989  21 06 00    	ld	hl,_player_score + 6
2296  098C  9E          	sbc	a, (hl)
2297  098D  3A 07 00    	ld	a,(_player_next_extra + 7)
2298  0990  21 07 00    	ld	hl,_player_score + 7
2299  0993  9E          	sbc	a, (hl)
2300  0994  30 33       	jr	NC,l_player_score_add_00106
2301  0996  21 00 00    	ld	hl,_player_lives
2302  0999  7E          	ld	a, (hl)
2303  099A  D6 FF       	sub	a,0xff
2304  099C  30 01       	jr	NC,l_player_score_add_00104
2305  099E  34          	inc	(hl)
2306  099F              l_player_score_add_00104:
2307  099F  2A 00 00    	ld	hl,(_player_next_extra)
2308  09A2  11 10 27    	ld	de,0x2710
2309  09A5  19          	add	hl,de
2310  09A6  22 00 00    	ld	(_player_next_extra),hl
2311  09A9  21 02 00    	ld	hl,_player_next_extra + 2
2312  09AC  7E          	ld	a, (hl)
2313  09AD  CE 00       	adc	a,0x00
2314  09AF  77          	ld	(hl), a
2315  09B0  23          	inc	hl
2316  09B1  7E          	ld	a, (hl)
2317  09B2  CE 00       	adc	a,0x00
2318  09B4  77          	ld	(hl), a
2319  09B5  23          	inc	hl
2320  09B6  7E          	ld	a, (hl)
2321  09B7  CE 00       	adc	a,0x00
2322  09B9  77          	ld	(hl), a
2323  09BA  23          	inc	hl
2324  09BB  7E          	ld	a, (hl)
2325  09BC  CE 00       	adc	a,0x00
2326  09BE  77          	ld	(hl), a
2327  09BF  23          	inc	hl
2328  09C0  7E          	ld	a, (hl)
2329  09C1  CE 00       	adc	a,0x00
2330  09C3  77          	ld	(hl), a
2331  09C4  23          	inc	hl
2332  09C5  7E          	ld	a, (hl)
2333  09C6  CE 00       	adc	a,0x00
2334  09C8  77          	ld	(hl), a
2335  09C9              l_player_score_add_00106:
2336  09C9  3E 40       	ld	a,0x40
2337  09CB  21 00 00    	ld	hl,_player_score
2338  09CE  BE          	cp	a, (hl)
2339  09CF  3E 42       	ld	a,0x42
2340  09D1  23          	inc	hl
2341  09D2  9E          	sbc	a, (hl)
2342  09D3  3E 0F       	ld	a,0x0f
2343  09D5  23          	inc	hl
2344  09D6  9E          	sbc	a, (hl)
2345  09D7  3E 00       	ld	a,0x00
2346  09D9  23          	inc	hl
2347  09DA  9E          	sbc	a, (hl)
2348  09DB  3E 00       	ld	a,0x00
2349  09DD  23          	inc	hl
2350  09DE  9E          	sbc	a, (hl)
2351  09DF  3E 00       	ld	a,0x00
2352  09E1  23          	inc	hl
2353  09E2  9E          	sbc	a, (hl)
2354  09E3  3E 00       	ld	a,0x00
2355  09E5  23          	inc	hl
2356  09E6  9E          	sbc	a, (hl)
2357  09E7  3E 00       	ld	a,0x00
2358  09E9  23          	inc	hl
2359  09EA  9E          	sbc	a, (hl)
2360  09EB  30 2B       	jr	NC,l_player_score_add_00108
2361  09ED  21 00 00    	ld	hl,0x0000
2362  09F0  7D          	ld	a,l
2363  09F1  22 00 00    	ld	(_player_score),hl
2364  09F4  22 02 00    	ld	(_player_score + 2),hl
2365  09F7  21 04 00    	ld	hl,_player_score + 4
2366  09FA  77          	ld	(hl), a
2367  09FB  23          	inc	hl
2368  09FC  77          	ld	(hl), a
2369  09FD  23          	inc	hl
2370  09FE  77          	ld	(hl), a
2371  09FF  23          	inc	hl
2372  0A00  77          	ld	(hl), a
2373  0A01  21 10 27    	ld	hl,0x2710
2374  0A04  22 00 00    	ld	(_player_next_extra),hl
2375  0A07  AF          	xor	a,a
2376  0A08  6F          	ld	l,a
2377  0A09  67          	ld	h,a
2378  0A0A  22 02 00    	ld	(_player_next_extra + 2),hl
2379  0A0D  21 04 00    	ld	hl,_player_next_extra + 4
2380  0A10  77          	ld	(hl), a
2381  0A11  23          	inc	hl
2382  0A12  77          	ld	(hl), a
2383  0A13  23          	inc	hl
2384  0A14  AF          	xor	a, a
2385  0A15  77          	ld	(hl), a
2386  0A16  23          	inc	hl
2387  0A17  77          	ld	(hl), a
2388  0A18              l_player_score_add_00108:
2389  0A18  CD 00 00    	call	_game_print_score
2390  0A1B  DD F9       	ld	sp, ix
2391  0A1D  DD E1       	pop	ix
2392  0A1F  C9          	ret
2393  0A20              	SECTION code_compiler
2394  0A20              ;	---------------------------------
2395  0A20              ; Function player_pick_item
2396  0A20              ; ---------------------------------
2397  0A20              _player_pick_item:
2398  0A20  CD 00 00    	call	___sdcc_enter_ix
2399  0A23  DD 7E 04    	ld	a,(ix+4)
2400  0A26  D6 08       	sub	a,0x08
2401  0A28  20 38       	jr	NZ,l_player_pick_item_00104
2402  0A2A  21 64 00    	ld	hl,0x0064
2403  0A2D  CD BA 08    	call	_player_score_add
2404  0A30  3E 00       	ld	a, +((_scr_map) & 0xFF)
2405  0A32  DD 86 05    	add	a,(ix+5)
2406  0A35  4F          	ld	c, a
2407  0A36  3E 00       	ld	a, +((_scr_map) / 256)
2408  0A38  DD 8E 06    	adc	a,(ix+6)
2409  0A3B  47          	ld	b, a
2410  0A3C  AF          	xor	a, a
2411  0A3D  02          	ld	(bc), a
2412  0A3E  21 00 00    	ld	hl,_player_coins
2413  0A41  34          	inc	(hl)
2414  0A42  CD 00 00    	call	_audio_coin
2415  0A45  3A 00 00    	ld	a,(_obj_count)
2416  0A48  21 00 00    	ld	hl,_player_coins
2417  0A4B  96          	sub	a, (hl)
2418  0A4C  20 10       	jr	NZ,l_player_pick_item_00102
2419  0A4E  CD 00 00    	call	_audio_door_open
2420  0A51  3E 80       	ld	a,0x80
2421  0A53  F5          	push	af
2422  0A54  33          	inc	sp
2423  0A55  CD 00 00    	call	_game_flash_exit
2424  0A58  33          	inc	sp
2425  0A59  21 00 00    	ld	hl,_obj_count
2426  0A5C  36 FF       	ld	(hl),0xff
2427  0A5E              l_player_pick_item_00102:
2428  0A5E  2E 00       	ld	l,0x00
2429  0A60  18 03       	jr	l_player_pick_item_00105
2430  0A62              l_player_pick_item_00104:
2431  0A62  DD 6E 04    	ld	l,(ix+4)
2432  0A65              l_player_pick_item_00105:
2433  0A65  DD E1       	pop	ix
2434  0A67  C9          	ret
2435  0A68              	SECTION code_compiler
2436  0A68              ;	---------------------------------
2437  0A68              ; Function player_pick_deadly
2438  0A68              ; ---------------------------------
2439  0A68              _player_pick_deadly:
2440  0A68  CD 00 00    	call	___sdcc_enter_ix
2441  0A6B  3E 00       	ld	a, +((_tile_class) & 0xFF)
2442  0A6D  DD 86 04    	add	a,(ix+4)
2443  0A70  4F          	ld	c, a
2444  0A71  3E 00       	ld	a, +((_tile_class) / 256)
2445  0A73  CE 00       	adc	a,0x00
2446  0A75  47          	ld	b, a
2447  0A76  0A          	ld	a, (bc)
2448  0A77  DD 77 04    	ld	(ix+4),a
2449  0A7A  D6 05       	sub	a,0x05
2450  0A7C  20 1B       	jr	NZ,l_player_pick_deadly_00102
2451  0A7E  01 08 00    	ld	bc,_state+8
2452  0A81  0A          	ld	a, (bc)
2453  0A82  F6 20       	or	a,0x20
2454  0A84  02          	ld	(bc), a
2455  0A85  2A 00 00    	ld	hl,(_index1)
2456  0A88  22 00 00    	ld	(_player_kill_index),hl
2457  0A8B  21 00 00    	ld	hl,_v0
2458  0A8E  36 00       	ld	(hl),0x00
2459  0A90  21 00 00    	ld	hl,_v1
2460  0A93  36 00       	ld	(hl),0x00
2461  0A95  2E 00       	ld	l,0x00
2462  0A97  18 03       	jr	l_player_pick_deadly_00103
2463  0A99              l_player_pick_deadly_00102:
2464  0A99  DD 6E 04    	ld	l,(ix+4)
2465  0A9C              l_player_pick_deadly_00103:
2466  0A9C  DD E1       	pop	ix
2467  0A9E  C9          	ret
2468  0A9F              	SECTION code_compiler
2469  0A9F              ;	---------------------------------
2470  0A9F              ; Function player_pick_extra
2471  0A9F              ; ---------------------------------
2472  0A9F              _player_pick_extra:
2473  0A9F  CD 00 00    	call	___sdcc_enter_ix
2474  0AA2  DD 7E 04    	ld	a,(ix+4)
2475  0AA5  D6 06       	sub	a,0x06
2476  0AA7  C2 AE 0B    	jp	NZ,l_player_pick_extra_00118
2477  0AAA  3A 00 00    	ld	a,(_scr_curr)
2478  0AAD  D6 27       	sub	a,0x27
2479  0AAF  20 76       	jr	NZ,l_player_pick_extra_00108
2480  0AB1  01 00 00    	ld	bc,_scr_map
2481  0AB4  2A 00 00    	ld	hl,(_index1)
2482  0AB7  09          	add	hl,bc
2483  0AB8  AF          	xor	a,a
2484  0AB9  77          	ld	(hl),a
2485  0ABA  CD 00 00    	call	_game_cell_paint_index
2486  0ABD  21 00 00    	ld	hl,_v0
2487  0AC0  36 00       	ld	(hl),0x00
2488  0AC2  21 69 01    	ld	hl,0x0169
2489  0AC5  22 00 00    	ld	(_index1),hl
2490  0AC8              l_player_pick_extra_00101:
2491  0AC8  3A 00 00    	ld	a,(_v0)
2492  0ACB  D6 0E       	sub	a,0x0e
2493  0ACD  30 20       	jr	NC,l_player_pick_extra_00103
2494  0ACF  01 00 00    	ld	bc,_scr_map
2495  0AD2  2A 00 00    	ld	hl,(_index1)
2496  0AD5  09          	add	hl,bc
2497  0AD6  AF          	xor	a,a
2498  0AD7  77          	ld	(hl),a
2499  0AD8  CD 00 00    	call	_game_cell_paint_index
2500  0ADB  21 19 00    	ld	hl,0x0019
2501  0ADE  CD 00 00    	call	_z80_delay_ms_fastcall
2502  0AE1  21 00 00    	ld	hl,_index1
2503  0AE4  34          	inc	(hl)
2504  0AE5  20 02       	jr	NZ,l_player_pick_extra_00161
2505  0AE7  23          	inc	hl
2506  0AE8  34          	inc	(hl)
2507  0AE9              l_player_pick_extra_00161:
2508  0AE9  21 00 00    	ld	hl,_v0
2509  0AEC  34          	inc	(hl)
2510  0AED  18 D9       	jr	l_player_pick_extra_00101
2511  0AEF              l_player_pick_extra_00103:
2512  0AEF  21 01 00    	ld	hl, +(_spr_kind + 0x0001)
2513  0AF2  36 07       	ld	(hl),0x07
2514  0AF4  21 01 00    	ld	hl, +(_spr_speed + 0x0001)
2515  0AF7  36 04       	ld	(hl),0x04
2516  0AF9  21 00 00    	ld	hl,_v0
2517  0AFC  36 00       	ld	(hl),0x00
2518  0AFE  21 D9 00    	ld	hl,0x00d9
2519  0B01  22 00 00    	ld	(_index1),hl
2520  0B04              l_player_pick_extra_00104:
2521  0B04  3A 00 00    	ld	a,(_v0)
2522  0B07  D6 04       	sub	a,0x04
2523  0B09  30 1C       	jr	NC,l_player_pick_extra_00108
2524  0B0B  01 00 00    	ld	bc,_scr_map
2525  0B0E  2A 00 00    	ld	hl,(_index1)
2526  0B11  09          	add	hl,bc
2527  0B12  AF          	xor	a,a
2528  0B13  77          	ld	(hl),a
2529  0B14  CD 00 00    	call	_game_cell_paint_index
2530  0B17  2A 00 00    	ld	hl,(_index1)
2531  0B1A  11 20 00    	ld	de,0x0020
2532  0B1D  19          	add	hl,de
2533  0B1E  22 00 00    	ld	(_index1),hl
2534  0B21  21 00 00    	ld	hl,_v0
2535  0B24  34          	inc	(hl)
2536  0B25  18 DD       	jr	l_player_pick_extra_00104
2537  0B27              l_player_pick_extra_00108:
2538  0B27  3A 00 00    	ld	a,(_scr_curr)
2539  0B2A  FE 07       	cp	a,0x07
2540  0B2C  28 04       	jr	Z,l_player_pick_extra_00114
2541  0B2E  D6 0B       	sub	a,0x0b
2542  0B30  20 78       	jr	NZ,l_player_pick_extra_00115
2543  0B32              l_player_pick_extra_00114:
2544  0B32  01 00 00    	ld	bc,_scr_map
2545  0B35  2A 00 00    	ld	hl,(_index1)
2546  0B38  09          	add	hl,bc
2547  0B39  36 08       	ld	(hl),0x08
2548  0B3B  CD 00 00    	call	_game_cell_paint_index
2549  0B3E  21 00 00    	ld	hl,_index1
2550  0B41  7E          	ld	a, (hl)
2551  0B42  D6 05       	sub	a,0x05
2552  0B44  23          	inc	hl
2553  0B45  B6          	or	a, (hl)
2554  0B46  28 0A       	jr	Z,l_player_pick_extra_00109
2555  0B48  21 00 00    	ld	hl,_index1
2556  0B4B  7E          	ld	a, (hl)
2557  0B4C  D6 06       	sub	a,0x06
2558  0B4E  23          	inc	hl
2559  0B4F  B6          	or	a, (hl)
2560  0B50  20 21       	jr	NZ,l_player_pick_extra_00110
2561  0B52              l_player_pick_extra_00109:
2562  0B52  21 71 01    	ld	hl,0x0171
2563  0B55  22 00 00    	ld	(_index1),hl
2564  0B58  21 71 01    	ld	hl, +(_scr_map + 0x0171)
2565  0B5B  36 00       	ld	(hl),0x00
2566  0B5D  CD 00 00    	call	_game_cell_paint_index
2567  0B60  21 91 01    	ld	hl,0x0191
2568  0B63  22 00 00    	ld	(_index1),hl
2569  0B66  21 91 01    	ld	hl, +(_scr_map + 0x0191)
2570  0B69  36 00       	ld	(hl),0x00
2571  0B6B  CD 00 00    	call	_game_cell_paint_index
2572  0B6E  21 02 00    	ld	hl, +(_value_b + 0x0002)
2573  0B71  36 12       	ld	(hl),0x12
2574  0B73              l_player_pick_extra_00110:
2575  0B73  21 00 00    	ld	hl,_index1
2576  0B76  7E          	ld	a, (hl)
2577  0B77  D6 12       	sub	a,0x12
2578  0B79  23          	inc	hl
2579  0B7A  B6          	or	a, (hl)
2580  0B7B  20 2D       	jr	NZ,l_player_pick_extra_00115
2581  0B7D  01 00 00    	ld	bc,_tile+0
2582  0B80  0A          	ld	a, (bc)
2583  0B81  C6 02       	add	a,0x02
2584  0B83  02          	ld	(bc), a
2585  0B84  21 00 00    	ld	hl,_spr_kind
2586  0B87  36 07       	ld	(hl),0x07
2587  0B89  21 00 00    	ld	hl,_spr_speed
2588  0B8C  36 04       	ld	(hl),0x04
2589  0B8E  21 4F 00    	ld	hl,0x004f
2590  0B91  22 00 00    	ld	(_index1),hl
2591  0B94  21 4F 00    	ld	hl, +(_scr_map + 0x004f)
2592  0B97  36 00       	ld	(hl),0x00
2593  0B99  CD 00 00    	call	_game_cell_paint_index
2594  0B9C  21 50 00    	ld	hl,0x0050
2595  0B9F  22 00 00    	ld	(_index1),hl
2596  0BA2  21 50 00    	ld	hl, +(_scr_map + 0x0050)
2597  0BA5  36 00       	ld	(hl),0x00
2598  0BA7  CD 00 00    	call	_game_cell_paint_index
2599  0BAA              l_player_pick_extra_00115:
2600  0BAA  2E 00       	ld	l,0x00
2601  0BAC  18 03       	jr	l_player_pick_extra_00119
2602  0BAE              l_player_pick_extra_00118:
2603  0BAE  DD 6E 04    	ld	l,(ix+4)
2604  0BB1              l_player_pick_extra_00119:
2605  0BB1  DD E1       	pop	ix
2606  0BB3  C9          	ret
2607  0BB4              	SECTION code_compiler
2608  0BB4              ;	---------------------------------
2609  0BB4              ; Function player_check_ceil
2610  0BB4              ; ---------------------------------
2611  0BB4              _player_check_ceil:
2612  0BB4  CD 00 00    	call	___sdcc_enter_ix
2613  0BB7  DD 66 05    	ld	h,(ix+5)
2614  0BBA  DD 6E 04    	ld	l,(ix+4)
2615  0BBD  E5          	push	hl
2616  0BBE  CD 00 00    	call	_spr_calc_index
2617  0BC1  F1          	pop	af
2618  0BC2  22 00 00    	ld	(_index1),hl
2619  0BC5  01 00 00    	ld	bc,_scr_map
2620  0BC8  09          	add	hl,bc
2621  0BC9  7E          	ld	a,(hl)
2622  0BCA  32 00 00    	ld	(_v0),a
2623  0BCD  DD 46 05    	ld	b,(ix+5)
2624  0BD0  04          	inc	b
2625  0BD1  DD 4E 04    	ld	c,(ix+4)
2626  0BD4  C5          	push	bc
2627  0BD5  CD 00 00    	call	_spr_calc_index
2628  0BD8  F1          	pop	af
2629  0BD9  22 00 00    	ld	(_index1),hl
2630  0BDC  01 00 00    	ld	bc,_scr_map
2631  0BDF  09          	add	hl,bc
2632  0BE0  7E          	ld	a,(hl)
2633  0BE1  32 00 00    	ld	(_v1),a
2634  0BE4  3E 1F       	ld	a,0x1f
2635  0BE6  21 00 00    	ld	hl,_v0
2636  0BE9  96          	sub	a, (hl)
2637  0BEA  30 02       	jr	NC,l_player_check_ceil_00102
2638  0BEC  36 00       	ld	(hl),0x00
2639  0BEE              l_player_check_ceil_00102:
2640  0BEE  3E 1F       	ld	a,0x1f
2641  0BF0  21 00 00    	ld	hl,_v1
2642  0BF3  96          	sub	a, (hl)
2643  0BF4  30 02       	jr	NC,l_player_check_ceil_00104
2644  0BF6  36 00       	ld	(hl),0x00
2645  0BF8              l_player_check_ceil_00104:
2646  0BF8  01 00 00    	ld	bc,_tile_class+0
2647  0BFB  79          	ld	a, c
2648  0BFC  21 00 00    	ld	hl,_v0
2649  0BFF  86          	add	a, (hl)
2650  0C00  5F          	ld	e, a
2651  0C01  78          	ld	a, b
2652  0C02  CE 00       	adc	a,0x00
2653  0C04  57          	ld	d, a
2654  0C05  1A          	ld	a, (de)
2655  0C06  77          	ld	(hl), a
2656  0C07  79          	ld	a, c
2657  0C08  21 00 00    	ld	hl,_v1
2658  0C0B  86          	add	a, (hl)
2659  0C0C  4F          	ld	c, a
2660  0C0D  78          	ld	a, b
2661  0C0E  CE 00       	adc	a,0x00
2662  0C10  47          	ld	b, a
2663  0C11  0A          	ld	a, (bc)
2664  0C12  77          	ld	(hl), a
2665  0C13  3A 00 00    	ld	a,(_v0)
2666  0C16  D6 03       	sub	a,0x03
2667  0C18  28 0B       	jr	Z,l_player_check_ceil_00106
2668  0C1A  3A 00 00    	ld	a,(_v1)
2669  0C1D  D6 03       	sub	a,0x03
2670  0C1F  28 04       	jr	Z,l_player_check_ceil_00106
2671  0C21  2E 01       	ld	l,0x01
2672  0C23  18 02       	jr	l_player_check_ceil_00108
2673  0C25              l_player_check_ceil_00106:
2674  0C25  2E 00       	ld	l,0x00
2675  0C27              l_player_check_ceil_00108:
2676  0C27  DD E1       	pop	ix
2677  0C29  C9          	ret
2678  0C2A              	SECTION code_compiler
2679  0C2A              ;	---------------------------------
2680  0C2A              ; Function player_crumble
2681  0C2A              ; ---------------------------------
2682  0C2A              _player_crumble:
2683  0C2A  21 01 00    	ld	hl,_index1 + 1
2684  0C2D  7E          	ld	a, (hl)
2685  0C2E  D6 02       	sub	a,0x02
2686  0C30  D2 B6 0C    	jp	NC, l_player_crumble_00111
2687  0C33  3E 00       	ld	a, +((_scr_map) & 0xFF)
2688  0C35  2B          	dec	hl
2689  0C36  86          	add	a, (hl)
2690  0C37  4F          	ld	c, a
2691  0C38  3E 00       	ld	a, +((_scr_map) / 256)
2692  0C3A  23          	inc	hl
2693  0C3B  8E          	adc	a, (hl)
2694  0C3C  47          	ld	b, a
2695  0C3D  0A          	ld	a, (bc)
2696  0C3E  5F          	ld	e, a
2697  0C3F  16 00       	ld	d,0x00
2698  0C41  21 00 00    	ld	hl,_tile_class
2699  0C44  19          	add	hl, de
2700  0C45  7E          	ld	a, (hl)
2701  0C46  32 00 00    	ld	(_v0),a
2702  0C49  D6 02       	sub	a,0x02
2703  0C4B  20 63       	jr	NZ,l_player_crumble_00107
2704  0C4D  7B          	ld	a, e
2705  0C4E  D6 02       	sub	a,0x02
2706  0C50  20 10       	jr	NZ,l_player_crumble_00104
2707  0C52  CD 00 00    	call	_audio_crumble
2708  0C55  01 00 00    	ld	bc,_scr_map
2709  0C58  2A 00 00    	ld	hl,(_index1)
2710  0C5B  09          	add	hl,bc
2711  0C5C  3A 00 00    	ld	a,(_game_crumb_start)
2712  0C5F  77          	ld	(hl),a
2713  0C60  18 13       	jr	l_player_crumble_00105
2714  0C62              l_player_crumble_00104:
2715  0C62  1C          	inc	e
2716  0C63  7B          	ld	a, e
2717  0C64  02          	ld	(bc), a
2718  0C65  01 00 00    	ld	bc,_scr_map
2719  0C68  2A 00 00    	ld	hl,(_index1)
2720  0C6B  09          	add	hl,bc
2721  0C6C  5E          	ld	e,(hl)
2722  0C6D  3A 00 00    	ld	a,(_game_crumb_end)
2723  0C70  93          	sub	a,e
2724  0C71  30 02       	jr	NC,l_player_crumble_00105
2725  0C73  AF          	xor	a,a
2726  0C74  77          	ld	(hl),a
2727  0C75              l_player_crumble_00105:
2728  0C75  2A 08 00    	ld	hl,(_lin + 0x0008)
2729  0C78  26 00       	ld	h,0x00
2730  0C7A  01 10 00    	ld	bc,0x0010
2731  0C7D  09          	add	hl,bc
2732  0C7E  06 03       	ld	b,0x03
2733  0C80              l_player_crumble_00133:
2734  0C80  CB 2C       	sra	h
2735  0C82  CB 1D       	rr	l
2736  0C84  10 FA       	djnz	l_player_crumble_00133
2737  0C86  2C          	inc	l
2738  0C87  7D          	ld	a, l
2739  0C88  07          	rlca
2740  0C89  07          	rlca
2741  0C8A  07          	rlca
2742  0C8B  E6 F8       	and	a,0xf8
2743  0C8D  32 00 00    	ld	(_s_row1),a
2744  0C90  01 00 00    	ld	bc,_scr_map
2745  0C93  2A 00 00    	ld	hl,(_index1)
2746  0C96  09          	add	hl,bc
2747  0C97  46          	ld	b, (hl)
2748  0C98  3A 00 00    	ld	a,(_s_col1)
2749  0C9B  F5          	push	af
2750  0C9C  33          	inc	sp
2751  0C9D  3A 00 00    	ld	a,(_s_row1)
2752  0CA0  48          	ld	c,b
2753  0CA1  47          	ld	b,a
2754  0CA2  C5          	push	bc
2755  0CA3  CD 00 00    	call	_spr_draw8
2756  0CA6  F1          	pop	af
2757  0CA7  33          	inc	sp
2758  0CA8  2A 00 00    	ld	hl,(_curr_time)
2759  0CAB  22 10 00    	ld	(_last_time_b + 0x0010),hl
2760  0CAE  18 06       	jr	l_player_crumble_00111
2761  0CB0              l_player_crumble_00107:
2762  0CB0  21 00 00    	ld	hl,0x0000
2763  0CB3  22 10 00    	ld	(_last_time_b + 0x0010),hl
2764  0CB6              l_player_crumble_00111:
2765  0CB6  C9          	ret
2766  0CB7              	SECTION code_compiler
2767  0CB7              ;	---------------------------------
2768  0CB7              ; Function player_check_floor
2769  0CB7              ; ---------------------------------
2770  0CB7              _player_check_floor:
2771  0CB7  CD 00 00    	call	___sdcc_enter_ix
2772  0CBA  3A 08 00    	ld	a,(_col + 0x0008)
2773  0CBD  DD 86 04    	add	a,(ix+4)
2774  0CC0  57          	ld	d, a
2775  0CC1  3A 08 00    	ld	a,(_lin + 0x0008)
2776  0CC4  C6 10       	add	a,0x10
2777  0CC6  5F          	ld	e, a
2778  0CC7  D5          	push	de
2779  0CC8  CD 00 00    	call	_spr_calc_index
2780  0CCB  F1          	pop	af
2781  0CCC  22 00 00    	ld	(_index1),hl
2782  0CCF  21 01 00    	ld	hl,_index1 + 1
2783  0CD2  7E          	ld	a, (hl)
2784  0CD3  D6 02       	sub	a,0x02
2785  0CD5  30 25       	jr	NC,l_player_check_floor_00107
2786  0CD7  3E 00       	ld	a, +((_scr_map) & 0xFF)
2787  0CD9  2B          	dec	hl
2788  0CDA  86          	add	a, (hl)
2789  0CDB  4F          	ld	c, a
2790  0CDC  3E 00       	ld	a, +((_scr_map) / 256)
2791  0CDE  23          	inc	hl
2792  0CDF  8E          	adc	a, (hl)
2793  0CE0  47          	ld	b, a
2794  0CE1  0A          	ld	a, (bc)
2795  0CE2  21 00 00    	ld	hl,_v0
2796  0CE5  77          	ld	(hl), a
2797  0CE6  3E 1F       	ld	a,0x1f
2798  0CE8  96          	sub	a, (hl)
2799  0CE9  30 02       	jr	NC,l_player_check_floor_00102
2800  0CEB  36 00       	ld	(hl),0x00
2801  0CED              l_player_check_floor_00102:
2802  0CED  2A 00 00    	ld	hl,(_v0)
2803  0CF0  26 00       	ld	h,0x00
2804  0CF2  01 00 00    	ld	bc,_tile_class
2805  0CF5  09          	add	hl,bc
2806  0CF6  7E          	ld	a,(hl)
2807  0CF7  32 00 00    	ld	(_v0),a
2808  0CFA  18 15       	jr	l_player_check_floor_00108
2809  0CFC              l_player_check_floor_00107:
2810  0CFC  21 08 00    	ld	hl,+(_lin + 0x0008)
2811  0CFF  4E          	ld	c, (hl)
2812  0D00  3E C8       	ld	a,0xc8
2813  0D02  91          	sub	a, c
2814  0D03  30 07       	jr	NC,l_player_check_floor_00104
2815  0D05  21 00 00    	ld	hl,_v0
2816  0D08  36 00       	ld	(hl),0x00
2817  0D0A  18 05       	jr	l_player_check_floor_00108
2818  0D0C              l_player_check_floor_00104:
2819  0D0C  21 00 00    	ld	hl,_v0
2820  0D0F  36 03       	ld	(hl),0x03
2821  0D11              l_player_check_floor_00108:
2822  0D11  3A 00 00    	ld	a,(_v0)
2823  0D14  B7          	or	a, a
2824  0D15  28 0B       	jr	Z,l_player_check_floor_00109
2825  0D17  D6 08       	sub	a,0x08
2826  0D19  28 07       	jr	Z,l_player_check_floor_00109
2827  0D1B  3A 00 00    	ld	a,(_v0)
2828  0D1E  D6 05       	sub	a,0x05
2829  0D20  20 04       	jr	NZ,l_player_check_floor_00110
2830  0D22              l_player_check_floor_00109:
2831  0D22  2E 01       	ld	l,0x01
2832  0D24  18 02       	jr	l_player_check_floor_00113
2833  0D26              l_player_check_floor_00110:
2834  0D26  2E 00       	ld	l,0x00
2835  0D28              l_player_check_floor_00113:
2836  0D28  DD E1       	pop	ix
2837  0D2A  C9          	ret
2838  0D2B              	SECTION code_compiler
2839  0D2B              ;	---------------------------------
2840  0D2B              ; Function player_get_floor
2841  0D2B              ; ---------------------------------
2842  0D2B              _player_get_floor:
2843  0D2B  21 08 00    	ld	hl,+(_lin + 0x0008)
2844  0D2E  4E          	ld	c, (hl)
2845  0D2F  59          	ld	e, c
2846  0D30  16 00       	ld	d,0x00
2847  0D32  21 10 00    	ld	hl,0x0010
2848  0D35  19          	add	hl, de
2849  0D36  3E 80       	ld	a,0x80
2850  0D38  BD          	cp	a, l
2851  0D39  3E 00       	ld	a,0x00
2852  0D3B  9C          	sbc	a, h
2853  0D3C  E2 41 0D    	jp	PO, l_player_get_floor_00181
2854  0D3F  EE 80       	xor	a,0x80
2855  0D41              l_player_get_floor_00181:
2856  0D41  F2 4B 0D    	jp	P, l_player_get_floor_00102
2857  0D44  21 00 00    	ld	hl,_v0
2858  0D47  36 80       	ld	(hl),0x80
2859  0D49  18 06       	jr	l_player_get_floor_00103
2860  0D4B              l_player_get_floor_00102:
2861  0D4B  79          	ld	a, c
2862  0D4C  C6 18       	add	a,0x18
2863  0D4E  32 00 00    	ld	(_v0),a
2864  0D51              l_player_get_floor_00103:
2865  0D51  21 08 00    	ld	hl,+(_col + 0x0008)
2866  0D54  46          	ld	b, (hl)
2867  0D55  3A 00 00    	ld	a,(_v0)
2868  0D58  4F          	ld	c,a
2869  0D59  C5          	push	bc
2870  0D5A  CD 00 00    	call	_spr_calc_index
2871  0D5D  F1          	pop	af
2872  0D5E  22 00 00    	ld	(_index1),hl
2873  0D61  21 00 00    	ld	hl,_i
2874  0D64  36 00       	ld	(hl),0x00
2875  0D66              l_player_get_floor_00112:
2876  0D66  3A 00 00    	ld	a,(_i)
2877  0D69  D6 10       	sub	a,0x10
2878  0D6B  D2 1E 0E    	jp	NC, l_player_get_floor_00114
2879  0D6E  01 00 00    	ld	bc,_scr_map
2880  0D71  2A 00 00    	ld	hl,(_index1)
2881  0D74  09          	add	hl,bc
2882  0D75  7E          	ld	a,(hl)
2883  0D76  32 00 00    	ld	(_v0),a
2884  0D79  ED 4B 00 00 	ld	bc,(_index1)
2885  0D7D  03          	inc	bc
2886  0D7E  21 00 00    	ld	hl,_scr_map
2887  0D81  09          	add	hl, bc
2888  0D82  7E          	ld	a, (hl)
2889  0D83  32 00 00    	ld	(_v1),a
2890  0D86  3E 1F       	ld	a,0x1f
2891  0D88  21 00 00    	ld	hl,_v0
2892  0D8B  96          	sub	a, (hl)
2893  0D8C  30 02       	jr	NC,l_player_get_floor_00105
2894  0D8E  36 00       	ld	(hl),0x00
2895  0D90              l_player_get_floor_00105:
2896  0D90  3E 1F       	ld	a,0x1f
2897  0D92  21 00 00    	ld	hl,_v1
2898  0D95  96          	sub	a, (hl)
2899  0D96  30 02       	jr	NC,l_player_get_floor_00107
2900  0D98  36 00       	ld	(hl),0x00
2901  0D9A              l_player_get_floor_00107:
2902  0D9A  2A 00 00    	ld	hl,(_v0)
2903  0D9D  26 00       	ld	h,0x00
2904  0D9F  01 00 00    	ld	bc,_tile_class
2905  0DA2  09          	add	hl,bc
2906  0DA3  7E          	ld	a,(hl)
2907  0DA4  32 00 00    	ld	(_v0),a
2908  0DA7  2A 00 00    	ld	hl,(_v1)
2909  0DAA  26 00       	ld	h,0x00
2910  0DAC  01 00 00    	ld	bc,_tile_class
2911  0DAF  09          	add	hl,bc
2912  0DB0  7E          	ld	a,(hl)
2913  0DB1  32 00 00    	ld	(_v1),a
2914  0DB4  3A 00 00    	ld	a,(_v0)
2915  0DB7  B7          	or	a,a
2916  0DB8  28 0F       	jr	Z,l_player_get_floor_00118
2917  0DBA  D6 08       	sub	a,0x08
2918  0DBC  28 0B       	jr	Z,l_player_get_floor_00118
2919  0DBE  3A 00 00    	ld	a,(_v0)
2920  0DC1  D6 05       	sub	a,0x05
2921  0DC3  28 04       	jr	Z,l_player_get_floor_00118
2922  0DC5  0E 00       	ld	c,0x00
2923  0DC7  18 02       	jr	l_player_get_floor_00119
2924  0DC9              l_player_get_floor_00118:
2925  0DC9  0E 01       	ld	c,0x01
2926  0DCB              l_player_get_floor_00119:
2927  0DCB  21 00 00    	ld	hl,_v0
2928  0DCE  71          	ld	(hl), c
2929  0DCF  3A 00 00    	ld	a,(_v1)
2930  0DD2  B7          	or	a, a
2931  0DD3  28 0F       	jr	Z,l_player_get_floor_00124
2932  0DD5  D6 08       	sub	a,0x08
2933  0DD7  28 0B       	jr	Z,l_player_get_floor_00124
2934  0DD9  3A 00 00    	ld	a,(_v1)
2935  0DDC  D6 05       	sub	a,0x05
2936  0DDE  28 04       	jr	Z,l_player_get_floor_00124
2937  0DE0  0E 00       	ld	c,0x00
2938  0DE2  18 02       	jr	l_player_get_floor_00125
2939  0DE4              l_player_get_floor_00124:
2940  0DE4  0E 01       	ld	c,0x01
2941  0DE6              l_player_get_floor_00125:
2942  0DE6  21 00 00    	ld	hl,_v1
2943  0DE9  71          	ld	(hl), c
2944  0DEA  3A 00 00    	ld	a,(_v0)
2945  0DED  B7          	or	a, a
2946  0DEE  28 17       	jr	Z,l_player_get_floor_00109
2947  0DF0  3A 00 00    	ld	a,(_v1)
2948  0DF3  B7          	or	a, a
2949  0DF4  28 11       	jr	Z,l_player_get_floor_00109
2950  0DF6  2A 00 00    	ld	hl,(_index1)
2951  0DF9  11 20 00    	ld	de,0x0020
2952  0DFC  19          	add	hl,de
2953  0DFD  22 00 00    	ld	(_index1),hl
2954  0E00  21 00 00    	ld	hl,_i
2955  0E03  34          	inc	(hl)
2956  0E04  C3 66 0D    	jp	l_player_get_floor_00112
2957  0E07              l_player_get_floor_00109:
2958  0E07  2A 00 00    	ld	hl,(_index1)
2959  0E0A  4D          	ld	c,l
2960  0E0B  5C          	ld	e,h
2961  0E0C  06 05       	ld	b,0x05
2962  0E0E  79          	ld	a,c
2963  0E0F              l_player_get_floor_00186:
2964  0E0F  CB 3B       	srl	e
2965  0E11  1F          	rra
2966  0E12  10 FB       	djnz	l_player_get_floor_00186
2967  0E14  07          	rlca
2968  0E15  07          	rlca
2969  0E16  07          	rlca
2970  0E17  E6 F8       	and	a,0xf8
2971  0E19  C6 F0       	add	a,0xf0
2972  0E1B  6F          	ld	l, a
2973  0E1C  18 02       	jr	l_player_get_floor_00115
2974  0E1E              l_player_get_floor_00114:
2975  0E1E  2E 70       	ld	l,0x70
2976  0E20              l_player_get_floor_00115:
2977  0E20  C9          	ret
2978  0E21              	SECTION code_compiler
2979  0E21              ;	---------------------------------
2980  0E21              ; Function player_lost_life
2981  0E21              ; ---------------------------------
2982  0E21              _player_lost_life:
2983  0E21  CD 00 00    	call	___sdcc_enter_ix
2984  0E24  3B          	dec	sp
2985  0E25  CD 00 00    	call	_ay_reset
2986  0E28  CD 00 00    	call	_audio_dead
2987  0E2B  5F          	ld	e, a
2988  0E2C              l_player_lost_life_00104:
2989  0E2C  7B          	ld	a, e
2990  0E2D  D6 20       	sub	a,0x20
2991  0E2F  30 75       	jr	NC,l_player_lost_life_00106
2992  0E31  21 00 00    	ld	hl,_player_kill_index
2993  0E34  7E          	ld	a, (hl)
2994  0E35  3C          	inc	a
2995  0E36  20 05       	jr	NZ,l_player_lost_life_00135
2996  0E38  23          	inc	hl
2997  0E39  7E          	ld	a, (hl)
2998  0E3A  3C          	inc	a
2999  0E3B  28 3A       	jr	Z,l_player_lost_life_00102
3000  0E3D              l_player_lost_life_00135:
3001  0E3D  2A 00 00    	ld	hl,(_player_kill_index)
3002  0E40  22 00 00    	ld	(_index1),hl
3003  0E43  21 08 00    	ld	hl,+(_col + 0x0008)
3004  0E46  56          	ld	d, (hl)
3005  0E47  3A 08 00    	ld	a,(_lin + 0x0008)
3006  0E4A  C6 10       	add	a,0x10
3007  0E4C  47          	ld	b, a
3008  0E4D  21 08 00    	ld	hl,+(_tile + 0x0008)
3009  0E50  4E          	ld	c, (hl)
3010  0E51  2A 08 00    	ld	hl,(_colint + 0x0008)
3011  0E54  79          	ld	a, c
3012  0E55  85          	add	a, l
3013  0E56  D5          	push	de
3014  0E57  58          	ld	e,b
3015  0E58  D5          	push	de
3016  0E59  57          	ld	d,a
3017  0E5A  1E 05       	ld	e,0x05
3018  0E5C  D5          	push	de
3019  0E5D  CD 00 00    	call	_NIRVANAP_spriteT_callee
3020  0E60  D1          	pop	de
3021  0E61  76          	halt
3022  0E62  D5          	push	de
3023  0E63  21 00 00    	ld	hl,0x0000
3024  0E66  E5          	push	hl
3025  0E67  2E 05       	ld	l,0x05
3026  0E69  E5          	push	hl
3027  0E6A  CD 00 00    	call	_NIRVANAP_spriteT_callee
3028  0E6D  D1          	pop	de
3029  0E6E  76          	halt
3030  0E6F  D5          	push	de
3031  0E70  CD 00 00    	call	_game_cell_paint_index
3032  0E73  D1          	pop	de
3033  0E74  76          	halt
3034  0E75  18 2C       	jr	l_player_lost_life_00103
3035  0E77              l_player_lost_life_00102:
3036  0E77  21 08 00    	ld	hl,+(_col + 0x0008)
3037  0E7A  46          	ld	b, (hl)
3038  0E7B  3A 08 00    	ld	a,(_lin + 0x0008)
3039  0E7E  C6 10       	add	a,0x10
3040  0E80  57          	ld	d, a
3041  0E81  21 08 00    	ld	hl,+(_tile + 0x0008)
3042  0E84  4E          	ld	c, (hl)
3043  0E85  2A 08 00    	ld	hl,(_colint + 0x0008)
3044  0E88  79          	ld	a, c
3045  0E89  85          	add	a, l
3046  0E8A  D5          	push	de
3047  0E8B  4A          	ld	c, d
3048  0E8C  C5          	push	bc
3049  0E8D  57          	ld	d,a
3050  0E8E  1E 05       	ld	e,0x05
3051  0E90  D5          	push	de
3052  0E91  CD 00 00    	call	_NIRVANAP_spriteT_callee
3053  0E94  D1          	pop	de
3054  0E95  76          	halt
3055  0E96  D5          	push	de
3056  0E97  21 00 00    	ld	hl,0x0000
3057  0E9A  E5          	push	hl
3058  0E9B  2E 05       	ld	l,0x05
3059  0E9D  E5          	push	hl
3060  0E9E  CD 00 00    	call	_NIRVANAP_spriteT_callee
3061  0EA1  D1          	pop	de
3062  0EA2  76          	halt
3063  0EA3              l_player_lost_life_00103:
3064  0EA3  1C          	inc	e
3065  0EA4  18 86       	jr	l_player_lost_life_00104
3066  0EA6              l_player_lost_life_00106:
3067  0EA6  3A 08 00    	ld	a,(_lin + 0x0008)
3068  0EA9  32 00 00    	ld	(_s_lin0),a
3069  0EAC  3A 08 00    	ld	a,(_col + 0x0008)
3070  0EAF  32 00 00    	ld	(_s_col0),a
3071  0EB2  3A 00 00    	ld	a,(_game_inf_lives)
3072  0EB5  B7          	or	a, a
3073  0EB6  20 04       	jr	NZ,l_player_lost_life_00108
3074  0EB8  21 00 00    	ld	hl,_player_lives
3075  0EBB  35          	dec	(hl)
3076  0EBC              l_player_lost_life_00108:
3077  0EBC  3A 00 00    	ld	a,(_player_lives)
3078  0EBF  B7          	or	a, a
3079  0EC0  28 05       	jr	Z,l_player_lost_life_00110
3080  0EC2  CD 00 00    	call	_game_round_init
3081  0EC5  18 0A       	jr	l_player_lost_life_00112
3082  0EC7              l_player_lost_life_00110:
3083  0EC7  21 00 00    	ld	hl,_player_lives
3084  0ECA  36 00       	ld	(hl),0x00
3085  0ECC  21 00 00    	ld	hl,_game_over
3086  0ECF  36 01       	ld	(hl),0x01
3087  0ED1              l_player_lost_life_00112:
3088  0ED1  33          	inc	sp
3089  0ED2  DD E1       	pop	ix
3090  0ED4  C9          	ret
3091  0ED5              	SECTION IGNORE
3092  0000              
